<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="hevea 2.23">
<style type="text/css">
.c000{border-spacing:0;}
.c001{border-spacing:0;width:75%}
.c002{border-spacing:6px;border-collapse:separate;}
.c003{color:#000099}
.c004{color:#218921}
.c005{color:#ED843F}
.c006{color:black}
.c007{color:blue}
.c008{color:fuchsia}
.c009{color:purple}
.c010{font-family:monospace}
.c011{font-size:small}
.c012{font-style:italic}
.c013{font-weight:bold}
.c014{padding:1ex;border-style:solid;}
.c015{text-align:center;border:solid 1px;white-space:nowrap}
.c016{text-align:left;border:solid 1px;white-space:nowrap}
.c017{vertical-align:top;text-align:center;border:solid 1px;white-space:nowrap}
.c018{vertical-align:top;text-align:left;}
.c019{vertical-align:top;text-align:left;border:solid 1px;}
.c020{vertical-align:top;text-align:left;border:solid 1px;white-space:nowrap}
.c021{width:80%;height:2}
.li-itemize{margin:1ex 0ex;}
.li-enumerate{margin:1ex 0ex;}
.dd-description{margin:0ex 0ex 1ex 4ex;}
.dt-description{margin:0ex;}
.toc{list-style:none;}
.footnotetext{margin:0ex; padding:0ex;}
div.footnotetext P{margin:0px; text-indent:1em;}
.thefootnotes{text-align:left;margin:0ex;}
.dt-thefootnotes{margin:0em;}
.dd-thefootnotes{margin:0em 0em 0em 2em;}
.footnoterule{margin:1em auto 1em 0px;width:50%;}
.caption{padding-left:2ex; padding-right:2ex; margin-left:auto; margin-right:auto}
.title{margin:2ex auto;text-align:center}
.titlemain{margin:1ex 2ex 2ex 1ex;}
.titlerest{margin:0ex 2ex;}
.center{text-align:center;margin-left:auto;margin-right:auto;}
.flushleft{text-align:left;margin-left:0ex;margin-right:auto;}
.flushright{text-align:right;margin-left:auto;margin-right:0ex;}
div table{margin-left:inherit;margin-right:inherit;margin-bottom:2px;margin-top:2px}
td table{margin:auto;}
table{border-collapse:collapse;}
td{padding:0;}
.cellpadding0 tr td{padding:0;}
.cellpadding1 tr td{padding:1px;}
pre{text-align:left;margin-left:0ex;margin-right:auto;}
blockquote{margin-left:4ex;margin-right:4ex;text-align:left;}
td p{margin:0px;}
.boxed{border:1px solid black}
.textboxed{border:1px solid black}
.vbar{border:none;width:2px;background-color:black;}
.hbar{border:none;height:2px;width:100%;background-color:black;}
.hfill{border:none;height:1px;width:200%;background-color:black;}
.vdisplay{border-collapse:separate;border-spacing:2px;width:auto; empty-cells:show; border:2px solid red;}
.vdcell{white-space:nowrap;padding:0px; border:2px solid green;}
.display{border-collapse:separate;border-spacing:2px;width:auto; border:none;}
.dcell{white-space:nowrap;padding:0px; border:none;}
.dcenter{margin:0ex auto;}
.vdcenter{border:solid #FF8000 2px; margin:0ex auto;}
.minipage{text-align:left; margin-left:0em; margin-right:auto;}
.marginpar{border:solid thin black; width:20%; text-align:left;}
.marginparleft{float:left; margin-left:0ex; margin-right:1ex;}
.marginparright{float:right; margin-left:1ex; margin-right:0ex;}
.theorem{text-align:left;margin:1ex auto 1ex 0ex;}
.example{border:solid black;padding:1ex;background:#f0ffff;
}
.chapter{padding:1ex;color:navy;border:solid navy;}
.title{text-align:center;margin:1ex auto;color:navy;border:solid navy;}
.titlerest{font-variant:small-caps;}
.section{padding:1ex;color:navy;border:solid navy;}
.subsection{padding:1ex;color:navy;border:solid navy;}
p{padding-left: 3ex; padding-right: 3ex;}
blockquote{border: solid; padding: 1ex; color: navy;}
.cover{float:right}
.about{}
.part{margin:2ex auto;text-align:center}
.lstlisting{font-family:monospace;white-space:pre;margin-right:auto;margin-left:0pt;text-align:left}
</style>
<link rel="stylesheet" type="text/css" href="book.css">
<title>Validating RDF Data
</title>
</head>
<body>
<!--HEVEA command line is: /usr/bin/hevea -fix -O bookHtml.hva bookHtml.tex -->
<!--CUT STYLE book--><!--HTMLHEAD-->
<header>
  <a href="http://book.validatingrdf.com">Validating RDF data</a>
  <img src="cover.jpg"></img>
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-112019120-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-112019120-1');
</script>
</header>     
<!--ENDHTML-->
<!--CUT DEF chapter 1 --><table class="title"><tr><td style="padding:1ex"><h1 class="titlemain">Validating RDF Data</h1><h3 class="titlerest"><a href="https://labra.github.io/">Jose Emilio labra Gayo</a>,
<a href="https://www.w3.org/People/Eric/">Eric Prud’hommeaux</a>,
<a href="http://www.lifl.fr/~boneva/">Iovka Boneva</a>,
<a href="http://kontokostas.com/">Dimitris Kontokostas</a>
</h3></td></tr>
</table>
<!--TOC paragraph id="sec1" About the book-->
<h5 class="paragraph" id="sec1">About the book</h5><!--SEC END --><p>The book is published by <a href="http://www.morganclaypool.com/">Morgan &amp; Claypool</a> in the series <a href="http://www.morganclaypool.com/toc/wbe.1/7/1">Synthesis Lectures on the Semantic Web:
Theory and Technology</a> edited by
<a href="http://info.slis.indiana.edu/~dingying/">Ying Ding</a> and
Paul Groth.
Please, cite the book as:</p><blockquote class="quote">
Jose E. Labra Gayo, Eric Prud’hommeaux, Iovka Boneva, Dimitris Kontokostas (2018)
<span class="c012">Validating RDF Data</span>,
Synthesis Lectures on the Semantic Web: Theory and Technology, Vol. 7, No. 1,
1-328, DOI: <a href="https://doi.org/10.2200/S00786ED1V01Y201707WBE016">10.2200/S00786ED1V01Y201707WBE016</a>, Morgan &amp; Claypool
</blockquote><p>ISBN: 9781681731643 paperback,
ISBN: 9781681731650 ebook,
ISBN: 9781681731667 e-pub</p><p>Copyright © 2018 by Morgan &amp; Claypool. All rights reserved.</p><p><a href="bibtex.txt">Bibtex</a></p><div class="cover">
<img src="cover.jpg">
</div>
<!--TOC paragraph id="sec2" Access Options-->
<h5 class="paragraph" id="sec2">Access Options</h5><!--SEC END --><ul class="itemize"><li class="li-itemize">
<span class="c013">HTML version</span>: You are currently reading the free HTML version of the book,
the most recent of which is available at <a href="http://book.validatingrdf.com"><span class="c010">http://book.validatingrdf.com</span></a>
</li><li class="li-itemize"><span class="c013">PDF Version</span>:
You can download or buy the book
from <a href="http://www.morganclaypoolpublishers.com/catalog_Orig/product_info.php?products_id=1091">Morgan &amp; Claypool</a>.
Academic and Corporate licences are available.
</li><li class="li-itemize"><span class="c013">Hard copy</span>: You can order from
from <a href="http://www.morganclaypoolpublishers.com/catalog_Orig/product_info.php?products_id=1091">Morgan &amp; Claypool</a> or
<a href="https://www.amazon.com/Validating-Data-Synthesis-Lectures-Semantic/dp/1681731649">Amazon</a>.
</li></ul>
<!--TOC paragraph id="sec3" Living publication-->
<h5 class="paragraph" id="sec3">Living publication</h5><!--SEC END --><p>The HTML version allows a dynamic publication process where we intend to correct the errata that we find in the book.</p><ul class="itemize"><li class="li-itemize">
<a href="https://github.com/validatingrdf/book/issues/1">List of errata found in the published book.</a>
</li><li class="li-itemize"><a href="https://github.com/validatingrdf/book/issues">List of issues</a>. If you find some issues or suggestions in the HTML version, you can add them here also.
</li><li class="li-itemize"><a href="CHANGELOG">CHANGELOG</a>
</li></ul><hr style="height:2"><!--TOC chapter id="sec4" Contents-->
<h1 class="chapter" id="sec4">Contents</h1><!--SEC END --><ul class="toc"><li class="li-toc">
<a href="#sec5">0.1  Abstract</a>
</li></ul><ul class="toc"><li class="li-toc">

</li><li class="li-toc">
</li><li class="li-toc">
</li><li class="li-toc">
</li><li class="li-toc">
</li><li class="li-toc"><a href="#sec11">Chapter 1  Introduction</a>
<ul class="toc"><li class="li-toc">
<a href="#sec12">1.1  RDF and the Web of Data</a>
</li><li class="li-toc"><a href="#sec13">1.2  RDF: The Good Parts</a>
</li><li class="li-toc"><a href="#sec14">1.3  Challenges for RDF Adoption</a>
</li><li class="li-toc"><a href="#sec15">1.4  Structure of the Book</a>
</li><li class="li-toc"><a href="#sec16">1.5  Conventions and Notation</a>
</li></ul>
</li><li class="li-toc"><a href="#sec17">Chapter 2  The RDF Ecosystem</a>
<ul class="toc"><li class="li-toc">
<a href="#sec18">2.1  RDF History</a>
</li><li class="li-toc"><a href="#sec19">2.2  RDF Data Model</a>
</li><li class="li-toc"><a href="#sec20">2.3  Shared Entites and Vocabularies</a>
</li><li class="li-toc"><a href="#sec21">2.4  Technologies Related with RDF</a>
<ul class="toc"><li class="li-toc">
<a href="#sec22">2.4.1  SPARQL</a>
</li><li class="li-toc"><a href="#sec23">2.4.2  Inference Systems: RDF Schema and OWL</a>
</li><li class="li-toc"><a href="#sec26">2.4.3  Linked Data, JSON-LD, Microdata, and RDFa</a>
</li></ul>
</li><li class="li-toc"><a href="#sec27">2.5  Summary</a>
</li><li class="li-toc"><a href="#sec28">2.6  Suggested Reading</a>
</li></ul>
</li><li class="li-toc"><a href="#sec29">Chapter 3  Data Quality</a>
<ul class="toc"><li class="li-toc">
<a href="#sec30">3.1  Non-RDF Schema Languages</a>
<ul class="toc"><li class="li-toc">
<a href="#sec31">3.1.1  UML</a>
</li><li class="li-toc"><a href="#sec32">3.1.2  SQL and Relational Databases</a>
</li><li class="li-toc"><a href="#sec33">3.1.3  XML</a>
</li><li class="li-toc"><a href="#sec35">3.1.4  JSON</a>
</li><li class="li-toc"><a href="#sec36">3.1.5  CSV</a>
</li></ul>
</li><li class="li-toc"><a href="#sec37">3.2  Understanding the RDF Validation Problem</a>
</li><li class="li-toc"><a href="#sec46">3.3  Previous RDF Validation Approaches</a>
<ul class="toc"><li class="li-toc">
<a href="#sec47">3.3.1  Query-based Validation</a>
</li><li class="li-toc"><a href="#sec48">3.3.2  Inference-based Approaches</a>
</li><li class="li-toc"><a href="#sec49">3.3.3  Structural Languages</a>
</li></ul>
</li><li class="li-toc"><a href="#sec50">3.4  Validation Requirements</a>
<ul class="toc"><li class="li-toc">
<a href="#sec51">3.4.1  General Requirements</a>
</li><li class="li-toc"><a href="#sec52">3.4.2  Graph-based Requirements</a>
</li><li class="li-toc"><a href="#sec53">3.4.3  RDF Data Model Requirements</a>
</li><li class="li-toc"><a href="#sec54">3.4.4  Data-modeling-based Requirements</a>
</li><li class="li-toc"><a href="#sec55">3.4.5  Expressiveness of Schema Language</a>
</li><li class="li-toc"><a href="#sec56">3.4.6  Validation Invocation Requirements</a>
</li><li class="li-toc"><a href="#sec57">3.4.7  Usability Requirements</a>
</li></ul>
</li><li class="li-toc"><a href="#sec58">3.5  Summary</a>
</li><li class="li-toc"><a href="#sec59">3.6  Suggested Reading</a>
</li></ul>
</li><li class="li-toc"><a href="#sec60">Chapter 4  Shape Expressions</a>
<ul class="toc"><li class="li-toc">
<a href="#sec61">4.1  Use of ShEx</a>
</li><li class="li-toc"><a href="#sec62">4.2  First Example</a>
</li><li class="li-toc"><a href="#sec63">4.3  ShEx implementations</a>
</li><li class="li-toc"><a href="#sec64">4.4  The Shape Expressions Language</a>
<ul class="toc"><li class="li-toc">
<a href="#sec65">4.4.1  Shape Expressions Compact Syntax</a>
</li><li class="li-toc"><a href="#sec66">4.4.2  Invoking Validation</a>
</li><li class="li-toc"><a href="#sec67">4.4.3  Structure of Shape Expressions</a>
</li><li class="li-toc"><a href="#sec68">4.4.4  Start Shape Expression</a>
</li></ul>
</li><li class="li-toc"><a href="#sec69">4.5  Node Constraints</a>
<ul class="toc"><li class="li-toc">
<a href="#sec70">4.5.1  Node kinds</a>
</li><li class="li-toc"><a href="#sec71">4.5.2  Datatypes</a>
</li><li class="li-toc"><a href="#sec72">4.5.3  Facets on Literals</a>
</li><li class="li-toc"><a href="#sec73">4.5.4  Value Sets</a>
</li></ul>
</li><li class="li-toc"><a href="#sec81">4.6  Shapes</a>
<ul class="toc"><li class="li-toc">
<a href="#sec83">4.6.1  Triple Constraints</a>
</li><li class="li-toc"><a href="#sec85">4.6.2  Groupings</a>
</li><li class="li-toc"><a href="#sec86">4.6.3  Cardinalities</a>
</li><li class="li-toc"><a href="#sec87">4.6.4  Choices</a>
</li><li class="li-toc"><a href="#sec88">4.6.5  Nested Shapes</a>
</li><li class="li-toc"><a href="#sec89">4.6.6  Inverse Triple Constraints</a>
</li><li class="li-toc"><a href="#sec90">4.6.7  Repeated Properties</a>
</li><li class="li-toc"><a href="#sec91">4.6.8  Permitting other Triples</a>
</li></ul>
</li><li class="li-toc"><a href="#sec94">4.7  References</a>
<ul class="toc"><li class="li-toc">
<a href="#sec95">4.7.1  Shape References</a>
</li><li class="li-toc"><a href="#sec96">4.7.2  Recursion and Cyclic References</a>
</li><li class="li-toc"><a href="#sec97">4.7.3  External Shapes</a>
</li><li class="li-toc"><a href="#sec98">4.7.4  Labeled Triple Expression</a>
</li><li class="li-toc"><a href="#sec99">4.7.5  Annotations</a>
</li></ul>
</li><li class="li-toc"><a href="#sec100">4.8  Logical Operators</a>
<ul class="toc"><li class="li-toc">
<a href="#sec101">4.8.1  Conjunction</a>
</li><li class="li-toc"><a href="#sec103">4.8.2  Disjunction</a>
</li><li class="li-toc"><a href="#sec105">4.8.3  Negation</a>
</li></ul>
</li><li class="li-toc"><a href="#sec110">4.9  Shape Maps</a>
<ul class="toc"><li class="li-toc">
<a href="#sec111">4.9.1  Fixed Shape Maps</a>
</li><li class="li-toc"><a href="#sec112">4.9.2  Query Shape Maps</a>
</li><li class="li-toc"><a href="#sec113">4.9.3  Result Shape Maps</a>
</li><li class="li-toc"><a href="#sec114">4.9.4  JSON Representation</a>
</li><li class="li-toc"><a href="#sec115">4.9.5  Chaining Validation Workflows</a>
</li></ul>
</li><li class="li-toc"><a href="#sec116">4.10  Semantic Actions</a>
</li><li class="li-toc"><a href="#sec117">4.11  ShEx and Inference</a>
</li><li class="li-toc"><a href="#sec118">4.12  Importing schemas</a>
</li><li class="li-toc"><a href="#sec119">4.13  RDF and JSON-LD Syntax</a>
</li><li class="li-toc"><a href="#sec120">4.14  Summary</a>
</li><li class="li-toc"><a href="#sec121">4.15  Suggested Reading</a>
</li></ul>
</li><li class="li-toc"><a href="#sec122">Chapter 5  SHACL</a>
<ul class="toc"><li class="li-toc">
<a href="#sec123">5.1  Simple Example</a>
</li><li class="li-toc"><a href="#sec124">5.2  SHACL Implementations</a>
</li><li class="li-toc"><a href="#sec125">5.3  Basic Definitions: Shapes Graphs, Node, and Property Shapes</a>
</li><li class="li-toc"><a href="#sec126">5.4  Importing other Shapes Graphs</a>
</li><li class="li-toc"><a href="#sec127">5.5  Validation Report</a>
</li><li class="li-toc"><a href="#sec128">5.6  Shapes</a>
<ul class="toc"><li class="li-toc">
<a href="#sec129">5.6.1  Node shapes</a>
</li><li class="li-toc"><a href="#sec130">5.6.2  Property Shapes</a>
</li><li class="li-toc"><a href="#sec131">5.6.3  Constraint Components</a>
</li><li class="li-toc"><a href="#sec132">5.6.4  Human Friendly Messages</a>
</li><li class="li-toc"><a href="#sec133">5.6.5  Declaring Shape Severities</a>
</li><li class="li-toc"><a href="#sec134">5.6.6  Deactivating Shapes</a>
</li></ul>
</li><li class="li-toc"><a href="#sec135">5.7  Target Declarations</a>
<ul class="toc"><li class="li-toc">
<a href="#sec136">5.7.1  Target Node</a>
</li><li class="li-toc"><a href="#sec137">5.7.2  Target Class</a>
</li><li class="li-toc"><a href="#sec138">5.7.3  Implicit Class Target</a>
</li><li class="li-toc"><a href="#sec139">5.7.4  Target Subjects Of</a>
</li><li class="li-toc"><a href="#sec140">5.7.5  Target Objects Of</a>
</li></ul>
</li><li class="li-toc"><a href="#sec141">5.8  Cardinality</a>
</li><li class="li-toc"><a href="#sec142">5.9  Constraints on Values</a>
<ul class="toc"><li class="li-toc">
<a href="#sec143">5.9.1  Datatypes</a>
</li><li class="li-toc"><a href="#sec144">5.9.2  Class of Values</a>
</li><li class="li-toc"><a href="#sec145">5.9.3  Node Kinds</a>
</li><li class="li-toc"><a href="#sec146">5.9.4  Sets of Values</a>
</li><li class="li-toc"><a href="#sec147">5.9.5  Specific Value</a>
</li></ul>
</li><li class="li-toc"><a href="#sec148">5.10  Datatype Facets</a>
<ul class="toc"><li class="li-toc">
<a href="#sec149">5.10.1  Value Ranges</a>
</li><li class="li-toc"><a href="#sec150">5.10.2  String-based Constraints</a>
</li><li class="li-toc"><a href="#sec151">5.10.3  Language-based Constraints</a>
</li></ul>
</li><li class="li-toc"><a href="#sec152">5.11  Logical Constraints: and, or, not, xone</a>
<ul class="toc"><li class="li-toc">
<a href="#sec153">5.11.1  AND</a>
</li><li class="li-toc"><a href="#sec154">5.11.2  OR</a>
</li><li class="li-toc"><a href="#sec155">5.11.3  Exactly One</a>
</li><li class="li-toc"><a href="#sec156">5.11.4  Not</a>
</li><li class="li-toc"><a href="#sec157">5.11.5  Combining Logical Operators</a>
</li></ul>
</li><li class="li-toc"><a href="#sec160">5.12  Shape-based Constraints</a>
<ul class="toc"><li class="li-toc">
<a href="#sec161">5.12.1  Shape References and Recursion</a>
</li><li class="li-toc"><a href="#sec164">5.12.2  Qualified Value Shapes</a>
</li></ul>
</li><li class="li-toc"><a href="#sec165">5.13  Closed Shapes</a>
</li><li class="li-toc"><a href="#sec166">5.14  Property Pair Constraints</a>
</li><li class="li-toc"><a href="#sec167">5.15  Non-validating SHACL Properties</a>
</li><li class="li-toc"><a href="#sec168">5.16  SHACL-SPARQL</a>
<ul class="toc"><li class="li-toc">
<a href="#sec169">5.16.1  SPARQL Constraints</a>
</li><li class="li-toc"><a href="#sec170">5.16.2  SPARQL-based Constraint Components</a>
</li></ul>
</li><li class="li-toc"><a href="#sec171">5.17  SHACL and Inference Systems</a>
</li><li class="li-toc"><a href="#sec172">5.18  SHACL Compact Syntax</a>
</li><li class="li-toc"><a href="#sec173">5.19  SHACL Rules and Advanced Features</a>
</li><li class="li-toc"><a href="#sec174">5.20  SHACL Javascript</a>
</li><li class="li-toc"><a href="#sec175">5.21  Summary</a>
</li><li class="li-toc"><a href="#sec176">5.22  Suggested Reading</a>
</li></ul>
</li><li class="li-toc"><a href="#sec177">Chapter 6  Applications</a>
<ul class="toc"><li class="li-toc">
<a href="#sec178">6.1  Describing a Linked Data Portal</a>
<ul class="toc"><li class="li-toc">
<a href="#sec179">6.1.1  WebIndex in ShEx</a>
</li><li class="li-toc"><a href="#sec180">6.1.2  WebIndex in SHACL</a>
</li></ul>
</li><li class="li-toc"><a href="#sec181">6.2  Describing Clinical Records—FHIR</a>
<ul class="toc"><li class="li-toc">
<a href="#sec182">6.2.1  FHIR as Linked Data</a>
</li><li class="li-toc"><a href="#sec183">6.2.2  Consistency constraints</a>
</li><li class="li-toc"><a href="#sec184">6.2.3  FHIR/RDF Development</a>
</li><li class="li-toc"><a href="#sec185">6.2.4  Generic Properties</a>
</li></ul>
</li><li class="li-toc"><a href="#sec186">6.3  Springer Nature SciGraph</a>
</li><li class="li-toc"><a href="#sec187">6.4  DBpedia Validation Use Cases</a>
<ul class="toc"><li class="li-toc">
<a href="#sec188">6.4.1  Ontology-based Validation</a>
</li><li class="li-toc"><a href="#sec189">6.4.2  RDF Mappings Validation</a>
</li><li class="li-toc"><a href="#sec190">6.4.3  Validating Link Contributions with SHACL</a>
</li><li class="li-toc"><a href="#sec191">6.4.4  Ontology Validation with SHACL</a>
</li></ul>
</li><li class="li-toc"><a href="#sec192">6.5  ShEx for ShEx</a>
</li><li class="li-toc"><a href="#sec193">6.6  SHACL in SHACL</a>
</li><li class="li-toc"><a href="#sec194">6.7  Summary</a>
</li><li class="li-toc"><a href="#sec195">6.8  Suggested Reading</a>
</li></ul>
</li><li class="li-toc"><a href="#sec196">Chapter 7  Comparing ShEx and SHACL</a>
<ul class="toc"><li class="li-toc">
<a href="#sec197">7.1  Common Features</a>
</li><li class="li-toc"><a href="#sec198">7.2  Syntactic Differences</a>
</li><li class="li-toc"><a href="#sec199">7.3  Foundation: Schema vs. Constraints</a>
</li><li class="li-toc"><a href="#sec200">7.4  Invoking Validation</a>
</li><li class="li-toc"><a href="#sec201">7.5  Modularization and Reusability</a>
</li><li class="li-toc"><a href="#sec202">7.6  Shapes, Classes, and Inference</a>
</li><li class="li-toc"><a href="#sec203">7.7  Violation Reporting and Severities</a>
</li><li class="li-toc"><a href="#sec204">7.8  Default Cardinalities</a>
</li><li class="li-toc"><a href="#sec205">7.9  Property Paths</a>
</li><li class="li-toc"><a href="#sec206">7.10  Recursion</a>
</li><li class="li-toc"><a href="#sec207">7.11  Property Pair Constraints and Uniqueness</a>
</li><li class="li-toc"><a href="#sec208">7.12  Repeated Properties</a>
</li><li class="li-toc"><a href="#sec209">7.13  Exactly One and Alternatives</a>
</li><li class="li-toc"><a href="#sec210">7.14  Treatment of Closed Shapes</a>
</li><li class="li-toc"><a href="#sec211">7.15  Stems and Stem Ranges</a>
</li><li class="li-toc"><a href="#sec212">7.16  Annotations</a>
</li><li class="li-toc"><a href="#sec213">7.17  Semantics and Complexity</a>
</li><li class="li-toc"><a href="#sec214">7.18  Extension Mechanisms</a>
</li><li class="li-toc"><a href="#sec215">7.19  Conclusions and Outlook</a>
</li><li class="li-toc"><a href="#sec216">7.20  Summary</a>
</li><li class="li-toc"><a href="#sec217">7.21  Suggested Reading</a>
</li></ul>
</li><li class="li-toc"><a href="#sec218">Appendix A  WebIndex in ShEx</a>
</li><li class="li-toc"><a href="#sec219">Appendix B  WebIndex in SHACL</a>
</li><li class="li-toc"><a href="#sec220">Appendix C  ShEx in ShEx</a>
</li><li class="li-toc"><a href="#sec221">Appendix D  SHACL in SHACL</a>
</li><li class="li-toc">
</li><li class="li-toc">
</li></ul>
<!--TOC section id="sec5" Abstract-->
<h2 class="section" id="sec5">0.1  Abstract</h2><!--SEC END --><p>
RDF and Linked Data have broad applicability across many fields, 
from aircraft manufacturing to zoology. Requirements for detecting 
bad data differ across communities, fields, and tasks, but nearly 
all involve some form of data validation. This book introduces 
data validation and describes its practical use in day-to-day data exchange.</p><p>The Semantic Web offers a bold, new take on how to organize, distribute, 
index, and share data.
Using Web addresses (URIs) as identifiers for data elements enables the 
construction of distributed databases on a global scale. Like the Web, 
the Semantic Web is heralded as an information revolution, and also like the Web, 
it is encumbered by data quality issues. The quality of Semantic Web data is 
compromised by the lack of resources for data curation, for maintenance, and 
for developing globally applicable data models.</p><p>At the enterprise scale, these problems have conventional solutions. 
Master data management provides an enterprise-wide vocabulary, while constraint 
languages capture and enforce data structures. Filling a need long recognized 
by Semantic Web users, shapes languages provide models and vocabularies for 
expressing such structural constraints.</p><p>This book describes two technologies for RDF validation: 
Shape Expressions (ShEx) and Shapes Constraint Language (SHACL), 
the rationales for their designs, a comparison of the two,
and some example applications.
</p><p><span class="c013">Keywords</span>: RDF, ShEx, SHACL, shape expressions, shapes constraint language, data quality,
web of data, Semantic Web, linked data
</p><!--TOC chapter id="sec6" Preface-->
<h1 class="chapter" id="sec6">Preface</h1><!--SEC END --><p>This book describes two languages for implementing constraints on RDF
data, describing the main features of both Shape Expressions (ShEx) and
Shapes Constraint Language (SHACL) from a user perspective, and also
offering a comparison of the technologies. Throughout this book, we
develop a small number of examples that typify validation requirements
and demonstrate how they can be met with ShEx and SHACL. The book is
not intended to be a formal specification of the languages, for which
the interested reader can consult the corresponding reference
documents, but rather, it is meant to serve as an introduction to the
technologies with some background about the rationale of their design
and some points of comparison.</p><p> Chapter <a href="#ch1">1</a> provides a brief introduction to the topic.
Chapter <a href="#ch2">2</a> presents a short overview of the RDF data model and
RDF-related technologies; this chapter could be skipped by any reader
who already knows RDF or Turtle. Chapter <a href="#ch3">3</a> helps the reader to
understand what to expect from data validation. It describes the
problem of RDF validation and some approaches that have been proposed.
This book specifically reviews two of these approaches in further
detail: ShEx (Chapter <a href="#ch4">4</a>) and SHACL (Chapter <a href="#ch5">5</a>). These chapters describe
each language and provide a practical introduction using examples.
Following the discussion of both languages, Chapter <a href="#ch6">6</a> presents some
applications using either ShEx, SHACL, or both. Finally, Chapter <a href="#ch7">7</a> 
compares ShEx and SHACL and offers some conclusions.</p><p>The goal of this book is to serve as a practical introduction to ShEx
and SHACL using examples. While we omitted formal definitions or
specifications, references for further reading can be found at the end
of each chapter. We give a quick overview of some background and
related technologies so that readers without RDF knowledge can follow
the book’s contents. Also, it is not necessary to have any prior
knowledge of programming or ontologies to understand RDF validation
technologies. The intended audience is anyone interested in data
representation and quality.</p><p><br>
<br>

Jose Emilio Labra Gayo, Eric Prud’hommeaux, Iovka Boneva, and Dimitris Kontokostas<br>
July 2017
</p><!--TOC chapter id="sec7" Foreword by Phil Archer-->
<h1 class="chapter" id="sec7">Foreword by Phil Archer</h1><!--SEC END --><p>“Anyone can say anything about anything,” says the mantra for the
Semantic Web. More formally, the Semantic Web adopts the Open World
Assumption: just because your data encodes a set of facts, that doesn’t
mean there aren’t other facts stated elsewhere about the same thing.
All of which is fine and part of the design of RDF which supports the
creation of a graph at Web scale, but in a lot of practical
applications you just need to know whether the triples you’ve ingested
match what you were expecting; you need validation. You might think of
it as a defined subset of the whole graph, or maybe a profile,
providing a huge boost to interoperability between disparate systems.
If you can validate the data you’ve received then you can process it
with confidence, using more terse code, perhaps with more performant
queries. I don’t accept that RDF is hard, certainly no harder than any
other Web technology; what is hard is thinking in graphs. Keeping in
your head that this node supports these properties and has
relationships with those other nodes becomes complex for anything other
than trivial datasets. The validation techniques set out in this book
provide a means to tame that complexity, to set out for humans and
machines exactly what the structure of the data is or should be. That’s
got to be helpful and, incidentally, ties in with new work now under
way at W3C on dataset exchange. In my role at W3C I watched as the
SHACL and ShEx camps tried hard to converge on a single method: they
couldn’t, hence the two different approaches. Both are described in
detail here with copious examples, which is just what you need to get
started. How can you choose between the two methods? Chapter <a href="#ch7">7</a> gives a
detailed comparison and allows you to make your own choice. Whichever
you choose, this is the book you need to make sense of RDF validation.</p><p><br>
<br>

Phil Archer, Former W3C Data Strategist<br>
July 2017</p><!--TOC chapter id="sec8" Foreword by Tom Baker-->
<h1 class="chapter" id="sec8">Foreword by Tom Baker</h1><!--SEC END --><p>The technologies described here meet a need first recognized,
albeit dimly, two decades ago. 
Rewind to circa 2000, when the parallel development of two W3C specifications, 
XML Schema and RDF Schema, both called “schema languages” 
but with radically different uses, caused some confusion. </p><p>This confusion permeated our early discussions about the Dublin Core. 
Was it an XML format, an RDF vocabulary, or somehow both? 
Could metadata just follow arbitrary formats or did it need a data model? 
In 2000, the Dublin Core community turned to “application profiles” 
as a way to mix and match multiple vocabularies to meet specific needs, 
and the idea was an instant hit even if people disagreed about their use. 
Were they more for validating data, or more about finding rough consensus on a 
metadata model within a community of practice?
Attempts to bridge the XML and RDF mindsets in the DCMI community,
notably with a Description Set Profile constraint language for validating 
RDF-based metadata (2008), never quite caught on. 
Perhaps the idea needed a bigger push?</p><p>Fast-forward to 2013, when W3C convened a workshop on RDF validation which revealed 
that many communities had been circling around the same issues, and which ultimately 
led to the results described here [<a href="#RDFValidation">82</a>]. This book focuses on data 
validation, an addition to the Semantic Web stack that is long overdue. 
But from a DCMI perspective, the ideas for future work outlined in its Conclusion 
are just as exciting: the prospect of using ShEx- or SHACL-based application profiles 
to map and convert between data models, size up aggregated datasets, 
or provide nuanced feedback to data providers on quality issues. 
ShEx and SHACL, finally production-ready, are full of potential for further evolution.</p><p><br>
<br>

Tom Baker, Dublin Core Metadata Initiative<br>
July 2017</p><!--TOC chapter id="sec9" Foreword by Dan Brickley and Libby Miller-->
<h1 class="chapter" id="sec9">Foreword by Dan Brickley and Libby Miller</h1><!--SEC END --><p>People think RDF is a pain because it is complicated. The truth is
even worse. RDF is painfully simplistic, but it allows you to work with
real-world data and problems that are horribly complicated. While you
can avoid RDF, it is harder to avoid complicated data and complicated
computer problems. RDF brings together data across application
boundaries and imposes no discipline on mandatory or expected
structures. This can make working with RDF data frustrating. Its schema
and ontology languages can help define the meaning of RDF content but,
again, can’t express rules about how actual data records should look.
The contents of this book are nearly 20 years too late, but better now
than never. Recent developments around RDF validation have finally made
it easier to record, exchange, and understand rules about validating
and otherwise checking RDF data. Who knows what wonders await us in
another 20 years.</p><p><br>
<br>

Dan Brickley, Schema.org and Google <br>
Libby Miller, BBC<br>
July 2017</p><!--TOC chapter id="sec10" Acknowledgments-->
<h1 class="chapter" id="sec10">Acknowledgments</h1><!--SEC END --><p>This book started as an RDF validation tutorial that we prepared for the International Semantic Web Conference (ISWC) 2016. 
The slides are still available at <a href="http://weso.github.io/RDFValidation_ESWC16/"><span class="c010">http://weso.github.io/RDFValidation_ESWC16/</span></a>. 
After the tutorial, the editors invited us to extend the slides to write a full book on the subject. </p><p>We want to thank Harold Solbrig for his collaboration with the tutorial and his support and participation in the development of ShEx.</p><p>Although the task of extending the tutorial seemed easy at first, writing a book on this subject was much more daunting than expected. 
One challenge was to update the material to the changes that ShEx and SHACL were experimenting with during the W3C process.</p><p>There were different points of view on how to tackle the RDF validation problem that 
led to the appearance of two camps, which at the time of this writing are represented in two W3C groups: the Shape Expressions community group and the SHACL community group.
We would like to acknowledge the people participating in those groups as well as the people that were part of the W3C Data Shapes Working group. </p><p>During the development of the book we were also updating our implementations. 
We also want to thank all the people that have been using our implementations and online demos for their patience when something was not working as expected and for submitting issues or suggesting improvements to the tools.</p><p>We want to thank Amy van der Hiel for the design of the cover art,
as well as Dan Brickley and Tom Baker for their comments and suggestions.</p><p>We are also grateful to Vladimir Alexiev for his extensive review and proofreading
of the book.</p><p>Jose Emilio Labra Gayo wants to thank his colleagues from Oviedo3 and the WESO research group. 
Special thanks to Edita for her support and patience. 
He dedicates the book to Sergio, Nuria, and Alex.</p><p>Dimitris wants to thank Sebastian Hellmann and the University of Leipzig for supporting his participation in the Shape Expressions and Data Shapes groups as well as his family for their continuous support.</p><p>Eric wants to dedicate this book to his family, who put up with him writing when he should be playing. He also has great gratitude to Gregg Kellogg, who always takes time to hack with him, and Tom Baker, who always takes time to write with him.</p><p><br>
<br>

Jose Emilio Labra Gayo, Eric Prud’hommeaux, Iovka Boneva, and Dimitris Kontokostas<br>
July 2017
</p>
<!--TOC chapter id="sec11" Introduction-->
<h1 class="chapter" id="sec11">Chapter 1  Introduction</h1><!--SEC END --><p>
<a id="ch1"></a>
<a id="ch010intro"></a></p><p><a id="hevea_default0"></a> <a id="hevea_default1"></a>
</p>
<!--TOC section id="sec12" RDF and the Web of Data-->
<h2 class="section" id="sec12">1.1  RDF and the Web of Data</h2><!--SEC END --><p>
<a id="ch1.sec1"></a></p><p>These days more and more devices generate data automatically and
it is relatively easy to develop applications in different domains backed by databases and exposing data to the Web. 
The amount and diversity of data produced clearly exceeds our capacity to consume it.</p><p><a id="hevea_default2"></a>
The term <em>big data</em> has emerged to name data that is so large and complex that traditional data processing applications can’t handle it. 
Big data has been described by at least three words starting by V: 
volume, velocity, variety. 
Although volume and velocity are the most visible features, 
variety is a key concern which prevents data integration and generates lots of interoperability problems.</p><p>RDF was proposed as a graph-based data model which became part of the 
Semantic Web vision. 
Its reliance on the global nature of URIs offered a solution to the data integration problem as 
RDF datasets produced by different means can seamlessly be integrated with other data. 
Data integration using RDF is faster and more robust than traditional solutions in the face of schema changes.</p><p><a id="hevea_default3"></a> 
<a id="LinkedDataPrinciples"></a>
RDF is also a key enabler of linked data. 
Linked data [<a href="#Heath_2011">46</a>] was proposed as a set of best practices to publish data on the Web.
It was introduced by Tim Berners-Lee [<a href="#bernerslee06">8</a>] and was based on four main principles.
RDF is mentioned in the third principle as one of the standards that provides useful information. 
The goal is that information must be useful not only for humans navigating through browsers (for which HTML would be enough) 
but also for other agents that may automatically process that data.</p><p>The linked data principles became popular and several initiatives were created to publish data portals. 
The size of data on the Web increased significantly in the last years. 
For example, the LODStats project [<a href="#iermilov-2016-lodstats-iswc">36</a>] aggregates around 150 billion triples from 2,973 datasets.</p>
<!--TOC section id="sec13" RDF: The Good Parts-->
<h2 class="section" id="sec13">1.2  RDF: The Good Parts</h2><!--SEC END --><p>
<a id="ch1.sec2"></a></p><p><a id="hevea_default4"></a> <a id="hevea_default5"></a>
RDF has been acknowledged as the language for the Web of Data and it has several advantages like the following. </p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default6"></a> <a id="hevea_default7"></a>	
</p><em>Disambiguation</em>. 
The use of IRIs to identify predicates and to make assertions about resources enables the user to globally identify the property that is being asserted as well as the resources involved in the statement.
Those global properties can be identified by automated agents which can recognize the data that they must understand in a non-ambiguous way.<p><a id="hevea_default8"></a>
<a id="hevea_default9"></a>
</p></li><li class="li-itemize"><em>RDF as an integration language</em>. 
RDF is <em>compositional</em> in the sense that two RDF graphs obtained from independent sources can automatically be merged to obtain a larger graph. 
This property facilitates the integration of data from heterogeneous sources.<p>One of the biggest challenges of the current era related with computer science is how to solve the interoperability problem between different applications that manipulate data that comes from heterogeneous sources.
RDF is a step forward to partially solve this problem as RDF data can automatically be integrated even if it has been produced by different parties.</p><p><a id="hevea_default10"></a>
<a id="hevea_default11"></a>
<a id="hevea_default12"></a>
</p></li><li class="li-itemize"><em>RDF as a </em>lingua franca<em> for semantic web and linked data</em>. 
The simplicity and generality of the RDF data model enables its use to model any kind of data that can be easily integrated with other data. <p>RDF is at the core of the semantic web stack or layer cake and is mentioned in the linked data principles and in the five-star model.</p><p><a id="hevea_default13"></a> <a id="hevea_default14"></a>
</p></li><li class="li-itemize"><em>RDF data stores and SPARQL</em>. 
SPARQL was proposed as a query language for RDF in 2008. 
The language met an overwhelming acceptance and adoption by the RDF community.
The ability to query led to the development of many new applications as well as databases and libraries. 
RDF data stores began to popularize and some companies started using RDF internally to represent their data. 
Some of those applications chose RDF just for practical reasons, even without reference to the semantic web. 
Storing RDF and querying it using SPARQL offers a very flexible model which can adapt very quickly to data model changes.
RDF data stores can be seen as part of the NoSQL movement and there are solutions for RDF data stores with high capabilities that can work with very large 
databases [<a href="#Neumann09">67</a>]. </li><li class="li-itemize"><em>Extensibility</em>. 
When one starts to develop an application to solve some problem, 
it is necessary to record information in a format with <em>room to grow</em>, 
which enables the data model to evolve and increasingly adapt to new needs.
The extensible graph model of RDF makes it very easy to add more statements to any graph. </li><li class="li-itemize"><em>Flexibility</em>. 
While a change in a relational database may be difficult to accomplish.
RDF embraces flexibility and these changes are usually a matter of updating the triples. <p><a id="hevea_default15"></a> <a id="hevea_default16"></a>
<a id="hevea_default17"></a> <a id="hevea_default18"></a>
</p></li><li class="li-itemize"><em>Open by default</em>. 
The semantic web approach to knowledge representation promoted what is called Open World Assumption (OWA) instead of the Closed World Assumption (CWA) which was popular in previous knowledge representation systems. 
The CWA considers that what is not known to be true must be false, while the OWA considers that what is not known is just <em>unknown</em>. <p>The CWA is usually applied in systems that have complete information while the OWA is more natural for incomplete information systems like the Web. </p><p>Given that RDF was applied for the semantic web, most of the applications based on RDF also adopt the Open World Assumption adapting to the appearance of new data. </p><p>Although RDF and related technologies employ the Open World Assumption by default, this does not mean that every application must adopt that assumption.
In some contexts, it may be necessary to take the opposite view and consider that a system contains all the information on some topic in order to operate. </p></li></ul>
<!--TOC section id="sec14" Challenges for RDF Adoption-->
<h2 class="section" id="sec14">1.3  Challenges for RDF Adoption</h2><!--SEC END --><p>
<a id="ch1.sec3"></a></p><p>In spite of all the advantages of RDF, its widespread adoption is not yet a reality.
Some reasons for this can be guessed.</p><ul class="itemize"><li class="li-itemize"><em>RDF is mistakenly identified as a complex language</em>. 
Some people consider RDF as a theoretical, knowledge representation language which does not appeal to practical web developers.
However, the RDF data model is very simple and can be understood by almost any person in less than an hour. 
In its simplicity lies its power and the advantages that we enumerated in previous sections. 
It is true that some of the technologies built on top of RDF, like OWL, have a more theoretical foundation based on 
description logics which diverge from this simplicity. <p>We consider that it is necessary to separate the RDF data model from its more powerful and complex relatives. 
This is not to say that these technologies are not useful or practical, 
but that the people who will manage them are different than the people who develop applications. 
Web developers are not so much interested in ontological discussions, 
they have more mundane concerns like what are the arcs expected to have for some node, 
what datatypes are allowed, 
which data structures can be used to represent some nodes, etc.</p><p><a id="hevea_default19"></a> <a id="hevea_default20"></a> <a id="hevea_default21"></a>
</p></li><li class="li-itemize"><em>Ugly syntax</em>.
The RDF data model was defined along with an XML syntax in 1999. 
At that time XML was a popular syntax and that decision made sense.
RDF/XML syntax was not human-friendly (it was difficult to write RDF/XML by hand) and it was also difficult to process (it needed specialized libraries and parsers). 
The difference between the hierarchical, tree-based XML model and the graph-based RDF data model makes necessary to serialize the RDF graph to be represented in XML. 
The same RDF graph could be serialized in many ways making very difficult to use standard XML tools like XSLT or XPath to process RDF.<p><a id="hevea_default22"></a>
There were several attempts to define a more human-friendly syntax. 
Notation3 was proposed as a human-friendly language that was able to extend RDF and express other logical operations and rules. 
<a id="hevea_default23"></a>
Turtle was later proposed as a subset of Notation3 for only expressing RDF.
Turtle became popular in the semantic web community although not so much between web developers.
Given that it is a special format, it requires a separate parser and tools.</p><p><a id="hevea_default24"></a> <a id="hevea_default25"></a> <a id="hevea_default26"></a>
In 2013, RDF 1.1 promotes also JSON-LD for developers who are familiar with JSON and RDFa which enables to embed RDF annotations along HTML content.</p><p>Although these efforts can help popularize RDF adoption between the developer community, some extra work is still needed to better understand the role of RDF in the Web development and publishing pipeline.</p></li><li class="li-itemize"><em>RDF production/consumption dilemma</em>.
It is necessary to find ways that data producers can generate their data so it can be handled by potential consumers. 
The return of inversion for data producers comes when there are agents consuming their data.<p>There is some structure of the data that publishers have and want to transmit.
For example, they may want to declare that some nodes have some properties with some specific values.
Data consumers need to know that structure to develop applications to consume the data.</p><p>Although RDF is a very flexible schema-less language, enterprise and industrial applications may require an extra level of validation before processing for several reasons like security, performance, etc.</p></li></ul><p><a id="hevea_default27"></a>
Veteran users of RDF and SPARQL have confronted the problem of composing or consuming data 
with some expectations about the structure of that data. 
They may have described that structure in a schema or ontology, 
or in some human-readable documentation, 
or maybe expected users to learn the structure by example. 
Ultimately, users of that application need to understand the graph structure that the application expects.</p><p>While it can be trivial to synchronize data production and consumption within a single application, consuming foreign data frequently involves a lot of defensive programming, usually in the form of SPARQL queries that search out data in different structures. 
Given lots of potential representations of that data, it is difficult to be confident that we have addressed all of the intended ways our application may encounter its information.</p><p><a id="hevea_default28"></a>
Grammars are a common tool for defining data structures and the languages that convey them.
Every data structure with sufficient complexity and precision relies on some formal convention for enumerating groups of properties and expressing data types, 
cardinalities, and relationships between structures.
The need for such a representation grows with the complexity of the language.</p><p>To illustrate this, consider the specifications for RDF and SPARQL.
RDF is a simple data model consisting of graphs made of triples composed from three types of nodes.
Because of this simplicity, it does not need a defining grammar (though most academic papers about RDF include one).
By contrast, the SPARQL language would be enormously complicated or impossible to define without a systematic grammar.</p><p>This book describes two languages for implementing constraints on RDF data.
They can enumerate RDF properties and identify permissible data types, cardinalities, and groups of properties.
These languages can be used for documentation, user interface generation, or validation during data production or consumption.</p><p>Shape Expressions (ShEx) were proposed as a user-friendly and high-level language for RDF validation.
Initially proposed as a human-readable syntax for OSLC Resource 
Shapes [<a href="#OSLCResourceShapes">86</a>], 
ShEx grew to embrace more complex user requirements coming from clinical and library use cases.
ShEx now has a rigorous semantics and interchangeable representations: JSON-LD, RDF, and the one meant for human eyes.</p><p>Another technology, SPIN, was used for RDF validation, principally in TopQuadrant’s TopBraid Composer.
This technology, influenced from OSLC Resource Shapes as well, evolved into both an implementation and definition of the Shapes Constraint Language (SHACL), 
which was adopted by the W3C Data Shapes Working Group.</p><p>Although both ShEx and SHACL have similar goals and share some similarities they solve the problem from different perspectives and formalisms. 
At the time of this writing the W3C Data Shapes Working Group has been unable to obtain a compromise solution that brings together both proposals so it seems that they will evolve as different technologies in the future.</p><p>This book describes the main features of both ShEx and SHACL from a user perspective and also offers a comparison of the technologies.
Throughout this book, we develop a small number of examples that typify validation requirements and demonstrate how they can be met with ShEx and SHACL. 
The book is not intended as a formal specification of the languages, for which the interested reader can consult the corresponding documents, but as an introduction to the technologies with some background about the rationale of their design and some comparison between them. </p>
<!--TOC section id="sec15" Structure of the Book-->
<h2 class="section" id="sec15">1.4  Structure of the Book</h2><!--SEC END --><p> 
<a id="ch1.sec4"></a></p><p>Chapter <a href="#ch020RDF">2</a> presents a short overview of the RDF data model and RDF-related technologies. 
This chapter could be skipped by any reader who already knows RDF or Turtle.</p><p>Chapter <a href="#ch030DataQuality">3</a> helps us understand what to expect from data validation. 
It describes the problem of RDF validation and some approaches that have been proposed. 
In this book, we will further review two of them: Shape Expressions (ShEx) and SHACL.</p><p>The next two chapters focus on two proposals: Shape Expressions (Chapter <a href="#ch040ShEx">4</a>) 
and Shapes Constraint Language (Chapter <a href="#ch050SHACL">5</a>).
The description of both languages is more intended to be a practical introduction to them using examples than a formal specification. 
Once we present both languages, Chapter <a href="#ch060Applications">6</a> presents some applications using either ShEx, SHACL or both.
Finally, Chapter <a href="#ch070Comparing">7</a> compares ShEx and SHACL and presents some conclusions.</p><p>The goal of this book is to serve as a practical introduction to ShEx and SHACL using examples. 
We omitted formal definitions or specifications and just added a section at the end of each chapter with references to further reading.</p><p>The intended audience is anyone interested in data representation and quality. 
We give a quick overview of some background and related technologies so readers without RDF knowledge can follow the book contents.
Also, it is not necessary to have any prior knowledge on programming or ontologies to understand RDF validation technologies. </p>
<!--TOC section id="sec16" Conventions and Notation-->
<h2 class="section" id="sec16">1.5  Conventions and Notation</h2><!--SEC END --><p>We provide a short introduction to RDF and Turtle in Chapter <a href="#ch020RDF">2</a> and from that point on, 
we use Turtle for the rest of the book. </p><p>Once a prefix declaration is presented in Turtle and ShEx, it is omitted thereafter to simplify the examples unless needed for clarity.
The prefix declarations and namespaces used are shown in 
Table <a href="#ch010.Namespaces">1.1</a>.
Most examples in the book will need to be prepended with prefix declarations in order to run correctly.</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 1.1: Common prefix declarations</td></tr>
</table></div>
<a id="ch010.Namespaces"></a>
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c016"> <span class="c013">Alias</span></td><td class="c016"><span class="c013">Namespace 
</span></td></tr>
<tr><td class="c016">
<code><span class="c003">prefix</span></code><code> :</code></td><td class="c016">
<code>&lt;</code><code><span class="c006">http</span></code><code>://</code><code><span class="c006">example</span></code><code>.</code><code><span class="c004">org</span></code><code>/&gt;</code> 
</td></tr>
<tr><td class="c016">
<code><span class="c003">prefix</span></code><code> </code><code><span class="c004">cex</span></code><code>:</code></td><td class="c016">
<code>&lt;</code><code><span class="c006">http</span></code><code>://</code><code><span class="c006">purl</span></code><code>.</code><code><span class="c004">org</span></code><code>/</code><code><span class="c006">weso</span></code><code>/</code><code><span class="c006">computex</span></code><code>/</code><code><span class="c006">ontology</span></code><code><span class="c008"><code>#&gt;</code></span></code> 
</td></tr>
<tr><td class="c016">
<code><span class="c003">prefix</span></code><code> </code><code><span class="c004">cdt</span></code><code>:</code></td><td class="c016">
<code>&lt;</code><code><span class="c006">http</span></code><code>://</code><code><span class="c006">example</span></code><code>.</code><code><span class="c004">org</span></code><code>/</code><code><span class="c006">customDataTypes</span></code><code><span class="c008"><code>#&gt;</code></span></code> 
</td></tr>
<tr><td class="c016">
<code><span class="c003">prefix</span></code><code> </code><code><span class="c004">dbr</span></code><code>:</code></td><td class="c016">
<code>&lt;</code><code><span class="c006">http</span></code><code>://</code><code><span class="c006">dbpedia</span></code><code>.</code><code><span class="c004">org</span></code><code>/</code><code><span class="c006">resource</span></code><code>/&gt;</code> 
</td></tr>
<tr><td class="c016">
<code><span class="c003">prefix</span></code><code> </code><code><span class="c004">ex</span></code><code>:</code></td><td class="c016">
<code>&lt;</code><code><span class="c006">http</span></code><code>://</code><code><span class="c006">example</span></code><code>.</code><code><span class="c004">org</span></code><code>/&gt;</code> 
</td></tr>
<tr><td class="c016">
<code><span class="c003">prefix</span></code><code> </code><code><span class="c004">qb</span></code><code>:</code></td><td class="c016">
<code>&lt;</code><code><span class="c006">http</span></code><code>://</code><code><span class="c006">purl</span></code><code>.</code><code><span class="c004">org</span></code><code>/</code><code><span class="c006">linked</span></code><code>-</code><code><span class="c006">data</span></code><code>/</code><code><span class="c006">cube</span></code><code><span class="c008"><code>#&gt;</code></span></code> 
</td></tr>
<tr><td class="c016">
<code><span class="c003">prefix</span></code><code> </code><code><span class="c004">org</span></code><code>:</code></td><td class="c016">
<code>&lt;</code><code><span class="c006">http</span></code><code>://</code><code><span class="c006">www</span></code><code>.</code><code><span class="c006">w3</span></code><code>.</code><code><span class="c004">org</span></code><code>/</code><code><span class="c006">ns</span></code><code>/</code><code><span class="c004">org</span></code><code><span class="c008"><code>#&gt;</code></span></code> 
</td></tr>
<tr><td class="c016">
<code><span class="c003">prefix</span></code><code> </code><code><span class="c004">owl</span></code><code>:</code></td><td class="c016">
<code>&lt;</code><code><span class="c006">http</span></code><code>://</code><code><span class="c006">www</span></code><code>.</code><code><span class="c006">w3</span></code><code>.</code><code><span class="c004">org</span></code><code>/2002/07/</code><code><span class="c004">owl</span></code><code><span class="c008"><code>#&gt;</code></span></code> 
</td></tr>
<tr><td class="c016">
<code><span class="c003">prefix</span></code><code> </code><code><span class="c004">rdf</span></code><code>:</code></td><td class="c016">
<code>&lt;</code><code><span class="c006">http</span></code><code>://</code><code><span class="c006">www</span></code><code>.</code><code><span class="c006">w3</span></code><code>.</code><code><span class="c004">org</span></code><code>/1999/02/22-</code><code><span class="c004">rdf</span></code><code>-</code><code><span class="c006">syntax</span></code><code>-</code><code><span class="c006">ns</span></code><code><span class="c008"><code>#&gt;</code></span></code> 
</td></tr>
<tr><td class="c016">
<code><span class="c003">prefix</span></code><code> </code><code><span class="c004">rdfs</span></code><code>:</code></td><td class="c016">
<code>&lt;</code><code><span class="c006">http</span></code><code>://</code><code><span class="c006">www</span></code><code>.</code><code><span class="c006">w3</span></code><code>.</code><code><span class="c004">org</span></code><code>/2000/01/</code><code><span class="c004">rdf</span></code><code>-</code><code><span class="c004">schema</span></code><code><span class="c008"><code>#&gt;</code></span></code> 
</td></tr>
<tr><td class="c016">
<code><span class="c003">prefix</span></code><code> </code><code><span class="c004">schema</span></code><code>:</code></td><td class="c016">
<code>&lt;</code><code><span class="c006">http</span></code><code>://</code><code><span class="c004">schema</span></code><code>.</code><code><span class="c004">org</span></code><code>/&gt;</code> 
</td></tr>
<tr><td class="c016">
<code><span class="c003">prefix</span></code><code> </code><code><span class="c004">sh</span></code><code>:</code></td><td class="c016">
<code>&lt;</code><code><span class="c006">http</span></code><code>://</code><code><span class="c006">www</span></code><code>.</code><code><span class="c006">w3</span></code><code>.</code><code><span class="c004">org</span></code><code>/</code><code><span class="c006">ns</span></code><code>/</code><code><span class="c006">shacl</span></code><code><span class="c008"><code>#&gt;</code></span></code> 
</td></tr>
<tr><td class="c016">
<code><span class="c003">prefix</span></code><code> </code><code><span class="c004">sx</span></code><code>:</code></td><td class="c016">
<code>&lt;</code><code><span class="c006">http</span></code><code>://</code><code><span class="c006">shex</span></code><code>.</code><code><span class="c006">io</span></code><code>/</code><code><span class="c006">ns</span></code><code>/</code><code><span class="c006">shex</span></code><code><span class="c008"><code>#&gt;</code></span></code> 
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><p>RDF is being applied to lots of domains, some of them highly specialized. 
We opted to present examples using concepts from familiar domains like people, courses, companies, etc. that we think will be familiar to any reader. 
Most of the examples use properties borrowed from 
<code>schema.org</code>,<sup><a id="text1" href="#note1">1</a></sup> 
which provides lots of concepts from familiar domains. 
The examples are just for illustration purposes and do not pretend to 
check <code>schema.org</code> rules. 
Nevertheless, validating <code>schema.org</code> using ShEx or SHACL can be an interesting exercise for readers.</p><p>For examples that involve validation of a node against a shape, we use the following notation:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">good</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Valid node"</span></span></span><span class="c011"> . </span><span class="c011"><span class="c008"><span class="c011">#Passes as a :Shape</span></span></span><span class="c011">
</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">bad</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Bad node"</span></span></span><span class="c011"> .    </span><span class="c011"><span class="c008"><span class="c011">#Fails as a :Shape  </span></span></span></td></tr>
</table><p>which means that node 
<code>:</code><code>good</code> validates against shape 
<code>:</code><code>Shape</code>, while node 
<code>:</code><code>bad</code> does not.</p><p>The examples have been tested using the different tools available. 
We maintain a public repository where we keep the examples used in this book. 
The URL is: <a href="https://github.com/labra/validatingRDFBookExamples"><span class="c010">https://github.com/labra/validatingRDFBookExamples</span></a>.</p>
<!--BEGIN NOTES chapter-->
<hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note1" href="#text1">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="http://schema.org"><span class="c010">http://schema.org</span></a></div></dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec17" The RDF Ecosystem-->
<h1 class="chapter" id="sec17">Chapter 2  The RDF Ecosystem</h1><!--SEC END --><p>
<a id="ch2"></a>
<a id="ch020RDF"></a></p><p><a id="hevea_default29"></a>This chapter includes a short overview of the RDF data model and the Turtle notation, as well as some technologies like SPARQL, RDF Schema, and OWL that form part of the RDF ecosystem.</p><p>Readers that are already familiar with these technologies may skip this chapter and jump into the next chapter that describes the RDF validation problem.</p>
<!--TOC section id="sec18" RDF History-->
<h2 class="section" id="sec18">2.1  RDF History</h2><!--SEC END --><p>
<a id="ch2.sec1"></a></p><p><a id="hevea_default30"></a> <a id="hevea_default31"></a>
The first draft of RDF was published in 1997 [<a href="#RDF1997">68</a>] and became a W3C recommendation in 1999 along with an XML syntax [<a href="#RDF10_99">69</a>]. </p><p>A class hierarchy which allows to describe a reasoning like <em>if Socrates is human and all humans are mortals, then Socrates is mortal</em> 
and property domains and ranges followed a year later. 
<a id="hevea_default32"></a> <a id="hevea_default33"></a> <a id="hevea_default34"></a> <a id="hevea_default35"></a> <a id="hevea_default36"></a>
It is perhaps unfortunate that this came under the name RDF Schema (RDFS) as it didn’t offer any of the data constraints available in other schema languages like SQL’s DDL or W3C XML Schema. </p><p>In hindsight, this development path was clearly in tension with the priorities of everyday programmers and systems architects who care primarily about creating and accessing well-structured data, and perhaps secondarily about inference. 
<a id="hevea_default37"></a> <a id="hevea_default38"></a>
Four years after RDFS, OWL extended the facilities provided by RDFS into an expressive ontology language that could describe the information required for instances of classes. </p><p><a id="hevea_default39"></a>
However, once again, the language was oriented toward a healthy, distributed information infrastructure and not that last mile which permits developers to confidently produce and consume data. 
While OWL could detect errors when one used a literal with the wrong datatype, or infer a subclass relationship between two classes explicitly declared disjoint, it simply would not complain if one says that every vehicle registration has an owner’s first name and last name, and then fails to supply those values. 
<a id="hevea_default40"></a>
OWL is designed for an <em>open world</em> semantics, which means that it won’t conclude anything (e.g., signaling missing data) based on the absence of provided data. 
The absence of evidence is not evidence of absence.</p><p><a id="hevea_default41"></a>
Another four years later in 2008, the RDF community assembled to deliver a query language (SPARQL) to meet the most elementary of application needs, accessing data. 
The language met immediately with overwhelming acceptance and adoption. 
This ability to query led to the development of many new applications, as well as databases and libraries designed to facilitate application development. 
This energy led to the expansion of SPARQL 1.1 into update (analogous to SQL DDL) and HTTP protocol. 
It did not, however, elegantly solve the problem of RDF data description and verification. </p>
<!--TOC section id="sec19" RDF Data Model-->
<h2 class="section" id="sec19">2.2  RDF Data Model</h2><!--SEC END --><p> 
<a id="ch020RDFDataModel"></a>
<a id="ch2.sec2"></a></p><p><a id="hevea_default42"></a>
When RDF was created in 1997, XML was quickly becoming a popular format. 
It had a strong influence on the RDF syntax which was called RDF/XML. 
That format is quite verbose and there appeared several proposals to have a more human-readable syntax for RDF.</p><p><a id="hevea_default43"></a>
<a id="hevea_default44"></a>
<a id="hevea_default45"></a>
<a id="hevea_default46"></a>
<a id="hevea_default47"></a>
<a id="hevea_default48"></a>
<a id="hevea_default49"></a>
In 2014, RDF 1.1 [<a href="#RDF11">25</a>] was published as a revised version which maintained most of the data model and added support for other serialization formats like Turtle [<a href="#Turtle">78</a>], Trig [<a href="#Trig">18</a>], or JSON-LD [<a href="#JSONLD">5</a>].</p><p>In this section we give a short overview of the RDF data model following the RDF 1.1 definitions and using Turtle as the serialization format. </p><p><a id="hevea_default50"></a> 
<a id="hevea_default51"></a> 
<a id="hevea_default52"></a> 
<a id="hevea_default53"></a> 
<a id="hevea_default54"></a> 
<a id="hevea_default55"></a> 
<a id="hevea_default56"></a>
The RDF data model is based on the concept of triples. 
Each triple consists of a subject, a predicate and an object. 
RDF triples are usually depicted as a directed arc connecting two nodes (subject and object) by an edge (predicate) (see Figure <a href="#ch020.RDFTriple">2.2</a>). </p><blockquote class="figure"><div class="center"><hr class="c021"></div> 

<div class="center">
<img src="RDFTriple1.png">
</div>

<a id="ch020.RDFTriple"></a>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Figure 2.1: Example of RDF triple.</td></tr>
</table></div>
<div class="center"><hr class="c021"></div></blockquote><p><a id="hevea_default57"></a>
An RDF triple asserted means that some relationship, indicated by the predicate, holds between the resources denoted by the subject and object. 
This is known as an RDF statement. 
The predicate is an IRI that denotes a property. 
An RDF statement can be thought of as a binary relation identified by the property between the subject and object.</p><p>There can be three kinds of nodes: IRIs, literals, and blank nodes. </p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default58"></a> <a id="hevea_default59"></a> <a id="hevea_default60"></a>
</p>An IRI (Internationalized Resource Identifier) [<a href="#IRIs">34</a>] refers to a resource (the referent). 
A resource can be any thing. 
IRIs can appear as subjects, predicates and objects. 
In Turtle, IRIs are enclosed by 
<code>&lt;</code> and 
<code>&gt;</code>. 
For example, an IRI can be 
<code>&lt;</code><code><span class="c006">http</span></code><code>://</code><code><span class="c006">example</span></code><code>.</code><code><span class="c004">org</span></code><code>/</code><code><span class="c006">john</span></code><code>&gt;</code>. <p>	
<a id="hevea_default61"></a> <a id="hevea_default62"></a> <a id="hevea_default63"></a> <a id="hevea_default64"></a>
Most RDF formats include some mechanism called prefix declaration which enables to simplify writing long IRIs declaring prefix labels. 
A prefix label associates an alias with an IRI and enables the definition of prefixed names. 
A prefixed name contains a prefix label and a local part separated by 
<code>:</code> and 
represents the IRI formed by concatenating the IRI associated with the prefix label and the local part.
For example, if 
<code><span class="c004">ex</span></code> is declared as a prefix label to represent 

<code>&lt;</code><code><span class="c006">http</span></code><code>://</code><code><span class="c006">example</span></code><code>.</code><code><span class="c004">org</span></code><code>/&gt;</code>, 
then 
<code><span class="c004">ex</span></code><code>:</code><code><span class="c006">alice</span></code> is a prefixed name that represents 

<code>&lt;</code><code><span class="c006">http</span></code><code>://</code><code><span class="c006">example</span></code><code>.</code><code><span class="c004">org</span></code><code>/</code><code><span class="c006">alice</span></code><code>&gt;</code> (see Figure <a href="#ch020.PrefixDeclaration">2.2</a>).</p><p>	
</p><blockquote class="figure"><div class="center"><hr class="c021"></div> 

<div class="center">
<img src="PrefixDeclaration.png">
</div>

<a id="ch020.PrefixDeclaration"></a>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Figure 2.2: Example of prefix declaration.</td></tr>
</table></div>
<div class="center"><hr class="c021"></div></blockquote><p><a id="hevea_default65"></a> 
<a id="hevea_default66"></a> 
<a id="hevea_default67"></a> 
<a id="hevea_default68"></a> 
<a id="hevea_default69"></a>
There are some popular namespace aliases like 
<code><span class="c004">rdf</span></code>, 
<code><span class="c004">xsd</span></code>, 
<code><span class="c004">rdfs</span></code>, 
<code><span class="c004">owl</span></code>, etc. 
The <a href="http://prefix.cc"><span class="c010">http://prefix.cc</span></a> service can be used to lookup the IRI associated with those popular aliases. 
The snippets of code used in this book assume these prefix declarations.
Table <a href="#ch010.Namespaces">1.1</a></p><p><a id="hevea_default70"></a> <a id="hevea_default71"></a> <a id="hevea_default72"></a>
</p></li><li class="li-itemize">A literal denotes resources which have an associated value, for example, an integer or string value. 
Literals can only appear as objects in triples. 	
They contain a lexical form and a datatype IRI which are represented as 
<code><code>"lexicalForm"</code></code><code>^^</code><code><span class="c006">datatype</span></code> in Turtle.
For example: 
<code><code>"23"</code></code><code>^^</code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">integer</span></code> represents an integer with value 
<code>23</code> and 
<code><code>"1980-03-01"</code></code><code>^^</code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">date</span></code> represents the March 1, 1980.<p><a id="ch020RDFStringLiterals"></a>
<a id="hevea_default73"></a>
<a id="hevea_default74"></a>
All literals in RDF have an associated datatype. 
In the case of string literals with no declared datatype, it is assumed the 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code> datatype by default. 
So 
<code><code>"hi"</code></code> is the same as 
<code><code>"hi"</code></code><code>^^</code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code>.
	</p><p><a id="hevea_default75"></a> <a id="hevea_default76"></a>
A special type of literals are language-tagged strings, which are literals with datatype 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">langString</span></code> that also contain a language tag [<a href="#BCP47">75</a>] to identify a specific language. 
Language-tagged strings are represented in Turtle as 
<code><code>"string"</code></code><code><span class="c006">@tag</span></code>. 
For example: 
<code><code>"hola"</code></code><code><span class="c006">@es</span></code> represents the literal value 
<code><code>"hola"</code></code> written in Spanish (
<code><span class="c006">es</span></code>).</p><p><a id="hevea_default77"></a>
</p></li><li class="li-itemize">Blank nodes are local identifiers which do not identify specific resources. 
Blank nodes can be used as subjects or objects of triples.
They specify that something with the given relationship exists, without explicitly naming it. 
	
In Turtle, blank nodes can be denoted by an underscore followed by a colon and a local identifier. 
For example: 
<code><span class="c006">_</span></code><code>:</code><code><span class="c006">id</span></code> represents a blank node.
	
</li></ul><p><a id="hevea_default78"></a> <a id="defn:RDFGraph"></a>	
An RDF graph is a set of RDF triples. 
Notice that the edges of RDF graphs can only be IRIs. 
This is an important feature of RDF that enables to globally identify the predicates asserted by triples. 
The subjects can only be IRIs or blank nodes, while the objects can be IRIs, blank nodes or literals.</p><div class="example"><div class="theorem"><span class="c013">Example 1</span>  <em>Simple RDF file in Turtle</em><em> 
</em><a id="ch020.exampleTurtleNotSimplified"></a><p><em>The following code represents an RDF graph in Turtle. 
The first three lines are prefix declarations and the rest 
represent a sequence of RDF triples separated by dots.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:     </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.org/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://schema.org/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">dbr</span></span></em><em><span class="c011">:    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://dbpedia.org/resource/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"1980-03-10"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthPlace</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">dbr</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Oviedo</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthPlace</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">dbr</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Oviedo</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div><p>The corresponding RDF graph has been depicted in Figure <a href="#ch020.RDFGraph">2.2</a>. 
Rounded boxes represent IRIs while orange rectangles represent literals.</p><blockquote class="figure"><div class="center"><hr class="c021"></div> 

<div class="center">
<img src="RDFGraph.png">
</div>

<a id="ch020.RDFGraph"></a>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Figure 2.3: Example of an RDF graph.</td></tr>
</table></div>
<div class="center"><hr class="c021"></div></blockquote><p><a id="hevea_default79"></a>
Blank nodes can be used to make assertions about some elements whose IRIs are not known. </p><div class="example"><div class="theorem"><span class="c013">Example 2</span>  <em>Blank nodes in RDF</em><em> 
</em><a id="ch020BlankNodesExample"></a><p><em>The following RDF Turtle code declares that </em><em>
</em><code><em><span class="c004">ex</span></em></code><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> knows someone 
who knows </em><em>
</em><code><em><span class="c004">ex</span></em></code><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em>, 
and that </em><em>
</em><code><em><span class="c004">ex</span></em></code><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> knows someone who was born in the same place as </em><em>
</em><code><em><span class="c006">dave</span></em></code><em>, whose age is 23. The graph is depicted in figure </em><a href="#ch020.RDFGraphBlankNodes"><em>2</em></a><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:     </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.org/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://schema.org/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">dbr</span></span></em><em><span class="c011">:    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://dbpedia.org/resource/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">y</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">y</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthPlace</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">z</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">age</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"23"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">integer</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthPlace</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">z</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 

</em><div class="center"><em>
<img src="RDFGraphBlankNodes.png">
</em></div><em>

</em><a id="ch020.RDFGraphBlankNodes"></a><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 2.4: Example of an RDF graph with blank nodes.</em></td></tr>
</table></div><em>
</em><div class="center"><hr class="c021"></div></blockquote></div></div><p>An important feature of RDF graphs is that two independent RDF graphs can automatically be merged to obtain a larger RDF graph formed by the union on their sets of triples. 
Given the global nature of IRIs, nodes with the same IRI are automatically unified.
Using shared IRIs makes the powerful statement the entities and relationships in one graph carry the same intent as they do in the other graphs using the same identifiers.
In a sense, the use of RDF gets rid of the data merging problem and lets us focus on the hard problems of establishing shared entities and vocabularies.</p><p>For example, the union of the RDF graphs from Figures <a href="#ch020.RDFGraph">2.2</a> 
and <a href="#ch020.RDFGraphBlankNodes">2</a> is depicted in Figure <a href="#ch020.RDFGraphMerged">2.2</a>.
<a id="hevea_default80"></a>
Turtle contains several simplifications to facilitate readability.</p><blockquote class="figure"><div class="center"><hr class="c021"></div> 

<div class="center">
<img src="RDFGraphMerged.png">
</div>

<a id="ch020.RDFGraphMerged"></a>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Figure 2.5: Merged RDF graph.</td></tr>
</table></div>
<div class="center"><hr class="c021"></div></blockquote><ul class="itemize"><li class="li-itemize"> 
When the subject is repeated, it is possible to use predicate lists collapsing the triples with the same subject and to omit it separating the different predicates and objects by semicolons (
<code>;</code>). So, instead of writing <table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c004">ex</span></span><span class="c011">:</span><span class="c011"><span class="c006">bob</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011">        </span><span class="c011"><span class="c005"><span class="c011">"Robert"</span></span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011"><span class="c004">ex</span></span><span class="c011">:</span><span class="c011"><span class="c006">bob</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">birthDate</span></span><span class="c011">   </span><span class="c011"><span class="c005"><span class="c011">"1980-03-10"</span></span></span><span class="c011">^^</span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">date</span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011"><span class="c004">ex</span></span><span class="c011">:</span><span class="c011"><span class="c006">bob</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">birthPlace</span></span><span class="c011">  </span><span class="c011"><span class="c004">dbr</span></span><span class="c011">:</span><span class="c011"><span class="c006">Oviedo</span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011"><span class="c004">ex</span></span><span class="c011">:</span><span class="c011"><span class="c006">bob</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">knows</span></span><span class="c011">       </span><span class="c011"><span class="c004">ex</span></span><span class="c011">:</span><span class="c011"><span class="c006">carol</span></span><span class="c011"> .</span></td></tr>
</table><p>it is possible to write:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c004">ex</span></span><span class="c011">:</span><span class="c011"><span class="c006">bob</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011">        </span><span class="c011"><span class="c005"><span class="c011">"Robert"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">       </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">birthDate</span></span><span class="c011">   </span><span class="c011"><span class="c005"><span class="c011">"1980-03-10"</span></span></span><span class="c011">^^</span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">date</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">       </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">birthPlace</span></span><span class="c011">  </span><span class="c011"><span class="c004">dbr</span></span><span class="c011">:</span><span class="c011"><span class="c006">Oviedo</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">       </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">knows</span></span><span class="c011">       </span><span class="c011"><span class="c004">ex</span></span><span class="c011">:</span><span class="c011"><span class="c006">carol</span></span><span class="c011"> .</span></td></tr>
</table><p><a id="hevea_default81"></a>
</p></li><li class="li-itemize">When the subject and predicate are the same, it is possible to use object lists collapsing the subjects and predicates and separating the different objects by commas (
<code>,</code>).<p>Instead of writing </p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c004">ex</span></span><span class="c011">:</span><span class="c011"><span class="c006">carol</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">knows</span></span><span class="c011"> </span><span class="c011"><span class="c004">ex</span></span><span class="c011">:</span><span class="c011"><span class="c006">alice</span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011"><span class="c004">ex</span></span><span class="c011">:</span><span class="c011"><span class="c006">carol</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">knows</span></span><span class="c011"> </span><span class="c011"><span class="c004">ex</span></span><span class="c011">:</span><span class="c011"><span class="c006">bob</span></span><span class="c011"> .</span></td></tr>
</table><p>it is possible to write:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c004">ex</span></span><span class="c011">:</span><span class="c011"><span class="c006">carol</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">knows</span></span><span class="c011"> </span><span class="c011"><span class="c004">ex</span></span><span class="c011">:</span><span class="c011"><span class="c006">alice</span></span><span class="c011">, </span><span class="c011"><span class="c004">ex</span></span><span class="c011">:</span><span class="c011"><span class="c006">bob</span></span><span class="c011"> .</span></td></tr>
</table><p>	
</p><div class="example"><div class="theorem"><span class="c013">Example 3</span>  <em>Turtle simplifications</em><em>
</em><a id="ch020.exampleTurtleSimplified"></a><p><em>The RDF graph represented in Example </em><a href="#ch020.exampleTurtleNotSimplified"><em>1</em></a><em> can be simplified as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://schema.org/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:     </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.org/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">dbr</span></span></em><em><span class="c011">:    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://dbpedia.org/resource/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"1980-03-10"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthPlace</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">dbr</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Oviedo</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthPlace</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">dbr</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Oviedo</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011">, </span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div></li><li class="li-itemize">Although number and Boolean literals can be defined like other literals with their lexical form and datatype, there is also a shorthand syntax in Turtle to automatically parse some values as literals. 
Table <a href="#ch020.NumbersBooleansTurtle">2.1</a> shows how some values in shorthand notation are parsed as literals.<blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 2.1: Shorthand syntax for numbers and Booleans in Turtle</td></tr>
</table></div>
<a id="ch020.NumbersBooleansTurtle"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c015"> <span class="c013">Datatype</span></td><td class="c016"><span class="c013">Shorthand example</span></td><td class="c016"><span class="c013">Lexical example
</span></td></tr>
<tr><td class="c015"> 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">integer</span></code></td><td class="c016">
<code>-3</code></td><td class="c016">
<code><code>"-3"</code></code><code>^^</code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">integer</span></code> 
</td></tr>
<tr><td class="c015"> 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">decimal</span></code></td><td class="c016">
<code>-3.14</code></td><td class="c016">
<code><code>"-3.14"</code></code><code>^^</code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">decimal</span></code> 
</td></tr>
<tr><td class="c015"> 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">double</span></code></td><td class="c016">
<code>3.14</code><code><span class="c006">e2</span></code></td><td class="c016">
<code><code>"3.14e2"</code></code><code>^^</code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">double</span></code>
</td></tr>
<tr><td class="c015"> 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">boolean</span></code></td><td class="c016">
<code><span class="c003">true</span></code></td><td class="c016">
<code><code>"true"</code></code><code>^^</code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">boolean</span></code> 
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote></li><li class="li-itemize"><a id="hevea_default82"></a>
A triple of the form 
<code><span class="c006">X</span></code><code> </code><code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code><code> </code><code><span class="c006">Y</span></code> asserts that 
<code><span class="c006">X</span></code> has the type 
represented by 
<code><span class="c006">Y</span></code>. 
In Turtle, 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> can also be represented by the token 
<code><span class="c003">a</span></code>, so the previous triple could also be represented as 
<code><span class="c006">X</span></code><code> </code><code><span class="c003">a</span></code><code> </code><code><span class="c006">Y</span></code>.<p><a id="ch020RDFLists"></a>
<a id="hevea_default83"></a>
<a id="hevea_default84"></a>
<a id="hevea_default85"></a>
<a id="hevea_default86"></a>
<a id="hevea_default87"></a>
</p></li><li class="li-itemize">RDF collections are list structures chained by the 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">rest</span></code> that end with 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">nil</span></code> and whose values are declared by each value of the 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">first</span></code> property. <div class="example"><div class="theorem"><span class="c013">Example 4</span>  <em>RDF collections not simplified</em><em>
</em><a id="ch020.exampleTurtleCollectionSimple"></a><p><em>The following snippet declares the results of a marathon as an RDF Collection:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">m23</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"New York City Marathon"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">results</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:1 .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:1 </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">first</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:1 </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">rest</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:2 .</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:2 </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">first</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:2 </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">rest</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:3 .</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:3 </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">first</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:3 </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">rest</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nil</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>Turtle has a special notation for RDF collections enumerating the values enclosed by round brackets.
The previous example can also be represented in Turtle as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">m23</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"New York City Marathon"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">results</span></span></em><em><span class="c011">    (:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">) .</span></em></td></tr>
</table><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 

</em><div class="center"><em>
<img src="RDFCollections.png">
</em></div><em>

</em><a id="ch020.RDFCollections"></a><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 2.6: RDF collection example.</em></td></tr>
</table></div><em>
</em><div class="center"><hr class="c021"></div></blockquote></div></div></li><li class="li-itemize">Fresh blank nodes in Turtle can also be represented by using square brackets (
<code>[</code> and 
<code>]</code>). 
In this way, Example <a href="#ch020BlankNodesExample">2</a> can be rewritten as follows.<div class="example"><div class="theorem"><span class="c013">Example 5</span>  <em>Blank nodes with square brackets</em><em>
	
</em><em>

</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">  [ </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">age</span></span></em><em><span class="c011">         23 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">                          </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthPlace</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011">
</span></em><em><span class="c011">                        ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthPlace</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">  [ </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">ex</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><em>	
</em></div></div></li></ul><p>The RDF data model is very simple. 
This simplicity if part of its power as it enables RDF to be used as a data representation language in a lot of scenarios.</p>
<!--TOC section id="sec20" Shared Entites and Vocabularies-->
<h2 class="section" id="sec20">2.3  Shared Entites and Vocabularies</h2><!--SEC END --><p>
<a id="ch2.sec3"></a>
<a id="hevea_default88"></a>
<a id="hevea_default89"></a></p><p>One of RDF strengths is to promote the use of IRIs instead of plain strings to facilitate merging data from heterogeneous sources and 
to avoid ambiguity. 
This poses the challenge of agreeing on common entities and relationships. 
Usually, those sets of entities and relationships are grouped in vocabularies
which can be general-purpose or domain specific. </p><p><a id="hevea_default90"></a> <a id="hevea_default91"></a> <a id="hevea_default92"></a> <a id="hevea_default93"></a> <a id="hevea_default94"></a>
There are several well-known vocabularies like 
<code><span class="c004">schema</span></code><code>.</code><code><span class="c004">org</span></code> which is a collaborative, community activity founded by Google, Microsoft, Yahoo, and Yandex that promotes the use of common structured data on the internet. </p><p><a id="hevea_default95"></a>
An interesting project is the 
LOV (Linked Open Vocabularies)<sup><a id="text2" href="#note2">1</a></sup> 
project that collects open vocabularies and provides a vocabulary search engine. </p><p>Shared identifiers are frequently minted by some authority releasing data using those identifiers followed by community uptake of those identifiers.
<a id="hevea_default96"></a>
Services like <a href="http://identifiers.org/"><span class="c010">http://identifiers.org/</span></a> publish these identifiers and, in the frequent case where multiple identifiers exist for the same entity, map between them.
<a id="hevea_default97"></a>
The property 
<code><span class="c004">owl</span></code><code>:</code><code><span class="c006">sameIndividualAs</span></code> can be used to assert that mapping.</p><p>Consensus on vocabularies is typically by communities producing human-readable specifications, which is accompanied by some descriptions of the terms in the vocabulary using RDF Schema (see Section <a href="#RDFSchema">2.4.2</a>).
Ontologies take this a step further by providing much more powerful inference and can be used to detect some errors in the conceptual model (for instance, if a vehicle registration conflated a car with its owner).</p><p>As we share more models, we implicitly raise our expectations for the accuracy of these models.
<a id="hevea_default98"></a>
George Box stated in 1976 that <em>all models are wrong but some are useful</em> [<a href="#Box1976">15</a>].
Raising the bar for these models means we expect them to be useful in more situations than they were originally designed for.</p><p>Something as apparently simple as schema.org’s 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">gender</span></code> offers a simple model for a complex issue.
For at least 90% of the population, the model’s terms 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">Male</span></code> and 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">Female</span></code> suffice.
Extending that to 99% or 99.9% of the population we see these terms are insufficient for the many variations in both identity and biology.
Schema.org extends the model for these cases by permitting a string value.
<a id="hevea_default99"></a> <a id="hevea_default100"></a>
FHIR HL7 (see Section <a href="#ch060FHIR">6.2</a>) standards use a concept of <em>administrative gender</em>, which adds two other possibilities.</p><p>For simplicity in this chapter and the next, we will use a notion of 
<code><span class="c006">gender</span></code> which is constrained to 
<code><span class="c006">male</span></code> and 
<code><span class="c006">female</span></code>.
In later chapters we will use this to show how RDF validation languages can use the extended value set to provide coverage for more use cases.</p>
<!--TOC section id="sec21" Technologies Related with RDF-->
<h2 class="section" id="sec21">2.4  Technologies Related with RDF</h2><!--SEC END --><p>
<a id="ch2.sec4"></a></p><p>RDF was created as a language on which other technologies could be based on. 
<a id="hevea_default101"></a>
The semantic web stack (also called layer cake) illustrates a hierarchy of technologies where RDF plays a central role. 
Although that stack is still evolving, there are two concepts that are worth mentioning: SPARQL and inference systems.</p>
<!--TOC subsection id="sec22" SPARQL-->
<h3 class="subsection" id="sec22">2.4.1  SPARQL</h3><!--SEC END --><p> 
<a id="SPARQL"></a>
<a id="ch2.sec4.1"></a>
	
<a id="hevea_default102"></a>
SPARQL (SPARQL Protocol and RDF Query Language) is an RDF query language which is able to retrieve and manipulate data stored in RDF. 
SPARQL 1.0 became a recommendation in 2008 [<a href="#SPARQL10">79</a>] and SPARQL 1.1 was published in 2013 [<a href="#SPARQL11">44</a>]. </p><p><a id="hevea_default103"></a>
SPARQL is based on the notion of Basic Graph Patterns which are sets of triple patterns. 
<a id="hevea_default104"></a> <a id="hevea_default105"></a>
A triple pattern is an extension of an RDF triple where some of the elements can be variables which are denoted by a question mark.</p><p>A Basic Graph Pattern matches a subgraph of the RDF data when RDF terms from that subgraph may be substituted for the variables 
and the result is an RDF graph equivalent to the subgraph.</p><div class="example"><div class="theorem"><span class="c013">Example 6</span>  <em>Simple SPARQL query</em><p><em>The following SPARQL query retrieves the nodes </em><em>
</em><code><em>?</em></code><code><em><span class="c006">x</span></em></code><em> whose birth place is </em><em>
</em><code><em><span class="c004">dbr</span></em></code><code><em>:</em></code><code><em><span class="c006">Oviedo</span></em></code><em> and the nodes </em><em>
</em><code><em>?</em></code><code><em><span class="c006">y</span></em></code><em> that are known by them.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c003">prefix</span></span></em><em><span class="c011"> :       &lt;</span></em><em><span class="c011"><span class="c006">http</span></span></em><em><span class="c011">://</span></em><em><span class="c011"><span class="c006">example</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c004">org</span></span></em><em><span class="c011">/&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c003">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">: &lt;</span></em><em><span class="c011"><span class="c006">http</span></span></em><em><span class="c011">://</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c004">org</span></span></em><em><span class="c011">/&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c003">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">dbr</span></span></em><em><span class="c011">:    &lt;</span></em><em><span class="c011"><span class="c006">http</span></span></em><em><span class="c011">://</span></em><em><span class="c011"><span class="c006">dbpedia</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c004">org</span></span></em><em><span class="c011">/</span></em><em><span class="c011"><span class="c006">resource</span></span></em><em><span class="c011">/&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c003">SELECT</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">y</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">WHERE</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthPlace</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">dbr</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Oviedo</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">      ?</span></em><em><span class="c011"><span class="c006">y</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>Applying the previous SPARQL query to the RDF data defined in 
Example </em><a href="#ch020.RDFGraph"><em>2.2</em></a><em>, a 
SPARQL processor would return the results shown in Table </em><a href="#ch020.SPARQLQueryResults"><em>2.2</em></a><em>.</em></p><blockquote class="table"><div class="center"><hr class="c021"></div><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Table 2.2: Results of SPARQL query</em></td></tr>
</table></div><em>
</em><a id="ch020.SPARQLQueryResults"></a><em> 
</em><div class="center"><em>
</em><table class="c000 cellpadding1" border=1><tr><td class="c016"><em> </em><em>
</em><code><em>?</em></code><code><em><span class="c006">x</span></em></code></td><td class="c016"><em>
</em><code><em>?</em></code><code><em><span class="c006">y</span></em></code><em> 
</em></td></tr>
<tr><td class="c016"><em> </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code></td><td class="c016"><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> 
</em></td></tr>
<tr><td class="c016"><em> </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code></td><td class="c016"><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> 
</em></td></tr>
<tr><td class="c016"><em> </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code></td><td class="c016"><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> 
</em></td></tr>
</table><em>
</em></div><em>
</em><div class="center"><hr class="c021"></div></blockquote></div></div><p>SPARQL queries consist of three parts [<a href="#SemanticsSPARQL09">73</a>]. </p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default106"></a>
<a id="hevea_default107"></a>
</p>A pattern matching part which includes operators to operate on graphs like optional parts, union of patterns, 
nesting, and filtering values. <p><a id="hevea_default108"></a>
<a id="hevea_default109"></a>
<a id="hevea_default110"></a>
</p></li><li class="li-itemize">Solution modifiers, which once the output of the pattern has been computed as a table of variables/values, 
modify those values applying operators like projection, distinct, order, limit, offset, grouping, etc.</li><li class="li-itemize">The output of SPARQL queries can be of different types like:
<a id="hevea_default111"></a>
ASK queries, which return yes/no depending on the existence of matching values,
<a id="hevea_default112"></a> 
SELECT queries that return a selection of values for the variables that match a pattern and
<a id="hevea_default113"></a>
CONSTRUCT queries, which return the triples generated from the values that match the pattern. 
</li></ul><div class="example"><div class="theorem"><span class="c013">Example 7</span>  <em>SPARQL query with Filter and Counts</em><p><em>The following SPARQL query returns people who know only one value. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c003">SELECT</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">person</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">known</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">person</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">known</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c003">SELECT</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">person</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><span class="c003">count</span></span></em><em><span class="c011">(*) </span></em><em><span class="c011"><span class="c003">as</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">countKnown</span></span></em><em><span class="c011">) {</span></em><em><span class="c011">
</span></em><em><span class="c011">    ?</span></em><em><span class="c011"><span class="c006">person</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">known</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">  } </span></em><em><span class="c011"><span class="c003">GROUP</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">BY</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">person</span></span></em><em><span class="c011">
</span></em><em><span class="c011"> }</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">FILTER</span></span></em><em><span class="c011"> (?</span></em><em><span class="c011"><span class="c006">countKnown</span></span></em><em><span class="c011"> = 1)</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>It contains a nested query (lines 3–5) which groups each element with the number of known entries and a filter (line 8) which removes those elements whose counter is different to one. </em></p></div></div><p>A full introduction to SPARQL is out of the scope of this book.
For the interested reader, we recommend [<a href="#DuCharme2011">33</a>]. </p><p>SPARQL is a very expressive language which can be used to describe very complex queries. 
It can also be employed to validate the structure of complex RDF graphs [<a href="#Labra13">55</a>]. 
In Section <a href="#ch030.ValidatingWithSPARQL">23</a>, we describe how SPARQL can be used to validate RDF.</p>
<!--TOC subsection id="sec23" Inference Systems: RDF Schema and OWL-->
<h3 class="subsection" id="sec23">2.4.2  Inference Systems: RDF Schema and OWL</h3><!--SEC END --><p> 
<a id="RDFSchema"></a>
<a id="ch2.sec4.2"></a></p><p>RDF was designed so it could be used as a central piece for knowledge representation in the Web. 
The goal is that agents can automatically infer new knowledge in the form of new RDF statements from existing RDF graphs.
To that end, several technologies were proposed to increase RDF expressiveness.
In this section we will briefly review two of the most popular: RDF Schema and OWL. </p><p><a id="hevea_default114"></a>
</p>
<!--TOC subsubsection id="sec24" RDF Schema-->
<h4 class="subsubsection" id="sec24">RDF Schema</h4><!--SEC END --><p>
RDF Schema was proposed as a data-modeling vocabulary for RDF data. 
The first public working draft of RDF Schema appeared in 1998 [<a href="#RDFSchema1998">16</a>] and was accepted as a recommendation in 2004 [<a href="#RDFSchema2004">26</a>].</p><p>It is a semantic extension of RDF which provides mechanisms to describe groups of resources and relationships between them. 
It defines a set of common classes and properties.</p><p>The main classes defined in RDFS are:</p><p><a id="hevea_default115"></a>
<a id="hevea_default116"></a>
<a id="hevea_default117"></a>
<a id="hevea_default118"></a>
<a id="hevea_default119"></a>
</p><ul class="itemize"><li class="li-itemize">
	
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">Resource</span></code>: the class of everything
	</li><li class="li-itemize">
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">Class</span></code>: the class of all classes
	</li><li class="li-itemize">
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">Literal</span></code>: the class of all literal values
	</li><li class="li-itemize">
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">Datatype</span></code>: the class of all datatypes
	</li><li class="li-itemize">
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">Property</span></code>: the class of all properties
</li></ul><p><a id="hevea_default120"></a>
<a id="hevea_default121"></a>
<a id="hevea_default122"></a>
<a id="hevea_default123"></a>
<a id="hevea_default124"></a>
<a id="hevea_default125"></a>
<a id="hevea_default126"></a>
RDFS contains several properties like 

<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">label</span></code>, 

<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">comment</span></code>, 

<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">domain</span></code>, 

<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">range</span></code>,

<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code>,

<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">subClassOf</span></code> and

<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">subPropertyOf</span></code>. </p><div class="example"><div class="theorem"><span class="c013">Example 8</span>  <em>RDF Schema</em><em>
</em><a id="ch020exampleRDFSchema"></a><p><em>The following snippet contains some description about teachers and people using RDF Schema terms.
It declares that </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em> is an </em><em>
</em><code><em><span class="c004">rdfs</span></em></code><code><em>:</em></code><code><em><span class="c006">Class</span></em></code><em>, as well as </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Teacher</span></em></code><em>.
It also declares that the </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Teacher</span></em></code><em> class is a subclass of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em> which could be read as saying that every instance of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Teacher</span></em></code><em> is also an instance of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em>.</em></p><p><em>Finally, it declares that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">teaches</span></em></code><em> is a property that relates instances of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Teacher</span></em></code><em> with instances of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Course</span></em></code><em>, i.e., 
any two elements related by the property </em><em>
</em><code><em>:</em></code><code><em><span class="c006">teaches</span></em></code><em> will satisfy that the first is an </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Teacher</span></em></code><em> and the second a </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Course</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Class</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Class</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">subClassOf</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Property</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">domain</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">range</span></span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">Course</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>RDF Schema processors contain several rules that enable them to infer new RDF data. </em></p><p><em>For example, for any </em><em>
</em><code><em><span class="c006">C</span></em></code><code><em> </em></code><code><em><span class="c004">rdfs</span></em></code><code><em>:</em></code><code><em><span class="c006">subClassOf</span></em></code><code><em> </em></code><code><em><span class="c006">D</span></em></code><em> and </em><em>
</em><code><em><span class="c006">x</span></em></code><code><em> </em></code><code><em><span class="c003">a</span></em></code><code><em> </em></code><code><em><span class="c006">C</span></em></code><em> they can infer </em><em>
</em><code><em><span class="c006">x</span></em></code><code><em> </em></code><code><em><span class="c003">a</span></em></code><code><em> </em></code><code><em><span class="c006">D</span></em></code><em>, 
and for any </em><em>
</em><code><em><span class="c006">p</span></em></code><code><em> </em></code><code><em><span class="c004">rdfs</span></em></code><code><em>:</em></code><code><em><span class="c006">domain</span></em></code><code><em> </em></code><code><em><span class="c006">C</span></em></code><em> and </em><em>
</em><code><em><span class="c006">x</span></em></code><code><em> </em></code><code><em><span class="c006">p</span></em></code><code><em> </em></code><code><em><span class="c006">y</span></em></code><em> they can infer </em><em>
</em><code><em><span class="c006">x</span></em></code><code><em> </em></code><code><em><span class="c003">a</span></em></code><code><em> </em></code><code><em><span class="c006">C</span></em></code><em>.</em></p><p><em>If we apply those rules to the following data: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">        :</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">        :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">algebra</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>An RDFS processor could infer that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> have </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><code><em> :</em></code><code><em><span class="c006">Person</span></em></code><em> and that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">algebra</span></em></code><em> has </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><code><em> :</em></code><code><em><span class="c006">Course</span></em></code><em>.</em></p></div></div><p><a id="hevea_default127"></a> 
</p>
<!--TOC subsubsection id="sec25" OWL-->
<h4 class="subsubsection" id="sec25">OWL</h4><!--SEC END --><p> <a id="OWL"></a></p><p><a id="hevea_default128"></a> <a id="hevea_default129"></a>
OWL (Web Ontology Language) defines a vocabulary for expressing ontologies based on description logics. 
It was published as a W3C recommendation in 2004 [<a href="#Owl1">29</a>] and a new version, OWL 2, was accepted in 2009 [<a href="#OWL2">70</a>]. 
<a id="hevea_default130"></a>
<a id="hevea_default131"></a>
OWL has several syntaxes: an RDF-based syntax, functional-style Syntax, manchester syntax, etc., and a formally defined meaning.
We will use RDF syntax in the following examples with Turtle notation.</p><p>An ontology can be defined as a vocabulary of terms, usually about a specific domain and shared by a community of users. 
Ontologies specify the definitions of terms by describing their relationships with other terms in the ontology.</p><p>The main concepts in OWL are as follows. </p><p><a id="hevea_default132"></a>
<a id="hevea_default133"></a>
<a id="hevea_default134"></a></p><ul class="itemize"><li class="li-itemize">Classes, which represent sets of individuals.
Classes can be subclasses of other classes, with two special classes: 
<code><span class="c004">owl</span></code><code>:</code><code><span class="c006">Thing</span></code> that represents the set of all individuals and 
<code><span class="c004">owl</span></code><code>:</code><code><span class="c006">Nothing</span></code> that represents the empty set.<p><a id="hevea_default135"></a>
</p></li><li class="li-itemize">Individuals, which are elements in the domain.
Individuals can be members of an OWL class. <p><a id="hevea_default136"></a>
<a id="hevea_default137"></a>
<a id="hevea_default138"></a>
</p></li><li class="li-itemize">Properties, which represent relationships.
Properties are classified as datatype properties, object properties and annotation properties. 
Datatype properties relate an individual with a data value such as a string or integer. 
Object properties relate an individual with another individual. 
And Annotation properties encode information about the ontology itself 
(such as the author or the creation date of an ontology).<p><a id="hevea_default139"></a>
</p></li><li class="li-itemize">Constructors which allow to define complex concepts from other concepts using expressions. </li></ul><div class="example"><div class="theorem"><span class="c013">Example 9</span>  <em>OWL example</em><p><em>In the following example we declare two classes </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Man</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Woman</span></em></code><em> that have a property </em><em>
</em><code><em>:</em></code><code><em><span class="c006">gender</span></em></code><em> with the value </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Male</span></em></code><em> or </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Female</span></em></code><em>, respectively. </em></p><p><a id="hevea_default140"></a><em>
</em><a id="hevea_default141"></a><em>
</em><a id="hevea_default142"></a><em>
</em><a id="hevea_default143"></a><em>
</em><a id="hevea_default144"></a><em>
</em><a id="hevea_default145"></a></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011">Man</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">owl</span></em><em><span class="c011">:</span></em><em><span class="c011">Class</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">owl</span></em><em><span class="c011">:</span></em><em><span class="c011">equivalentClass</span></em><em><span class="c011">  [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">owl</span></em><em><span class="c011">:</span></em><em><span class="c011">intersectionOf</span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">   :</span></em><em><span class="c011">Person</span></em><em><span class="c011">
</span></em><em><span class="c011">   [ </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">owl</span></em><em><span class="c011">:</span></em><em><span class="c011">Restriction</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">owl</span></em><em><span class="c011">:</span></em><em><span class="c011">onProperty</span></em><em><span class="c011">  :</span></em><em><span class="c011">gender</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">owl</span></em><em><span class="c011">:</span></em><em><span class="c011">hasValue</span></em><em><span class="c011">    :</span></em><em><span class="c011">Male</span></em><em><span class="c011">
</span></em><em><span class="c011">   ] ) ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011">Woman</span></em><em><span class="c011">  </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">owl</span></em><em><span class="c011">:</span></em><em><span class="c011">Class</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">owl</span></em><em><span class="c011">:</span></em><em><span class="c011">equivalentClass</span></em><em><span class="c011">  [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">owl</span></em><em><span class="c011">:</span></em><em><span class="c011">intersectionOf</span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">   :</span></em><em><span class="c011">Person</span></em><em><span class="c011">
</span></em><em><span class="c011">   [ </span></em><em><span class="c011">a</span></em><em><span class="c011"> </span></em><em><span class="c011">owl</span></em><em><span class="c011">:</span></em><em><span class="c011">Restriction</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">owl</span></em><em><span class="c011">:</span></em><em><span class="c011">onProperty</span></em><em><span class="c011">  :</span></em><em><span class="c011">gender</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011">owl</span></em><em><span class="c011">:</span></em><em><span class="c011">hasValue</span></em><em><span class="c011">    :</span></em><em><span class="c011">Female</span></em><em><span class="c011">
</span></em><em><span class="c011">   ] ) ] .</span></em></td></tr>
</table><p><em>Now, we can define </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em> as the union of the </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Man</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Woman</span></em></code><em> classes, 
and to declare that those classes are disjoint.</em></p><p><a id="hevea_default146"></a><em>
</em><a id="hevea_default147"></a><em>
</em><a id="hevea_default148"></a><em>
</em><em>
</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011">Person</span></em><em><span class="c011">  </span></em><em><span class="c011">owl</span></em><em><span class="c011">:</span></em><em><span class="c011">equivalentClass</span></em><em><span class="c011">  [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">rdf</span></em><em><span class="c011">:</span></em><em><span class="c011">type</span></em><em><span class="c011">     </span></em><em><span class="c011">owl</span></em><em><span class="c011">:</span></em><em><span class="c011">Class</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">owl</span></em><em><span class="c011">:</span></em><em><span class="c011">unionOf</span></em><em><span class="c011">  ( :</span></em><em><span class="c011">Woman</span></em><em><span class="c011"> :</span></em><em><span class="c011">Man</span></em><em><span class="c011"> )</span></em><em><span class="c011">
</span></em><em><span class="c011">] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">[ </span></em><em><span class="c011">a</span></em><em><span class="c011">            </span></em><em><span class="c011">owl</span></em><em><span class="c011">:</span></em><em><span class="c011">AllDisjointClasses</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011">owl</span></em><em><span class="c011">:</span></em><em><span class="c011">members</span></em><em><span class="c011">  ( :</span></em><em><span class="c011">Woman</span></em><em><span class="c011">  :</span></em><em><span class="c011">Man</span></em><em><span class="c011"> )</span></em><em><span class="c011">
</span></em><em><span class="c011">] .</span></em></td></tr>
</table><p><em>Given the previous declarations, if we add the following instance data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011">alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">       :</span></em><em><span class="c011">Woman</span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011">gender</span></em><em><span class="c011"> :</span></em><em><span class="c011">Female</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011">bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011">       :</span></em><em><span class="c011">Man</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><a id="hevea_default149"></a><em>
An OWL reasoner can infer the following triples:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011">alice</span></em><em><span class="c011"> </span></em><em><span class="c011">a</span></em><em><span class="c011">       :</span></em><em><span class="c011">Person</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011">bob</span></em><em><span class="c011">   </span></em><em><span class="c011">a</span></em><em><span class="c011">       :</span></em><em><span class="c011">Person</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011">bob</span></em><em><span class="c011">   :</span></em><em><span class="c011">gender</span></em><em><span class="c011"> :</span></em><em><span class="c011">Male</span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div><p>OWL can be used to define ontologies in several domains and there are several tools like the Protégé editor [<a href="#Protege2015">66</a>] which provide facilities for the creation and visualization of large ontologies. </p><p><a id="hevea_default150"></a> <a id="hevea_default151"></a> <a id="hevea_default152"></a>
</p>
<!--TOC subsection id="sec26" Linked Data, JSON-LD, Microdata, and RDFa-->
<h3 class="subsection" id="sec26">2.4.3  Linked Data, JSON-LD, Microdata, and RDFa</h3><!--SEC END --><p>
<a id="ch2.sec4.3"></a></p><p>As we mentioned in Section <a href="#LinkedDataPrinciples">1.1</a>, one of the principles of linked data is to provide useful information when dereferencing a URI, using standards 
such as RDF. 
<a id="hevea_default153"></a>
The goal is to return not only human-readable content like HTML that a machine can only represent in a browser, 
but also some machine understandable content in RDF which can be automatically processed.</p><p>There are two main possibilities: 
return different representations of the same resource using content negotiation, 
or return the same representation with RDF embedded. </p><p><a id="hevea_default154"></a>
The first approach can be easier to implement because developers have several mechanisms to transform a resource to different representations on the fly. 
A popular format nowadays is JSON-LD which is a JSON-based representation of RDF. </p><div class="example"><div class="theorem"><span class="c013">Example 10</span>  <em>JSON-LD example</em><p><em>The Turtle Example </em><a href="#ch020.exampleTurtleNotSimplified"><em>1</em></a><em> can be represented in JSON-LD as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">{"</span></em><em><span class="c011">@context</span></em><em><span class="c011">": {</span></em><em><span class="c011">
</span></em><em><span class="c011">   "</span></em><em><span class="c011">ex</span></em><em><span class="c011">": "</span></em><em><span class="c011">http</span></em><em><span class="c011">://</span></em><em><span class="c011">example</span></em><em><span class="c011">.</span></em><em><span class="c011">org</span></em><em><span class="c011">/",</span></em><em><span class="c011">
</span></em><em><span class="c011">   "</span></em><em><span class="c011">schema</span></em><em><span class="c011">": "</span></em><em><span class="c011">http</span></em><em><span class="c011">://</span></em><em><span class="c011">schema</span></em><em><span class="c011">.</span></em><em><span class="c011">org</span></em><em><span class="c011">/",</span></em><em><span class="c011">
</span></em><em><span class="c011">   "</span></em><em><span class="c011">dbr</span></em><em><span class="c011">": "</span></em><em><span class="c011">http</span></em><em><span class="c011">://</span></em><em><span class="c011">dbpedia</span></em><em><span class="c011">.</span></em><em><span class="c011">org</span></em><em><span class="c011">/</span></em><em><span class="c011">resource</span></em><em><span class="c011">/",</span></em><em><span class="c011">
</span></em><em><span class="c011">   "</span></em><em><span class="c011">xsd</span></em><em><span class="c011">": "</span></em><em><span class="c011">http</span></em><em><span class="c011">://</span></em><em><span class="c011">www</span></em><em><span class="c011">.</span></em><em><span class="c011">w3</span></em><em><span class="c011">.</span></em><em><span class="c011">org</span></em><em><span class="c011">/2001/</span></em><em><span class="c011">XMLSchema</span></em><em><span class="c011">#",</span></em><em><span class="c011">
</span></em><em><span class="c011">   "</span></em><em><span class="c011">name</span></em><em><span class="c011">":       { "</span></em><em><span class="c011">@id</span></em><em><span class="c011">": "</span></em><em><span class="c011">schema</span></em><em><span class="c011">:</span></em><em><span class="c011">name</span></em><em><span class="c011">" },</span></em><em><span class="c011">
</span></em><em><span class="c011">   "</span></em><em><span class="c011">birthDate</span></em><em><span class="c011">":  { "</span></em><em><span class="c011">@id</span></em><em><span class="c011">": "</span></em><em><span class="c011">schema</span></em><em><span class="c011">:</span></em><em><span class="c011">birthDate</span></em><em><span class="c011">", "</span></em><em><span class="c011">@type</span></em><em><span class="c011">": "</span></em><em><span class="c011">xsd</span></em><em><span class="c011">:</span></em><em><span class="c011">date</span></em><em><span class="c011">" },</span></em><em><span class="c011">
</span></em><em><span class="c011">   "</span></em><em><span class="c011">birthPlace</span></em><em><span class="c011">": { "</span></em><em><span class="c011">@id</span></em><em><span class="c011">": "</span></em><em><span class="c011">schema</span></em><em><span class="c011">:</span></em><em><span class="c011">birthPlace</span></em><em><span class="c011">" },</span></em><em><span class="c011">
</span></em><em><span class="c011">   "</span></em><em><span class="c011">knows</span></em><em><span class="c011">":      { "</span></em><em><span class="c011">@id</span></em><em><span class="c011">": "</span></em><em><span class="c011">schema</span></em><em><span class="c011">:</span></em><em><span class="c011">knows</span></em><em><span class="c011">" }</span></em><em><span class="c011">
</span></em><em><span class="c011">  },</span></em><em><span class="c011">
</span></em><em><span class="c011"> "</span></em><em><span class="c011">@graph</span></em><em><span class="c011">": [</span></em><em><span class="c011">
</span></em><em><span class="c011">    { "</span></em><em><span class="c011">@id</span></em><em><span class="c011">": "</span></em><em><span class="c011">ex</span></em><em><span class="c011">:</span></em><em><span class="c011">alice</span></em><em><span class="c011">",</span></em><em><span class="c011">
</span></em><em><span class="c011">     "</span></em><em><span class="c011">knows</span></em><em><span class="c011">": {"</span></em><em><span class="c011">@id</span></em><em><span class="c011">": "</span></em><em><span class="c011">ex</span></em><em><span class="c011">:</span></em><em><span class="c011">bob</span></em><em><span class="c011">" }</span></em><em><span class="c011">
</span></em><em><span class="c011">    },</span></em><em><span class="c011">
</span></em><em><span class="c011">    {"</span></em><em><span class="c011">@id</span></em><em><span class="c011">": "</span></em><em><span class="c011">ex</span></em><em><span class="c011">:</span></em><em><span class="c011">bob</span></em><em><span class="c011">",</span></em><em><span class="c011">
</span></em><em><span class="c011">     "</span></em><em><span class="c011">name</span></em><em><span class="c011">": "</span></em><em><span class="c011">Robert</span></em><em><span class="c011">",</span></em><em><span class="c011">
</span></em><em><span class="c011">     "</span></em><em><span class="c011">knows</span></em><em><span class="c011">": {"</span></em><em><span class="c011">@id</span></em><em><span class="c011">": "</span></em><em><span class="c011">ex</span></em><em><span class="c011">:</span></em><em><span class="c011">carol</span></em><em><span class="c011">"},</span></em><em><span class="c011">
</span></em><em><span class="c011">     "</span></em><em><span class="c011">birthDate</span></em><em><span class="c011">": "1980-03-10",</span></em><em><span class="c011">
</span></em><em><span class="c011">     "</span></em><em><span class="c011">birthPlace</span></em><em><span class="c011">": {"</span></em><em><span class="c011">@id</span></em><em><span class="c011">": "</span></em><em><span class="c011">dbr</span></em><em><span class="c011">:</span></em><em><span class="c011">Oviedo</span></em><em><span class="c011">" }</span></em><em><span class="c011">
</span></em><em><span class="c011">    },</span></em><em><span class="c011">
</span></em><em><span class="c011">    { "</span></em><em><span class="c011">@id</span></em><em><span class="c011">": "</span></em><em><span class="c011">ex</span></em><em><span class="c011">:</span></em><em><span class="c011">carol</span></em><em><span class="c011">",</span></em><em><span class="c011">
</span></em><em><span class="c011">     "</span></em><em><span class="c011">knows</span></em><em><span class="c011">": [{"</span></em><em><span class="c011">@id</span></em><em><span class="c011">": "</span></em><em><span class="c011">ex</span></em><em><span class="c011">:</span></em><em><span class="c011">alice</span></em><em><span class="c011">" }, {"</span></em><em><span class="c011">@id</span></em><em><span class="c011">": "</span></em><em><span class="c011">ex</span></em><em><span class="c011">:</span></em><em><span class="c011">bob</span></em><em><span class="c011">"}],</span></em><em><span class="c011">
</span></em><em><span class="c011">     "</span></em><em><span class="c011">birthPlace</span></em><em><span class="c011">": {"</span></em><em><span class="c011">@id</span></em><em><span class="c011">": "</span></em><em><span class="c011">dbr</span></em><em><span class="c011">:</span></em><em><span class="c011">Oviedo</span></em><em><span class="c011">" }</span></em><em><span class="c011">
</span></em><em><span class="c011">    }</span></em><em><span class="c011">
</span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table></div></div><p><a id="hevea_default155"></a>
An alternative approach is to embed RDF content in HTML. </p><p><a id="hevea_default156"></a>
RDFa can be used to embed RDF in HTML attributes.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">&lt;</span><span class="c011">div</span><span class="c011"> </span><span class="c011">xmlns</span><span class="c011">:</span><span class="c011">schema</span><span class="c011">="</span><span class="c011">http</span><span class="c011">://</span><span class="c011">schema</span><span class="c011">.</span><span class="c011">org</span><span class="c011">/"</span><span class="c011">
</span><span class="c011">     </span><span class="c011">xmlns</span><span class="c011">:</span><span class="c011">ex</span><span class="c011">="</span><span class="c011">http</span><span class="c011">://</span><span class="c011">example</span><span class="c011">.</span><span class="c011">org</span><span class="c011">/"</span><span class="c011">
</span><span class="c011">     </span><span class="c011">xmlns</span><span class="c011">:</span><span class="c011">xsd</span><span class="c011">="</span><span class="c011">http</span><span class="c011">://</span><span class="c011">www</span><span class="c011">.</span><span class="c011">w3</span><span class="c011">.</span><span class="c011">org</span><span class="c011">/2001/</span><span class="c011">XMLSchema</span><span class="c011">#"</span><span class="c011">
</span><span class="c011">     </span><span class="c011">typeof</span><span class="c011">="</span><span class="c011">schema</span><span class="c011">:</span><span class="c011">Person</span><span class="c011">"</span><span class="c011">
</span><span class="c011">     </span><span class="c011">about</span><span class="c011">="[</span><span class="c011">ex</span><span class="c011">:</span><span class="c011">alice</span><span class="c011">]"&gt;</span><span class="c011">
</span><span class="c011">My</span><span class="c011"> </span><span class="c011">name</span><span class="c011"> </span><span class="c011">is</span><span class="c011"> &lt;</span><span class="c011">span</span><span class="c011"> </span><span class="c011">property</span><span class="c011">="</span><span class="c011">schema</span><span class="c011">:</span><span class="c011">name</span><span class="c011">"&gt;</span><span class="c011">Alice</span><span class="c011">&lt;/</span><span class="c011">span</span><span class="c011">&gt;.</span><span class="c011">
</span><span class="c011">&lt;</span><span class="c011">p</span><span class="c011">&gt;</span><span class="c011">I</span><span class="c011"> </span><span class="c011">was</span><span class="c011"> </span><span class="c011">born</span><span class="c011"> </span><span class="c011">on</span><span class="c011">
</span><span class="c011"> &lt;</span><span class="c011">span</span><span class="c011"> </span><span class="c011">property</span><span class="c011">="</span><span class="c011">schema</span><span class="c011">:</span><span class="c011">birthDate</span><span class="c011">"</span><span class="c011">
</span><span class="c011">       </span><span class="c011">content</span><span class="c011">="1974-12-01"</span><span class="c011">
</span><span class="c011">       </span><span class="c011">datatype</span><span class="c011">="</span><span class="c011">xsd</span><span class="c011">:</span><span class="c011">date</span><span class="c011">"&gt;</span><span class="c011">a</span><span class="c011"> </span><span class="c011">Sunday</span><span class="c011">, </span><span class="c011">some</span><span class="c011"> </span><span class="c011">time</span><span class="c011"> </span><span class="c011">ago</span><span class="c011">&lt;/</span><span class="c011">span</span><span class="c011">&gt;,</span><span class="c011">
</span><span class="c011">   </span><span class="c011">and</span><span class="c011"> </span><span class="c011">I</span><span class="c011"> </span><span class="c011">am</span><span class="c011"> </span><span class="c011">a</span><span class="c011"> </span><span class="c011">professor</span><span class="c011"> </span><span class="c011">at</span><span class="c011"> </span><span class="c011">the</span><span class="c011">
</span><span class="c011"> &lt;</span><span class="c011">span</span><span class="c011"> </span><span class="c011">about</span><span class="c011">="[</span><span class="c011">ex</span><span class="c011">:</span><span class="c011">uniovi</span><span class="c011">]"</span><span class="c011">
</span><span class="c011">  </span><span class="c011">typeof</span><span class="c011">="</span><span class="c011">schema</span><span class="c011">:</span><span class="c011">Organization</span><span class="c011">"</span><span class="c011">
</span><span class="c011">    </span><span class="c011">property</span><span class="c011">="</span><span class="c011">schema</span><span class="c011">:</span><span class="c011">name</span><span class="c011">"</span><span class="c011">
</span><span class="c011">    </span><span class="c011">rel</span><span class="c011">="</span><span class="c011">schema</span><span class="c011">:</span><span class="c011">member</span><span class="c011">"</span><span class="c011">
</span><span class="c011">    </span><span class="c011">resource</span><span class="c011">="[</span><span class="c011">ex</span><span class="c011">:</span><span class="c011">alice</span><span class="c011">]"&gt;</span><span class="c011">University</span><span class="c011"> </span><span class="c011">of</span><span class="c011"> </span><span class="c011">Oviedo</span><span class="c011">&lt;/</span><span class="c011">span</span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011">&lt;/</span><span class="c011">p</span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011">&lt;/</span><span class="c011">div</span><span class="c011">&gt;</span></td></tr>
</table><p>An HTML browser visualizes the information:</p><blockquote class="quote">
<span class="c012">My name is Alice.
I was born on a Sunday, some time ago, and I am a professor at the University of Oviedo</span>
</blockquote><p>while an RDFa processor obtains the following RDF data:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c004">ex</span></span><span class="c011">:</span><span class="c011"><span class="c006">alice</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">Person</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">birthDate</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"1974-12-01"</span></span></span><span class="c011">^^</span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">date</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Alice"</span></span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011">
</span><span class="c011"><span class="c004">ex</span></span><span class="c011">:</span><span class="c011"><span class="c006">uniovi</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">Organization</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">member</span></span><span class="c011"> </span><span class="c011"><span class="c004">ex</span></span><span class="c011">:</span><span class="c011"><span class="c006">alice</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"University of Oviedo"</span></span></span><span class="c011"> .</span></td></tr>
</table><p><a id="hevea_default157"></a>
Another alternative is to use microdata:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">&lt;</span><span class="c011">div</span><span class="c011"> </span><span class="c011">itemscope</span><span class="c011">
</span><span class="c011">     </span><span class="c011">itemtype</span><span class="c011">="</span><span class="c011">http</span><span class="c011">://</span><span class="c011">schema</span><span class="c011">.</span><span class="c011">org</span><span class="c011">/</span><span class="c011">Person</span><span class="c011">"</span><span class="c011">
</span><span class="c011">     </span><span class="c011">itemid</span><span class="c011">="</span><span class="c011">http</span><span class="c011">://</span><span class="c011">example</span><span class="c011">.</span><span class="c011">org</span><span class="c011">/</span><span class="c011">alice</span><span class="c011">"&gt;</span><span class="c011">
</span><span class="c011">Home</span><span class="c011"> </span><span class="c011">page</span><span class="c011"> </span><span class="c011">of</span><span class="c011"> &lt;</span><span class="c011">span</span><span class="c011"> </span><span class="c011">itemprop</span><span class="c011">="</span><span class="c011">name</span><span class="c011">"&gt;</span><span class="c011">Alice</span><span class="c011">&lt;/</span><span class="c011">span</span><span class="c011">&gt;.</span><span class="c011">
</span><span class="c011">&lt;</span><span class="c011">p</span><span class="c011">&gt;</span><span class="c011">I</span><span class="c011"> </span><span class="c011">was</span><span class="c011"> </span><span class="c011">born</span><span class="c011"> </span><span class="c011">on</span><span class="c011">
</span><span class="c011"> &lt;</span><span class="c011">time</span><span class="c011"> </span><span class="c011">itemprop</span><span class="c011">="</span><span class="c011">birthDate</span><span class="c011">"</span><span class="c011">
</span><span class="c011">       </span><span class="c011">datetime</span><span class="c011">="1974-12-01"&gt;</span><span class="c011">a</span><span class="c011"> </span><span class="c011">Sunday</span><span class="c011">,</span><span class="c011">
</span><span class="c011">         </span><span class="c011">some</span><span class="c011"> </span><span class="c011">time</span><span class="c011"> </span><span class="c011">ago</span><span class="c011">&lt;/</span><span class="c011">time</span><span class="c011">&gt;,</span><span class="c011">
</span><span class="c011"> </span><span class="c011">and</span><span class="c011"> </span><span class="c011">I</span><span class="c011"> </span><span class="c011">am</span><span class="c011"> </span><span class="c011">a</span><span class="c011"> &lt;</span><span class="c011">span</span><span class="c011"> </span><span class="c011">itemprop</span><span class="c011">="</span><span class="c011">jobTitle</span><span class="c011">"&gt;</span><span class="c011">Professor</span><span class="c011">&lt;/</span><span class="c011">span</span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011"> </span><span class="c011">at</span><span class="c011"> </span><span class="c011">the</span><span class="c011"> &lt;</span><span class="c011">span</span><span class="c011"> </span><span class="c011">itemscope</span><span class="c011">
</span><span class="c011">         </span><span class="c011">itemprop</span><span class="c011">="</span><span class="c011">affiliation</span><span class="c011">"</span><span class="c011">
</span><span class="c011">         </span><span class="c011">itemtype</span><span class="c011">="</span><span class="c011">http</span><span class="c011">://</span><span class="c011">schema</span><span class="c011">.</span><span class="c011">org</span><span class="c011">/</span><span class="c011">Organization</span><span class="c011">"&gt;</span><span class="c011">
</span><span class="c011">         </span><span class="c011">itemid</span><span class="c011">="</span><span class="c011">http</span><span class="c011">://</span><span class="c011">example</span><span class="c011">.</span><span class="c011">org</span><span class="c011">/</span><span class="c011">uniovi</span><span class="c011">"</span><span class="c011">
</span><span class="c011">  &lt;</span><span class="c011">span</span><span class="c011"> </span><span class="c011">itemprop</span><span class="c011">="</span><span class="c011">name</span><span class="c011">"&gt;</span><span class="c011">University</span><span class="c011"> </span><span class="c011">of</span><span class="c011"> </span><span class="c011">Oviedo</span><span class="c011">&lt;/</span><span class="c011">span</span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011"> &lt;/</span><span class="c011">span</span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011">&lt;/</span><span class="c011">p</span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011">&lt;/</span><span class="c011">div</span><span class="c011">&gt;</span></td></tr>
</table><p>Which represents the same information as the RDFa example.</p>
<!--TOC section id="sec27" Summary-->
<h2 class="section" id="sec27">2.5  Summary</h2><!--SEC END --><p>
<a id="ch2.sec5"></a></p><ul class="itemize"><li class="li-itemize">
RDF defines a simple and powerful data model based on directed graphs.
</li><li class="li-itemize">There are several syntaxes for RDF: Turtle, N-Triples, JSON-LD, RDF/XML, etc.
</li><li class="li-itemize">The edges of the graph are predicate IRIs.
</li><li class="li-itemize">RDF is the basis for the semantic web stack.
</li><li class="li-itemize">RDF enables the integration of heterogeneous data.
</li><li class="li-itemize">SPARQL is a query language for RDF.
</li><li class="li-itemize">RDFS and OWL offer inference capabilities over RDF data.
</li><li class="li-itemize">JSON-LD is a popular syntax for RDF based on JSON.
</li><li class="li-itemize">Two alternatives to embed metadata in HTML content are RDFa and microdata.
</li></ul>
<!--TOC section id="sec28" Suggested Reading-->
<h2 class="section" id="sec28">2.6  Suggested Reading</h2><!--SEC END --><p>
<a id="ch2.sec6"></a></p><p>Official online documents:</p><ul class="itemize"><li class="li-itemize">
<a href="#RDF11">Cyganiak, Wood, and Lanthaler</a>,<a href="#RDF11">2014</a> [<a href="#RDF11">25</a>]
</li><li class="li-itemize"><a href="#SPARQL11">Harris and Seaborne</a>,<a href="#SPARQL11">2013</a> [<a href="#SPARQL11">44</a>]
</li><li class="li-itemize"><a href="#RDFSchema11">Dan Brickley and R. V. Guha</a>,<a href="#RDFSchema11">2014</a> [<a href="#RDFSchema11">27</a>]
</li><li class="li-itemize"><a href="#OWL2">OWL Working Group</a>,<a href="#OWL2">27 October 2009</a> [<a href="#OWL2">70</a>]
</li></ul><p>There are several books introducing the concepts of RDF and Semantic Web in general like:</p><ul class="itemize"><li class="li-itemize">
<a href="#Hjelm2001">Hjelm</a>,<a href="#Hjelm2001">2001</a> [<a href="#Hjelm2001">49</a>]
</li><li class="li-itemize"><a href="#Powers2003">Powers</a>,<a href="#Powers2003">2003</a> [<a href="#Powers2003">76</a>]
</li><li class="li-itemize"><a href="#Passin2004">Passin</a>,<a href="#Passin2004">2004</a> [<a href="#Passin2004">71</a>]
</li><li class="li-itemize"><a href="#Segaran2009">Segaran, Evans, Taylor, Toby, Colin, and
Jamie</a>,<a href="#Segaran2009">2009</a> [<a href="#Segaran2009">88</a>]
</li><li class="li-itemize"><a href="#Hebeler2009">Hebeler, Fisher, Blace, and
Perez-Lopez</a>,<a href="#Hebeler2009">2009</a> [<a href="#Hebeler2009">47</a>]
</li><li class="li-itemize"><a href="#Hitzler09">Hitzler, Krötzsch, and Rudolph</a>,<a href="#Hitzler09">2009</a> [<a href="#Hitzler09">48</a>]
</li><li class="li-itemize"><a href="#Antoniou2012">Antoniou, Groth, Harmelen, and
Hoekstra</a>,<a href="#Antoniou2012">2012</a> [<a href="#Antoniou2012">4</a>]
</li></ul><p>And about particular topics: </p><ul class="itemize"><li class="li-itemize"><em>Linked data</em>: <a href="#Heath_2011">Heath and Bizer</a>,<a href="#Heath_2011">2011</a> [<a href="#Heath_2011">46</a>]</li><li class="li-itemize"><em>SPARQL</em>: <a href="#DuCharme2011">DuCharme</a>,<a href="#DuCharme2011">2011</a> [<a href="#DuCharme2011">33</a>]
</li><li class="li-itemize"><em>OWL and semantic modeling</em>: <a href="#Allemang2011">Allemang and Hendler</a>,<a href="#Allemang2011">2011</a> [<a href="#Allemang2011">3</a>]
</li></ul>
<!--BEGIN NOTES chapter-->
<hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note2" href="#text2">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="http://lov.okfn.org/"><span class="c010">http://lov.okfn.org/</span></a></div></dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec29" Data Quality-->
<h1 class="chapter" id="sec29">Chapter 3  Data Quality</h1><!--SEC END --><p>
<a id="ch3"></a>
<a id="ch030DataQuality"></a>
<a id="hevea_default158"></a></p><p>People have been using computers to record and reason about data for many decades. 
Typically, this <em>reasoning</em> is less esoteric than artificial intelligence tasks like classification. </p><p>A data modeler usually has some structure of the data that she is trying to model. 
That structure must be explicitly defined and communicated using some technology that can at the same time be understood by other people and also be processed by automatic systems that can check and enforce it. 
Using natural language for that is not enough as it can have ambiguities and is difficult to process by machines.
On the other hand, enforcing that structure using some procedural programming language is difficult to maintain by other people. 
The right balance is usually to have some declarative language that can be readable by humans but at the same time parsed and checked by machines. </p><p>Rigorous data validation is like a contract that offers advantages to several different parties. </p><ul class="itemize"><li class="li-itemize">Consumers have an easier time understanding the semantics of data.
For instance, a data structure that requires either a full name or a given and family name has a simple intuition while one that has optional full, given and family names leaves the consumer unsure about the many combinations she may encounter in the data.</li><li class="li-itemize">Programmers have to do much less “defensive coding” when working with predictable data.
A programmer need not write special cases for permutations like no name, a full name and a given name, etc.
Introducing quality control into data workflows can reduce security exploits and catch systematic errors when they first occur rather than years later when someone stumbles across inconsistent data.
For instance, a process may erroneously insert multiple primary addresses if no system enforces that a person should have no more than one primary address.</li><li class="li-itemize">Producers can precisely define and validate their output.
This allows them to test consistency with business processes, perform quality control, and unambiguously communicate their assets to other parties.</li><li class="li-itemize">Queriers can tailor the sophistication of their queries to address a constrained set of possibilities.
Queriers are a specific kind of consumers who are especially vulnerable to systematic data errors.
Unexpected variations in data structures can result in missing query results.
Possibly worse, a single accidental duplication of a record can result in it being counted many times, once for each combination of attributes in the original and duplicate record.</li></ul>
<!--TOC section id="sec30" Non-RDF Schema Languages-->
<h2 class="section" id="sec30">3.1  Non-RDF Schema Languages</h2><!--SEC END --><p>
<a id="ch3.sec1"></a></p><p>While RDF is a relative newcomer to the data scene, most widely-used structured data languages have a way to describe and enforce some form of data consistency.
<a id="hevea_default159"></a> <a id="hevea_default160"></a> <a id="hevea_default161"></a> <a id="hevea_default162"></a> <a id="hevea_default163"></a>
Examining UML, SQL, XML, JSON, and CSV allows us to set expectations for RDF validation.</p><p><a id="hevea_default164"></a>
</p>
<!--TOC subsection id="sec31" UML-->
<h3 class="subsection" id="sec31">3.1.1  UML</h3><!--SEC END --><p>
<a id="ch3.sec1.1"></a></p><p><a id="hevea_default165"></a> 
The Unified Modeling Language (UML) is a general-purpose visual modeling language that can be used to provide a standard way to visualize the design of a system [<a href="#Rumbaugh2004">85</a>]. 
<a id="hevea_default166"></a> <a id="hevea_default167"></a> <a id="hevea_default168"></a> <a id="hevea_default169"></a>
In 2005, the Object Management Group (OMG) published UML 2, a revision largely based on the same diagram notations,
but using a modeling infrastructure specified using Meta-Object Facility (MOF).
UML contains 14 types of diagrams, which are classified in three categories: structure, behavior and interaction. 
<a id="hevea_default170"></a>
The most popular diagram is the UML class diagram, which defines the logical structure of a system in terms of 
classes and relationships between them.
Given the Object Oriented tradition of UML, classes are usually defined in terms of sets of attributes and operations. </p><p>UML class diagrams are employed to visually represent data models. </p><div class="example"><div class="theorem"><span class="c013">Example 11</span>  <em>UML Class diagram</em><p><em>Figure </em><a href="#ch030.UMLClassDiagram"><em>11</em></a><em> represents an example of a UML class diagram.
In this case, there are two classes, </em><em>
</em><code><em><span class="c006">User</span></em></code><em> and </em><em>
</em><code><em><span class="c006">Course</span></em></code><em> with several attributes and two relationships.
The relation </em><em>
</em><code><em><span class="c006">enrolledIn</span></em></code><em> establishes that a user can be enrolled in a course. 
The cardinalities </em><em>
</em><code><em>0..*</em></code><em> means that a user may be enrolled in several courses while a cardinality </em><em>
</em><code><em>1..*</em></code><em> means that a course must have at least one user enrolled. 
The other relationship is </em><em>
</em><code><em><span class="c006">instructor</span></em></code><em> which means that a course must have one instructor (cardinality </em><em>
</em><code><em>1</em></code><em>) while a user can be the instructor of 0 or several courses. 
There is another relationship (</em><em>
</em><code><em><span class="c006">knows</span></em></code><em>) between users.</em></p><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 
</em><div class="center"><em>
<img src="UMLClassDiagram.png">
</em></div><em>

</em><a id="ch030.UMLClassDiagram"></a><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 3.1: Example of UML class diagram.</em></td></tr>
</table></div><em>
</em><div class="center"><hr class="c021"></div></blockquote></div></div><p>UML diagrams are typically not refined enough to provide all the relevant aspects of a specification. 
There is, among other things, a need to describe additional constraints about the objects in the model. 
<a id="hevea_default171"></a> <a id="hevea_default172"></a>
OCL (Object Constraint Language)<sup><a id="text3" href="#note3">1</a></sup> has been proposed as a declarative language to define this kind of constraints. 
It can also be used to define well-formedness rules, pre- and post-conditions, model transformations, etc.</p><p>OCL contains a repertoire of primitive types (Integer, Real, Boolean, String) and several constructs to define compound datatypes like tuples, ordered sets, sequences, bag and sets.</p><p><a id="hevea_default173"></a>
</p><div class="example"><div class="theorem"><span class="c013">Example 12</span>  <em>OCL constraints</em><em>
</em><a id="ch030.OCLConstraints"></a><p><em>The following code represents some constraints in OCL: 
that the gender must be </em><em>
</em><code><em><code><em>'Male'</em></code></em></code><em> or </em><em>
</em><code><em><code><em>'Female'</em></code></em></code><em>,
that a user does not know itself and
that the start date of a course must be bigger that the end date. 
Notice that we are using a hypothetical operator </em><em>
</em><code><em>&lt;</em></code><em> to compare dates while in OCL dates are not primitive types.</em></p><p><em>,
</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">course</span></em><em><span class="c011"> </span></em><em><span class="c011">User</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c013">inv</span></span></em><em><span class="c011">:</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">self</span></em><em><span class="c011">.</span></em><em><span class="c011">gender</span></em><em><span class="c011">-&gt;</span></em><em><span class="c011"><span class="c013">forAll</span></span></em><em><span class="c011">(</span></em><em><span class="c011">g</span></em><em><span class="c011"> | </span></em><em><span class="c011"><span class="c013">Set</span></span></em><em><span class="c011">{</span></em><em><span class="c011"><em><span class="c011">'Male'</span></em></span></em><em><span class="c011">,</span></em><em><span class="c011"><em><span class="c011">'Female'</span></em></span></em><em><span class="c011">}-&gt;</span></em><em><span class="c011"><span class="c013">includes</span></span></em><em><span class="c011">(</span></em><em><span class="c011">g</span></em><em><span class="c011">) )</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">self</span></em><em><span class="c011">.</span></em><em><span class="c011">knows</span></em><em><span class="c011">-&gt;</span></em><em><span class="c011"><span class="c013">forAll</span></span></em><em><span class="c011">(</span></em><em><span class="c011">k</span></em><em><span class="c011"> | </span></em><em><span class="c011">k</span></em><em><span class="c011"> &lt;&gt; </span></em><em><span class="c011">self</span></em><em><span class="c011">)</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c013">context</span></span></em><em><span class="c011"> </span></em><em><span class="c011">Course</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c013">inv</span></span></em><em><span class="c011">:</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">self</span></em><em><span class="c011">.</span></em><em><span class="c011">startDate</span></em><em><span class="c011"> &lt; </span></em><em><span class="c011">self</span></em><em><span class="c011">.</span></em><em><span class="c011">endDate</span></em></td></tr>
</table></div></div>
<!--TOC subsection id="sec32" SQL and Relational Databases-->
<h3 class="subsection" id="sec32">3.1.2  SQL and Relational Databases</h3><!--SEC END --><p>
<a id="ch3.sec1.2"></a></p><p><a id="hevea_default174"></a> 
<a id="hevea_default175"></a> 
<a id="hevea_default176"></a>
Probably the largest deployment of machine-actionable data is in relational databases, and certainly the most popular access to relational data is by Structured Query Language (SQL).
One challenge in describing SQL is the difference between the ISO standard and deployed implementations.</p><p>SQL is designed to capture tabular data, with some implementations enforcing referential integrity constraints for consistent linking between tables.
<a id="hevea_default177"></a> <a id="hevea_default178"></a>
SQL’s Data Definition Language (DDL) is used to lay out a table structure; 
SQL is used to populate and query those tables.
The SQL implementations that do enforce integrity constraints do so when data is inserted into tables.</p><p><a id="hevea_default179"></a> 
The concept of DDL was introduced in the Codasyl database model to write the schema of a database describing the records, 
fields and sets of the user data model. 
<a id="hevea_default180"></a>
It was later used to refer to a subset of SQL for creating tables and constraints. 
DDL statements list the properties in a particular table, their associated primitive datatypes, and list uniqueness and referential constraints.</p><div class="example"><div class="theorem"><span class="c013">Example 13</span>  <em>DDL</em><em> 
</em><a id="ch030.ExampleDDL"></a><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">CREATE</span></em><em><span class="c011"> </span></em><em><span class="c011">TABLE</span></em><em><span class="c011"> </span></em><em><span class="c011">User</span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">id</span></em><em><span class="c011">            </span></em><em><span class="c011">INTEGER</span></em><em><span class="c011">       </span></em><em><span class="c011">PRIMARY</span></em><em><span class="c011"> </span></em><em><span class="c011">KEY</span></em><em><span class="c011"> </span></em><em><span class="c011">NOT</span></em><em><span class="c011"> </span></em><em><span class="c011">NULL</span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">name</span></em><em><span class="c011">          </span></em><em><span class="c011">VARCHAR</span></em><em><span class="c011">(40)   </span></em><em><span class="c011">NOT</span></em><em><span class="c011"> </span></em><em><span class="c011">NULL</span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">birthDate</span></em><em><span class="c011">     </span></em><em><span class="c011">DATE</span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">birthPlace</span></em><em><span class="c011">    </span></em><em><span class="c011">VARCHAR</span></em><em><span class="c011">(50),</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011">gender</span></em><em><span class="c011">        </span></em><em><span class="c011">ENUM</span></em><em><span class="c011">(</span></em><em><span class="c011"><em><span class="c011">'male'</span></em></span></em><em><span class="c011">,</span></em><em><span class="c011"><em><span class="c011">'female'</span></em></span></em><em><span class="c011">)</span></em><em><span class="c011">
</span></em><em><span class="c011">);</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">CREATE</span></em><em><span class="c011"> </span></em><em><span class="c011">TABLE</span></em><em><span class="c011"> </span></em><em><span class="c011">Course</span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">id</span></em><em><span class="c011">           </span></em><em><span class="c011">INTEGER</span></em><em><span class="c011"> </span></em><em><span class="c011">PRIMARY</span></em><em><span class="c011"> </span></em><em><span class="c011">KEY</span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">StartDate</span></em><em><span class="c011">    </span></em><em><span class="c011">DATE</span></em><em><span class="c011"> </span></em><em><span class="c011">not</span></em><em><span class="c011"> </span></em><em><span class="c011">null</span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">EndDate</span></em><em><span class="c011">      </span></em><em><span class="c011">DATE</span></em><em><span class="c011"> </span></em><em><span class="c011">not</span></em><em><span class="c011"> </span></em><em><span class="c011">null</span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">Instructor</span></em><em><span class="c011">   </span></em><em><span class="c011">INTEGER</span></em><em><span class="c011"> </span></em><em><span class="c011">FOREIGN</span></em><em><span class="c011"> </span></em><em><span class="c011">KEY</span></em><em><span class="c011"> </span></em><em><span class="c011">REFERENCES</span></em><em><span class="c011"> </span></em><em><span class="c011">User</span></em><em><span class="c011">(</span></em><em><span class="c011">id</span></em><em><span class="c011">)</span></em><em><span class="c011">
</span></em><em><span class="c011">)</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">CREATE</span></em><em><span class="c011"> </span></em><em><span class="c011">TABLE</span></em><em><span class="c011"> </span></em><em><span class="c011">EnrolledIn</span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">studendId</span></em><em><span class="c011"> </span></em><em><span class="c011">INTEGER</span></em><em><span class="c011"> </span></em><em><span class="c011">FOREIGN</span></em><em><span class="c011"> </span></em><em><span class="c011">KEY</span></em><em><span class="c011"> </span></em><em><span class="c011">REFERENCES</span></em><em><span class="c011"> </span></em><em><span class="c011">User</span></em><em><span class="c011">(</span></em><em><span class="c011">id</span></em><em><span class="c011">),</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011">courseId</span></em><em><span class="c011">  </span></em><em><span class="c011">INTEGER</span></em><em><span class="c011"> </span></em><em><span class="c011">FOREIGN</span></em><em><span class="c011"> </span></em><em><span class="c011">KEY</span></em><em><span class="c011"> </span></em><em><span class="c011">REFERENCES</span></em><em><span class="c011"> </span></em><em><span class="c011">Course</span></em><em><span class="c011">(</span></em><em><span class="c011">id</span></em><em><span class="c011">),</span></em><em><span class="c011">
</span></em><em><span class="c011">)</span></em></td></tr>
</table></div></div><p>While implementation support for constraints and datatypes varies, 
popular datatypes include numerics like various precisions of integer or float, characters, dates and strings.</p><p><a id="hevea_default181"></a> <a id="hevea_default182"></a>
Two popular constraints in DDL are for primary and foreign keys. 
In SQL and DDL, attribute values are primitive types, which is to say that a user’s course is not a course record, 
but instead typically an integer that is unique in some table of courses.</p><blockquote class="figure"><div class="center"><hr class="c021"></div> 
<div class="center">
<img src="SQLTables.png">
</div>

<a id="ch030.SQLTables"></a>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Figure 3.2: Example of two tables.</td></tr>
</table></div>
<div class="center"><hr class="c021"></div></blockquote><p>Because RDF is a graph, one would typically bypass this reference convention and create a graph where a user’s course is a course instead of a reference.</p>
<!--TOC subsection id="sec33" XML-->
<h3 class="subsection" id="sec33">3.1.3  XML</h3><!--SEC END --><p> 
<a id="hevea_default183"></a> <a id="XML"></a>
<a id="ch3.sec1.3"></a></p><p>XML was proposed by the W3C as an extensible markup language for the Web around 1996 [<a href="#XML10">98</a>]. 
<a id="hevea_default184"></a> <a id="hevea_default185"></a>
XML derives from SGML [<a href="#SGML90">42</a>], a meta-language that provides a common syntax for textual markup systems and from which the first versions of HTML were also derived. 
Given its origins in typesetting, the XML model is adapted to represent textual information that contains mixed text and markup elements.</p><p><a id="hevea_default186"></a>
The XML model is known as the XML Information Set (XML InfoSet) 
and consists of a tree structure, where each node of the tree is defined to be an information item of a particular type. 
Each item has a set of type-specific properties associated with it.
At the root there is a document item, which has exactly one element as its child.
<a id="hevea_default187"></a> <a id="hevea_default188"></a>
An element has a set of attribute items and a list of 
child elements or text nodes. 
Attribute items may contain character items or they may contain typed data such as name tokens, identifiers and references.
Element identifiers and references may be used to connect nodes transforming the underlying tree into a graph.</p><div class="example"><div class="theorem"><span class="c013">Example 14</span>  <em>XML example</em><em>
</em><a id="ch030.ExampleXML"></a><p><em>An example of a course representation in XML can be:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">&lt;</span></em><em><span class="c011"><span class="c007">course</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">Algebra</span></span></em><em><span class="c011">"&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011"> &lt;</span></em><em><span class="c011"><span class="c007">student</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">id</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">alice</span></span></em><em><span class="c011">"&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">  &lt;</span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011"><span class="c007">Alice</span></span></em><em><span class="c011">&lt;/</span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">  &lt;</span></em><em><span class="c011"><span class="c007">gender</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011"><span class="c007">Female</span></span></em><em><span class="c011">&lt;/</span></em><em><span class="c011"><span class="c007">gender</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">  &lt;</span></em><em><span class="c011"><span class="c007">comments</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011"><span class="c007">Friend</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">of</span></span></em><em><span class="c011"> &lt;</span></em><em><span class="c011"><span class="c007">person</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">ref</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">bob</span></span></em><em><span class="c011">"&gt;</span></em><em><span class="c011"><span class="c007">Robert</span></span></em><em><span class="c011">&lt;/</span></em><em><span class="c011"><span class="c007">person</span></span></em><em><span class="c011">&gt;&lt;/</span></em><em><span class="c011"><span class="c007">comments</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011"> &lt;/</span></em><em><span class="c011"><span class="c007">student</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011"> &lt;</span></em><em><span class="c011"><span class="c007">student</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">id</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">bob</span></span></em><em><span class="c011">"&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">  &lt;</span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011"><span class="c007">Robert</span></span></em><em><span class="c011">&lt;/</span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">  &lt;</span></em><em><span class="c011"><span class="c007">gender</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011"><span class="c007">Male</span></span></em><em><span class="c011">&lt;/</span></em><em><span class="c011"><span class="c007">gender</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">  &lt;</span></em><em><span class="c011"><span class="c007">birthDate</span></span></em><em><span class="c011">&gt;1981-09-24&lt;/</span></em><em><span class="c011"><span class="c007">birthDate</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011"> &lt;/</span></em><em><span class="c011"><span class="c007">student</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">&lt;/</span></em><em><span class="c011"><span class="c007">course</span></span></em><em><span class="c011">&gt;</span></em></td></tr>
</table><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 
</em><div class="center"><em>
<img src="XMLTree.png">
</em></div><em>

</em><a id="ch030.XMLTree"></a><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 3.3: Tree structure of an XML document.</em></td></tr>
</table></div><em>
</em><div class="center"><hr class="c021"></div></blockquote></div></div><p>XML became very popular in industry and a lot of technologies were developed to query and transform XML.
Among them, XPath was a simple language to select parts of XML documents that was embedded in other technologies like XSLT or XQuery.</p><p>The next XPath snippet finds the names of all students whose gender is 
<code><code>"Female"</code></code>: </p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">//</span><span class="c011"><span class="c007">student</span></span><span class="c011">[</span><span class="c011"><span class="c007">gender</span></span><span class="c011"> = "</span><span class="c011"><span class="c007">Female</span></span><span class="c011">"]/</span><span class="c011"><span class="c007">name</span></span></td></tr>
</table><p>XML defines the notion of well-formed documents and valid documents. 
Well-formed documents are XML documents with a correct syntax while 
valid documents are documents that in addition of being well-formed, conform to some schema definition.</p><p>If one decides to define a schema, there are several possibilities.</p><ul class="itemize"><li class="li-itemize">
Document Type Definition (DTD). The XML specification [<a href="#XML10">98</a>] declares a basic mechanism to define the schema of XML documents, which was inherited from SGML and is called DTD. It allows to define the structure of a family of XML documents <div class="example"><div class="theorem"><span class="c013">Example 15</span>  <em>DTD example</em><em>
</em><a id="ch030.ExampleDTD"></a><p><em>A DTD to validate the XML file in Example </em><a href="#ch030.ExampleXML"><em>14</em></a><em> could be:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">&lt;!</span></em><em><span class="c011"><span class="c007">ELEMENT</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">course</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><span class="c007">student</span></span></em><em><span class="c011">*)&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">&lt;!</span></em><em><span class="c011"><span class="c007">ELEMENT</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">student</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">,</span></em><em><span class="c011"><span class="c007">gender</span></span></em><em><span class="c011">,</span></em><em><span class="c011"><span class="c007">birthDate</span></span></em><em><span class="c011">?)&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">&lt;!</span></em><em><span class="c011"><span class="c007">ELEMENT</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011"> (#</span></em><em><span class="c011"><span class="c007">PCDATA</span></span></em><em><span class="c011">)&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">&lt;!</span></em><em><span class="c011"><span class="c007">ELEMENT</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">gender</span></span></em><em><span class="c011"> (#</span></em><em><span class="c011"><span class="c007">PCDATA</span></span></em><em><span class="c011">)&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">&lt;!</span></em><em><span class="c011"><span class="c007">ELEMENT</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">birthDate</span></span></em><em><span class="c011"> (#</span></em><em><span class="c011"><span class="c007">PCDATA</span></span></em><em><span class="c011">)&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">&lt;!</span></em><em><span class="c011"><span class="c007">ATTLIST</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">student</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">id</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">ID</span></span></em><em><span class="c011"> #</span></em><em><span class="c011"><span class="c007">REQUIRED</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">&lt;!</span></em><em><span class="c011"><span class="c007">ATTLIST</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">course</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">CDATA</span></span></em><em><span class="c011"> #</span></em><em><span class="c011"><span class="c007">IMPLIED</span></span></em><em><span class="c011">&gt;</span></em></td></tr>
</table></div></div><p>DTD defines the structure of XML using a basic form of regular expressions.
However, DTDs have a limited support for datatypes.
For example, it is not possible to validate that the birth date of a student has the shape of a date.</p></li><li class="li-itemize">XML Schema. This specification was divided in two parts.
The first part specifies the structure of XML documents [<a href="#XMLSchema11Structures">89</a>] 
and the second part a repertoire of XML Schema datatypes [<a href="#XMLSchemaDatatypes">9</a>].<div class="example"><div class="theorem"><span class="c013">Example 16</span>  <em>XML Schema example</em><em>
</em><a id="ch030.ExampleXMLSchema"></a><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">&lt;</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">schema</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">xmlns</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">='</span></em><em><span class="c011"><span class="c007">http</span></span></em><em><span class="c011">://</span></em><em><span class="c011"><span class="c007">www</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c007">w3</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c007">org</span></span></em><em><span class="c011">/2001/</span></em><em><span class="c011"><span class="c007">XMLSchema</span></span></em><em><span class="c011">'&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">&lt;</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">element</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">course</span></span></em><em><span class="c011">"&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">  &lt;</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">complexType</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">   &lt;</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">sequence</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">     &lt;</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">element</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">student</span></span></em><em><span class="c011">" </span></em><em><span class="c011"><span class="c007">minOccurs</span></span></em><em><span class="c011">='1' </span></em><em><span class="c011"><span class="c007">maxOccurs</span></span></em><em><span class="c011">='100'</span></em><em><span class="c011">
</span></em><em><span class="c011">                     </span></em><em><span class="c011"><span class="c007">type</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">Student</span></span></em><em><span class="c011">"/&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">   &lt;/</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">sequence</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">   &lt;</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">attribute</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">" </span></em><em><span class="c011"><span class="c007">type</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">string</span></span></em><em><span class="c011">" /&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">  &lt;/</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">complexType</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">&lt;/</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">element</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">&lt;</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">complexType</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">Student</span></span></em><em><span class="c011">"&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">   &lt;</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">sequence</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">     &lt;</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">element</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">" </span></em><em><span class="c011"><span class="c007">type</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">string</span></span></em><em><span class="c011">" /&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">     &lt;</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">element</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">gender</span></span></em><em><span class="c011">" </span></em><em><span class="c011"><span class="c007">type</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">Gender</span></span></em><em><span class="c011">" /&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">     &lt;</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">element</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">birthDate</span></span></em><em><span class="c011">" </span></em><em><span class="c011"><span class="c007">type</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">date</span></span></em><em><span class="c011">" </span></em><em><span class="c011"><span class="c007">minOccurs</span></span></em><em><span class="c011">='0'/&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">   &lt;/</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">sequence</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">   &lt;</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">attribute</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">id</span></span></em><em><span class="c011">" </span></em><em><span class="c011"><span class="c007">type</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">ID</span></span></em><em><span class="c011">" </span></em><em><span class="c011"><span class="c007">use</span></span></em><em><span class="c011">='</span></em><em><span class="c011"><span class="c007">required</span></span></em><em><span class="c011">'/&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">&lt;/</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">complexType</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">&lt;</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">simpleType</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">Gender</span></span></em><em><span class="c011">"&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">  &lt;</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">restriction</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">base</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">token</span></span></em><em><span class="c011">"&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">   &lt;</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">enumeration</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">value</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">Male</span></span></em><em><span class="c011">"/&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">   &lt;</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">enumeration</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">value</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">Female</span></span></em><em><span class="c011">"/&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">  &lt;/</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">restriction</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">&lt;/</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">simpleType</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">&lt;/</span></em><em><span class="c011"><span class="c007">xs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">schema</span></span></em><em><span class="c011">&gt;</span></em></td></tr>
</table></div></div><p><a id="hevea_default189"></a>
<a id="hevea_default190"></a>
<a id="hevea_default191"></a> <a id="ch030PSVI"></a>
An XML Schema validator decorates each structure of the XML document with additional information called the Post-Schema Validation Infoset, or PSVI. This structure contains information about the validation process that can be later employed by other XML tools. </p><p><a id="hevea_default192"></a> <a id="hevea_default193"></a>
</p></li><li class="li-itemize">RelaxNG [<a href="#RelaxNGSpec">20</a>] was developed within the Organization for the Advancement of Structured Information Standards
(OASIS) as an alternative for XML Schema. 
RelaxNG has two syntaxes: an XML-based one and a compact one.
RelaxNG is grammar based and its semantics is formally defined by means of axioms and inference rules. <div class="example"><div class="theorem"><span class="c013">Example 17</span>  <em>RelaxNG example</em><p><em>The following code contains a RelaxNG schema to validate Example </em><a href="#ch030.ExampleXML"><em>14</em></a><em> using the RelaxNG compact syntax.
</em><a id="ch030.ExampleRelaxNG"></a></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c003">element</span></em><em> </em><em>course</em><em> {</em><em>
</em><em>  </em><em><span class="c003">element</span></em><em> </em><em>student</em><em> {</em><em>
</em><em>     </em><em><span class="c003">element</span></em><em> </em><em>name</em><em> { </em><em>xsd</em><em>:</em><em>string</em><em> },</em><em>
</em><em>     </em><em><span class="c003">element</span></em><em> </em><em>gender</em><em> { </em><span class="c005"><em>"Male"</em></span><em> | </em><span class="c005"><em>"Female"</em></span><em> },</em><em>
</em><em>     </em><em><span class="c003">element</span></em><em> </em><em>birthDate</em><em> { </em><em>xsd</em><em>:</em><em>date</em><em> }?,</em><em>
</em><em>            </em><em><span class="c003">attribute</span></em><em> </em><em>id</em><em> { </em><em>xsd</em><em>:</em><em>ID</em><em> }</em><em>
</em><em>  }* ,</em><em>
</em><em>  </em><em><span class="c003">attribute</span></em><em> </em><em>name</em><em> { </em><em>xsd</em><em>:</em><em>string</em><em> }</em><em>
</em><em>}</em></td></tr>
</table></div></div><p>The same example can be expressed in XML as:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">&lt;</span><span class="c011"><span class="c007">element</span></span><span class="c011"> </span><span class="c011"><span class="c007">name</span></span><span class="c011">="</span><span class="c011"><span class="c007">course</span></span><span class="c011">"</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c007">xmlns</span></span><span class="c011">="</span><span class="c011"><span class="c007">http</span></span><span class="c011">://</span><span class="c011"><span class="c007">relaxng</span></span><span class="c011">.</span><span class="c011"><span class="c007">org</span></span><span class="c011">/</span><span class="c011"><span class="c007">ns</span></span><span class="c011">/</span><span class="c011"><span class="c007">structure</span></span><span class="c011">/1.0"</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c007">datatypeLibrary</span></span><span class="c011">="</span><span class="c011"><span class="c007">http</span></span><span class="c011">://</span><span class="c011"><span class="c007">www</span></span><span class="c011">.</span><span class="c011"><span class="c007">w3</span></span><span class="c011">.</span><span class="c011"><span class="c007">org</span></span><span class="c011">/2001/</span><span class="c011"><span class="c007">XMLSchema</span></span><span class="c011">-</span><span class="c011"><span class="c007">datatypes</span></span><span class="c011">"&gt;</span><span class="c011">
</span><span class="c011">  &lt;</span><span class="c011"><span class="c007">zeroOrMore</span></span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011">    &lt;</span><span class="c011"><span class="c007">element</span></span><span class="c011"> </span><span class="c011"><span class="c007">name</span></span><span class="c011">="</span><span class="c011"><span class="c007">student</span></span><span class="c011">"&gt;</span><span class="c011">
</span><span class="c011">      &lt;</span><span class="c011"><span class="c007">element</span></span><span class="c011"> </span><span class="c011"><span class="c007">name</span></span><span class="c011">="</span><span class="c011"><span class="c007">name</span></span><span class="c011">"&gt;</span><span class="c011">
</span><span class="c011">        &lt;</span><span class="c011"><span class="c007">data</span></span><span class="c011"> </span><span class="c011"><span class="c007">type</span></span><span class="c011">="</span><span class="c011"><span class="c007">string</span></span><span class="c011">"/&gt;</span><span class="c011">
</span><span class="c011">      &lt;/</span><span class="c011"><span class="c007">element</span></span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011">      &lt;</span><span class="c011"><span class="c007">element</span></span><span class="c011"> </span><span class="c011"><span class="c007">name</span></span><span class="c011">="</span><span class="c011"><span class="c007">gender</span></span><span class="c011">"&gt;</span><span class="c011">
</span><span class="c011">        &lt;</span><span class="c011"><span class="c007">choice</span></span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011">          &lt;</span><span class="c011"><span class="c007">value</span></span><span class="c011">&gt;</span><span class="c011"><span class="c007">Female</span></span><span class="c011">&lt;/</span><span class="c011"><span class="c007">value</span></span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011">          &lt;</span><span class="c011"><span class="c007">value</span></span><span class="c011">&gt;</span><span class="c011"><span class="c007">Male</span></span><span class="c011">&lt;/</span><span class="c011"><span class="c007">value</span></span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011">        &lt;/</span><span class="c011"><span class="c007">choice</span></span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011">      &lt;/</span><span class="c011"><span class="c007">element</span></span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011">      &lt;</span><span class="c011"><span class="c007">optional</span></span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011">        &lt;</span><span class="c011"><span class="c007">element</span></span><span class="c011"> </span><span class="c011"><span class="c007">name</span></span><span class="c011">="</span><span class="c011"><span class="c007">birthDate</span></span><span class="c011">"&gt;</span><span class="c011">
</span><span class="c011">          &lt;</span><span class="c011"><span class="c007">data</span></span><span class="c011"> </span><span class="c011"><span class="c007">type</span></span><span class="c011">="</span><span class="c011"><span class="c007">date</span></span><span class="c011">"/&gt;</span><span class="c011">
</span><span class="c011">        &lt;/</span><span class="c011"><span class="c007">element</span></span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011">      &lt;/</span><span class="c011"><span class="c007">optional</span></span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011">      &lt;</span><span class="c011"><span class="c007">attribute</span></span><span class="c011"> </span><span class="c011"><span class="c007">name</span></span><span class="c011">="</span><span class="c011"><span class="c007">id</span></span><span class="c011">"&gt;</span><span class="c011">
</span><span class="c011">        &lt;</span><span class="c011"><span class="c007">data</span></span><span class="c011"> </span><span class="c011"><span class="c007">type</span></span><span class="c011">="</span><span class="c011"><span class="c007">ID</span></span><span class="c011">"/&gt;</span><span class="c011">
</span><span class="c011">      &lt;/</span><span class="c011"><span class="c007">attribute</span></span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011">    &lt;/</span><span class="c011"><span class="c007">element</span></span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011">  &lt;/</span><span class="c011"><span class="c007">zeroOrMore</span></span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011">  &lt;</span><span class="c011"><span class="c007">attribute</span></span><span class="c011"> </span><span class="c011"><span class="c007">name</span></span><span class="c011">="</span><span class="c011"><span class="c007">name</span></span><span class="c011">"&gt;</span><span class="c011">
</span><span class="c011">    &lt;</span><span class="c011"><span class="c007">data</span></span><span class="c011"> </span><span class="c011"><span class="c007">type</span></span><span class="c011">="</span><span class="c011"><span class="c007">string</span></span><span class="c011">"/&gt;</span><span class="c011">
</span><span class="c011">  &lt;/</span><span class="c011"><span class="c007">attribute</span></span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011">&lt;/</span><span class="c011"><span class="c007">element</span></span><span class="c011">&gt;</span></td></tr>
</table><p><a id="hevea_default194"></a>
<a id="hevea_default195"></a>
</p></li><li class="li-itemize">Schematron [<a href="#Schematron">50</a>] is a rule-based language based on patterns, rules, and assertions.
An assertion contains an XPath expression and an error message. 
The error message is displayed when the XPath expression fails.
A rule groups various assertions together and defines a context in which assertions are evaluated using an XPath expression.
Finally, patterns group various rules together.<p>Schematron has more expressive power than other schema languages like DTDs, RelaxNG or XML Schema as 
it can express complex constraints that are impossible with them.
In fact, it is often used to define business rules.</p><p>Although Schematron can be used as a stand-alone, it is commonly used in cooperation with other schema languages which define the document structure.</p><div class="example"><div class="theorem"><span class="c013">Example 18</span>  <em>Schematron example</em><em> 
</em><a id="ch030SchematronExample"></a><p><em>If we have XML documents containing course grades like the following:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">&lt;</span></em><em><span class="c011"><span class="c007">course</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">Algebra</span></span></em><em><span class="c011">"&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011"> &lt;</span></em><em><span class="c011"><span class="c007">student</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">id</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">S234</span></span></em><em><span class="c011">"&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">  &lt;</span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011"><span class="c007">Alice</span></span></em><em><span class="c011">&lt;/</span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">  &lt;</span></em><em><span class="c011"><span class="c007">grade</span></span></em><em><span class="c011">&gt;8&lt;/</span></em><em><span class="c011"><span class="c007">grade</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011"> &lt;/</span></em><em><span class="c011"><span class="c007">student</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011"> &lt;</span></em><em><span class="c011"><span class="c007">student</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">id</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">B476</span></span></em><em><span class="c011">"&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">  &lt;</span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011"><span class="c007">Robert</span></span></em><em><span class="c011">&lt;/</span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">  &lt;</span></em><em><span class="c011"><span class="c007">grade</span></span></em><em><span class="c011">&gt;5&lt;/</span></em><em><span class="c011"><span class="c007">grade</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011"> &lt;/</span></em><em><span class="c011"><span class="c007">student</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011"> &lt;</span></em><em><span class="c011"><span class="c007">average</span></span></em><em><span class="c011">&gt;9&lt;/</span></em><em><span class="c011"><span class="c007">average</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">&lt;/</span></em><em><span class="c011"><span class="c007">course</span></span></em><em><span class="c011">&gt;</span></em></td></tr>
</table><p><em>We can define the following Schematron file to validate.</em></p><ul class="itemize"><li class="li-itemize"><em>That student IDs start by </em><em>
</em><code><em><span class="c006">S</span></em></code><em> (lines 4–8).</em></li><li class="li-itemize"><em>That the value of </em><em>
</em><code><em>&lt;</em></code><code><em><span class="c006">average</span></em></code><code><em>&gt;</em></code><em> is the mean of the grades. </em></li></ul><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">&lt;</span></em><em><span class="c011"><span class="c007">sch</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">schema</span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c007">xmlns</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">sch</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">http</span></span></em><em><span class="c011">://</span></em><em><span class="c011"><span class="c007">purl</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c007">oclc</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c007">org</span></span></em><em><span class="c011">/</span></em><em><span class="c011"><span class="c007">dsdl</span></span></em><em><span class="c011">/</span></em><em><span class="c011"><span class="c007">schematron</span></span></em><em><span class="c011">"&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011"> &lt;</span></em><em><span class="c011"><span class="c007">sch</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">pattern</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">Check</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">Ids</span></span></em><em><span class="c011">"&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">  &lt;</span></em><em><span class="c011"><span class="c007">sch</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">rule</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">context</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">student</span></span></em><em><span class="c011">"&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">   &lt;</span></em><em><span class="c011"><span class="c007">sch</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">assert</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">test</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">starts</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c007">with</span></span></em><em><span class="c011">(</span></em><em><span class="c011"><span class="c007">@id</span></span></em><em><span class="c011">,'</span></em><em><span class="c011"><span class="c007">S</span></span></em><em><span class="c011">')"</span></em><em><span class="c011">
</span></em><em><span class="c011">   &gt;</span></em><em><span class="c011"><span class="c007">IDs</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">must</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">start</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">by</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">S</span></span></em><em><span class="c011">&lt;/</span></em><em><span class="c011"><span class="c007">sch</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">assert</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">  &lt;/</span></em><em><span class="c011"><span class="c007">sch</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">rule</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011"> &lt;/</span></em><em><span class="c011"><span class="c007">sch</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">pattern</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011"> &lt;</span></em><em><span class="c011"><span class="c007">sch</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">pattern</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">Check</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">mean</span></span></em><em><span class="c011">"&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">  &lt;</span></em><em><span class="c011"><span class="c007">sch</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">rule</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">context</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">average</span></span></em><em><span class="c011">"&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">    &lt;</span></em><em><span class="c011"><span class="c007">sch</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">assert</span></span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c007">test</span></span></em><em><span class="c011">="</span></em><em><span class="c011"><span class="c007">sum</span></span></em><em><span class="c011">(//</span></em><em><span class="c011"><span class="c007">student</span></span></em><em><span class="c011">/</span></em><em><span class="c011"><span class="c007">grade</span></span></em><em><span class="c011">) </span></em><em><span class="c011"><span class="c007">div</span></span></em><em><span class="c011">
</span></em><em><span class="c011">                </span></em><em><span class="c011"><span class="c007">count</span></span></em><em><span class="c011">(//</span></em><em><span class="c011"><span class="c007">student</span></span></em><em><span class="c011">/</span></em><em><span class="c011"><span class="c007">grade</span></span></em><em><span class="c011">) = ."</span></em><em><span class="c011">
</span></em><em><span class="c011">          &gt;</span></em><em><span class="c011"><span class="c007">Value</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">of</span></span></em><em><span class="c011"> &lt;</span></em><em><span class="c011"><span class="c007">sch</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">name</span></span></em><em><span class="c011">/&gt; </span></em><em><span class="c011"><span class="c007">does</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">not</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">match</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c007">mean</span></span></em><em><span class="c011">
</span></em><em><span class="c011">     &lt;/</span></em><em><span class="c011"><span class="c007">sch</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">assert</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">   &lt;/</span></em><em><span class="c011"><span class="c007">sch</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">rule</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011"> &lt;/</span></em><em><span class="c011"><span class="c007">sch</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">pattern</span></span></em><em><span class="c011">&gt;</span></em><em><span class="c011">
</span></em><em><span class="c011">&lt;/</span></em><em><span class="c011"><span class="c007">sch</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c007">schema</span></span></em><em><span class="c011">&gt;</span></em></td></tr>
</table></div></div><p>Schematron is more expressive than other schema languages like DTDs, XML Schema, or RelaxNG as it can define business rules and co-occurrence constraints at the same time that it can also define structural constraints like the other ones.
Nevertheless, Schematron rules can become complex to define and debug. 
A popular approach is to combine both approaches, defining the XML document structure 
with a traditional schema language and 
complementing it with schematron rules.</p></li><li class="li-itemize">Other schema languages for XML has been
SchemaPath was proposed as a simple extension of XML Schema 
with conditional constraints [<a href="#Coen2004">22</a>].
Bonxai [<a href="#Martens2015">62</a>] has been recently proposed.
It also contains a readable syntax inspired by RelaxNG.</li></ul>
<!--TOC paragraph id="sec34" Invoking validation in XML.-->
<h5 class="paragraph" id="sec34">Invoking validation in XML.</h5><!--SEC END --><p>Different approaches have been proposed to indicate how an XML document has to be validated against a schema. 
Some of those approaches are the following. </p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default196"></a>
</p>Embedded schema.
DTDs can directly be embedded in XML documents:<table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">&lt;!</span><span class="c011"><span class="c007">DOCTYPE</span></span><span class="c011"> </span><span class="c011"><span class="c007">course</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  &lt;!</span><span class="c011"><span class="c007">ELEMENT</span></span><span class="c011"> </span><span class="c011"><span class="c007">course</span></span><span class="c011">   (</span><span class="c011"><span class="c007">student</span></span><span class="c011">*) &gt;</span><span class="c011">
</span><span class="c011">  &lt;!</span><span class="c011"><span class="c007">ELEMENT</span></span><span class="c011"> </span><span class="c011"><span class="c007">student</span></span><span class="c011"> (</span><span class="c011"><span class="c007">name</span></span><span class="c011">,</span><span class="c011"><span class="c007">grade</span></span><span class="c011">)&gt;</span><span class="c011">
</span><span class="c011">  &lt;!</span><span class="c011"><span class="c007">ATTLIST</span></span><span class="c011"> </span><span class="c011"><span class="c007">student</span></span><span class="c011"> </span><span class="c011"><span class="c007">id</span></span><span class="c011"> </span><span class="c011"><span class="c007">CDATA</span></span><span class="c011"> #</span><span class="c011"><span class="c007">REQUIRED</span></span><span class="c011">&gt;</span><span class="c011">
</span><span class="c011">]&gt;</span><span class="c011">
</span><span class="c011">&lt;</span><span class="c011"><span class="c007">course</span></span><span class="c011"> </span><span class="c011"><span class="c007">name</span></span><span class="c011">="</span><span class="c011"><span class="c007">Algebra</span></span><span class="c011">"&gt;</span><span class="c011">
</span><span class="c011"> ...</span><span class="c011">
</span><span class="c011">&lt;/</span><span class="c011"><span class="c007">course</span></span><span class="c011">&gt;</span></td></tr>
</table><p><a id="hevea_default197"></a> 
<a id="hevea_default198"></a> 
</p></li><li class="li-itemize">Directly associate instance data with XML Schema.
It can be done, for example, using the 

<code><span class="c006">xsi</span></code><code>:</code><code><span class="c006">schemaLocation</span></code> or 
<code><span class="c006">xsi</span></code><code>:</code><code><span class="c006">noNamespaceSchemaLocation</span></code> attributes. <p>For example, the following XML document directly declares that it follows the schema identified by 
<code><span class="c006">http</span></code><code>://</code><code><span class="c006">example</span></code><code>.</code><code><span class="c004">org</span></code><code>/</code><code><span class="c006">ns</span></code><code>/</code><code><span class="c006">Course</span></code> which is located at 
<code><span class="c006">http</span></code><code>://</code><code><span class="c006">example</span></code><code>.</code><code><span class="c004">org</span></code><code>/</code><code><span class="c006">course</span></code><code>.</code><code><span class="c004">xsd</span></code>:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">&lt;</span><span class="c011"><span class="c007">course</span></span><span class="c011"> </span><span class="c011"><span class="c007">xmlns</span></span><span class="c011">:</span><span class="c011"><span class="c007">xsi</span></span><span class="c011">="</span><span class="c011"><span class="c007">http</span></span><span class="c011">://</span><span class="c011"><span class="c007">www</span></span><span class="c011">.</span><span class="c011"><span class="c007">w3</span></span><span class="c011">.</span><span class="c011"><span class="c007">org</span></span><span class="c011">/2001/</span><span class="c011"><span class="c007">XMLSchema</span></span><span class="c011">-</span><span class="c011"><span class="c007">instance</span></span><span class="c011">"</span><span class="c011">
</span><span class="c011">        </span><span class="c011"><span class="c007">xsi</span></span><span class="c011">:</span><span class="c011"><span class="c007">schemaLocation</span></span><span class="c011">="</span><span class="c011"><span class="c007">http</span></span><span class="c011">://</span><span class="c011"><span class="c007">example</span></span><span class="c011">.</span><span class="c011"><span class="c007">org</span></span><span class="c011">/</span><span class="c011"><span class="c007">ns</span></span><span class="c011">/</span><span class="c011"><span class="c007">Course</span></span><span class="c011">
</span><span class="c011">                            </span><span class="c011"><span class="c007">http</span></span><span class="c011">://</span><span class="c011"><span class="c007">example</span></span><span class="c011">.</span><span class="c011"><span class="c007">org</span></span><span class="c011">/</span><span class="c011"><span class="c007">course</span></span><span class="c011">.</span><span class="c011"><span class="c007">xsd</span></span><span class="c011">"&gt;</span><span class="c011">
</span><span class="c011"> ...</span><span class="c011">
</span><span class="c011">&lt;/</span><span class="c011"><span class="c007">course</span></span><span class="c011">&gt;</span></td></tr>
</table><p><a id="hevea_default199"></a>
</p></li><li class="li-itemize">The XML processing instruction 
<code>&lt;?</code><code><span class="c006">xml</span></code><code>-</code><code><span class="c006">model</span></code><code> ?&gt;</code> has been proposed to associate an XML document with a schema [<a href="#XMLModel">43</a>]. <table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">&lt;?</span><span class="c011"><span class="c007">xml</span></span><span class="c011">-</span><span class="c011"><span class="c007">model</span></span><span class="c011"> </span><span class="c011"><span class="c007">href</span></span><span class="c011">="</span><span class="c011"><span class="c007">http</span></span><span class="c011">://</span><span class="c011"><span class="c007">example</span></span><span class="c011">.</span><span class="c011"><span class="c007">org</span></span><span class="c011">/</span><span class="c011"><span class="c007">course</span></span><span class="c011">.</span><span class="c011"><span class="c007">rng</span></span><span class="c011">" ?&gt;</span><span class="c011">
</span><span class="c011">&lt;?</span><span class="c011"><span class="c007">xml</span></span><span class="c011">-</span><span class="c011"><span class="c007">model</span></span><span class="c011"> </span><span class="c011"><span class="c007">href</span></span><span class="c011">="</span><span class="c011"><span class="c007">http</span></span><span class="c011">://</span><span class="c011"><span class="c007">example</span></span><span class="c011">.</span><span class="c011"><span class="c007">org</span></span><span class="c011">/</span><span class="c011"><span class="c007">course</span></span><span class="c011">.</span><span class="c011"><span class="c007">xsd</span></span><span class="c011">" ?&gt;</span><span class="c011">
</span><span class="c011">&lt;</span><span class="c011"><span class="c007">course</span></span><span class="c011"> </span><span class="c011"><span class="c007">name</span></span><span class="c011">="</span><span class="c011"><span class="c007">Algebra</span></span><span class="c011">"&gt;</span><span class="c011">
</span><span class="c011"> ...</span><span class="c011">
</span><span class="c011">&lt;/</span><span class="c011"><span class="c007">course</span></span><span class="c011">&gt;</span></td></tr>
</table><p>Note that the XML model processing instruction enables to use multiple schemas for the same document. </p><p><a id="hevea_default200"></a>
</p></li><li class="li-itemize">In WSDL [<a href="#WSDL">19</a>] it is possible to associate documents or predetermined nodes in a document with arbitrary XML Schema types.</li></ul><p>As can be seen XML provides several ways to associate XML data with schemas for their validation. </p><p><a id="hevea_default201"></a>
</p>
<!--TOC subsection id="sec35" JSON-->
<h3 class="subsection" id="sec35">3.1.4  JSON</h3><!--SEC END --><p> 
<a id="ch030:JSON"></a>
<a id="ch3.sec1.4"></a></p><p><a id="hevea_default202"></a> <a id="hevea_default203"></a> 
JSON was proposed by Douglas Crockford around 2001 as a subset of Javascript (the original acronym was Javascript Object Notation). 
<a id="hevea_default204"></a>
It has evolved as an independent data-interchange format with its own ECMA 
specification [<a href="#JSON">35</a>].</p><p>A JSON value, or JSON document, can be defined recursively as follows. </p><ul class="itemize"><li class="li-itemize">
<a id="hevea_default205"></a> 
<a id="hevea_default206"></a> 

<code><span class="c003">true</span></code>, 
<code><span class="c003">false</span></code> and <span class="c007"><span class="c011"><span class="c010">null</span></span></span> are JSON values.<p><a id="hevea_default207"></a>
</p></li><li class="li-itemize">Any decimal number is also a JSON value.<p><a id="hevea_default208"></a> <a id="hevea_default209"></a>
</p></li><li class="li-itemize">Any string of Unicode characters enclosed by 
<code><code>"</code></code> is also a JSON value, called a string value.<p><a id="hevea_default210"></a> 
</p></li><li class="li-itemize">If <span class="c012">k</span><sub>1</sub>, <span class="c012">k</span><sub>2</sub>, …, <span class="c012">k</span><sub><span class="c012">n</span></sub> are distinct string values and <span class="c012">v</span><sub>1</sub>, <span class="c012">v</span><sub>2</sub>, …, <span class="c012">v</span><sub><span class="c012">n</span></sub> are JSON values, then {<span class="c012">k</span><sub>1</sub>: <span class="c012">v</span><sub>1</sub>, <span class="c012">k</span><sub>2</sub>: <span class="c012">v</span><sub>2</sub>, …, <span class="c012">k</span><sub><span class="c012">n</span></sub>: <span class="c012">v</span><sub><span class="c012">n</span></sub>} are JSON values, called objects. 
In this case, each <span class="c012">k</span><sub><span class="c012">i</span></sub>: <span class="c012">v</span><sub><span class="c012">i</span></sub> is a key-value pair. 
The order of the key-value pairs is not significant. <p><a id="hevea_default211"></a> 
</p></li><li class="li-itemize">If <span class="c012">v</span><sub>1</sub>, <span class="c012">v</span><sub>2</sub>, …, <span class="c012">v</span><sub><span class="c012">n</span></sub> are JSON values, then [<span class="c012">v</span>1,<span class="c012">v</span>2,…,<span class="c012">v</span><sub><span class="c012">n</span></sub>] are JSON values, called arrays. 
The order of the array elements is significant.</li></ul><p>Note that in the case of arrays and objects the values <span class="c012">v</span><sub><span class="c012">i</span></sub> can again be objects or arrays, thus allowing the documents
an arbitrary level of nesting. 
In this way, the JSON data model can be represented as a tree [<a href="#Bourhis2017">14</a>].</p><div class="example"><div class="theorem"><span class="c013">Example 19</span>  <em>JSON example</em><em>
</em><a id="ch030.ExampleJSON"></a><p><em>The following example contains a JSON object with two keys: </em><em>
</em><code><em><span class="c006">name</span></em></code><em> and </em><em>
</em><code><em><span class="c006">students</span></em></code><em>. 
The value of </em><em>
</em><code><em><span class="c006">name</span></em></code><em> is a string while the value of </em><em>
</em><code><em><span class="c006">students</span></em></code><em> is an array of two objects.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">{ </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"name"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Algebra"</span></em></span></span></em><em><span class="c011"> ,</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"students"</span></em></span></span></em><em><span class="c011">: [</span></em><em><span class="c011">
</span></em><em><span class="c011">  { </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"name"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"gender"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Female"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"age"</span></em></span></span></em><em><span class="c011">: 18</span></em><em><span class="c011">
</span></em><em><span class="c011">   },</span></em><em><span class="c011">
</span></em><em><span class="c011">  { </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"name"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"gender"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Male"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"birthDate"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"1981-09-24"</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">   }</span></em><em><span class="c011">
</span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>Figure </em><a href="#ch030.JSONTree"><em>19</em></a><em> shows a tree representation of the previous JSON value.</em></p><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 
</em><div class="center"><em>
<img src="JSON_Tree.png">
</em></div><em>

</em><a id="ch030.JSONTree"></a><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 3.4: Tree structure of JSON.</em></td></tr>
</table></div><em>
</em><div class="center"><hr class="c021"></div></blockquote></div></div><p>JSON Schema [<a href="#JSONSchema">101</a>] was proposed as an Schema language for JSON with a role similar to XML Schema for XML. 
It is written itself using JSON syntax and is programming language agnostic. 
It contains the following predefined datatypes: 
null, Boolean, object, array, number and string, and allows to define constraints on each of them.</p><p>In JSON Schema, it is possible to have reusable definitions which can later be referenced. 
Recursion is not allowed between references [<a href="#Pezoa2016">74</a>].</p><div class="example"><div class="theorem"><span class="c013">Example 20</span>  <em>JSON Schema example</em><em> 
</em><a id="ch030.ExampleJSONSchema"></a><p><em>The following example contains a JSON schema that can be used to validate Example </em><a href="#ch030.ExampleJSON"><em>19</em></a><em>. 
It declares </em><em>
</em><code><em><span class="c006">student</span></em></code><em> as an object type with four properties: </em><em>
</em><code><em><span class="c006">name</span></em></code><em>, </em><em>
</em><code><em><span class="c006">gender</span></em></code><em>, </em><em>
</em><code><em><span class="c006">birthDate</span></em></code><em> and </em><em>
</em><code><em><span class="c006">age</span></em></code><em>. 
The first two are required and some constraints can be added on their values.</em></p><p><em>The JSON value has type </em><em>
</em><code><em><span class="c006">object</span></em></code><em> and contains two properties: </em><em>
</em><code><em><span class="c006">name</span></em></code><em>, which must be a string value, 
and </em><em>
</em><code><em><span class="c006">students</span></em></code><em> which must be an array, whose items conform to the </em><em>
</em><code><em><span class="c006">student</span></em></code><em> definition.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">{ </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"$schema"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"http://json-schema.org/draft-04/schema#"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"definitions"</span></em></span></span></em><em><span class="c011">: {</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"student"</span></em></span></span></em><em><span class="c011">: { </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"type"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"object"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"properties"</span></em></span></span></em><em><span class="c011">: {</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"name"</span></em></span></span></em><em><span class="c011">:      {</span></em><em><span class="c011"><span class="c005"><em><span class="c011">"type"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"string"</span></em></span></span></em><em><span class="c011"> },</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"gender"</span></em></span></span></em><em><span class="c011">:    {</span></em><em><span class="c011"><span class="c005"><em><span class="c011">"type"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"string"</span></em></span></span></em><em><span class="c011">, </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"enum"</span></em></span></span></em><em><span class="c011">:[</span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Male"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Female"</span></em></span></span></em><em><span class="c011">]},</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"birthDate"</span></em></span></span></em><em><span class="c011">: {</span></em><em><span class="c011"><span class="c005"><em><span class="c011">"type"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"string"</span></em></span></span></em><em><span class="c011">, </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"format"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"date"</span></em></span></span></em><em><span class="c011"> },</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"age"</span></em></span></span></em><em><span class="c011">:       {</span></em><em><span class="c011"><span class="c005"><em><span class="c011">"type"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"integer"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011"><span class="c005"><em><span class="c011">"minimum"</span></em></span></span></em><em><span class="c011">: 1 }</span></em><em><span class="c011">
</span></em><em><span class="c011">     },</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"required"</span></em></span></span></em><em><span class="c011">: [</span></em><em><span class="c011"><span class="c005"><em><span class="c011">"name"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011"><span class="c005"><em><span class="c011">"gender"</span></em></span></span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011">   }</span></em><em><span class="c011">
</span></em><em><span class="c011">  },</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"type"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"object"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"properties"</span></em></span></span></em><em><span class="c011">: {</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"name"</span></em></span></span></em><em><span class="c011">:      { </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"type"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"string"</span></em></span></span></em><em><span class="c011"> },</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"students"</span></em></span></span></em><em><span class="c011"> : { </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"type"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"array"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"items"</span></em></span></span></em><em><span class="c011">: { </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"$ref"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"#/definitions/student"</span></em></span></span></em><em><span class="c011"> }</span></em><em><span class="c011">
</span></em><em><span class="c011">     }</span></em><em><span class="c011">
</span></em><em><span class="c011">  },</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"required"</span></em></span></span></em><em><span class="c011">: [</span></em><em><span class="c011"><span class="c005"><em><span class="c011">"name"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011"><span class="c005"><em><span class="c011">"students"</span></em></span></span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table></div></div><p><a id="hevea_default212"></a>
</p>
<!--TOC subsection id="sec36" CSV-->
<h3 class="subsection" id="sec36">3.1.5  CSV</h3><!--SEC END --><p>
<a id="ch3.sec1.5"></a></p><p><a id="hevea_default213"></a> <a id="hevea_default214"></a> <a id="hevea_default215"></a> <a id="hevea_default216"></a>
Comma-Separated Values (CSV) and Tab-Separated Values (TSV) files have historically had no format-specific schema language.
<a id="hevea_default217"></a>
A common use case for CSV (and TSV) is to import it into a relational database, where it is subject to the same integrity constraints as any other SQL data.
However, wide-ranging practices for documenting table structure and semantics have historically made it hard for consumers of CSV to consume published CSV data 
with confidence.
Column headings and meanings may appear as rows in the CSV file, columns in an auxiliary CSV or flat file, or be omitted entirely.</p><p>Spreadsheets are another common generator and consumer of CSV data.
Some spreadsheets may have hand-tooled integrity constraints but they offer no standard schema language.</p><p><a id="hevea_default218"></a> 
While traditionally schema-less, a recent standard, CSV on the Web (CSVW) attempts to describe the majority of deployed CSV data.
This includes semantics (e.g., mapping to an ontology), provenance, XML Schema length and numeric value facets (e.g., minimum length, max exclusive value), and format and structural constraints like foreign keys and datatypes.</p><p>CSVW describes a wide corpus of existing practice for publishing CSV documents.
Because of it’s World Wide Web orientation, it includes internationalization and localization features not found in other schema languages.
Where most data languages standardize the lexical representation of datatypes like dateTime or integer, CSVW describes a wide range of region or domain-specific datatypes.
For instance, the following can all be representations of the same numeric value: 12345.67, 12,345.67, 12.345,67, 1,23,45.67.</p><p>CSVW is also unusual in that it can be used to describe denormalized data.
Because of this, it includes separator specifiers to aid in micro-parsing individual data cells into sequences of atomic datatypes.</p><p>CSVW is a very new specification and applies to a domain with historically no standard schema language.
<a id="hevea_default219"></a>
Tools like CSVLint<sup><a id="text4" href="#note4">2</a></sup> are adopting CSVW as a way to offer interoperable schema declarations to enable data quality tests.</p>
<!--TOC section id="sec37" Understanding the RDF Validation Problem-->
<h2 class="section" id="sec37">3.2  Understanding the RDF Validation Problem</h2><!--SEC END --><p> 
<a id="ch3.sec2"></a></p><p>As we can see in Table <a href="#ch030.DataValidationApproaches">3.1</a>, most data technologies have some description and validation technology which enables users to describe the desired schema of the data and to check if some existing data conforms with that schema. </p><p><a id="hevea_default220"></a> 
<a id="hevea_default221"></a> 
<a id="hevea_default222"></a> 
<a id="hevea_default223"></a> 
<a id="hevea_default224"></a> 
<a id="hevea_default225"></a>
<a id="hevea_default226"></a>
</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 3.1: Data validation approaches</td></tr>
</table></div>
<a id="ch030.DataValidationApproaches"></a>
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c017"> <span class="c013">Data format</span></td><td class="c019"><span class="c013">Validation technology 
</span></td></tr>
<tr><td class="c017"> Relational databases</td><td class="c019">DDL
</td></tr>
<tr><td class="c017"> XML</td><td class="c019">DTD, XML Schema, RelaxNG, Schematron
</td></tr>
<tr><td class="c017"> CSV</td><td class="c019">CSV on the Web
</td></tr>
<tr><td class="c017"> JSON</td><td class="c019">JSON Schema
</td></tr>
<tr><td class="c017"> RDF</td><td class="c019">ShEx/SHACL
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><p>Although there have been several previous attempts to define RDF validation 
technologies (see Section <a href="#ch030.PreviousRDFValidationApproaches">3.3</a>) this book focuses on ShEx and SHACL.</p><p>In this section we describe what are the particular concepts of RDF that have to be taken into account for its validation:</p>
<!--TOC paragraph id="sec38" Graph data model-->
<h5 class="paragraph" id="sec38">Graph data model</h5><!--SEC END --><p>RDF is composed of triples, which have arcs (predicates) between nodes.
We can describe:</p><ul class="itemize"><li class="li-itemize">
<a id="hevea_default227"></a>
the form of a node (the mechanisms for doing this will be called 
“node constraints”);</li><li class="li-itemize">the number of possible arcs incoming/outgoing from a node; and </li><li class="li-itemize">the possible values associated with those arcs.
</li></ul><p>Figure <a href="#ch030.RDFShapes">3.2</a> presents an RDF node and its corresponding Shape.</p><blockquote class="figure"><div class="center"><hr class="c021"></div> 
<div class="center">
<img src="RDFShapes.png">
</div>

<a id="ch030.RDFShapes"></a>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Figure 3.5: RDF node and its shape.</td></tr>
</table></div>
<div class="center"><hr class="c021"></div></blockquote>
<!--TOC paragraph id="sec39" Unordered arcs-->
<h5 class="paragraph" id="sec39">Unordered arcs</h5><!--SEC END --><p><a id="hevea_default228"></a> <a id="hevea_default229"></a>
A difference between RDF and XML with regards to their data model is that while in RDF, the arcs are unordered, in XML, the sub-elements form an ordered sequence.
RDF validation languages must not assume any order on how the arcs of a node will be treated, while in XML, the order of the elements affect the validation process. </p><p><a id="hevea_default230"></a> <a id="hevea_default231"></a>
From a theoretical point of view, the arcs related with a node in RDF can be represented as a bag or multiset, i.e., a set which allows duplicate elements. </p>
<!--TOC paragraph id="sec40" RDF Validation ≠ Ontology ≠ Instance data-->
<h5 class="paragraph" id="sec40">RDF Validation ≠ Ontology ≠ Instance data</h5><!--SEC END --><p>Notice that RDF validation is different from ontology definition and also different from instance data.</p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default232"></a> 
<a id="hevea_default233"></a>
</p>Ontologies are usually focused on real-world things or at least objects from some domain. 
The semantic web community has put a lot of emphasis on defining ontologies for different domains and there are several vocabularies like OWL, RDFS, etc. that can be used to that end. 
People concerned with this level are ontology engineers which must have skills to understand how to represent the knowledge of some domain.<p><a id="hevea_default234"></a>
</p></li><li class="li-itemize">Instance data refers to the data of some situation or problem at any given point. 
That data can be obtained from different sources and is materialized in some data representation language. 
In our case, instance data refers to RDF graphs that are created by developers and programmers, or generated automatically from other sources like sensors. <p><a id="hevea_default235"></a>
</p></li><li class="li-itemize">RDF validation is an intermediate process that can check if that instance data conforms to some desired schema. 
In the case of RDF, it is focused on RDF graph features which are at a lower level than ontology features. 
<a id="hevea_default236"></a>
The people interested in RDF data description and validation are data engineers and have concerns that are different from those of ontology engineers. 
<a id="hevea_default237"></a>
Data engineers are more worried about how to model data so the developers 
can effectively and efficiently produce or consume it.</li></ul><p>Figure <a href="#ch030.RDFValidationVsOntology">3.2</a> represents the difference between instance data, ontology definitions, and RDF validation.</p><blockquote class="figure"><div class="center"><hr class="c021"></div> 
<div class="center">
<img src="RDFValidationVsOntology.png">
</div>

<a id="ch030.RDFValidationVsOntology"></a> 
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Figure 3.6: RDF validation vs. ontology definition.</td></tr>
</table></div>
<div class="center"><hr class="c021"></div></blockquote>
<!--TOC paragraph id="sec41" Shapes ≠ Types-->
<h5 class="paragraph" id="sec41">Shapes ≠ Types</h5><!--SEC END --><p> 
<a id="ch030ShapesNotTypes"></a></p><p><a id="hevea_default238"></a>
Given the open and flexible nature of RDF, nodes in RDF graphs can have zero, one or many 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> arcs. </p><p>Some application can use nodes of type 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">Person</span></code> with some properties while another application can use nodes with the same type but different properties.
For example, 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">Person</span></code> can represent friend, invitee, patient,...in different applications or even in different contexts of the same application.
The same types can have different meanings and different structure depending on the context.</p><p>While from an ontology point of view a concept has a single meaning, applications that are using that same concept
may select different properties and values and thus, 
the corresponding representations may differ.</p><p>Nodes in RDF graphs are not necessarily annotated with fully discriminating types. 
This implies that it is not possible to validate the shape of a node by just looking at its 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> arc.</p><p>We should be able to define specific validation constraints in different contexts.</p><p><a id="hevea_default239"></a>
</p>
<!--TOC paragraph id="sec42" Inference-->
<h5 class="paragraph" id="sec42">Inference</h5><!--SEC END --><p> 
<a id="ch030Inference"></a></p><p>Validation can be performed before or after inference.
Validation after inference (or validation on a backward-chaining store that does inference on the fly) checks the correctness of the implications.
An inference testing service could use an input schema describing the contents of the input RDF graph and an output schema describing the contents of the expected inferred RDF graph.
The service can check that instance data conforms to the input schema before inference and that after applying a reasoner, 
the resulting RDF graph with inferred triples, conforms to the output schema.</p><div class="example"><div class="theorem"><span class="c013">Example 21</span>  <em>
</em><a id="ch040:exampleInference"></a><em>
Suppose we have a schema with two shapes, each with one requirement:</em><ul class="itemize"><li class="li-itemize"><em>
</em><em>
</em><code><em><span class="c006">PersonShape</span></em></code><em> requires an </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em>
</em></li><li class="li-itemize"><em>
</em><code><em><span class="c006">TeacherShape</span></em></code><em> requires an </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Teacher</span></em></code><em>
</em></li></ul><p><em><em>If we validate the following RDF graph without inference, only </em></em><em><em>
</em></em><code><em><em>:</em></em></code><code><em><em><span class="c006">alice</span></em></em></code><em><em> would match </em></em><em><em>
</em></em><code><em><em><span class="c006">PersonShape</span></em></em></code><em><em>. 
However, if we validate the RDF graph that results of applying RDF Schema inference, then both </em></em><em><em>
</em></em><code><em><em>:</em></em></code><code><em><em><span class="c006">bob</span></em></em></code><em><em> and </em></em><em><em>
</em></em><code><em><em>:</em></em></code><code><em><em><span class="c006">carol</span></em></em></code><em><em> would also match </em></em><em><em>
</em></em><code><em><em><span class="c006">PersonShape</span></em></em></code><em><em>.</em></em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><em><span class="c011">:</span></em></em><em><em><span class="c011"><span class="c006">teaches</span></span></em></em><em><em><span class="c011">  </span></em></em><em><em><span class="c011"><span class="c004">rdfs</span></span></em></em><em><em><span class="c011">:</span></em></em><em><em><span class="c011"><span class="c006">domain</span></span></em></em><em><em><span class="c011">     :</span></em></em><em><em><span class="c011"><span class="c006">Teacher</span></span></em></em><em><em><span class="c011"> .</span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">:</span></em></em><em><em><span class="c011"><span class="c006">Teacher</span></span></em></em><em><em><span class="c011">  </span></em></em><em><em><span class="c011"><span class="c004">rdfs</span></span></em></em><em><em><span class="c011">:</span></em></em><em><em><span class="c011"><span class="c006">subClassOf</span></span></em></em><em><em><span class="c011"> :</span></em></em><em><em><span class="c011"><span class="c006">Person</span></span></em></em><em><em><span class="c011">  .</span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">:</span></em></em><em><em><span class="c011"><span class="c006">alice</span></span></em></em><em><em><span class="c011"> </span></em></em><em><em><span class="c011"><span class="c003">a</span></span></em></em><em><em><span class="c011"> :</span></em></em><em><em><span class="c011"><span class="c006">Person</span></span></em></em><em><em><span class="c011"> .</span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">:</span></em></em><em><em><span class="c011"><span class="c006">bob</span></span></em></em><em><em><span class="c011"> </span></em></em><em><em><span class="c011"><span class="c003">a</span></span></em></em><em><em><span class="c011"> :</span></em></em><em><em><span class="c011"><span class="c006">Teacher</span></span></em></em><em><em><span class="c011"> .</span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">:</span></em></em><em><em><span class="c011"><span class="c006">carol</span></span></em></em><em><em><span class="c011"> :</span></em></em><em><em><span class="c011"><span class="c006">teaches</span></span></em></em><em><em><span class="c011"> :</span></em></em><em><em><span class="c011"><span class="c006">algebra</span></span></em></em><em><em><span class="c011"> .</span></em></em></td></tr>
</table></div></div><p>Validation workflows will likely perform validation both before and after validation.
Systems which perform possibly incomplete inference can use this to verify that their light-weight, partial inference is producing the required triples.</p>
<!--TOC paragraph id="sec43" RDF flexibility-->
<h5 class="paragraph" id="sec43">RDF flexibility</h5><!--SEC END --><p>RDF was born as a schema-less language, a feature which provided a series of advantages in terms of flexibility and adaptation of RDF data to different scenarios.</p><p>The same property, can have different types of values. 
For example, a property like 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">creator</span></code> can have as value a string literal or a more complex resource.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">angie</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">creator</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Keith Richards"</span></span></span><span class="c011"> ,</span><span class="c011">
</span><span class="c011">                      [ </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">Person</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">                          </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">givenName</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Mick"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">                          </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">familyName</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Jagger"</span></span></span><span class="c011">
</span><span class="c011">                      ] .</span></td></tr>
</table>
<!--TOC paragraph id="sec44" Repeated properties-->
<h5 class="paragraph" id="sec44">Repeated properties</h5><!--SEC END --><p>Sometimes, the same property is used for different purposes in the same data. 
For example, a book can have two codes with different structure.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">book</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011">      </span><span class="c011"><span class="c005"><span class="c011">"Moby Dick"</span></span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">      </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">productID</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"ISBN-10:1503280780"</span></span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">      </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">productID</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"ISBN-13:978-1503280786"</span></span></span><span class="c011"> .</span></td></tr>
</table><p>This is a natural consequence of the re-use of general properties,<sup><a id="text5" href="#note5">3</a></sup> 
which is especially common in domains where many kinds of data are represented in the same structure.</p><div class="example"><div class="theorem"><span class="c013">Example 22</span>  <em>Repeated properties example in clinical records</em><p><em>Repeated properties which require different model for each value appear frequently in real-life scenarios. 
For example, FHIR (see Section </em><a href="#ch060FHIR"><em>6.2</em></a><em> for a more detailed description) represents clinical records using a generic observation object.
This means that a blood pressure measurement is recorded using the same data structure as a temperature.
The challenge is that while a temperature observation has one 
value:</em><sup><a id="text6" href="#note6"><em>4</em></a></sup><em> </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Obs1</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">code</span></span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">LOINC8310</span></span></em><em><span class="c011">-5 ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">valueQuantity</span></span></em><em><span class="c011"> 36.5 ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">valueUnit</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Cel"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>a blood pressure observation has two:</em><sup><a id="text7" href="#note7"><em>5</em></a></sup><em> </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Obs2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">code</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">LOINC55284</span></span></em><em><span class="c011">-4 ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">code</span></span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">LOINC8480</span></span></em><em><span class="c011">-6 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">valueQuantity</span></span></em><em><span class="c011"> 107 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">valueUnit</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"mm[Hg]"</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">code</span></span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">LOINC8462</span></span></em><em><span class="c011">-4 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">valueQuantity</span></span></em><em><span class="c011"> 60 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">valueUnit</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"mm[Hg]"</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>We can see that a blood pressure observation must have two instances of the </em><em>
</em><code><em><span class="c006">fhir</span></em></code><code><em>:</em></code><code><em><span class="c006">Observation</span></em></code><code><em>.</em></code><code><em><span class="c006">component</span></em></code><em> property, 
one with a code for a systolic measurement and the other with a code for a diastolic measurement.</em></p><p><em>Treating these two constraints on the property </em><em>
</em><code><em><span class="c006">fhir</span></em></code><code><em>:</em></code><code><em><span class="c006">Observation</span></em></code><code><em>.</em></code><code><em><span class="c006">component</span></em></code><em> individually would cause the systolic constraint to reject the diastolic measurement and the diastolic constraint to reject the systolic measurement—both constraints must be considered as being satisfied if one of the components satisfies one and the other component satisfies the other.
</em></p></div></div><p><a id="hevea_default240"></a>
</p>
<!--TOC paragraph id="sec45" Closed Shapes-->
<h5 class="paragraph" id="sec45">Closed Shapes</h5><!--SEC END --><p>The RDF dictum of <em>anyone can say anything about anything</em> is in tension with conventional data practices 
which reject data with any assertions that are not recognized by the schema.
<a id="hevea_default241"></a> <a id="hevea_default242"></a>
For SQL schemas, this is enforced by the data storage itself; there’s simply no place to record assertions that does not correspond to some attribute in a table specified by the DDL.
<a id="hevea_default243"></a>
XML Schema offers some flexibility with constructs like 

<code>&lt;</code><code><span class="c006">xs</span></code><code>:</code><code><span class="c006">any</span></code><code> </code><code><span class="c006">processContents</span></code><code>=</code><code><code>"skip"</code></code><code>&gt;</code> 
but these are rare in formats for the exchange of machine-processable data.
Typically the edict is <em>if you pass me something I do not understand fully, I will reject it</em>.</p><p>For shapes-based schema languages, a shape is a collection of constraints to be applied to some node in an RDF graph and if it is 
<code><span class="c003">closed</span></code>, every property attached to that node must be included in the shape.</p><p>Even if the receiver of the data permits extra triples, 
it may not be able to store or return them.
For instance, a Linked Data container may accept arbitrary data, search for sub-graph which it recognizes, and ignore the rest.
A user expecting to put data in such a container and retrieve it will have a rude surprise when he gets back only a subset of the submitted data.
Even if the receiver does not validate with closed shapes, the user may wish to pre-emptively validate their data against the receiver’s schema, flagging any triples not recognized by the schema.</p><p>Another value of closed shapes is that it can be used to detect spelling mistakes.
If a shape in a schema includes an optional 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">label</span></code> and a user has accidentally included an 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">label</span></code>, the schema has no way to detect that mistake unless all unknown properties are reported.</p><p>Like with <em>repeated properties</em>, the validation of closed shapes must consider property constraints as a whole, rather than examining each individually.</p>
<!--TOC section id="sec46" Previous RDF Validation Approaches-->
<h2 class="section" id="sec46">3.3  Previous RDF Validation Approaches</h2><!--SEC END --><p> 
<a id="ch030.PreviousRDFValidationApproaches"></a>
<a id="ch3.sec3"></a></p><p>In this section we review some previous approaches that have already been proposed to validate RDF.</p>
<!--TOC subsection id="sec47" Query-based Validation-->
<h3 class="subsection" id="sec47">3.3.1  Query-based Validation</h3><!--SEC END --><p>
<a id="ch3.sec3.1"></a></p><p><a id="hevea_default244"></a> <a id="hevea_default245"></a> <a id="hevea_default246"></a> <a id="hevea_default247"></a>
Query-based approaches use a query Language to express validation constraints. 
One of the earliest attempts in this category was Schemarama [<a href="#Schemarama">63</a>], by Libby Miller and Dan Brickley, 
which applied Schematron to RDF using the Squish query language. 
<a id="hevea_default248"></a> 
That approach was later adapted to use TreeHuger which reinterpreted XPath syntax to describe paths in the RDF model [<a href="#SteerMiller2004">95</a>].</p><p><a id="hevea_default249"></a>
Once SPARQL appeared in scene, it was also adopted for RDF validation. 
SPARQL has a lot of expressiveness and can be used to validate numerical and statistical computations [<a href="#Labra13">55</a>]. </p><div class="example"><div class="theorem"><span class="c013">Example 23</span>  <em>Using SPARQL to validate RDF</em><em>
</em><a id="ch030.ValidatingWithSPARQL"></a><p><em>If we want to validate that an RDF node has a </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> property with a </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em> value and a </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">gender</span></em></code><em> property whose value must be one of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Male</span></em></code><em> or </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Female</span></em></code><em> in SPARQL, 
we can do the following query:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c003">ASK</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c003">SELECT</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">   ?</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">o</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">   } </span></em><em><span class="c011"><span class="c003">GROUP</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">BY</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">HAVING</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><span class="c003">COUNT</span></span></em><em><span class="c011">(*)=1)</span></em><em><span class="c011">
</span></em><em><span class="c011"> }</span></em><em><span class="c011">
</span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c003">SELECT</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">    ?</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">o</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">FILTER</span></span></em><em><span class="c011"> ( </span></em><em><span class="c011"><span class="c006">isLiteral</span></span></em><em><span class="c011">(?</span></em><em><span class="c011"><span class="c006">o</span></span></em><em><span class="c011">) &amp;&amp;</span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011">(?</span></em><em><span class="c011"><span class="c006">o</span></span></em><em><span class="c011">) = </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> )</span></em><em><span class="c011">
</span></em><em><span class="c011">   } </span></em><em><span class="c011"><span class="c003">GROUP</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">BY</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">HAVING</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><span class="c003">COUNT</span></span></em><em><span class="c011">(*)=1)</span></em><em><span class="c011">
</span></em><em><span class="c011"> }</span></em><em><span class="c011">
</span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c003">SELECT</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><span class="c003">COUNT</span></span></em><em><span class="c011">(*) </span></em><em><span class="c011"><span class="c003">AS</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">c1</span></span></em><em><span class="c011">) {</span></em><em><span class="c011">
</span></em><em><span class="c011">    ?</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">o</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">   } </span></em><em><span class="c011"><span class="c003">GROUP</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">BY</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">HAVING</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><span class="c003">COUNT</span></span></em><em><span class="c011">(*)=1)</span></em><em><span class="c011">
</span></em><em><span class="c011"> }</span></em><em><span class="c011">
</span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c003">SELECT</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><span class="c003">COUNT</span></span></em><em><span class="c011">(*) </span></em><em><span class="c011"><span class="c003">AS</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">c2</span></span></em><em><span class="c011">) {</span></em><em><span class="c011">
</span></em><em><span class="c011">    ?</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">o</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c003">FILTER</span></span></em><em><span class="c011"> ((?</span></em><em><span class="c011"><span class="c006">o</span></span></em><em><span class="c011"> = </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011"> || ?</span></em><em><span class="c011"><span class="c006">o</span></span></em><em><span class="c011"> = </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011">))</span></em><em><span class="c011">
</span></em><em><span class="c011">   } </span></em><em><span class="c011"><span class="c003">GROUP</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">BY</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">HAVING</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><span class="c003">COUNT</span></span></em><em><span class="c011">(*)=1)</span></em><em><span class="c011">
</span></em><em><span class="c011"> }</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">FILTER</span></span></em><em><span class="c011"> (?</span></em><em><span class="c011"><span class="c006">c1</span></span></em><em><span class="c011"> = ?</span></em><em><span class="c011"><span class="c006">c2</span></span></em><em><span class="c011">)</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table></div></div><p>Using plain-SPARQL queries for RDF validation has the following benefits. </p><ul class="itemize"><li class="li-itemize">It is very expressive and can handle most RDF validation needs.
</li><li class="li-itemize">SPARQL is ubiquitous: most of RDF products already have support for SPARQL.
</li></ul><p>But it also has the following problems. </p><ul class="itemize"><li class="li-itemize">Being very expressive, it is also very verbose. 
SPARQL queries can be difficult to write and debug by non-experts.</li><li class="li-itemize">It can be idiomatic in the sense that there can be more 
than one way to encode the same constraint.</li><li class="li-itemize">For all but the simplest data structures, it is complex to 
exhaustively write SPARQL queries which accept all valid permutations and reject all incorrect structures. 
This exhaustive enumeration is essentially the job of the <a id="Structural Languages"></a> approaches described below.</li></ul><p><a id="hevea_default250"></a> <a id="hevea_default251"></a>
SPARQL Inferencing Notation (SPIN)[<a href="#SPIN11">51</a>] was introduced by TopQuadrant as a mechanism 
to attach SPARQL-based constraints and rules to classes. 
SPIN also contained templates, user-defined functions and template libraries.
SPIN rules are expressed as SPARQL ASK queries where 
<code><span class="c003">true</span></code> indicates an error or 
CONSTRUCT queries that produce violations. 
SPIN uses the expressiveness of SPARQL plus the semantics of
the variable 
<code>?</code><code><span class="c006">this</span></code> standing for the current focus node (the subject being validated).</p><p><a id="hevea_default252"></a> 
SPIN has heavily influenced the design of SHACL. 
The Working Group has decided to offer a SPARQL based semantics and the second part of the 
working draft also contains a SPIN-like mechanism for defining SPARQL native constraints, templates and user-defined functions. 
There are some differences like the renaming of some terms and the addition of more core constraints like disjunction, negation or closed shapes.
The following document describes how SHACL and SPIN relate 
(<a href="http://spinrdf.org/spin-shacl.html"><span class="c010">http://spinrdf.org/spin-shacl.html</span></a>).</p><p><a id="hevea_default253"></a> <a id="hevea_default254"></a> 
There have been other proposals using SPARQL combined with other technologies. 
Fürber and Hepp [<a href="#FurberH10">39</a>] proposed a combination between SPARQL and SPIN as a semantic data quality framework,
Simister and Brickley [<a href="#Simister13">90</a>] propose a combination between SPARQL queries and property paths which is used by Google and Kontokostas et al. [<a href="#kontokostasDatabugger">53</a>] proposed <em>RDFUnit</em> a Test-driven framework which employs SPARQL query templates that are instantiated into concrete quality test queries. </p>
<!--TOC subsection id="sec48" Inference-based Approaches-->
<h3 class="subsection" id="sec48">3.3.2  Inference-based Approaches</h3><!--SEC END --><p>
<a id="ch3.sec3.2"></a></p><p><a id="hevea_default255"></a> <a id="hevea_default256"></a>
Inference based approaches adapt RDF Schema or OWL to express validation semantics. 
The use of Open World and Non-unique name assumption limits the validation possibilities. 
In fact, what triggers constraint violations in closed world systems leads to new inferences in standard OWL systems.
Motik, Horrocks, and Sattler [<a href="#Motik07">64</a>] proposed the notion of <em>extended description logics</em> knowledge bases, in which a certain subset of axioms were designated as constraints. </p><p><a id="hevea_default257"></a>
In [<a href="#Patel-Schneider2015">72</a>], Peter F. Pater-Schneider, separates the validation problem in two parts: 
integrity constraint and closed-world recognition. 
He shows that description logics can be implemented for both by translation to SPARQL queries. </p><p><a id="hevea_default258"></a> <a id="hevea_default259"></a>
In 2010, Tao et al. [<a href="#Tiao10">96</a>] had already proposed the use of OWL expressions with 
Closed World Assumption and a weak variant of Unique Name Assumption to express integrity constraints. </p><p><a id="hevea_default260"></a> <a id="hevea_default261"></a> <a id="hevea_default262"></a> <a id="hevea_default263"></a>
Their work forms the bases of Stardog ICV [<a href="#ClarkSirin13">21</a>] (Integrity Constraint Validation), 
which is part of the Stardog database. 
It allows to write constraints using OWL syntax but with a different semantics based on a closed world and unique name assumption. 
The constraints are translated to SPARQL queries. 
As an example, a User could be specified as follows.</p><div class="example"><div class="theorem"><span class="c013">Example 24</span>  <em>Validation constraints using Stardog ICV</em><p><em>The following code declares several integrity constraints in Stardog ICV. 
</em><a id="hevea_default264"></a><em>
It declares that nodes that are instances of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em> must have at exactly one value of 
</em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> (it is a functional property) which must be a </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em>,
an optional value of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">gender</span></em></code><em> which must be either </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Male</span></em></code><em> or </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Female</span></em></code><em>, 
and zero or more values of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> which must be instances of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em>.</em></p><p><em>	
</em><a id="StardogCountry"></a><em>
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">owl</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Class</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">subClassOf</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">owl</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">onProperty</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">                   </span></em><em><span class="c011"><span class="c004">owl</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCardinality</span></span></em><em><span class="c011"> 1 ] ,</span></em><em><span class="c011">
</span></em><em><span class="c011">                 [ </span></em><em><span class="c011"><span class="c004">owl</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">onProperty</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">                   </span></em><em><span class="c011"><span class="c004">owl</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCardinality</span></span></em><em><span class="c011"> 0 ]</span></em><em><span class="c011">
</span></em><em><span class="c011">                 [ </span></em><em><span class="c011"><span class="c004">owl</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">onProperty</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">                   </span></em><em><span class="c011"><span class="c004">owl</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCardinality</span></span></em><em><span class="c011"> 0</span></em><em><span class="c011">
</span></em><em><span class="c011">                 ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">owl</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">DatatypeProperty</span></span></em><em><span class="c011"> ,</span></em><em><span class="c011">
</span></em><em><span class="c011">                        </span></em><em><span class="c011"><span class="c004">owl</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">FunctionalProperty</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">domain</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">range</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">owl</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ObjectProperty</span></span></em><em><span class="c011"> ,</span></em><em><span class="c011">
</span></em><em><span class="c011">                          </span></em><em><span class="c011"><span class="c004">owl</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">FunctionalProperty</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">              </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">domain</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">              </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">range</span></span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">Gender</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">owl</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ObjectProperty</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">              </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">domain</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">              </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">range</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Gender</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Gender</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>Instance nodes are required to have an </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> declaration whose value is </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em>.</em></p></div></div>
<!--TOC subsection id="sec49" Structural Languages-->
<h3 class="subsection" id="sec49">3.3.3  Structural Languages</h3><!--SEC END --><p> 
<a id="StructuralLanguages"></a>
<a id="ch3.sec3.3"></a></p><p><a id="hevea_default265"></a> <a id="hevea_default266"></a>
While SPARQL and OWL Closed World were existing languages which were applied to RDF validation, 
some novel languages have been designed specifically to that task.</p><p><a id="hevea_default267"></a>
OSLC Resource Shapes [<a href="#OSLCResourceShapes">86</a>] have been proposed as a high level and declarative description of the expected contents of an RDF graph expressing constraints on RDF terms. </p><div class="example"><div class="theorem"><span class="c013">Example 25</span>  <em>OSLC example</em><em>
</em><a id="ch030.ValidatingWithOSLC"></a><p><em>Example </em><a href="#ch030.ValidatingWithSPARQL"><em>23</em></a><em> can be represented in OSLC as:</em></p><p><a id="ResoueceShapesUser"></a><em>
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">user</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">rs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ResourceShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">rs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">rs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"name"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">rs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">propertyDefinition</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">rs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">valueType</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">rs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">occurs</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">rs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Exactly</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">one</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">rs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">rs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"gender"</span></em></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">rs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">propertyDefinition</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">rs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">allowedValue</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011">, </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">rs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">occurs</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">rs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Zero</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c003">or</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">one</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">].</span></em></td></tr>
</table></div></div><p><a id="hevea_default268"></a> 
Dublin Core Application Profiles [<a href="#KarenCoyleTomBaker13">23</a>] also define a set of validation constraints using Description Templates</p><p>Fischer et al. [<a href="#FischerEtAl%3AEDBT%2FICDT-WS2015">38</a>] proposed RDF Data Descriptions as another domain specific language that is 
compiled to SPARQL. 
The validation is class based in the sense that RDF nodes are validated against a class 
<code><span class="c006">C</span></code> 
whenever they contain an 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code><code> </code><code><span class="c006">C</span></code> declaration. 
This restriction enables the authors to handle the validation of large datasets and to define some optimization techniques which could be applied to shape implementations.</p>
<!--TOC section id="sec50" Validation Requirements-->
<h2 class="section" id="sec50">3.4  Validation Requirements</h2><!--SEC END --><p> 
<a id="ch030ValidationRequirements"></a>
<a id="ch3.sec4"></a></p><p>In this section we collect the different validation requirements that we have identified for an RDF validation language. </p><p>Some of this requirements have been borrowed from the SHACL Use Cases and Requirements document [<a href="#SHACLUseCases">91</a>]. 
Other collections of validation requirements have also been proposed [<a href="#Bosch2015">13</a>].</p>
<!--TOC subsection id="sec51" General Requirements-->
<h3 class="subsection" id="sec51">3.4.1  General Requirements</h3><!--SEC END --><p>
<a id="ch3.sec4.1"></a></p><ul class="itemize"><li class="li-itemize">
<a id="VReqHighLevel"></a>VR 1. <em>High-level language</em>:

The schema must be defined using a high-level language that uses concepts familiar to the users that intend to validate RDF. </li><li class="li-itemize">
<a id="VReqConcise"></a>VR 2. <em>Concise</em>:
 
Schemas must be easy to understand, read, and write by humans. 
Verbose languages tend to be neglected by their users.</li><li class="li-itemize">
<a id="VReqFormal"></a>VR 3. <em>Formal</em>:
 
It must be based on a formal language that can be automatically processed by machines without ambiguity. 
The schemas must be parsed and processed by automatic means and the semantics of the different terms must be defined in a non-ambiguous way.</li><li class="li-itemize">
<a id="VReqImplemIndep"></a>VR 4. <em>Implementation independence</em>:
 
The schema definition must be implementation independent so processors can be implemented using different programming languages and technologies</li><li class="li-itemize">
<a id="VReqFeasibility"></a>VR 5. <em>Feasibility</em>:

The validation algorithm that a schema processor has to implement must be feasibly computed. 
It is necessary to check that suitable algorithms are available to check if RDF datasets comply with some schema. 
Otherwise, if the validation requires too many computational resources, there will not be interest in its application in practical scenarios.</li><li class="li-itemize">
<a id="VReqLeastPower"></a>VR 6. <em>Least power</em>:
 
The schema language must be able to do its job well but no more than that. 
Although one could use whole procedural languages like Java or Python to validate RDF, doing it in this way will be cumbersome as the validation rules will be interspersed with the code [<a href="#LeastPower">97</a>]. 
This principle states that a declarative language should be preferred over a procedural one. </li></ul>
<!--TOC subsection id="sec52" Graph-based Requirements-->
<h3 class="subsection" id="sec52">3.4.2  Graph-based Requirements</h3><!--SEC END --><p>
<a id="ch3.sec4.2"></a></p><p>Given that the RDF data model is a graph model. 
An RDF validation language must be able to describe graph structures. 
The following set of requirements could be applied to any validation language related with graphs.</p><ul class="itemize"><li class="li-itemize">
<a id="VReqFocusIdentification"></a>VR 7. <em>Focus identification</em>:
 A validation process must identify the graph nodes that are expected match constraints.
Unlike tree structures like XML or JSON, graphs like RDF have no “root” node.
For RDF, the focii would be IRIs, literals and blank nodes which are subject to validation.</li><li class="li-itemize">
<a id="VReqProperties"></a>VR 8. <em>Properties</em>:
 A schema language must be able to describe which arcs relate with which nodes. 
In the case of RDF, arcs between nodes are called properties or predicates and are IRIs. 
The schema language must be able to describe the properties that depart from some nodes.</li><li class="li-itemize">
<a id="VReqRepeatedProperties"></a>VR 9. <em>Repeated properties</em>:
 
Some of the arcs that depart from a node may be repeated and the nodes that they point to could have different structure.
The schema language must be able to declare that some properties can appear repeated but with different contents. </li><li class="li-itemize">
<a id="VReqInverseProperties"></a>VR 10. <em>Inverse properties</em>:
 
It must be possible to describe the incoming arcs of a node, which are also called inverse properties.</li><li class="li-itemize">
<a id="VReqPaths"></a>VR 11. <em>Paths</em>:
 
The schema language must be able to describe the paths that relate two given nodes in a graph. 
SPARQL 1.1 contains a language to describe paths in an RDF graph. 
For example, the transitive traversal of the 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">subClassOf</span></code> property can be expressed as 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">subClassOf</span></code><code>*</code>.</li></ul>
<!--TOC subsection id="sec53" RDF Data Model Requirements-->
<h3 class="subsection" id="sec53">3.4.3  RDF Data Model Requirements</h3><!--SEC END --><p>
<a id="ch3.sec4.3"></a></p><p>The schema language must be able to check the different types of contents that appear in the RDF data model.</p><ul class="itemize"><li class="li-itemize"> 
<a id="VReqNodeKinds"></a>VR 12. <em>Node kinds</em>:
 The RDF data model contains 
three kinds of nodes: IRIs, Literals, and BNodes.
The schema language must be able to describe the kind of some specific nodes
</li><li class="li-itemize">
<a id="VReqDatatypes"></a>VR 13. <em>Datatypes</em>:
 The schema language must be able to describe which are the datatypes that some nodes have. 
</li><li class="li-itemize">
<a id="VReqFacets"></a>VR 14. <em>Datatype facets</em>:
 The XML Schema datatypes are the most popular datatypes employed in RDF datasets.
Those datatypes can be qualified with facets which constrain the possible values.
For example, one can say that a value is an 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">integer</span></code> between 10 and 20.
</li><li class="li-itemize">
<a id="VReqLanguageTags"></a>VR 15. <em>Language tags</em>:
 The schema language can describe the language tag associated with literals of type 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">langString</span></code>.</li></ul>
<!--TOC subsection id="sec54" Data-modeling-based Requirements-->
<h3 class="subsection" id="sec54">3.4.4  Data-modeling-based Requirements</h3><!--SEC END --><p>
<a id="ch3.sec4.4"></a></p><p>This set of requirements are common to technologies that model data.</p><ul class="itemize"><li class="li-itemize">
<a id="VReqand"></a>VR 16. <em>Conjunction</em>:
 It must be possible to declare that some content must satisfy all the constraints in a set. </li><li class="li-itemize">
<a id="VReqor"></a>VR 17. <em>Disjunction</em>:
 It must be possible to declare that some content must satisfy some of the constraints in a set.</li><li class="li-itemize">
<a id="VReqaddition"></a>VR 18. <em>Addition</em>:
 It must be possible to declare that some content must be the addition of some content.
In the case of RDF graphs, one may want to declare that a node must have some content and some other content.</li><li class="li-itemize">
<a id="VReqregCardinality"></a>VR 19. <em>Regular cardinalities</em>:
. The schema must support regular cardinalities like optional, zero or more, one or more.</li><li class="li-itemize">
<a id="VReqnumericalCardinality"></a>VR 20. <em>Numerical cardinalities</em>:
. The schema must support numerical cardinalities like repetitions between <span class="c012">m</span> and <span class="c012">n</span>, or at least <span class="c012">m</span> repetitions.</li><li class="li-itemize">
<a id="VReqnot"></a>VR 21. <em>Negation</em>:
 It must be possible to declare that some content must not satisfy some constraint.</li><li class="li-itemize">
<a id="VReqrecursion"></a>VR 22. <em>Recursion</em>:
 It must be possible to declare that some group of constraints that depend on another group in a recursive way.</li><li class="li-itemize">
<a id="VReqoneOf"></a>VR 23. <em>OneOf</em>:
 It must be possible to declare that some content can have one of several structures.
For example, a person can have either a full name or a combination of first name and last name, but not both. </li><li class="li-itemize">
<a id="VReqopenClosed"></a>VR 24. <em>Open/Closed models</em>:
 The schema language must be able to define that some content is open and admits other features apart from the declared structure or closed and does not admit other features. </li><li class="li-itemize">
<a id="VReqCoConstraints"></a>VR 25. <em>Co-occurrence constraints</em>:
 The schema language must be able to declare that the appearance of some content affects other content. </li></ul>
<!--TOC subsection id="sec55" Expressiveness of Schema Language-->
<h3 class="subsection" id="sec55">3.4.5  Expressiveness of Schema Language</h3><!--SEC END --><p>
<a id="ch3.sec4.5"></a></p><ul class="itemize"><li class="li-itemize">
<a id="VReqComparisons"></a>VR 26. <em>Comparisons</em>:
 
The schema language must describe comparisons between values like declaring that a value is less than or equal to another one.</li><li class="li-itemize">
<a id="VReqArithmetic"></a>VR 27. <em>Arithmetic</em>:
 
The schema language can perform arithmetic expressions for constraint checking. 
For example, to describe the area of a rectangle as the product of its declared base by its declared height it must perform that multiplication.</li><li class="li-itemize">
<a id="VReqComplex"></a>VR 28. <em>Expressions</em>:
 
The schema language can define complex expressions to enable further constraint checking.
This requirement can contradict VR<a href="#VReqHighLevel">1</a> so it is necessary to find a balance between both requirements.</li><li class="li-itemize">
<a id="VReqcompose"></a>VR 29. <em>Composition</em>:
 
The schema language provides mechanisms to define constraints that are composed of other constraints.</li><li class="li-itemize">
<a id="VReqabstraction"></a>VR 30. <em>Abstraction</em>:
 
The schema language provides mechanisms to define abstractions with parameters that can later be reused.
This feature is usually implemented by functions, macros, or templates.</li><li class="li-itemize">
<a id="VReqmodularity"></a>VR 31. <em>Modularity</em>:
 
The schema definitions can be done in a modular way so they can be reused and imported from external sources.</li><li class="li-itemize">
<a id="VReqspecialization"></a>VR 32. <em>Specialization</em>:
 
The schema language can define a group of constraints that extends another group of constraints with some further refinements.</li></ul>
<!--TOC subsection id="sec56" Validation Invocation Requirements-->
<h3 class="subsection" id="sec56">3.4.6  Validation Invocation Requirements</h3><!--SEC END --><p>
<a id="ch3.sec4.6"></a></p><p>The following requirements refer to the relationship between schema and instance data, and to the mechanism by which the validation process is triggered.</p><ul class="itemize"><li class="li-itemize">
<a id="VReqwholeDataset"></a>VR 33. <em>Whole dataset</em>:
 
The schema language can define constraints that must be satisfied by a whole RDF dataset. </li><li class="li-itemize">
<a id="VReqsingleNode"></a>VR 34. <em>Single node</em>:
 
It must be possible to validate a single node in an RDF graph against a set of 
constraints. </li><li class="li-itemize">
<a id="VReqselection"></a>VR 35. <em>Selection</em>:
 
There are mechanisms to select which nodes in an RDF graph are selected for validation against which sets of constraints. </li><li class="li-itemize">
<a id="VReqReuse"></a>VR 36. <em>Reuse</em>:
 
It should be possible to reuse a set of constraints in different contexts.</li></ul>
<!--TOC subsection id="sec57" Usability Requirements-->
<h3 class="subsection" id="sec57">3.4.7  Usability Requirements</h3><!--SEC END --><p>
<a id="ch3.sec4.7"></a></p><p>The following set of requirements refer to the usability of the schema language.</p><ul class="itemize"><li class="li-itemize">
<a id="VReqerrorReporting"></a>VR 37. <em>Error reporting</em>:
 
Validation processors complying to the schema language can generate
a report of the different violation errors that appeared during validation.</li><li class="li-itemize">
<a id="VReqvalidationReport"></a>VR 38. <em>Validation report</em>:
 
The schema language can generate a report of the nodes that have been validated and the set of constraints they satisfy.</li><li class="li-itemize">
<a id="VReqannotations"></a>VR 39. <em>Annotations</em>:

It is possible to provide annotations with some extra information that does not affect validation but can be used for different purposes 
such as searching, browsing, UI generation, etc.</li><li class="li-itemize">
<a id="VReqFamiliarSyntax"></a>VR 40. <em>Familiar syntax</em>:
 
The schema language supports a syntax that is familiar to its intended audience.
In the case of RDF validation, a familiar syntax could be RDF.</li><li class="li-itemize">
<a id="VReqprofiles"></a>VR 41. <em>Profiles</em>:

The schema language can include the notion of profiles with different expressiveness so that certain processors implement 
a subset of the validation functionalities.
</li></ul>
<!--TOC section id="sec58" Summary-->
<h2 class="section" id="sec58">3.5  Summary</h2><!--SEC END --><p>
<a id="ch3.sec5"></a></p><p><a id="hevea_default269"></a> <a id="hevea_default270"></a> <a id="hevea_default271"></a> <a id="hevea_default272"></a> 
In this chapter we learned which are the main motivations for validating RDF. We started describing what do other technologies do for validation with an overview of UML, SQL, XML, JSON, and so on.
This section was aimed to present those technologies and to gather some list of validation requirements that are common to all of them.</p><p>We also described some of the previous RDF validation approaches and collected a list of validation requirements that a good schema language for RDF validation must fulfil.
Notice that some of them contradict each other, so it is necessary to reach some compromise solution.</p>
<!--TOC section id="sec59" Suggested Reading-->
<h2 class="section" id="sec59">3.6  Suggested Reading</h2><!--SEC END --><p>
<a id="ch3.sec6"></a></p><p>Non-RDF schema languages</p><ul class="itemize"><li class="li-itemize">The following book contains a good overview of non-RDF validation approaches: <a href="#Abiteboul2011">Abiteboul, Manolescu, Rigaux, Rousset, and
Senellart</a>,<a href="#Abiteboul2011">2012</a> [<a href="#Abiteboul2011">2</a>]
</li><li class="li-itemize"><a href="#Glushko2013discipline">Glushko</a>,<a href="#Glushko2013discipline">2013</a> [<a href="#Glushko2013discipline">41</a>]
</li><li class="li-itemize"><a href="#Murata2005">Murata, Lee, Mani, and Kawaguchi</a>,<a href="#Murata2005">2005</a> [<a href="#Murata2005">65</a>]
</li><li class="li-itemize">Overview of JSON Schema: <a href="#Bourhis2017">Bourhis, Reutter, Suárez, and
Vrgoč</a>,<a href="#Bourhis2017">2017</a> [<a href="#Bourhis2017">14</a>]
</li></ul><p>RDF validation approaches</p><ul class="itemize"><li class="li-itemize">
<a href="#Tiao10">Tao, Sirin, Bao, and McGuinness</a>,<a href="#Tiao10">2010</a> [<a href="#Tiao10">96</a>]
</li><li class="li-itemize"><a href="#Bosch2015">Bosch, Acar, Nolle, and Eckert</a>,<a href="#Bosch2015">2015</a> [<a href="#Bosch2015">13</a>] 
</li><li class="li-itemize">SHACL use cases and requirements: <a href="#SHACLUseCases">Simon Steyskal and Karen Coyle</a>,<a href="#SHACLUseCases">2016</a> [<a href="#SHACLUseCases">91</a>]
</li></ul>
<!--BEGIN NOTES chapter-->
<hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note3" href="#text3">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: http://www.omg.org/spec/OCL/</div></dd><dt class="dt-thefootnotes"><a id="note4" href="#text4">2</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: https://csvlint.io/</div></dd><dt class="dt-thefootnotes"><a id="note5" href="#text5">3</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">Those familiar with the Protégé Pizza Tutorial will recall that it uses a 

<code><span class="c006">has</span></code><code> </code><code><span class="c006">topping</span></code> property rather than a 

<code><span class="c006">has</span></code><code> </code><code><span class="c006">pizza</span></code><code> </code><code><span class="c006">topping</span></code> property.</div></dd><dt class="dt-thefootnotes"><a id="note6" href="#text6">4</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">Simplified from <a href="http://build.fhir.org/observation-example-body-temperature.ttl.html"><span class="c010">http://build.fhir.org/observation-example-body-temperature.ttl.html</span></a>.</div></dd><dt class="dt-thefootnotes"><a id="note7" href="#text7">5</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">Simplified from <a href="http://build.fhir.org/observation-example-bloodpressure.ttl.html"><span class="c010">http://build.fhir.org/observation-example-bloodpressure.ttl.html</span></a>.</div></dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec60" Shape Expressions-->
<h1 class="chapter" id="sec60">Chapter 4  Shape Expressions</h1><!--SEC END --><p> 
<a id="ch040ShEx"></a>
<a id="ch4"></a></p><p><a id="hevea_default273"></a> 
<a id="hevea_default274"></a> 
<a id="hevea_default275"></a> 
<a id="hevea_default276"></a>
<a id="hevea_default277"></a>
<a id="hevea_default278"></a>
Shape Expressions (ShEx) is a schema language for describing RDF graphs structures.
ShEx was originally developed in late 2013 to provide a human-readable syntax for OSLC Resource Shapes.
It added disjunctions, so it was more expressive than Resource Shapes.
Tokens in the language were adopted from Turtle [<a href="#EricSemantics2014">80</a>] and 
SPARQL [<a href="#SPARQL11">44</a>] with tokens for grouping, repetition and wildcards from regular expression and RelaxNG Compact Syntax [<a href="#RelaxNG">100</a>].
The language was described in a paper [<a href="#EricSemantics2014">80</a>] 
and codified in a June 2014 W3C member submission [<a href="#ShExSubmission14">92</a>] which included a primer and a semantics specification.
This was later deemed “ShEx 1.0”.</p><p><a id="hevea_default279"></a>
The W3C Data Shapes Working group started in September 2014 and quickly coalesced into two groups: the ShEx camp and the SHACL camp.
In 2016, the ShEx camp split from the Data Shapes Working Group to form a ShEx Community Group (CG).
In April of 2017, the ShEx CG released ShEx 2 with a primer, a semantic specification and a test-suite with implementation reports.</p><p>As of publication, the ShEx Community Group was starting work on ShEx 2.1 to add features like value comparison and unique keys.
See the ShEx Homepage <a href="http://shex.io/"><span class="c010">http://shex.io/</span></a> for the state of the art in ShEx.
A collection of ShEx schemas has also been started at <a href="https://github.com/shexSpec/schemas"><span class="c010">https://github.com/shexSpec/schemas</span></a>.</p>
<!--TOC section id="sec61" Use of ShEx-->
<h2 class="section" id="sec61">4.1  Use of ShEx</h2><!--SEC END --><p>
<a id="ch4.sec1"></a></p><p><a id="hevea_default280"></a>
Strictly speaking, a ShEx schema defines a set of graphs.
This can be used for many purposes, including communicating data structures associated with some process or interface, generating or validating data, or driving user interface generation and navigation.
At the core of all of these use cases is the notion of conformance with schema.
Even one is using ShEx to create forms, the goal is to accept and present data which is valid with respect to a schema.</p><p>ShEx has several serialization formats:</p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default281"></a>
</p>a concise, human-readable compact syntax (ShExC);<p><a id="hevea_default282"></a> <a id="hevea_default283"></a>
</p></li><li class="li-itemize">a JSON-LD syntax (ShExJ) which serves as an abstract syntax; and <p><a id="hevea_default284"></a>
</p></li><li class="li-itemize">an RDF representation (ShExR) derived from the JSON-LD syntax.</li></ul><p>These are all isomorphic and most implementations can map from one to another.</p><p>Tools that derive schemas by inspection or translate them from other schema languages typically generate ShExJ.
Interactions with users, e.g., in specifications are almost always in the compact syntax ShExC.
<a id="hevea_default285"></a>
As a practical example, in HL7 FHIR, ShExJ schemas are automatically generated from other formats, 
and presented to the end user using compact syntax.
See Section <a href="#ch070.FHIRRDFDevelopment">6.2.3</a> for more details. </p><p><a id="hevea_default286"></a>
ShExR allows to use RDF tools to manage schemas, e.g., 
doing a SPARQL query to find out whether an organization is using 
<code><span class="c004">dc</span></code><code>:</code><code><span class="c006">creator</span></code> with a string, 
a 
<code><span class="c004">foaf</span></code><code>:</code><code><span class="c006">Person</span></code>, or even whether an organization is consistent about it.</p>
<!--TOC section id="sec62" First Example-->
<h2 class="section" id="sec62">4.2  First Example</h2><!--SEC END --><p>
<a id="ch4.sec2"></a></p><p>Example <a href="#ch040%3AShExSimpleExample">26</a> below contains a very simple ShEx schema. 
<a id="hevea_default287"></a> 
<a id="hevea_default288"></a> 
<a id="hevea_default289"></a> </p><ul class="itemize"><li class="li-itemize">The first three lines declare prefixes using the same syntax as SPARQL Turtle. </li><li class="li-itemize">Nest line defines a shape called 
<code>:</code><code><span class="c006">User</span></code>. Nodes with that shape must satisfy the following constraints on their properties.</li><li class="li-itemize">They must have exactly one value for property 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">name</span></code> which must be a 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code>.</li><li class="li-itemize">They can have an optional property 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">birthDate</span></code> with type 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">date</span></code>.</li><li class="li-itemize">They must have exactly one property 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">gender</span></code> whose value is 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">Male</span></code> or 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">Female</span></code> or some string.</li><li class="li-itemize">They can have zero or more properties 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">knows</span></code> whose value must be an IRI and conform to the 
<code>:</code><code><span class="c006">User</span></code> shape.</li></ul><div class="example"><div class="theorem"><span class="c013">Example 26</span>  <em>Simple ShEx Schema</em><em>
</em><a id="ch040:ShExSimpleExample"></a><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c003">PREFIX</span></span></em><em><span class="c011"> :       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.org/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c003">PREFIX</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://schema.org/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c003">PREFIX</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">  ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011">?  ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">        [ </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011"> ] </span></em><em><span class="c011"><span class="c003">OR</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">*</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>All the nodes in the following RDF graph conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> shape.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;            </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">          :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> ;        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"1980-03-10"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;            </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"unspecified"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">             </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>The nodes </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em>, </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> have shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>.</em></p><p><a href="https://goo.gl/P1hQzN"><em>Try example in Shaclex</em></a></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> conforms because it contains </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">gender</span></em></code><em> with their corresponding values.
It does not contain the property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">birthDate</span></em></code><em> but that property is optional, as indicated by ‘</em><em>
</em><code><em>?</em></code><em>‘.
It also has the property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> with the value </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> which has </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> shape.</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> conforms because it contains the properties and values of the </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> shape. 
Note that the order in which triples are expressed in the example does not matter. These are parsed into an RDF graph and RDF graphs are unordered collections of triples.</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> conforms because it has property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> with a </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em> value, 
</em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">gender</span></em></code><em> with another </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em> value and an extra property 
</em><em>
</em><code><em><span class="c004">foaf</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em>.</em><p><em>Notice that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> conforms even if it has other properties apart of those mentioned by the </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> shape definition (in this case </em><em>
</em><code><em><span class="c004">foaf</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em>).</em></p><p><em>ShEx shapes are open by default, which means that they constrain neither the existence nor the value of the properties not mentioned in the shape.
This behavior can be modified using the </em><em>
</em><code><em><span class="c006">CLOSED</span></em></code><em> qualifier as we will explain in Section </em><a href="#ch040%3ASecClosedShapes"><em>4.6.8</em></a><em>.</em></p></li></ul><p><em>Given the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Dave"</span></em></span></span></em><em><span class="c011">;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"XYY"</span></em></span></span></em><em><span class="c011">;          </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011">      1980 .          </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  1980 is not an xsd:date *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">emily</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Emily"</span></em></span></span></em><em><span class="c011">, </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Emilee"</span></em></span></span></em><em><span class="c011"> ;       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  too many schema:names *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">frank</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">             </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Frank"</span></em></span></span></em><em><span class="c011"> ;       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">:        </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> .   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  missing schema:name *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">grace</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Grace"</span></em></span></span></em><em><span class="c011"> ;       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> ;   </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011"> .           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  \_:x is not an IRI *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">harold</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Harold"</span></em></span></span></em><em><span class="c011"> ;    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">        :</span></em><em><span class="c011"><span class="c006">grace</span></span></em><em><span class="c011"> .      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  :grace does not conform to :User *)</span></em></span></span></em></td></tr>
</table><p><em>If we try to validate the nodes in the following graph against the shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>, the validator would fail for all of the nodes:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> fails because the value of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">birthDate</span></em></code><em> is </em><em>
</em><code><em>1980</em></code><em> (an integer) which is not an </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">date</span></em></code><em>.</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">emily</span></em></code><em> fails because it has two values for property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em>.
Unless otherwise specified, the default cardinality is “exactly one” (which can also be written as “</em><em>
</em><code><em>{1}</em></code><em>” or “</em><em>
</em><code><em>{1,1}</em></code><em>”).</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">frank</span></em></code><em> fails because it does not have the property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em>.</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">grace</span></em></code><em> fails because the value of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> is a blank node and there is a node constraint saying that it must be an IRI.</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">harold</span></em></code><em> fails because the value of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> is </em><em>
</em><code><em>:</em></code><code><em><span class="c006">grace</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">grace</span></em></code><em> does not conform to the </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> shape.</em></li></ul><p><a href="https://goo.gl/PJ1bDB"><em>Try example in Shaclex</em></a></p></div></div>
<!--TOC section id="sec63" ShEx implementations-->
<h2 class="section" id="sec63">4.3  ShEx implementations</h2><!--SEC END --><p> <a id="Ch04ShexImplementations"></a></p><p>At the time of this writing, we are aware of the following implementations of ShEx.</p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default290"></a>
<a id="hevea_default291"></a>
</p>shex.js for Javascript/N3.js (Eric Prud’hommeaux) <a href="https://github.com/shexSpec/shex.js/"><span class="c010">https://github.com/shexSpec/shex.js/</span></a>;<p><a id="hevea_default292"></a>
<a id="hevea_default293"></a>
<a id="hevea_default294"></a>
</p></li><li class="li-itemize">Shaclex for Scala/Jena (Jose Emilio Labra Gayo) <a href="https://github.com/labra/shaclex/"><span class="c010">https://github.com/labra/shaclex/</span></a>;<p><a id="hevea_default295"></a>
<a id="hevea_default296"></a>
</p></li><li class="li-itemize">shex.rb for Ruby/RDF.rb (Gregg Kellogg) <a href="https://github.com/ruby-rdf/shex"><span class="c010">https://github.com/ruby-rdf/shex</span></a>;<p><a id="hevea_default297"></a>
<a id="hevea_default298"></a>
</p></li><li class="li-itemize">Java ShEx for Java/Jena (Iovka Boneva/University of Lille) <a href="https://gforge.inria.fr/projects/shex-impl/"><span class="c010">https://gforge.inria.fr/projects/shex-impl/</span></a>; and<p><a id="hevea_default299"></a>
</p></li><li class="li-itemize">ShExkell for Haskell (Sergio Iván Franco and Weso Research Group) <a href="https://github.com/weso/shexkell"><span class="c010">https://github.com/weso/shexkell</span></a>.</li></ul><p>There are also several online demos and tools that can be used to experiment with ShEx.</p><ul class="itemize"><li class="li-itemize">shex.js (<a href="http://rawgit.com/shexSpec/shex.js/master/doc/shex-simple.html"><span class="c010">http://rawgit.com/shexSpec/shex.js/master/doc/shex-simple.html</span></a>);</li><li class="li-itemize">Shaclex (<a href="http://shaclex.herokuapp.com"><span class="c010">http://shaclex.herokuapp.com</span></a>); and </li><li class="li-itemize">ShExValidata (for ShEx 1.0) (<a href="https://www.w3.org/2015/03/ShExValidata/"><span class="c010">https://www.w3.org/2015/03/ShExValidata/</span></a>).
</li></ul>
<!--TOC section id="sec64" The Shape Expressions Language-->
<h2 class="section" id="sec64">4.4  The Shape Expressions Language</h2><!--SEC END --><p> 
<a id="ch040ShapeExpressions"></a>
<a id="ch4.sec3"></a></p>
<!--TOC subsection id="sec65" Shape Expressions Compact Syntax-->
<h3 class="subsection" id="sec65">4.4.1  Shape Expressions Compact Syntax</h3><!--SEC END --><p> 
<a id="ch040ShExC"></a>
<a id="ch4.sec3.1"></a></p><p><a id="hevea_default300"></a> 
<a id="hevea_default301"></a> 
<a id="hevea_default302"></a> 
<a id="hevea_default303"></a>
The ShEx compact syntax (ShExC) was designed to be read and edited by humans.
It follows some conventions which are similar to Turtle or SPARQL. </p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default304"></a>
<a id="hevea_default305"></a>
</p>
<code><span class="c006">PREFIX</span></code> and 
<code><span class="c006">BASE</span></code> declarations follow the same convention as in Turtle. 
In the rest of this chapter we will omit prefix declarations for brevity.<p><a id="hevea_default306"></a>
</p></li><li class="li-itemize">Comments start with a 
<code><span class="c008"><code>#</code></span></code> and continue until the end of line.
<p><a id="hevea_default307"></a> <a id="hevea_default308"></a>
</p></li><li class="li-itemize">The keyword 
<code><span class="c003">a</span></code> identifies the 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> property.<p><a id="hevea_default309"></a> <a id="hevea_default310"></a> 
</p></li><li class="li-itemize">Relative and absolute IRIs are enclosed by 
<code>&lt;</code>
<code>&gt;</code> and prefixed names (a shorter way to write out IRIs) are written with prefix followed by a colon “:”.<p><a id="hevea_default311"></a>
</p></li><li class="li-itemize">Blank nodes are identified using 
<code><span class="c006">_</span></code><code>:</code><code><span class="c006">label</span></code> notation.<p><a id="hevea_default312"></a> <a id="hevea_default313"></a>
</p></li><li class="li-itemize">Literals can be enclosed by the same quotation conventions (
<code><code>'</code></code>, 
<code><code>"</code></code>, 
<code><code>''</code></code><code><code>'</code></code>, 
<code><code>""</code></code><code><code>"</code></code>) as in Turtle.</li><li class="li-itemize">Keywords (apart from 
<code><span class="c003">a</span></code>) are not case sensitive. 
Which means that 
<code><span class="c006">MinInclusive</span></code> is the same as 
<code><span class="c006">MININCLUSIVE</span></code>.
</li></ul><p><a id="hevea_default314"></a>
A ShExC document declares a ShEx schema.
A ShEx schema is a set of labeled shape expressions which are composed of node constraints and shapes.
These constrain the permissible values or graph structure around a node in an RDF graph.
<a id="hevea_default315"></a>
When we are considering a specific node, we call that node the 
<code><span class="c006">focus</span></code><code> </code><code><span class="c006">node</span></code>.</p><p><a id="hevea_default316"></a> <a id="hevea_default317"></a> <a id="hevea_default318"></a>
The triples which have the focus node as a subject are called 
<code><span class="c006">outgoing</span></code><code> </code><code><span class="c006">arcs</span></code>; those with the focus node as an object are called 
<code><span class="c006">incoming</span></code><code> </code><code><span class="c006">arcs</span></code>.
(Typical RDF idioms call for constraints on outgoing arcs much more frequently than on incoming arcs.)
Together, the incoming and outgoing arcs are called the 
<code><span class="c006">neighborhood</span></code> of that node.</p><p>Shape expression labels can be IRIs or blank nodes but only IRI labels can be referenced from outside the schema.
In the previous Example <a href="#ch040%3AShExSimpleExample">26</a>, 
<code>:</code><code><span class="c006">User</span></code> is an IRI label.</p><p><a id="hevea_default319"></a>
Node constraints declare the shape of a focus node without looking at the arcs. 
<a id="hevea_default320"></a>
<a id="hevea_default321"></a>
<a id="hevea_default322"></a>
<a id="hevea_default323"></a>
They can declare the kind of node (IRI, blank node or literal), 
the datatype in case of literals, 
describe it with XML Schema facets (e.g., min and max numeric values, string lengths, number of digits), 
or enumerate a value set.
Figure <a href="#ch040FigureNodeConstraints">4.4.1</a> signals the node constraints that appear in Example <a href="#ch040%3AShExSimpleExample">26</a> which are:

<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code> and 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">date</span></code> (datatype constraints), 

<code>[</code><code><span class="c004">schema</span></code><code>:</code><code><span class="c006">Male</span></code><code> </code><code><span class="c004">schema</span></code><code>:</code><code><span class="c006">Female</span></code><code>]</code> (a value set),

<code><span class="c006">IRI</span></code> (a node kind declaration) and 

<code><span class="c006">@</span></code><code>:</code><code><span class="c006">User</span></code> (a value shape). 
Node constraints will be described in more detail in Section <a href="#ch040NodeConstraints">4.5</a>.</p><blockquote class="figure"><div class="center"><hr class="c021"></div> 
<div class="center">
<img src="ShEx_NodeConstraints.png">
</div>

<a id="ch040FigureNodeConstraints"></a>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Figure 4.1: Node constraints in a shape.</td></tr>
</table></div>
<div class="center"><hr class="c021"></div></blockquote><p><a id="hevea_default324"></a>
<a id="hevea_default325"></a>
<a id="hevea_default326"></a>
<a id="hevea_default327"></a>
<a id="hevea_default328"></a>
Triple constraints define the triples that appear in the neighborhood of a focus node. 
They usually contain a property (or inverse property), a node constraint, and a cardinality declaration which is one by default.</p><p>For example, 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">name</span></code><code> </code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code> is a triple constraint.
The 
<code>:</code><code><span class="c006">User</span></code> shape from Example <a href="#ch040%3AShExSimpleExample">26</a> 
was formed by four triple constraints. 
Triple constraints will be described later in Section <a href="#ch040tripleconstraints">4.6.1</a>.</p><blockquote class="figure"><div class="center"><hr class="c021"></div> 
<div class="center">
<img src="ShEx_TripleConstraints.png">
</div>

<a id="ch040FigureTripleConstraints"></a>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Figure 4.2: Triple constraints in a shape.</td></tr>
</table></div>
<div class="center"><hr class="c021"></div></blockquote><p><a id="hevea_default329"></a>
Triple constraints can be grouped using the semicolon operator 
<code>;</code> to form 
triple expressions.<sup><a id="text8" href="#note8">1</a></sup> 
<a id="hevea_default330"></a>
<a id="hevea_default331"></a>
Shapes are enclosed by curly braces 
<code>{</code>
<code>}</code> and contain triple expressions. </p><p><a id="hevea_default332"></a>
<a id="hevea_default333"></a>
<a id="hevea_default334"></a>
Shapes are the basic form of shape expressions, although more complex shape expressions can be formed by combining the logical operators 
<code><span class="c006">AND</span></code>, 
<code><span class="c006">OR</span></code> and 
<code><span class="c006">NOT</span></code> which will be later described in Section <a href="#ch040.LogicalOperatorsShEx">4.6</a>.
Shape expressions are identified by shape expression labels.</p><blockquote class="figure"><div class="center"><hr class="c021"></div> 
<div class="center">
<img src="ShEx_Shape.png">
</div>

<a id="ch040FigureShape"></a>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Figure 4.3: Shapes, shape expression labels and triple expressions.</td></tr>
</table></div>
<div class="center"><hr class="c021"></div></blockquote><p>Figure <a href="#ch040FigureShapeExpression">4.4.1</a> shows a compound shape expression formed by combining the shape reference 
<code><span class="c006">@</span></code><code>:</code><code><span class="c006">User</span></code> 
with a shape that contains a single triple constraint 
<code>:</code><code><span class="c006">teaches</span></code><code> </code><code><span class="c006">@</span></code><code>:</code><code><span class="c006">Course</span></code> using the 
<code><span class="c006">AND</span></code> operator.</p><p><a id="hevea_default335"></a>
The full ShEx BNF grammar is specified at <a href="http://shex.io/shex-semantics/\#shexc"><span class="c010">http://shex.io/shex-semantics/\#shexc</span></a>.</p><blockquote class="figure"><div class="center"><hr class="c021"></div> 
<div class="center">
<img src="ShEx_ShapeExpressions.png">
</div>

<a id="ch040FigureShapeExpression"></a>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Figure 4.4: Shape expression and shape.</td></tr>
</table></div>
<div class="center"><hr class="c021"></div></blockquote>
<!--TOC subsection id="sec66" Invoking Validation-->
<h3 class="subsection" id="sec66">4.4.2  Invoking Validation</h3><!--SEC END --><p> 
<a id="ch040ValidationProcess"></a> 
<a id="ch4.sec3.2"></a></p><p><a id="hevea_default336"></a>
In Example <a href="#ch040%3AShExSimpleExample">26</a>, we tested several RDF nodes (
<code>:</code><code><span class="c006">alice</span></code>, 
<code>:</code><code><span class="c006">bob</span></code>, ... 
<code>:</code><code><span class="c006">harold</span></code>) against the shape 
<code>:</code><code><span class="c006">User</span></code>.</p><p>ShEx validation takes as input a schema, an RDF graph, and a shape map, and returns another shape map.</p><p><a id="hevea_default337"></a>
The input shape map (called <em>fixed shape map</em>) contains a list of 
<code><span class="c006">nodeSelector@shapeLabel</span></code> associations separated by commas, 
where 
<code><span class="c006">nodeSelector</span></code> is an RDF node and 
<code><span class="c006">shapeLabel</span></code> is a shape label.
Both use N-Triples notation.</p><p>A fixed map would look like:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;http://data.example/#alice&gt;</span></span></span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;http://schema.example/#User&gt;</span></span></span><span class="c011">,</span><span class="c011">
</span><span class="c011"><span class="c008"><span class="c011">&lt;http://data.example/#bob&gt;</span></span></span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;http://schema.example/#User&gt;</span></span></span></td></tr>
</table><p>Although shape maps use absolute IRIs for RDF nodes and shape labels, 
we will use prefixes to abbreviate them in our listings:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">alice@</span></span><span class="c011">:</span><span class="c011"><span class="c006">User</span></span><span class="c011">,</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">bob@User</span></span></td></tr>
</table><p>Note that during evaluation, the processor may need to check the conformance of other nodes against other shapes. </p><div class="example"><div class="theorem"><span class="c013">Example 27</span>  <em>Invoking validation example</em><p><em>If we define the following schema:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">*</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>and the RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>when we invoke a ShEx processor with the fixed shape map: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em></td></tr>
</table><p><em>the result shape map is:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em></td></tr>
</table><p><em>The reason is that in order to check that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> conforms to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>, the processor must check that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> also conforms to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> and hence, it adds the association </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol@</span></em></code><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> to the result shape map.</em></p><p><em>Figure </em><a href="#ch040.ShExValidatorProcess"><em>4.5</em></a><em> depicts the validation process.</em></p><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 
</em><div class="center"><em>
<img src="ShExValidator.png">
</em></div><em>

</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 4.5: Validation process which accepts a fixed shape map and 
emits a result shape map.</em></td></tr>
</table></div><em>
</em><a id="ch040.ShExValidatorProcess"></a><em>
</em><div class="center"><hr class="c021"></div></blockquote><p><a href="https://goo.gl/tsLK7g"><em>Try example in Shaclex</em></a></p></div></div><p>There are many use case-dependent ways to compose a fixed shape map.
<a id="hevea_default338"></a> <a id="hevea_default339"></a>
ShEx defines a common one called <em>query shape map</em> which uses triple patterns to select nodes.
Triple patterns use curly braces and three values that represent the subject, predicate and object of a triple.
They can contain the value 
<code><span class="c006">FOCUS</span></code> to identify the node we want to select and 

<code><span class="c006">_</span></code> to indicate that we do not constrain some value.</p><div class="example"><div class="theorem"><span class="c013">Example 28</span>  <em>Query map example</em><p><em>The following query map selects all subjects of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em>, all objects of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> and nodes that have </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> with value </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">{</span></em><em><span class="c011"><span class="c006">FOCUS</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">}</span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">{</span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">FOCUS</span></span></em><em><span class="c011">}</span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">{</span></em><em><span class="c011"><span class="c006">FOCUS</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">type</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011">}</span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em></td></tr>
</table><p><a href="https://goo.gl/avv9DT"><em>Try example in Shaclex</em></a></p></div></div><p>Section <a href="#ch040ShapeMaps">4.9</a> describes fixed shape maps and query shape maps in greater detail.</p><p>In the previous example, validating 
<code>:</code><code><span class="c006">alice</span></code> as a 
<code>:</code><code><span class="c006">User</span></code> entailed validating 
<code>:</code><code><span class="c006">carol</span></code> as a 
<code>:</code><code><span class="c006">User</span></code>.
Unless the validation engine has some sort of state persistence, 
it would be more efficient to validate once with a shape map like:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">alice@</span></span><span class="c011">:</span><span class="c011"><span class="c006">User</span></span><span class="c011">,:</span><span class="c011"><span class="c006">carol@</span></span><span class="c011">:</span><span class="c011"><span class="c006">User</span></span></td></tr>
</table><p>than to validate 
<code>:</code><code><span class="c006">alice</span></code> and 
<code>:</code><code><span class="c006">carol</span></code> separately.</p><p>Validating a shape map with multiple node/shape pairs allows the engine to leverage any pairs that it has already tested.</p>
<!--TOC subsection id="sec67" Structure of Shape Expressions-->
<h3 class="subsection" id="sec67">4.4.3  Structure of Shape Expressions</h3><!--SEC END --><p> 
<a id="ch040StructureofaShapeExpression"></a>
<a id="ch4.sec3.3"></a></p><p><a id="hevea_default340"></a> <a id="hevea_default341"></a> <a id="hevea_default342"></a> <a id="hevea_default343"></a>
In Section <a href="#ch040ShExC">4.4.1</a>, we described shape expressions as being composed of node constraints and shapes.
These can also be combined with the logical operators 
<code><span class="c006">And</span></code>, 
<code><span class="c006">Or</span></code> and 
<code><span class="c006">Not</span></code>.

<code><span class="c006">And</span></code> and 
<code><span class="c006">Or</span></code> expressions in turn contain two or more shape expressions.
When we refer to a 
<code><span class="c006">shape</span></code><code> </code><code><span class="c006">expression</span></code>, we mean one of the following. </p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default344"></a> 
</p>A node constraint, which constrains the set of allowed values of a node. <p><a id="hevea_default345"></a>
</p></li><li class="li-itemize">A shape, which constrains the neighborhood of a node.<p><a id="hevea_default346"></a>
</p></li><li class="li-itemize">An 
<code><span class="c006">And</span></code> of two or more shape expressions (called 
<code><span class="c006">ShapeAnd</span></code>).<p><a id="hevea_default347"></a>
</p></li><li class="li-itemize">An 
<code><span class="c006">Or</span></code> of two or more shape expressions (called 
<code><span class="c006">ShapeOr</span></code>).<p><a id="hevea_default348"></a>
</p></li><li class="li-itemize">A 
<code><span class="c006">Not</span></code> of one shape expression (called 
<code><span class="c006">ShapeNot</span></code>)<p><a id="hevea_default349"></a>
</p></li><li class="li-itemize">An external shape expression.</li></ul><p>This recursive structure forms a tree which has node constraints and shapes as leaves. 
Figure <a href="#ch040.ShExModel">4.6</a> represents the ShEx data model.</p><blockquote class="figure"><div class="center"><hr class="c021"></div> 
<div class="center">
<img src="ShExModel.png">
</div>

<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Figure 4.6: ShEx data model.</td></tr>
</table></div>
<a id="ch040.ShExModel"></a>
<div class="center"><hr class="c021"></div></blockquote><p><a id="hevea_default350"></a> <a id="hevea_default351"></a>
Node constraints and shapes are described in the following sections while
the logical operators are discussed in Section <a href="#ch040LogicalOperators">4.8</a> and 
external shapes in Section <a href="#ch040.ExternalShapes">4.7.3</a>.</p><p><a id="hevea_default352"></a>
</p>
<!--TOC subsection id="sec68" Start Shape Expression-->
<h3 class="subsection" id="sec68">4.4.4  Start Shape Expression</h3><!--SEC END --><p> 
<a id="ch040startExpr"></a>
<a id="ch4.sec3.4"></a></p><p>The shape expression might be selected by label or it might default to a special shape called the 
<code><span class="c003">start</span></code> shape.</p><p><a id="hevea_default353"></a>
A schema can have one more shape expression called the 
<code><span class="c003">start</span></code> expression.
This serves as <em>start here</em> advice from the schema author
and is useful when describing a graph with a single purpose.
<a id="hevea_default354"></a>
For instance, the medical data protocol FHIR 
(see Section <a href="#ch060FHIR">6.2</a>) has specific schemas for resources like 
<code><span class="c006">Patient</span></code>.</p><div class="example"><div class="theorem"><span class="c013">Example 29</span>  <em>ShEx schema with start directive</em><p><em>Consider the following code:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span style="color:red">start</span></span></em><em><span class="c011"> = </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;Patient&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;Patient&gt;</span></em></span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  ...</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">...</span></em></td></tr>
</table><p><em>In the compact syntax, the directive </em><em>
</em><code><em><span class="c003">start</span></em></code><code><em> = </em></code><code><em><span class="c006">@</span></em></code><code><em>&lt;</em></code><code><em><span class="c006">Patient</span></em></code><code><em>&gt;</em></code><em> declares that the shape expression </em><em>
</em><code><em>&lt;</em></code><code><em><span class="c006">Patient</span></em></code><code><em>&gt;</em></code><em> will be used by default if a shape is not explicitly provided in the shapes map.</em></p></div></div><p>In shape maps, it is possible to declare that a node must be validated against the shape map by using the keyword 
<code><span class="c006">START</span></code>. 
For example, the following shape map:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">alice@START</span></span><span class="c011">,</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">bob@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;Doctor&gt;</span></span></span></td></tr>
</table><p>would validate 
<code>:</code><code><span class="c006">alice</span></code> against the start shape expression (in the previous example, it would be 
<code>&lt;</code><code><span class="c006">Patient</span></code><code>&gt;</code>) and 
<code>:</code><code><span class="c006">bob</span></code> against 
<code>&lt;</code><code><span class="c006">Doctor</span></code><code>&gt;</code>.</p>
<!--TOC section id="sec69" Node Constraints-->
<h2 class="section" id="sec69">4.5  Node Constraints</h2><!--SEC END --><p> 
<a id="ch040NodeConstraints"></a>
<a id="ch4.sec4"></a></p><p>Node constraints describe the allowed values of a node. 
<a id="hevea_default355"></a> 
<a id="hevea_default356"></a> 
<a id="hevea_default357"></a> 
<a id="hevea_default358"></a>
<a id="hevea_default359"></a>
These include specification of RDF node kind, 
literal datatype, string and numeric facets, and value sets. </p><p>Node constraints can appear as a labeled shape expression or as part of triple constraints.</p><div class="example"><div class="theorem"><span class="c013">Example 30</span>  <p><a id="hevea_default360"></a><em>
Any place one does </em>not<em> want a node constraint, can be marked with a period (</em><em>
</em><code><em><code><em>"."</em></code></em></code><em>).
This is analogous to the period which matches any character in regular expressions.
The following example lists the properties that a </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> must have but it does not specify any constraint in their values:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> . ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alternateName</span></span></em><em><span class="c011"> . * ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> . ?</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>Given the following RDF graph: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">        23 .         </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> ;   </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alternateName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Bob"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">                          </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Bobby"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">                          </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;Bob&gt;</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Unknown"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>If we provide the shape map </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice@</span></em></code><code><em>:</em></code><code><em><span class="c006">User</span></em></code><code><em>,:</em></code><code><em><span class="c006">bob@</span></em></code><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> the ShEx processor would return that they both conform.</em></p></div></div><p><a id="hevea_default361"></a>
Node constraints usually appear as part of value expressions in triple constraints.</p><div class="example"><div class="theorem"><span class="c013">Example 31</span>  <em>Node constraint in a value expression</em><p><em>The following example declares that nodes with shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> must have a property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">url</span></em></code><em> whose value must be an </em><em>
</em><code><em><span class="c006">IRI</span></em></code><em>. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">url</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table></div></div><p>Node constraints can also appear as top level shapes. </p><div class="example"><div class="theorem"><span class="c013">Example 32</span>  <em>Node constraint as top-level shape</em><p><em>The following code defines two shapes, </em><em>
</em><code><em>:</em></code><code><em><span class="c006">HomePage</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">CanVoteAge</span></em></code><em>,
which are defined as node constraints.
The first one declares that nodes must be </em><em>
</em><code><em><span class="c006">IRI</span></em></code><em>s and the second one that they must be </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">integer</span></em></code><em> values greater than 18.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">HomePage</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CanVoteAge</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">integer</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">MinInclusive</span></span></em><em><span class="c011"> 18</span></em></td></tr>
</table><p><em>If we provide a ShEx processor the shape map </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.org/alice&gt;</span></em></span></span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">HomePage</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">23</span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CanVoteAge</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">45</span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">HomePage</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">14</span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CanVoteAge</span></span></em></td></tr>
</table><p><em>The result would be that the first two nodes are conformant while the last 
two nodes are non-conformant.</em></p></div></div><p>It is also possible to combine top-level node constraints with more complex shapes.</p><div class="example"><div class="theorem"><span class="c013">Example 33</span>  <em>Node constraint as top-level shape combined with complex shape</em><p><em>The following declaration of shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> says that nodes conforming to shape 
</em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> must be </em><em>
</em><code><em><span class="c006">IRI</span></em></code><em>s and have a property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> with an </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em> value. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><a id="hevea_default362"></a><em>
In this case, the external </em><em>
</em><code><em><span class="c006">AND</span></em></code><em> can be omitted, so the previous shape is equivalent to:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table></div></div><p>Table <a href="#ch040.NodeConstraintsTable">4.1</a> gives an overview of the main types of node constraints with some examples and a short description.</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 4.1: Node constraints</td></tr>
</table></div>
<a id="ch040.NodeConstraintsTable"></a> 
<div class="center">
<table class="c001 cellpadding1" border=1><tr><td class="c017"> <span class="c013">Name</span></td><td class="c019"><span class="c013">Description</span></td><td class="c019"><span class="c013">Examples
</span></td></tr>
<tr><td class="c017"> Anything</td><td class="c019">The value can be anything</td><td class="c019">
<code>.</code>
</td></tr>
<tr><td class="c017"> Datatype</td><td class="c019">The value must be an element of that datatype</td><td class="c019">
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code> <br>

<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">date</span></code> <br>

<code><span class="c004">cdt</span></code><code>:</code><code><span class="c006">distance</span></code> <br>
…</td></tr>
<tr><td class="c017"> Node kind</td><td class="c019">The value must have that kind</td><td class="c019">
<code><span class="c006">IRI</span></code> <br>

<code><span class="c006">BNode</span></code> <br>

<code><span class="c006">Literal</span></code> <br>

<code><span class="c006">NonLiteral</span></code>
</td></tr>
<tr><td class="c017"> Value set</td><td class="c019">The value must be an element of that set</td><td class="c019">
<code>[:</code><code><span class="c006">Male</span></code><code> :</code><code><span class="c006">Female</span></code><code>]</code>
</td></tr>
<tr><td class="c017"> Shape reference</td><td class="c019">The value must conform to 
<code>&lt;</code><code><span class="c006">User</span></code><code>&gt;</code></td><td class="c019">
<code><span class="c006">@</span></code><code>:</code><code><span class="c006">User</span></code> 
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><p><a id="hevea_default363"></a>
</p>
<!--TOC subsection id="sec70" Node kinds-->
<h3 class="subsection" id="sec70">4.5.1  Node kinds</h3><!--SEC END --><p> 
<a id="ch040NodeKinds"></a>
<a id="ch4.sec4.1"></a></p><p>Node kinds describe the kind that a value must have. 
There are four node kinds in ShEx: 
<code><span class="c006">Literal</span></code>, 
<code><span class="c006">IRI</span></code>, 
<code><span class="c006">BNode</span></code>, and 
<code><span class="c006">NonLiteral</span></code> 
which follow the rules defined in RDF 1.1 for such terms.</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 4.2: Node kinds</td></tr>
</table></div>
<a id="ch040.NodeKind"></a> 
<div class="center">
<table class="c001 cellpadding1" border=1><tr><td class="c017"> <span class="c013">Value</span></td><td class="c019"><span class="c013">Description</span></td><td class="c019"><span class="c013">Examples
</span></td></tr>
<tr><td class="c017"> 
<code><span class="c006">Literal</span></code></td><td class="c019">Any RDF literal</td><td class="c019">
<code><code>"Alice"</code></code> <br>

<code><code>"Spain"</code></code><code><span class="c006">@en</span></code> <br>

<code>42</code> <br>

<code><span class="c003">true</span></code>
</td></tr>
<tr><td class="c017"> 
<code><span class="c006">IRI</span></code></td><td class="c019">Any RDF IRI</td><td class="c019">
<code>&lt;</code><code><span class="c006">http</span></code><code>://</code><code><span class="c006">example</span></code><code>.</code><code><span class="c004">org</span></code><code>/</code><code><span class="c006">Alice</span></code><code>&gt;</code> <br>

<code><span class="c004">ex</span></code><code>:</code><code><span class="c006">alice</span></code> <br>

<code>:</code><code><span class="c006">bob</span></code>
</td></tr>
<tr><td class="c017"> 
<code><span class="c006">BNode</span></code></td><td class="c019">Any blank node</td><td class="c019">
<code><span class="c006">_</span></code><code>:</code><code><span class="c006">x</span></code> <br>

<code>[]</code>
</td></tr>
<tr><td class="c017"> 
<code><span class="c006">NonLiteral</span></code></td><td class="c019">Any IRI or blank node</td><td class="c019">
<code>&lt;</code><code><span class="c006">http</span></code><code>://</code><code><span class="c006">example</span></code><code>.</code><code><span class="c004">org</span></code><code>/</code><code><span class="c006">alice</span></code><code>&gt;</code> <br>

<code><span class="c006">_</span></code><code>:</code><code><span class="c006">x</span></code> 
</td></tr>
</table>
</div><div class="center"><hr class="c021"></div></blockquote><div class="example"><div class="theorem"><span class="c013">Example 34</span>  <p><em>The following example declares that the value of property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> must be a literal and the value of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">follows</span></em></code><em> must be an IRI.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c003">Literal</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011">;  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Passes as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">    :</span></em><em><span class="c011"><span class="c006">Bob</span></span></em><em><span class="c011"> ;   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011"> .    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  :Bob is not a literal and \_:x is not an IRI *)</span></em></span></span></em></td></tr>
</table></div></div><p><a id="hevea_default364"></a>
</p>
<!--TOC subsection id="sec71" Datatypes-->
<h3 class="subsection" id="sec71">4.5.2  Datatypes</h3><!--SEC END --><p> 
<a id="ch040Datatypes"></a>
<a id="ch4.sec4.2"></a></p><p>Like most schema languages, ShEx includes datatype constraints which declare that a focus node must be a literal with 
some specific datatype.
ShEx has special support for XML Schema datatypes [<a href="#XMLSchemaDatatypes">9</a>] 
for which it checks that the lexical form also conforms to the expected datatype.</p><div class="example"><div class="theorem"><span class="c013">Example 35</span>  <em>Simple datatypes</em><em> </em><a id="ch040SimpleDatatypes"></a><p><em>The following example declares the datatypes that must have the values of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">birthDate</span></em></code><em> properties.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">age</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">integer</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011">;                 </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">age</span></span></em><em><span class="c011">         36 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"1981-07-10"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Passes as a :User  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">age</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"26"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">integer</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"1981-07-10"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      :</span></em><em><span class="c011"><span class="c006">Carol</span></span></em><em><span class="c011"> ;                 </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">age</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"14"</span></em></span></span></em><em><span class="c011"> ;                   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  :Carol is an IRI *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"2003-06-10"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  and "14" a string *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Dave"</span></em></span></span></em><em><span class="c011"> ;                 </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">age</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Unknown"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">integer</span></span></em><em><span class="c011">;  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  invalid lexical forms *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Unknown"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><a id="hevea_default365"></a><em>
As we said, for XML Schema datatypes, 
ShEx also checks that the lexical form matches the expected datatype. 
For example, the </em><em>
</em><code><em><span class="c004">foaf</span></em></code><code><em>:</em></code><code><em><span class="c006">age</span></em></code><em> of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> is </em><em>
</em><code><em><code><em>"Unknown"</em></code></em></code><code><em>^^</em></code><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">integer</span></em></code><em> and although it declares that </em><em>
</em><code><em><code><em>"Unknown"</em></code></em></code><em> is an integer
and some RDF parsers allow those declarations, 
</em><em>
</em><code><em><code><em>"Unknown"</em></code></em></code><em> does not have the integer’s lexical form and the ShEx processor will complain. 
The same happens for the value of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">birthDate</span></em></code><em>.</em></p></div></div><div class="example"><div class="theorem"><span class="c013">Example 36</span>  <em>Custom datatypes</em><p><a id="hevea_default366"></a><em>
</em><a id="hevea_default367"></a><em>
Although the most common use case is to use XML Schema datatypes, 
RDF data can use other datatypes.
In the following example, a picture contains the properties </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">width</span></em></code><em> and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">height</span></em></code><em> using a hypothetical custom datatype for distances (</em><em>
</em><code><em><span class="c004">cdt</span></em></code><code><em>:</em></code><code><em><span class="c006">distance</span></em></code><em>).</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Picture</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">width</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">cdt</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">distance</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">height</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">cdt</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">distance</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gioconda</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Mona Lisa"</span></em></span></span></em><em><span class="c011">;                 </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Passes as a :Picture  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">width</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"21 in"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">cdt</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">distance</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">height</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"30 in"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">cdt</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">distance</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">other</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Other picture"</span></em></span></span></em><em><span class="c011"> ;             </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Fails as a :Picture  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">width</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"21 in"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  expected cdt:distance *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">height</span></span></em><em><span class="c011"> 30 .</span></em></td></tr>
</table></div></div><div class="example"><div class="theorem"><span class="c013">Example 37</span>  <em>Language-tagged literals</em><p><a id="hevea_default368"></a><em>
</em><a id="hevea_default369"></a><em>
The datatype </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">langString</span></em></code><em> identifies language-tagged literals (see </em><em>[</em><a href="#RDF11"><em>25, Section 3.3</em></a><em>]</em><em>), i.e., RDF literals that have a language tag.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Country</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">langString</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">italy</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Italia"</span></em></span></span></em><em><span class="c011"><span class="c006">@es</span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Country</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">france</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"France"</span></em></span></span></em><em><span class="c011"> .    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Country  </span></em></span></span></em></td></tr>
</table></div></div>
<!--TOC subsection id="sec72" Facets on Literals-->
<h3 class="subsection" id="sec72">4.5.3  Facets on Literals</h3><!--SEC END --><p> 
<a id="ch040facets"></a>
<a id="ch4.sec4.3"></a></p><p><a id="hevea_default370"></a>
<a id="hevea_default371"></a>
<a id="hevea_default372"></a>
XML Schema provides a useful library of string and numeric tests called <em>facets</em> [<a href="#XMLSchemaDatatypes">9</a>].
These facets are listed in Table <a href="#ch040.Facets">4.3</a> with a sample argument and some passing and failing values.</p><p><a id="hevea_default373"></a>
<a id="hevea_default374"></a>
<a id="hevea_default375"></a>
<a id="hevea_default376"></a>
<a id="hevea_default377"></a>
<a id="hevea_default378"></a>
<a id="hevea_default379"></a>
<a id="hevea_default380"></a>
<a id="hevea_default381"></a></p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 4.3: Facets on literals</td></tr>
</table></div>
<a id="ch040.Facets"></a> 
<div class="center">
<table class="c001 cellpadding1" border=1><tr><td class="c019"> <span class="c013">Facet and <br>
argument</span></td><td class="c019"><span class="c013">Passing values</span></td><td class="c019"><span class="c013">Failing values
</span></td></tr>
<tr><td class="c019"> 
<code><span class="c006">MinInclusive</span></code><code> 1</code></td><td class="c019">
<code><code>"1"</code></code><code>^^</code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">decimal</span></code>, <br>

<code>1</code>, 
<code>2</code>, 
<code>98</code>, 
<code>99</code>, 
<code>100</code></td><td class="c019">
<code><code>"1"</code></code><code>^^</code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code>, <br>

<code>-1</code>, 
<code>0</code>
</td></tr>
<tr><td class="c019"> 
<code><span class="c006">MinExclusive</span></code><code> 1</code></td><td class="c019">
<code>2</code>, 
<code>98</code>, 
<code>99</code>, 
<code>100</code></td><td class="c019">
<code>-1</code>, 
<code>0</code>, 
<code>1</code>
</td></tr>
<tr><td class="c019"> 
<code><span class="c006">MaxInclusive</span></code><code> 99</code></td><td class="c019">
<code>1</code>, 
<code>2</code>, 
<code>98</code>, 
<code>99</code></td><td class="c019">
<code>100</code>
</td></tr>
<tr><td class="c019"> 
<code><span class="c006">MaxExclusive</span></code><code> 99</code></td><td class="c019">
<code>1</code>, 
<code>2</code>, 
<code>98</code></td><td class="c019">
<code>99</code>, 
<code>100</code>
</td></tr>
<tr><td class="c019"> 
<code><span class="c006">TotalDigits</span></code><code> 3</code></td><td class="c019">
<code><code>"1"</code></code><code>^^</code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">integer</span></code>, <br>

<code>9</code>, 
<code>999</code>, 
<code>0999</code>, <br>

<code>9.99</code>, 
<code>99.9</code>, 
<code>0.1020</code></td><td class="c019">
<code><code>"1"</code></code><code>^^</code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code>, <br>

<code>1000</code>, 
<code>01000</code>, <br>

<code>1.1020</code>, 
<code>.1021</code>, 
<code>0.1021</code>
</td></tr>
<tr><td class="c019"> 
<code><span class="c006">FractionDigits</span></code><code> 3</code></td><td class="c019">
<code><code>"1"</code></code><code>^^</code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">decimal</span></code>, <br>

<code>0.1</code>, 
<code>0.1020</code>, 
<code>1.1020</code></td><td class="c019">
<code><code>"1"</code></code><code>^^</code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">integer</span></code>, <br>

<code>0.1021</code>, 
<code>0.10212</code>
</td></tr>
<tr><td class="c019"> 
<code><span class="c006">Length</span></code><code> 3</code></td><td class="c019">
<code><code>"123"</code></code><code>^^</code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code>, <br>

<code><code>"123"</code></code><code>^^</code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">integer</span></code>, <br>

<code><code>"abc"</code></code></td><td class="c019">
<code><code>"12"</code></code><code>^^</code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code>, <br>

<code><code>"12"</code></code><code>^^</code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">integer</span></code>, <br>

<code><code>"ab"</code></code>, 
<code><code>"abcd"</code></code>
</td></tr>
<tr><td class="c019"> 
<code><span class="c006">MinLength</span></code><code> 3</code></td><td class="c019">
<code><code>"abc"</code></code>, 
<code><code>"abcd"</code></code></td><td class="c019">
<code><code>""</code></code>, 
<code><code>"ab"</code></code>
</td></tr>
<tr><td class="c019"> 
<code><span class="c006">MaxLength</span></code><code> 3</code></td><td class="c019">
<code><code>""</code></code>, 
<code><code>"ab"</code></code>, 
<code><code>"abc"</code></code></td><td class="c019">
<code><code>"abcd"</code></code>, 
<code><code>"abcde"</code></code>
</td></tr>
<tr><td class="c019"> 
<code>/^</code><code><span class="c006">ab</span></code><code>+/</code> <br>
Regex pattern</td><td class="c019">
<code><code>"ab"</code></code>, 
<code><code>"abb"</code></code>, 
<code><code>"abbcd"</code></code></td><td class="c019">
<code><code>""</code></code>, 
<code><code>"a"</code></code>, 
<code><code>"acd"</code></code>, 
<code><code>"cab"</code></code> <br>

<code><code>"AB"</code></code>, 
<code><code>"ABB"</code></code>, 
<code><code>"ABBCD"</code></code>
</td></tr>
<tr><td class="c019"> 
<code>/^</code><code><span class="c006">ab</span></code><code>+/</code><code><span class="c006">i</span></code> <br>
Regex pattern <br>
with 
<code><span class="c006">i</span></code> flag</td><td class="c019">
<code><code>"ab"</code></code>, 
<code><code>"abb"</code></code>, 
<code><code>"abbcd"</code></code> <br>

<code><code>"AB"</code></code>, 
<code><code>"ABB"</code></code>, 
<code><code>"ABBCD"</code></code></td><td class="c019">
<code><code>""</code></code>, 
<code><code>"a"</code></code>, 
<code><code>"acd"</code></code>
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><div class="example"><div class="theorem"><span class="c013">Example 38</span>  <em>
</em><em>

</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">MaxLength</span></span></em><em><span class="c011"> 10 ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">weight</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">decimal</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">MinInclusive</span></span></em><em><span class="c011"> 1 </span></em><em><span class="c011"><span class="c003">MaxInclusive</span></span></em><em><span class="c011"> 200 ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sku</span></span></em><em><span class="c011">        /^[</span></em><em><span class="c011"><span class="c003">A</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">Z0</span></span></em><em><span class="c011">-9]{10,20}</span></em><em><span class="c011"><span class="c006">$</span></span></em><em><span class="c011">/ ;</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">product1</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Product 1"</span></em></span></span></em><em><span class="c011">;          </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">weight</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"23.0"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">decimal</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sku</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"A23456B234CBDF"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">product2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Product 2"</span></em></span></span></em><em><span class="c011"> ;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Product    </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">weight</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"245.5"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">decimal</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011"><span class="c008"><em><span class="c011"># schema:weight &gt; 200 *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sku</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"ABC"</span></em></span></span></em><em><span class="c011"> .               </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># schema:sku fails regex *)</span></em></span></span></em></td></tr>
</table><p><a href="https://goo.gl/bBrjbH"><em>Try example in Shaclex</em></a></p></div></div><p><a id="hevea_default382"></a> 
<a id="hevea_default383"></a> <a id="RegularExpressions"></a>
The pattern constraint (‘
<code>/</code><code><span class="c006">regex</span></code><code>/</code>’) is based on the XPath regular expression function 
<code><span class="c006">fn</span></code><code>:</code><code><span class="c006">matches</span></code><code>(</code><code><span class="c006">str</span></code><code>,</code><code><span class="c006">re</span></code><code>,</code><code><span class="c006">flags</span></code><code>)</code> which takes as parameters the string to match, the regular expression, and an optional flags parameter to modify the matching behavior.</p><p><a id="hevea_default384"></a>
XPath regular expressions are based on common conventions from other languages like Perl or other Unix tools like grep.
The regular expression language is a string composed of the characters to match and some characters which have special meaning called <em>meta-characters</em>.</p><ul class="itemize"><li class="li-itemize">
<code><span class="c006">x</span></code> matches the 
<code><code>'x'</code></code> character.
</li><li class="li-itemize">
<code>\</code><code><span class="c006">u0078</span></code> matches the unicode codepoint U+78 (which is again 
<code><code>'x'</code></code>).
</li><li class="li-itemize">
<code>.</code> matches any character.
</li><li class="li-itemize">
<code>[</code><code><span class="c006">vxz</span></code><code>]</code> declares a character class, and matches any of 
<code><code>'v'</code></code>, 
<code><code>'x'</code></code>, or 
<code><code>'z'</code></code>. 
</li><li class="li-itemize">
<code>\</code><code><span class="c006">d</span></code> is a pre-defined character class which matches any digit.
It is equivalent ot “
<code>[0-9]</code>”.
</li><li class="li-itemize">
<code>\</code><code><span class="c006">S</span></code> is a pre-defined character class which matches any space character (which also includes tabs and newlines). It is equivalent ot “
<code>[\</code><code><span class="c006">u0008</span></code><code>\</code><code><span class="c006">u000d</span></code><code>\</code><code><span class="c006">u000a</span></code><code>\</code><code><span class="c006">u0020</span></code><code>]</code>”.
</li></ul><p>Inside character classes, the symbol “
<code>^</code>” means negation and “
<code>-</code>” can be used to declare character ranges.
For instance, the character class 
<code>[^</code><code><span class="c003">a</span></code><code>-</code><code><span class="c006">zA</span></code><code>-</code><code><span class="c006">Z</span></code><code>]</code> matches any non-letter.</p><p>Cardinality (repetition) operators can be used to specify how many characters are matched.
The possibilities are as follows. </p><ul class="itemize"><li class="li-itemize">
<code>?</code> represents zero or one values.
</li><li class="li-itemize">
<code>+</code> one or more values.
</li><li class="li-itemize">
<code>*</code> zero or more values.
</li><li class="li-itemize">
<code>{</code><code><span class="c006">m</span></code><code>,</code><code><span class="c006">n</span></code><code>}</code> between 
<code><span class="c006">m</span></code> and 
<code><span class="c006">n</span></code> values.</li></ul><p>Any string of characters must be matched in the order of its characters with the following alterations. </p><ul class="itemize"><li class="li-itemize">
<code>|</code> declares alternatives, e.g., “
<code>abc</code><code>|</code><code>def</code><code>|</code><code>ghi</code>” matches any of “
<code><span class="c006">abc</span></code>”, “
<code><span class="c006">def</span></code>”, “
<code><span class="c006">ghi</span></code>”. 
</li><li class="li-itemize">
<code>^</code> matches the beginning of a string.
</li><li class="li-itemize">
<code>$</code> matches the end of a string.
</li><li class="li-itemize">“()” declares a group which is useful for cardinality and alternatives.
For example: “
<code>\^</code><code>ab</code><code>(</code><code>cd</code><code>|</code><code>ef</code><code>){2,}</code><code>gh</code>” matches “
<code><span class="c006">abcdcdcdghij</span></code>”.
</li></ul><p>All of the meta characters above will be treated as a literal (i.e., they match themselves) if they are prefixed with a 
<code>\\</code> (backslash).</p><p>Table <a href="#ch040regexExamples">4.4</a> contains several examples of regular expression matches.</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 4.4: Examples of regular expressions</td></tr>
</table></div>
<a id="ch040regexExamples"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c016"> <span class="c013">Regular Expression</span></td><td class="c016"><span class="c013">Some values that match</span></td><td class="c016"><span class="c013">Some values that don’t match
</span></td></tr>
<tr><td class="c016"> 
<code><span class="c006">P</span></code><code>\</code><code><span class="c006">d</span></code><code>{2,3}</code></td><td class="c016">
<code><span class="c006">P12</span></code> 
<code><span class="c006">P234</span></code></td><td class="c016">
<code><span class="c006">A1</span></code> 
<code><span class="c006">P2n</span></code> 
<code><span class="c006">P1</span></code> 
<code><span class="c006">P2233</span></code>
</td></tr>
<tr><td class="c016"> 
<code>(</code><code><span class="c006">pa</span></code><code>)*</code><code><span class="c006">b</span></code></td><td class="c016">
<code><span class="c006">b</span></code> 
<code><span class="c006">pab</span></code> 
<code><span class="c006">papab</span></code> 
<code><span class="c006">papapab</span></code> …</td><td class="c016">
<code><span class="c006">pa</span></code> 
<code><span class="c006">po</span></code> 
</td></tr>
<tr><td class="c016"> 
<code>(</code><code><span class="c006">pa</span></code><code>)*</code><code><span class="c006">b</span></code></td><td class="c016">
<code><span class="c006">b</span></code> 
<code><span class="c006">pab</span></code> 
<code><span class="c006">papab</span></code> 
<code><span class="c006">papapab</span></code> …</td><td class="c016">
<code><span class="c006">pa</span></code> 
<code><span class="c006">po</span></code> 
</td></tr>
<tr><td class="c016"> 
<code>[</code><code><span class="c003">a</span></code><code>-</code><code><span class="c006">z</span></code><code>]{2,3}</code></td><td class="c016">
<code><span class="c006">ab</span></code> 
<code><span class="c006">abc</span></code></td><td class="c016">
<code><span class="c003">a</span></code> 
<code><span class="c006">abcd</span></code> 
<code>23</code> 
</td></tr>
<tr><td class="c016"> 
<code>[</code><code><span class="c003">a</span></code><code>-</code><code><span class="c006">z</span></code><code>]{2,3}</code></td><td class="c016">
<code><span class="c006">ab</span></code> 
<code><span class="c006">abc</span></code></td><td class="c016">
<code><span class="c003">a</span></code> 
<code><span class="c006">abcd</span></code> 
<code><span class="c006">x45</span></code> 
<code>23</code>
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><p>The flags string has the following possibilities. </p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default385"></a>
</p>
<code><span class="c006">i</span></code>: Case-insensitive mode. <p><a id="hevea_default386"></a>
</p></li><li class="li-itemize">
<code><span class="c006">m</span></code>: Multi-line mode.
If present, the 
<code>^</code> character matches the start of any line (not only the start of the string) 
and the <code>$</code> matches the end of any line (not only the end of the string).<p><a id="hevea_default387"></a>
</p></li><li class="li-itemize">
<code><span class="c006">s</span></code>: If present, the dot matches also newlines, otherwise it matches any character except newlines. 
This mode is called single-line mode in Perl.<p><a id="hevea_default388"></a>
</p></li><li class="li-itemize">
<code><span class="c006">x</span></code>: Removes white space characters in the regular expression before matching.<p><a id="hevea_default389"></a>
</p></li><li class="li-itemize">
<code><span class="c006">q</span></code>: All meta characters are interpreted as literals, i.e., they match themselves in the input string.

<code><span class="c006">q</span></code> is compatible with the 
<code><span class="c006">i</span></code> flag.
If it’s used with the 
<code><span class="c006">m</span></code>, 
<code><span class="c006">s</span></code> or 
<code><span class="c006">x</span></code> flag, that flag is ignored.
</li></ul><p><a id="hevea_default390"></a>
</p>
<!--TOC subsection id="sec73" Value Sets-->
<h3 class="subsection" id="sec73">4.5.4  Value Sets</h3><!--SEC END --><p> 
<a id="ch4.sec4.4"></a>
<a id="ch040ValueSets"></a></p><p>A value set is a node constraint which enumerates the list of possible values that a focus node may have.
<a id="hevea_default391"></a> 
In ShExC, value sets are enclosed by square brackets (
<code>[</code> and 
<code>]</code>) where each possible value is separated by a space.</p><div class="example"><div class="theorem"><span class="c013">Example 39</span>  <em>Example with value sets</em><em> 
</em><a id="ch040:exampleValueSets"></a><p><em>The following example declares a shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Product</span></em></code><em> with two properties: </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">color</span></em></code><em> and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">manufacturer</span></em></code><em>, 
whose possible values are enumerated.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">color</span></span></em><em><span class="c011">        [ </span></em><em><span class="c011"><em><span class="c011">"Red"</span></em></span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Green"</span></em></span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Blue"</span></em></span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">manufacturer</span></span></em><em><span class="c011"> [ :</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">AnotherCompany</span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x1</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">color</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Red"</span></em></span></span></em><em><span class="c011">;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">manufacturer</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">color</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Cyan"</span></em></span></span></em><em><span class="c011"> ;       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Fails as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">manufacturer</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x3</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">color</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Green"</span></em></span></span></em><em><span class="c011"> ;      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Fails as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">manufacturer</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Unknown</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div><p><a id="hevea_default392"></a>
</p>
<!--TOC paragraph id="sec74" Unit value sets-->
<h5 class="paragraph" id="sec74">Unit value sets</h5><!--SEC END --><p>A common pattern is to declare that a node must have a specific value. 
This can be done by a unit value set, i.e., a value set with a single value.</p><div class="example"><div class="theorem"><span class="c013">Example 40</span>  <em> 
</em><a id="ch040:exampleSingleSetValues"></a><em>
</em><em>

</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Spanish</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">country</span></span></em><em><span class="c011"> [ :</span></em><em><span class="c011"><span class="c006">Spain</span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">country</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Spain</span></span></em><em><span class="c011"> .        </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Spanish</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">country</span></span></em><em><span class="c011">   :</span></em><em><span class="c011"><span class="c006">France</span></span></em><em><span class="c011"> .       </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :Spanish</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">              </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> ; </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Spanish and :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">country</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Spain</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p1</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">              </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011">; </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">country</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Spain</span></span></em><em><span class="c011"> .        </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Spanish</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">type</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011">;  </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">country</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Japan</span></span></em><em><span class="c011"> .        </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :Spanish</span></em></span></span></em></td></tr>
</table></div></div><p>Note that the 
<code>:</code><code><span class="c006">User</span></code> shape employs the 
<code><span class="c003">a</span></code> keyword which stands for 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code>.
There is no inference in ShEx, even for 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code>, which is treated as any other arc.
See Section <a href="#ch030Inference">3.2</a> for a discussion of the difference between shapes and classes.</p><p><a id="hevea_default393"></a>
</p>
<!--TOC paragraph id="sec75" Language-tagged values-->
<h5 class="paragraph" id="sec75">Language-tagged values</h5><!--SEC END --><p>As seen above, value sets contain one or more values.
The examples so far have included IRI and strings (literals with a datatype of 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code>).
These match precisely the same value in the data.
They can also be language tags, which match any literal with the given language tag.</p><div class="example"><div class="theorem"><span class="c013">Example 41</span>  <em> 
</em><a id="ch040:exampleSingleValueSets"></a><em>
</em><em>

</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">FrenchProduct</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c006">@fr</span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">SpanishProduct</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c006">@es</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@es</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">AR</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@es</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">ES</span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">car1</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Voiture"</span></em></span></span></em><em><span class="c011"><span class="c006">@fr</span></span></em><em><span class="c011"> .    </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :FrenchProduct</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">car2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Auto"</span></em></span></span></em><em><span class="c011"><span class="c006">@es</span></span></em><em><span class="c011"> .    </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :SpanishProduct</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">car3</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carro"</span></em></span></span></em><em><span class="c011"><span class="c006">@es</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">AR</span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :SpanishProduct</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">car4</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Coche"</span></em></span></span></em><em><span class="c011"><span class="c006">@es</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">ES</span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :SpanishProduct</span></em></span></span></em></td></tr>
</table></div></div><p><a id="hevea_default394"></a>
</p>
<!--TOC paragraph id="sec76" Ranges-->
<h5 class="paragraph" id="sec76">Ranges</h5><!--SEC END --><p> 
<a id="ch040Stems"></a></p><p>We can see in the example above that it would be convenient to accept literals with any language tag starting with 
<code><code>"es"</code></code>.
This can be indicated with the postfix operator ‘
<code>~</code>’.
For example, Argentinian, Chilean, and other region codes for Spain could be accepted with ‘
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">label</span></code><code> [ </code><code><span class="c006">@es</span></code><code>~ ]</code>’.</p><div class="example"><div class="theorem"><span class="c013">Example 42</span>  <em>Language-tagged ranges</em><em> 
</em><a id="ch040:languageTaggedRanges"></a><p><em>The following code declares that Spanish products contain </em><em>
</em><code><em><span class="c004">rdfs</span></em></code><code><em>:</em></code><code><em><span class="c006">label</span></em></code><em> with a value that must be a 
language-tagged literal in Spanish or any variant.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">SpanishProduct</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c006">@es</span></span></em><em><span class="c011">~ ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">car1</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Auto"</span></em></span></span></em><em><span class="c011"><span class="c006">@es</span></span></em><em><span class="c011"> .      </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :SpanishProduct</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">car2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carro"</span></em></span></span></em><em><span class="c011"><span class="c006">@es</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">AR</span></span></em><em><span class="c011"> .  </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :SpanishProduct</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">car3</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Coche"</span></em></span></span></em><em><span class="c011"><span class="c006">@es</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">ES</span></span></em><em><span class="c011"> .  </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :SpanishProduct</span></em></span></span></em></td></tr>
</table></div></div><p>This also works for strings, e.g., ‘
<code><code>"+34"</code></code><code>~</code>’ (French telephone numbers) and 
IRIs, e.g., ‘
<code>&lt;</code><code><span class="c006">http</span></code><code>://</code><code><span class="c006">www</span></code><code>.</code><code><span class="c006">w3</span></code><code>.</code><code><span class="c004">org</span></code><code>/</code><code><span class="c006">ns</span></code><code>/&gt;~</code>’ (W3C namespaces).</p><div class="example"><div class="theorem"><span class="c013">Example 43</span>  <em>String and IRI ranges example</em><em> 
</em><a id="ch040:exampleRanges"></a><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">SpanishW3CPeople</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">telephone</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><em><span class="c011">"+34"</span></em></span></em><em><span class="c011">~ ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">url</span></span></em><em><span class="c011">       [ </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://www.W3C.es/Personal&gt;</span></em></span></span></em><em><span class="c011">~ ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">telephone</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"+34 123 456 789"</span></em></span></span></em><em><span class="c011">; </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :SpanishW3CPeople</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">url</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://www.W3C.es/Personal/Alice&gt;</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">telephone</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"123 456 789"</span></em></span></span></em><em><span class="c011"> ;    </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :SpanishW3CPeople</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">url</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://other.org/bob&gt;</span></em></span></span></em><em><span class="c011"> .      </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Bad telephone and url *)</span></em></span></span></em></td></tr>
</table></div></div><p>IRIs represented as prefixed names can also have a postfix ‘
<code>~</code>’, e.g., 

<code><span class="c004">foaf</span></code><code>:~</code> represents the set of all URIs that start with the namespace bound to the prefix 
<code><span class="c004">foaf</span></code><code>:</code>.</p><div class="example"><div class="theorem"><span class="c013">Example 44</span>  <em> 
</em><a id="ch040:exampleIRIRanges"></a><p><em>In the following example, we declare that the status of a product must start by </em><em>
</em><code><em><span class="c006">http</span></em></code><code><em>://</em></code><code><em><span class="c006">example</span></em></code><code><em>.</em></code><code><em><span class="c006">codes</span></em></code><code><em>/</em></code><code><em><span class="c006">good</span></em></code><code><em>.</em></code><em> or 
</em><em>
</em><code><em><span class="c006">http</span></em></code><code><em>://</em></code><code><em><span class="c006">example</span></em></code><code><em>.</em></code><code><em><span class="c006">codes</span></em></code><code><em>/</em></code><code><em><span class="c006">bad</span></em></code><code><em>.</em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c003">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">codes</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.codes/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c006">codes</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">good</span></span></em><em><span class="c011">.~ </span></em><em><span class="c011"><span class="c006">codes</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bad</span></span></em><em><span class="c011">.~ ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">codes</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.codes/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">other</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://other.codes/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x1</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">codes</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">good</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">Shipped</span></span></em><em><span class="c011"> .              </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x2</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">other</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">done</span></span></em><em><span class="c011"> .                      </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x3</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.codes/bad.Lost&gt;</span></em></span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Product</span></em></span></span></em></td></tr>
</table></div></div><p><a id="hevea_default395"></a>
</p>
<!--TOC paragraph id="sec77" Exclusions-->
<h5 class="paragraph" id="sec77">Exclusions</h5><!--SEC END --><p>It can also be useful to exclude some values from a range. 
Exclusions are marked by the minus 
<code>-</code> sign. 
For example: 
<code><span class="c006">codes</span></code><code>:~ - </code><code><span class="c006">codes</span></code><code>:</code><code><span class="c006">unknown</span></code> represents all values starting by 
<code><span class="c006">codes</span></code><code>:</code> except 
<code><span class="c006">codes</span></code><code>:</code><code><span class="c006">unknown</span></code>.</p><p>Exclusions can themselves be ranges. 
For example: 
<code><span class="c006">codes</span></code><code>:~ - </code><code><span class="c006">codes</span></code><code>:</code><code><span class="c006">bad</span></code><code>.~ </code> represents all values starting by 
<code><span class="c006">codes</span></code><code>:</code> except those that start by 
<code><span class="c006">codes</span></code><code>:</code><code><span class="c006">bad</span></code><code>.</code>. </p><div class="example"><div class="theorem"><span class="c013">Example 45</span>  <em>Range exclusions</em><em> 
</em><a id="ch040:exampleIRIRangeExclusion"></a><p><em>The following code prescribes that the status of products can be anything that starts 
with </em><em>
</em><code><em><span class="c006">codes</span></em></code><code><em>:</em></code><em> 
except </em><em>
</em><code><em><span class="c006">codes</span></em></code><code><em>:</em></code><code><em><span class="c006">unknown</span></em></code><em> or codes starting with </em><em>
</em><code><em><span class="c006">codes</span></em></code><code><em>:</em></code><code><em><span class="c006">bad</span></em></code><code><em>.</em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c003">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">codes</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.codes/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c006">codes</span></span></em><em><span class="c011">:~ - </span></em><em><span class="c011"><span class="c006">codes</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">unknown</span></span></em><em><span class="c011"> - </span></em><em><span class="c011"><span class="c006">codes</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bad</span></span></em><em><span class="c011">.~ ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">codes</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.codes/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">other</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://other.codes/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p1</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">codes</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">good</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">Shipped</span></span></em><em><span class="c011"> .              </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p2</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">other</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">done</span></span></em><em><span class="c011"> .                      </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p3</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.codes/bad.Lost&gt;</span></em></span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p4</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.codes/unknown&gt;</span></em></span></span></em><em><span class="c011"> .  </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :Product</span></em></span></span></em></td></tr>
</table></div></div><p>Exclusions must be the same kind (IRI, string or language tag) as the stem type.
For instance, ‘
<code>[ </code><code><span class="c006">codes</span></code><code>:</code><code><span class="c006">good</span></code><code>.~ - </code><code><code>"bad."</code></code><code> - </code><code><span class="c006">@fr</span></code><code>~ ]</code>’ would be malformed as it’s an IRI range excluding a string and a language stem.</p>
<!--TOC paragraph id="sec78" Heterogeneous value sets-->
<h5 class="paragraph" id="sec78">Heterogeneous value sets</h5><!--SEC END --><p>There is no requirement that value sets be composed of a consistent kind of value (IRI, string or language tag).
For instance, the status of a product can be the IRIs (
<code>:</code><code><span class="c006">Accepted</span></code> or 
<code>:</code><code><span class="c006">Rejected</span></code>) or a string, e.g., “unknown".</p><div class="example"><div class="theorem"><span class="c013">Example 46</span>  <em> 
</em><a id="ch040:exampleHeterogeneousValueSet"></a><em>
</em><em>

</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> [ :</span></em><em><span class="c011"><span class="c006">Accepted</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Rejected</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"unknown"</span></em></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table></div></div>
<!--TOC paragraph id="sec79" Wildcard stem ranges-->
<h5 class="paragraph" id="sec79">Wildcard stem ranges</h5><!--SEC END --><p>Sometimes we want to accept user data with any value except some specific values.
For this, a wildcard character (‘.’) followed by one or more exclusions can be used (so long as those exclusions are all of the same kind).
The kind of the exlcusions (IRI, string, or language tag) establishes the type of RDF term that will be matched.</p><div class="example"><div class="theorem"><span class="c013">Example 47</span>  <em>Example of a wildcard range with exclusion</em><em> 
</em><a id="ch040:exampleWildcardStemRange"></a><p><em>The following code declares that the status of products can be anything except the IRI </em><em>
</em><code><em><span class="c006">codes</span></em></code><code><em>:</em></code><code><em><span class="c006">bad</span></em></code><em>. 
Given that the exclusion is an IRI, the status must be an IRI.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c003">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">codes</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.codes/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> [ . - </span></em><em><span class="c011"><span class="c006">codes</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bad</span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">codes</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.codes/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">other</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://other.codes/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p1</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">codes</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">good</span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p2</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">other</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bad</span></span></em><em><span class="c011"> .  </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p3</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">codes</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bad</span></span></em><em><span class="c011"> .  </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p4</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"good"</span></em></span></span></em><em><span class="c011"> .     </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">                         </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># "good" must be a IRI *) </span></em></span></span></em></td></tr>
</table></div></div>
<!--TOC paragraph id="sec80" Value set expressivity-->
<h5 class="paragraph" id="sec80">Value set expressivity</h5><!--SEC END --><p>Value sets are mostly a shorthand syntax for complex Boolean combinations of node constraints.
ShEx includes them because they are much more concise and, given their ubiquity in other schema languages, 
they are fundamental to how people model and understand data. </p><div class="example"><div class="theorem"><span class="c013">Example 48</span>  <em>Representing value sets</em><em> 
</em><a id="ch040:representingValueSets"></a><p><em>The following shape:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>can be defined without value sets using the </em><em>
</em><code><em><span class="c006">OR</span></em></code><em> operator that will be presented in Section </em><a href="#ch040.LogicalOperatorsShEx"><em>4.6</em></a><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">} </span></em><em><span class="c011"><span class="c003">OR</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table></div></div>
<!--TOC section id="sec81" Shapes-->
<h2 class="section" id="sec81">4.6  Shapes</h2><!--SEC END --><p>
<a id="ch040Shapes"></a>
<a id="ch4.sec5"></a></p><p>In the previous section we explored node constraints and how they declare a set of permissible RDF terms.
Most of the examples used node constraints in triple constraints, 
limiting the permissible values for triples in the input graph.</p><div class="example"><div class="theorem"><span class="c013">Example 49</span>  <em>Simple example</em><p><em>In the following example, we describe a shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>and we will try to validate the nodes </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> represented in the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> ;  </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  34 ;       </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> .   </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># wrong schema:name *)</span></em></span></span></em></td></tr>
</table><p><em>To solidify our intuition of validating shapes, we need to think of this as a series of steps to validate a focus node against a shape expression.</em></p><ol class="enumerate" type=1><li class="li-enumerate"><em>Check if focus node </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> conforms to the shape expression </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>.
</em></li><li class="li-enumerate"><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> is a shape so check if the neighborhood of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> matches the triple expression in the shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>.
This step means that one needs to find a way to distribute the triples in the neighborhood to satisfy the triple expression.
</em></li><li class="li-enumerate"><em>The shape’s triple expression is a single triple constraint so all one needs to do is find the triple with a matching predicate in the neighborhood. 
In this case, the triple </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><code><em> </em></code><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><code><em> </em></code><code><em><code><em>"Alice"</em></code></em></code><em>.
</em></li><li class="li-enumerate"><em>The triple expression has a value expression so consider the object, </em><em>
</em><code><em><code><em>"Alice"</em></code></em></code><em>, as the focus node and test it against the node constraint (in this case </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em>).
</em></li><li class="li-enumerate"><em>
</em><code><em><code><em>"Alice"</em></code></em></code><em> matches ‘</em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em>’ so this test succeeds.
</em></li><li class="li-enumerate"><em>The cardinality of the triple constraint is </em><em>
</em><code><em>{1,1}</em></code><em> (the default one) and as there is only one tripe matching the node conforms to the
shape expression.
</em></li></ol><p><em>When the same steps are performed to check </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em>, the last step will have </em><em>
</em><code><em>34</em></code><em> as the focus node.
This test fails so </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> fails to conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>.
</em></p></div></div><p><a id="hevea_default396"></a>
</p>
<!--TOC paragraph id="sec82" Shape-->
<h5 class="paragraph" id="sec82">Shape</h5><!--SEC END --><p>
A shape is a container for a triple expression along with some properties stating how to treat triples not matching the triple expression.
We will describe these properties after introducing triple expressions 
(Section <a href="#ch040ClosedExtra">4.6.8</a>).
Since triple expressions are combinations of triple constraints, we start with them.</p>
<!--TOC subsection id="sec83" Triple Constraints-->
<h3 class="subsection" id="sec83">4.6.1  Triple Constraints</h3><!--SEC END --><p>
<a id="ch040tripleconstraints"></a>
<a id="ch4.sec5.1"></a></p><p>The basic building block of a triple expression is a triple constraint. 
It is composed of a property, a node constraint, and a cardinality.</p><p>A triple constraint expresses a constraint on the values of triples with the given property and the number of values expressed by the cardinality. 
Cardinalities will be described in more detail in Section <a href="#ch040cardinalities">4.6.3</a>. </p><div class="example"><div class="theorem"><span class="c013">Example 50</span>  <em>
The following shape is defined by a single triple constraint whose components are depicted in Figure </em><a href="#ch040.FigureShExTripleConstraint"><em>50</em></a><em>.</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> {1,2}</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em><em>The meaning is that nodes conforming to </em></em><em><em>
</em></em><code><em><em>:</em></em></code><code><em><em><span class="c006">Product</span></em></em></code><em><em> must satisfy: </em></em></p><ul class="itemize"><li class="li-itemize"><em><em>
</em></em><em><em>They must have property </em></em><em><em>
</em></em><code><em><em><span class="c004">schema</span></em></em></code><code><em><em>:</em></em></code><code><em><em><span class="c006">productId</span></em></em></code><em><em>.
</em></em></li><li class="li-itemize"><em><em>All the values of </em></em><em><em>
</em></em><code><em><em><span class="c004">schema</span></em></em></code><code><em><em>:</em></em></code><code><em><em><span class="c006">productId</span></em></em></code><em><em> must satisfy the node constraint </em></em><em><em>
</em></em><code><em><em><span class="c004">xsd</span></em></em></code><code><em><em>:</em></em></code><code><em><em><span class="c006">string</span></em></em></code><em><em>.
</em></em></li><li class="li-itemize"><em><em>As the cardinality is </em></em><em><em>
</em></em><code><em><em>{1,2}</em></em></code><em><em>, there can be between 1 and 2 values of </em></em><em><em>
</em></em><code><em><em><span class="c004">schema</span></em></em></code><code><em><em>:</em></em></code><code><em><em><span class="c006">productId</span></em></em></code><em><em>.
</em></em></li></ul><blockquote class="figure"><div class="center"><hr class="c021"></div><em><em> 
</em></em><div class="center"><em><em>
<img src="ShExTripleConstraint.png">
</em></em></div><em><em>

</em></em><a id="ch040.FigureShExTripleConstraint"></a><em><em>
</em></em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em><em>Figure 4.7: Parts of a triple constraint.</em></em></td></tr>
</table></div><em><em>
</em></em><div class="center"><hr class="c021"></div></blockquote><table class="lstframe c014"><tr><td class="lstlisting"><em><em><span class="c011">:</span></em></em><em><em><span class="c011"><span class="c006">p1</span></span></em></em><em><em><span class="c011"> </span></em></em><em><em><span class="c011"><span class="c004">schema</span></span></em></em><em><em><span class="c011">:</span></em></em><em><em><span class="c011"><span class="c006">productId</span></span></em></em><em><em><span class="c011"> </span></em></em><em><em><span class="c011"><span class="c005"><em><em><span class="c011">"P1"</span></em></em></span></span></em></em><em><em><span class="c011"> .              </span></em></em><em><em><span class="c011"><span class="c008"><em><em><span class="c011"># Passes as a :Product</span></em></em></span></span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">:</span></em></em><em><em><span class="c011"><span class="c006">p2</span></span></em></em><em><em><span class="c011"> </span></em></em><em><em><span class="c011"><span class="c004">schema</span></span></em></em><em><em><span class="c011">:</span></em></em><em><em><span class="c011"><span class="c006">productId</span></span></em></em><em><em><span class="c011"> </span></em></em><em><em><span class="c011"><span class="c005"><em><em><span class="c011">"P2"</span></em></em></span></span></em></em><em><em><span class="c011">, </span></em></em><em><em><span class="c011"><span class="c005"><em><em><span class="c011">"C2"</span></em></em></span></span></em></em><em><em><span class="c011">.         </span></em></em><em><em><span class="c011"><span class="c008"><em><em><span class="c011"># Passes as a :Product </span></em></em></span></span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">:</span></em></em><em><em><span class="c011"><span class="c006">p3</span></span></em></em><em><em><span class="c011"> </span></em></em><em><em><span class="c011"><span class="c004">schema</span></span></em></em><em><em><span class="c011">:</span></em></em><em><em><span class="c011"><span class="c006">productId</span></span></em></em><em><em><span class="c011"> </span></em></em><em><em><span class="c011"><span class="c005"><em><em><span class="c011">"P3"</span></em></em></span></span></em></em><em><em><span class="c011">, </span></em></em><em><em><span class="c011"><span class="c005"><em><em><span class="c011">"C3"</span></em></em></span></span></em></em><em><em><span class="c011">, </span></em></em><em><em><span class="c011"><span class="c005"><em><em><span class="c011">"X3"</span></em></em></span></span></em></em><em><em><span class="c011"> .  </span></em></em><em><em><span class="c011"><span class="c008"><em><em><span class="c011"># Fails as a :Product </span></em></em></span></span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">                                         </span></em></em><em><em><span class="c011"><span class="c008"><em><em><span class="c011"># Cardinality exceeded *) </span></em></em></span></span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">:</span></em></em><em><em><span class="c011"><span class="c006">p4</span></span></em></em><em><em><span class="c011"> </span></em></em><em><em><span class="c011"><span class="c004">schema</span></span></em></em><em><em><span class="c011">:</span></em></em><em><em><span class="c011"><span class="c006">name</span></span></em></em><em><em><span class="c011"> </span></em></em><em><em><span class="c011"><span class="c005"><em><em><span class="c011">"No Id"</span></em></em></span></span></em></em><em><em><span class="c011"> .                </span></em></em><em><em><span class="c011"><span class="c008"><em><em><span class="c011"># Fails as a :Product </span></em></em></span></span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">                                         </span></em></em><em><em><span class="c011"><span class="c008"><em><em><span class="c011"># No schema:productId *) </span></em></em></span></span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">:</span></em></em><em><em><span class="c011"><span class="c006">p5</span></span></em></em><em><em><span class="c011"> </span></em></em><em><em><span class="c011"><span class="c004">schema</span></span></em></em><em><em><span class="c011">:</span></em></em><em><em><span class="c011"><span class="c006">productId</span></span></em></em><em><em><span class="c011"> 5 .                 </span></em></em><em><em><span class="c011"><span class="c008"><em><em><span class="c011"># Fails as a :Product </span></em></em></span></span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">                                         </span></em></em><em><em><span class="c011"><span class="c008"><em><em><span class="c011"># xsd:string not satisfied *) </span></em></em></span></span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">:</span></em></em><em><em><span class="c011"><span class="c006">p6</span></span></em></em><em><em><span class="c011"> </span></em></em><em><em><span class="c011"><span class="c004">schema</span></span></em></em><em><em><span class="c011">:</span></em></em><em><em><span class="c011"><span class="c006">productId</span></span></em></em><em><em><span class="c011"> </span></em></em><em><em><span class="c011"><span class="c005"><em><em><span class="c011">"P6"</span></em></em></span></span></em></em><em><em><span class="c011">, 5  .          </span></em></em><em><em><span class="c011"><span class="c008"><em><em><span class="c011"># Fails as a :Product </span></em></em></span></span></em></em><em><em><span class="c011">
</span></em></em><em><em><span class="c011">                                         </span></em></em><em><em><span class="c011"><span class="c008"><em><em><span class="c011"># xsd:string not satisfied *) </span></em></em></span></span></em></em></td></tr>
</table></div></div><p><a id="hevea_default397"></a>
</p>
<!--TOC paragraph id="sec84" Closing a property-->
<h5 class="paragraph" id="sec84">Closing a property</h5><!--SEC END --><p> 
<a id="ch040ClosingProperty"></a>
Triple constraints have an implicit meaning of closing the possible values of a property.
In the previous example, the declaration 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">productId</span></code><code> </code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code> requires all values of 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">productId</span></code> to satisfy 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code>. 
That’s why 
<code>:</code><code><span class="c006">p6</span></code> failed to conform: although it had one string value, the other value wasn’t.</p><p>This behavior can be modified with the directives 
<code><span class="c006">EXTRA</span></code> and 
<code><span class="c006">CLOSED</span></code> that will be shown in Section <a href="#ch040ClosedExtra">4.6.8</a>.</p><p><a id="hevea_default398"></a>
</p>
<!--TOC subsection id="sec85" Groupings-->
<h3 class="subsection" id="sec85">4.6.2  Groupings</h3><!--SEC END --><p> 
<a id="ch040grouping"></a>
<a id="ch4.sec5.2"></a></p><p>The EachOf operator combines two or more triple expressions.
All the sub-expressions must be satisfied by triples in the neighborhood of the focus node.
EachOf is indicated by a semicolon (
<code>;</code>) in the compact syntax.</p><div class="example"><div class="theorem"><span class="c013">Example 51</span>  <em>
A </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> is defined by an EachOf expression that combines three triple constraints.
A node satisfies the </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> type if all the three triple constraints are satisfied.
</em><em>

</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">age</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">integer</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table></div></div>
<!--TOC subsection id="sec86" Cardinalities-->
<h3 class="subsection" id="sec86">4.6.3  Cardinalities</h3><!--SEC END --><p> 
<a id="ch040cardinalities"></a>
<a id="ch4.sec5.3"></a></p><p><a id="hevea_default399"></a>
Cardinalities indicate the required number of triples satisfying the given constraint.
They are most often used on triple constraints although they can also be applied to more complex expressions. 
Table <a href="#ch040.Cardinalities">4.5</a> gives an overview of the different representations of cardinalities in ShExC.</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 4.5: ShEx cardinalities</td></tr>
</table></div>
<a id="ch040.Cardinalities"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c015"> <span class="c013">Value</span></td><td class="c015"><span class="c013">Description
</span></td></tr>
<tr><td class="c015"> 
<code>*</code></td><td class="c015">0 or more
</td></tr>
<tr><td class="c015"> 
<code>+</code></td><td class="c015">1 or more 
</td></tr>
<tr><td class="c015"> 
<code>?</code></td><td class="c015">0 or 1
</td></tr>
<tr><td class="c015"> 
<code>{</code><code><span class="c006">m</span></code><code>}</code></td><td class="c015">Exactly <span class="c012">m</span> repetitions 
</td></tr>
<tr><td class="c015"> 
<code>{</code><code><span class="c006">m</span></code><code>,</code><code><span class="c006">n</span></code><code>}</code></td><td class="c015">Between <span class="c012">m</span> and <span class="c012">n</span> repetitions
</td></tr>
<tr><td class="c015"> 
<code>{</code><code><span class="c006">m</span></code><code>,}</code></td><td class="c015"><span class="c012">m</span> or more repetitions </td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><p>If the cardinality is not specified, the default value is 
<code>{1}</code> (exactly one).</p><div class="example"><div class="theorem"><span class="c013">Example 52</span>  <em>Cardinalities example</em><em> 
</em><a id="ch040:exampleCardinalities"></a><p><em>The following </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> shape declares that nodes must have exactly one value for </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> (default cardinality), 
and optional value for </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">worksFor</span></em></code><em> and zero or more values for </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">follows</span></em></code><em>.</em></p><p><em>The </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Company</span></em></code><em> shape uses the explicit </em><em>
</em><code><em>{</em></code><code><em><span class="c006">m</span></em></code><code><em>,</em></code><code><em><span class="c006">n</span></em></code><code><em>}</em></code><em> syntax to assert that a matching node must have between 1 and 100 employees and 
an optional </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">founder</span></em></code><em> value.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> ? ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> *</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">founder</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> ?;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">employee</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> {1,100}</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011">;       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011">.</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> ;     </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011">.</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Dave"</span></em></span></span></em><em><span class="c011"> .       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">emily</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Emily"</span></em></span></span></em><em><span class="c011"> ;      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011">,   </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># more than one schema:worksFor *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">                            :</span></em><em><span class="c011"><span class="c006">OtherCompany</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">founder</span></span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">employee</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">.  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Company</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">OtherCompany</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">founder</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> .      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Company</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">                                           </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># 0 employees *)</span></em></span></span></em></td></tr>
</table></div></div><p>A cardinality can also be used on more general expressions indicating that the neighborhood of a node must contain several groups of triples, each of them satisfying the expression.</p><div class="example"><div class="theorem"><span class="c013">Example 53</span>  <em>Cardinalities on expressions</em><em> 
</em><a id="ch040:cardinalitiesExmpressions"></a><p><em>The following shape declares that nodes must have exactly one value for </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> 
and that they can contain the combination of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">givenName</span></em></code><em> and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">familyName</span></em></code><em> with optional cardinality (either they contain the group of both properties or none of them).</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ( </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ) ?</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">            .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> ;  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Smith"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div>
<!--TOC subsection id="sec87" Choices-->
<h3 class="subsection" id="sec87">4.6.4  Choices</h3><!--SEC END --><p> 
<a id="ch040oneOf"></a>
<a id="ch4.sec5.4"></a>
<a id="hevea_default400"></a>
</p><p>The pipe or choice operator 
<code>|</code> can be used to declare compose complex triple expressions with the meaning that <em>one of</em> the branches must be satisfied.</p><div class="example"><div class="theorem"><span class="c013">Example 54</span>  <em>OneOf operator</em><em> 
</em><a id="ch040:exampleOneOf"></a><p><em>The following shape declares that nodes must have either </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> or </em><em>
</em><code><em><span class="c004">foaf</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em>, but not both.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> |</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> .  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Bob"</span></em></span></span></em><em><span class="c011"> ;    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">identifier</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"P234"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> .  </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># More than one *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">identifier</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"P123"</span></em></span></span></em><em><span class="c011"> .   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">                                    </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># None provided *)</span></em></span></span></em></td></tr>
</table></div></div><p>A typical pattern consists of combining OneOf (
<code>|</code> operator) with EachOf (
<code>;</code>) to form more complex expressions.</p><div class="example"><div class="theorem"><span class="c013">Example 55</span>  <em> 
</em><a id="ch040:exampleChoices"></a><p><em>The following shape declares that nodes must have either one </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> or a combination of zero or more </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">givenName</span></em></code><em> and
one </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">lastName</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> |</span></em><em><span class="c011">
</span></em><em><span class="c011">  ( </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> + ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">  )</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> .  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Bob"</span></em></span></span></em><em><span class="c011"> ;    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Bobby"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Smith"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"King"</span></em></span></span></em><em><span class="c011"> .   </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Can't have both *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">        23 .      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">                                    </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># schema:name must be xsd:string *)</span></em></span></span></em></td></tr>
</table></div></div><p>A typical pattern is to add some cardinality to an expression formed by the OneOf (
<code>|</code>) operator.</p><div class="example"><div class="theorem"><span class="c013">Example 56</span>  <em>Cardinality on OneOf expression</em><em> 
</em><a id="ch040:cardinalitiesExmpressionsOneOf"></a><p><em>The following shape declares that nodes must have exactly one value for </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">productId</span></em></code><em> 
and that they can contain between 0 or two combinations of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">isRelatedTo</span></em></code><em> or </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">isSimilarTo</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ( </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">isRelatedTo</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> |</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">isSimilarTo</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ){0,2}</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p1</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"P1"</span></em></span></span></em><em><span class="c011"> ;           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">isRelatedTo</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">p2</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">p3</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"P2"</span></em></span></span></em><em><span class="c011"> .           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p3</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"P3"</span></em></span></span></em><em><span class="c011">;            </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">isRelatedTo</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">p1</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">isSimilarTo</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">p2</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p4</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"P4"</span></em></span></span></em><em><span class="c011"> ;           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Product </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">isRelatedTo</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">p1</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">p2</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">p3</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div>
<!--TOC subsection id="sec88" Nested Shapes-->
<h3 class="subsection" id="sec88">4.6.5  Nested Shapes</h3><!--SEC END --><p>
<a id="ch4.sec5.5"></a>
<a id="hevea_default401"></a></p><p>It is possible to avoid defining two shapes when one of them is just an auxiliary shape that is not needed elsewhere. </p><div class="example"><div class="theorem"><span class="c013">Example 57</span>  <em> 
</em><a id="ch040:NestedShapes"></a><p><em>The following schema declares that nodes conforming with </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> must have a property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> with </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em> and another property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">worksFor</span></em></code><em> whose value must conform with an anonymous shape </em><em>
</em><code><em><span class="c006">_</span></em></code><code><em>:1</em></code><em> which must have </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> with the value </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Company</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@_</span></span></em><em><span class="c011">:1</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:1 { </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [ :</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011"> ] }</span></em></td></tr>
</table><p><em>It can be rewritten as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [ :</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011">  }</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> ;          </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011">] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> [               </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># The value of schema:worksFor *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"AnotherCompany"</span></em></span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># does not have rdf:type :Company *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       ].</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011"> .               </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a anonymous shape</span></em></span></span></em></td></tr>
</table></div></div><p><a id="hevea_default402"></a>
Nested shapes can be used to emulate simple SPARQL property paths.</p><div class="example"><div class="theorem"><span class="c013">Example 58</span>  <em> 
</em><a id="ch040:NestedShapesPropertyPaths"></a><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Grandson</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> { :</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> . + }+ ;</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> .  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Grandson</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   :</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">.          </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Grandson</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">emily</span></span></em><em><span class="c011"> .        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Grandson</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">grace</span></span></em><em><span class="c011"> .        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Grandson</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">emily</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Emily"</span></em></span></span></em><em><span class="c011"> .   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Grandson</span></em></span></span></em></td></tr>
</table></div></div>
<!--TOC subsection id="sec89" Inverse Triple Constraints-->
<h3 class="subsection" id="sec89">4.6.6  Inverse Triple Constraints</h3><!--SEC END --><p>
<a id="ch4.sec5.6"></a>
<a id="hevea_default403"></a></p><p>The 
<code>^</code> operator reverses the order of the triple constraint. 
Instead of constraining the focus node’s outgoing arcs, it constrains incoming arcs.</p><div class="example"><div class="theorem"><span class="c013">Example 59</span>  <em>Inverse triple constraints</em><em> 
</em><a id="ch040:InverseTripleConstraints"></a><p><em>The following code declares that nodes conforming to shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Company</span></em></code><em> must have </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Company</span></em></code><em> and must be the objects of
one or more triples with predicate </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">worksFor</span></em></code><em> and a subject conforming to shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011">] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ^</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> +</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>With the following data, node </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Company1</span></em></code><em> conforms to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Company</span></em></code><em> because there are two nodes, </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> that work for it. 
However, node </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Company2</span></em></code><em> does not conform because there are no node pointing to it by the property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">worksFor</span></em></code><em> and
node </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Company3</span></em></code><em> also fails because the node that works for it, does not conform to shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011">;        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Company1</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Bob"</span></em></span></span></em><em><span class="c011"> ;           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Company1</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Company3</span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">                                   </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># No schema:name *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company1</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011"> .       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Company</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011"> .       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Company</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">                                   </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># No one works for it *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company3</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011"> .       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Company</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">                                   </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Carol works for it *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">                                   </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># but does not conform to User *)</span></em></span></span></em></td></tr>
</table></div></div>
<!--TOC subsection id="sec90" Repeated Properties-->
<h3 class="subsection" id="sec90">4.6.7  Repeated Properties</h3><!--SEC END --><p>
<a id="ch4.sec5.7"></a>
<a id="ch040.RepeatedPropertiesSection"></a></p><p><a id="hevea_default404"></a>
The EachOf operator is different from a conjunction operator.
This is best illustrated when a shape uses the same property several times; we call this a <em>repeated property</em>.
In Example <a href="#ch040%3ARepeatedProperties">60</a>, the 
<code>:</code><code><span class="c006">User</span></code> shape is an EachOf with three triple constraints, two of which have the same property 
<code>:</code><code><span class="c006">parent</span></code>.
This shape is conformed by a node that has two arcs for the 
<code>:</code><code><span class="c006">parent</span></code> property, 
each of which contributes to satisfy one of the two triple constraints. </p><div class="example"><div class="theorem"><span class="c013">Example 60</span>  <em>Repeated properties</em><em> 
</em><a id="ch040:RepeatedProperties"></a><em>
</em><em>

</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011"> [</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> } ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011"> [</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> } ;</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Dave"</span></em></span></span></em><em><span class="c011"> ;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">emily</span></span></em><em><span class="c011"> .       </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># both parents are Female</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">emily</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">frank</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Frank"</span></em></span></span></em><em><span class="c011">;           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011"> .                   </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># only one parent</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">                     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>Remember that ShEx distributes the triples to triple constraints in a triple expression (see Section </em><a href="#ch040Shapes"><em>4.6</em></a><em>).
This means the same triple cannot contribute for satisfying two different triple constraints, 
even if its object satisfies the node constraints for both.
That is why the node </em><em>
</em><code><em>:</em></code><code><em><span class="c006">frank</span></em></code><em> does not conform to the </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> shape even if its parent satisfies both conditions.</em></p></div></div>
<!--TOC subsection id="sec91" Permitting other Triples-->
<h3 class="subsection" id="sec91">4.6.8  Permitting other Triples</h3><!--SEC END --><p> 
<a id="ch040ClosedExtra"></a>
<a id="ch4.sec5.8"></a>
<a id="hevea_default405"></a></p><p>When defining RDF-based services using ShEx schemas, there are several possibilities that have to be taken into account.
Some services backed by an RDF triple store may simply accept and store any triples not described in the schema; 
in such a case, the role of the schema is mainly to identify and constrain the triples that the service understands and manipulates, 
allowing any extra triples for unforeseen applications.
This <em>open</em> model is more popular in the semantic web community.</p><p>At the other extreme, some services or databases may accept or emit some fixed structure, 
disallowing any triples that are not mentioned in the schema. 
In this case, the role of ShEx schemas is to validate and verify the content before it is processed or published. 
This <em>closed</em> model has been traditionally employed in contexts where data quality and security play a significant part.</p><p>ShEx manages these use cases with two granularities:</p><ul class="itemize"><li class="li-itemize">
<em>extra properties</em> manage triples with predicates that appear in the shape expression but do not have corresponding values; and 
</li><li class="li-itemize"><em>closed shapes</em> manage triples with predicates that <em>do not</em> appear in the shape expression.
</li></ul>
<!--TOC subsubsection id="sec92" Extra Properties-->
<h4 class="subsubsection" id="sec92">Extra Properties</h4><!--SEC END --><p> 
<a id="ch040ShExExtra"></a>
<a id="hevea_default406"></a></p><p>As we described in Section <a href="#ch040ClosingProperty">4.6.1</a> triple constraints close properties by default.
Sometimes, it is useful to <em>open</em> a property to permit instances of it which are not included in the schema. 
The 
<code><span class="c006">EXTRA</span></code> qualifier can be used to allow the appearance of other properties. </p><p>A shape of the form 


</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;Shape&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">EXTRA</span></span><span class="c011"> </span><span class="c011"><span class="c008"><span class="c011">&lt;property&gt;</span></span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c008"><span class="c011">&lt;property&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c008"><span class="c011">&lt;NodeConstraint&gt;</span></span></span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>is equivalent to:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;Shape&gt;</span></span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c008"><span class="c011">&lt;property&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c008"><span class="c011">&lt;NodeConstraint&gt;</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c008"><span class="c011">&lt;property&gt;</span></span></span><span class="c011"> (</span><span class="c011"><span class="c003">Not</span></span><span class="c011"> </span><span class="c011"><span class="c008"><span class="c011">&lt;NodeConstraint&gt;</span></span></span><span class="c011">)*</span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>which means that it allows zero or more values of 
<code>&lt;</code><code><span class="c006">property</span></code><code>&gt;</code> that do not satisfy 
<code>&lt;</code><code><span class="c006">NodeConstraint</span></code><code>&gt;</code>. 
<a id="hevea_default407"></a>
Note that that there is a hidden negation in any shape that includes an 
<code><span class="c006">EXTRA</span></code> qualifier.</p><div class="example"><div class="theorem"><span class="c013">Example 61</span>  <em>EXTRA example</em><em> 
</em><a id="ch040:exampleEXTRA"></a><p><em>The following example declares that nodes that conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">FollowSpaniards</span></em></code><em> must follow one of more nodes whose nationality is </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Spain</span></em></code><em>, but can also follow other nodes.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">FollowSpaniards</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">EXTRA</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nationality</span></span></em><em><span class="c011"> [:</span></em><em><span class="c011"><span class="c006">Spain</span></span></em><em><span class="c011">] }+</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">david</span></span></em><em><span class="c011"> .         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :FollowSpaniards</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">david</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">emily</span></span></em><em><span class="c011"> .   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :FollowSpaniards</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">emily</span></span></em><em><span class="c011"> .         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :FollowSpaniards </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">david</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nationality</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Spain</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">emily</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nationality</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">France</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>Notice that in the case of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> is passes although it follows </em><em>
</em><code><em>:</em></code><code><em><span class="c006">emily</span></em></code><em> which is not Spaniard.
If we remove the </em><em>
</em><code><em><span class="c006">EXTRA</span></em></code><em> declaration it would fail.</em></p></div></div><p>A typical pattern using 
<code><span class="c006">EXTRA</span></code> declarations is to constrain the set of required values of a node but to allow other values.</p><div class="example"><div class="theorem"><span class="c013">Example 62</span>  <em>EXTRA properties with several types</em><em> 
</em><a id="ch040:exampleEXTRATypes"></a><p><a id="hevea_default408"></a><em>
The following example declares the shapes for companies which must have two values for the </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> predicate: 
</em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Organization</span></em></code><em> and </em><em>
</em><code><em><span class="c004">org</span></em></code><code><em>:</em></code><code><em><span class="c006">Organization</span></em></code><em>. 
Shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Company1</span></em></code><em> does not allow any extra </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> arc, while shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Company2</span></em></code><em> allows extra values.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company1</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">org</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">EXTRA</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> {                </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Allows extra values of rdf:type</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">org</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">org</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011">,     </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Company1 and :Company2</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">              </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">OurUniversity</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">org</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011">,            </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Company1  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">                 </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CollegeOrUniversity</span></span></em><em><span class="c011">,  </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># unexpected rdf:type</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">                 </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011"> .        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Company2   </span></em></span></span></em></td></tr>
</table></div></div>
<!--TOC subsubsection id="sec93" Closed Shapes-->
<h4 class="subsubsection" id="sec93">Closed Shapes</h4><!--SEC END --><p>
<a id="ch040:SecClosedShapes"></a></p><p><a id="hevea_default409"></a>
A shape can be declared to have only the triples matching a given set of triple constraints and no others using the 
keyword 
<code><span class="c006">CLOSED</span></code>. </p><div class="example"><div class="theorem"><span class="c013">Example 63</span>  <em>CLOSED shape example</em><em> 
</em><a id="ch040:exampleClosed"></a><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User1</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011">*</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">CLOSED</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011">*</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User1 and :User2</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Bob"</span></em></span></span></em><em><span class="c011"> ;    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User1</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">   :</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> ;   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User2</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">age</span></span></em><em><span class="c011">     23 .       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  unexpected schema:age</span></em></span></span></em></td></tr>
</table></div></div><p><a id="hevea_default410"></a>
<a id="hevea_default411"></a>
A common pattern is to combine 
<code><span class="c006">CLOSED</span></code> and 
<code><span class="c006">EXTRA</span></code>. </p><div class="example"><div class="theorem"><span class="c013">Example 64</span>  <em>CLOSED shapes</em><em> 
</em><a id="ch040:exampleClosedExtra"></a><p><em>The shape </em><em>
</em><code><em><span class="c006">KnowsW3CPeople</span></em></code><em> </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">KnowsW3CPeople</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">CLOSED</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">EXTRA</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">affiliation</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> ? ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">affiliation</span></span></em><em><span class="c011"> [:</span></em><em><span class="c011"><span class="c006">W3C</span></span></em><em><span class="c011">] }+</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :KnowsW3CPeople</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">affiliation</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">ACompany</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Bob"</span></em></span></span></em><em><span class="c011"> ;      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :KnowsW3CPeople</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">affiliation</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">W3C</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> .     </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># :carol's affiliation is not :W3C *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :KnowsW3CPeople</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">affiliation</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">ACompany</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Dave"</span></em></span></span></em><em><span class="c011"> ;           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :KnowsW3CPeople</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">age</span></span></em><em><span class="c011">   23 .               </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># schema:age not allowed*)</span></em></span></span></em></td></tr>
</table><p><a href="https://goo.gl/mdkMWQ"><em>Try example in Shaclex</em></a></p></div></div>
<!--TOC section id="sec94" References-->
<h2 class="section" id="sec94">4.7  References</h2><!--SEC END --><p>
<a id="ch4.sec6"></a></p>
<!--TOC subsection id="sec95" Shape References-->
<h3 class="subsection" id="sec95">4.7.1  Shape References</h3><!--SEC END --><p>
<a id="ch4.sec6.1"></a>
<a id="ch040:ShapeReference"></a>
<a id="hevea_default412"></a></p><p>A node constraint can be a shape reference, which has the form 
<code><span class="c006">@label</span></code> where label is the identifier of another shape expression in the schema. 
<em>Shape expression reference</em> would be a more precise name but is long enough to be awkard.</p><div class="example"><div class="theorem"><span class="c013">Example 65</span>  <em>Shape references</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;             </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;             </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User because :x fails as :Company</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"CompanyA"</span></em></span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Company</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> 23 .        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Company</span></em></span></span></em></td></tr>
</table></div></div>
<!--TOC subsection id="sec96" Recursion and Cyclic References-->
<h3 class="subsection" id="sec96">4.7.2  Recursion and Cyclic References</h3><!--SEC END --><p> 
<a id="ch4.sec6.2"></a>
<a id="ch040:CyclicReferences"></a></p><p><a id="hevea_default413"></a> <a id="hevea_default414"></a>
It is possible to define data models with cyclic references, i.e., shapes that recursively refer to themselves either directly or indirectly. 
ShEx supports these kinds of data models which appear frequently. </p><div class="example"><div class="theorem"><span class="c013">Example 66</span>  <em>Cyclic data model</em><p><em>The model depicted in Figure </em><a href="#ch040.CyclicModel"><em>66</em></a><em> can be specified in ShEx as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">employee</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">*</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 
</em><div class="center"><em>
<img src="CyclicModel.png">
</em></div><em>

</em><a id="ch040.CyclicModel"></a><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 4.8: Example of cyclic data model.</em></td></tr>
</table></div><em>
</em><div class="center"><hr class="c021"></div></blockquote><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011"> .           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011">;                     </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">AnotherCompany</span></span></em><em><span class="c011"> .       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"OurCompany"</span></em></span></span></em><em><span class="c011"> ;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Company </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">employee</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">AnotherCompany</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"AnotherCompany"</span></em></span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Company </span></em></span></span></em></td></tr>
</table></div></div><div class="example"><div class="theorem"><span class="c013">Example 67</span>  <em>More complex cyclic model</em><p><em>As an exercise, we present a more complex cyclic data model in 
Figure </em><a href="#ch040.CyclicModelExercise"><em>67</em></a><em>.
Although the model has several cycles, it can be easily represented in ShEx as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">University</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">employee</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> +;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">course</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Course</span></span></em><em><span class="c011"> +</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">           [ </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Course</span></span></em><em><span class="c011">*</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Course</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">university</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">University</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">hasStudent</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Student</span></span></em><em><span class="c011">+</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Student</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">            [ </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">mbox</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">hasFriend</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Student</span></span></em><em><span class="c011">* ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">isEnroledIn</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Course</span></span></em><em><span class="c011">*</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 
</em><div class="center"><em>
<img src="CyclicModelExercise.png">
</em></div><em>

</em><a id="ch040.CyclicModelExercise"></a><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 4.9: Exercise to represent cyclic data model.</em></td></tr>
</table></div><em>
</em><div class="center"><hr class="c021"></div></blockquote><p><em>Notice the separation between the types and shapes of nodes.
Both </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Teacher</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Student</span></em></code><em> must have </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> with value </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em>, but their properties are different.
</em></p></div></div><p>As can be seen, ShEx can model any kind cyclic or recursive model in a natural way. 
The only restriction is when combining recursion with negation, as we will explain in Section <a href="#ch040ShExNegation">4.8.3</a> where the negation operator 
<code><span class="c006">NOT</span></code> is introduced. </p>
<!--TOC subsection id="sec97" External Shapes-->
<h3 class="subsection" id="sec97">4.7.3  External Shapes</h3><!--SEC END --><p>
<a id="ch4.sec6.3"></a>
<a id="ch040.ExternalShapes"></a>
<a id="hevea_default415"></a></p><p>External shapes are an extension mechanism to externally define shapes. 
This is useful when we want to describe functional shapes or very large value sets.
As a practical example, in medical schemas, value sets can be dynamically derived and include hundreds of thousands of terms.
In the FHIR use case (see Section <a href="#ch060FHIR">6.2</a>), these are resolved using an emerging REST API for ShEx.</p><div class="example"><div class="theorem"><span class="c013">Example 68</span>  <em>External shape example</em><p><em>The following code declares an external shape for products where the value of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">category</span></em></code><em> is defined as an external shape. 
In this case, an annotation declares the property </em><em>
</em><code><em>:</em></code><code><em><span class="c006">service</span></em></code><em> that points to the URL where the shape can be retrieved.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">category</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">EXTERNAL</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">// :service &lt;http://categories.org/&gt; </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>Although at the time of this writing, 
the ShEx specification does not define a mechanism like the </em><em>
</em><code><em>:</em></code><code><em><span class="c006">service</span></em></code><em> above, it is expected that future mechanisms 
like that will be developed.</em></p></div></div><p><a id="hevea_default416"></a>
</p>
<!--TOC subsection id="sec98" Labeled Triple Expression-->
<h3 class="subsection" id="sec98">4.7.4  Labeled Triple Expression</h3><!--SEC END --><p>
<a id="ch4.sec6.4"></a></p><p>Much as shape references (Section <a href="#ch040%3AShapeReference">4.7.1</a>) are allowed wherever a shape expression may appear, any triple expression can be labeled so it can later be referenced.</p><p>The target triple expression must be labeled with <code>$label</code> and references are made with <code>&amp;label</code>.</p><p>For instance, if we want to share a name expression between 
<code>:</code><code><span class="c006">User</span></code> and 
<code>:</code><code><span class="c006">Employee</span></code> shapes, we could include the expression in one and reference it from the other.</p><div class="example"><div class="theorem"><span class="c013">Example 69</span>  <em>Labeled triple expression</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">$</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ( </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">        | </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> . ;</span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">        ) ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Employee</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  &amp;:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">employeeId</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;                  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;mailto:alice@example.org&gt;</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> ;           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Employee</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Smith"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">employeeId</span></span></em><em><span class="c011"> 1234567 .</span></em></td></tr>
</table></div></div><p>The “
<code>\&amp;:</code><code><span class="c006">name</span></code>" directive can be considered to insert the value of 
<code>:</code><code><span class="c006">name</span></code> into its place.
Logically, 
<code>:</code><code><span class="c006">Employee</span></code> is equivalent to this:</p><div class="example"><div class="theorem"><span class="c013">Example 70</span>  <em>Equivalent triple expression</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Employee</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  ( </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">  | </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> . ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> .) ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">employeeId</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table></div></div>
<!--TOC subsection id="sec99" Annotations-->
<h3 class="subsection" id="sec99">4.7.5  Annotations</h3><!--SEC END --><p> 
<a id="ch040Annotations"></a>
<a id="ch4.sec6.5"></a>
<a id="hevea_default417"></a></p><p>ShEx allows to provide annotations, which are lists of pairs 
<code>(</code><code><span class="c006">predicate</span></code><code>,</code><code><span class="c006">object</span></code><code>)</code> where predicate is an IRI and object is any RDF node.
Annotations provide additional information about the elements to that they are applied, which can be 
triple constraints, EachOf, OneOf, or shapes. </p><p>The compact syntax for annotations uses two slashes 
<code>//</code> followed by a predicate and an object.
</p><div class="example"><div class="theorem"><span class="c013">Example 71</span>  <em>Shape with annotations</em><p><em>The following code declares a shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> which must have a </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> with a </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em> value, and a </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">birthDate</span></em></code><em> with a </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">date</span></em></code><em>. Each triple constraint has its corresponding </em><em>
</em><code><em><span class="c004">rdfs</span></em></code><code><em>:</em></code><code><em><span class="c006">label</span></em></code><em> and </em><em>
</em><code><em><span class="c004">rdfs</span></em></code><code><em>:</em></code><code><em><span class="c006">comment</span></em></code><em> annotations.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">// rdfs:label    "Name" </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">// rdfs:comment  "Name of person" ;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">// rdfs:label    "birthDate" </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">// rdfs:comment  "Birth of date" ;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>In this case, each triple constraint has its specific annotations which are internally represented as triples.</em></p></div></div><p>At the time of this writing ShEx does not have any built-in annotation vocabulary. 
It is expected that some specific annotations could be used for future uses like user interface generation or any other use case. </p>
<!--TOC section id="sec100" Logical Operators-->
<h2 class="section" id="sec100">4.8  Logical Operators</h2><!--SEC END --><p> 
<a id="ch040LogicalOperators"></a>
<a id="ch4.sec7"></a></p><p><a id="hevea_default418"></a>
<a id="hevea_default419"></a>
<a id="hevea_default420"></a>
The logical operators 
<code><span class="c006">AND</span></code>, 
<code><span class="c006">OR</span></code>, and 
<code><span class="c006">NOT</span></code> can be used to form complex shape expressions. 
Their meaning follows the conventional logical meaning of conjunction, disjunction, and negation.
The precedence of the operators is the usual one.</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 4.6: Logical operators on shape expressions</td></tr>
</table></div>
<a id="ch040.LogicalOperatorsShEx"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c015"> <span class="c013">Operation</span></td><td class="c016"><span class="c013">Description
</span></td></tr>
<tr><td class="c015"> 
<code><span class="c006">AND</span></code></td><td class="c016">
<code><span class="c006">S1</span></code><code> </code><code><span class="c006">AND</span></code><code> </code><code><span class="c006">S2</span></code> is satisfied if and only if both are satisfied
</td></tr>
<tr><td class="c015"> 
<code><span class="c006">OR</span></code></td><td class="c016">
<code><span class="c006">S1</span></code><code> </code><code><span class="c006">OR</span></code><code> </code><code><span class="c006">S2</span></code> is satisfied if and only if 
<code><span class="c006">S1</span></code> or 
<code><span class="c006">S2</span></code> (or both) are satisfied
</td></tr>
<tr><td class="c015"> 
<code><span class="c006">NOT</span></code></td><td class="c016">
<code><span class="c006">NOT</span></code><code> </code><code><span class="c006">S</span></code> is satisfied if and only if 
<code><span class="c006">S</span></code> is not satisfied
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote>
<!--TOC subsection id="sec101" Conjunction-->
<h3 class="subsection" id="sec101">4.8.1  Conjunction</h3><!--SEC END --><p>
<a id="ch4.sec7.1"></a>
<a id="hevea_default421"></a></p><p>The 
<code><span class="c006">AND</span></code> operator forms a new shape expression from two shape expressions 
with the meaning that a node conforms to 
<code><span class="c006">S1</span></code><code> </code><code><span class="c006">AND</span></code><code> </code><code><span class="c006">S2</span></code> if it conforms to both 
<code><span class="c006">S1</span></code> and 
<code><span class="c006">S2</span></code>.</p><div class="example"><div class="theorem"><span class="c013">Example 72</span>  <em>Conjunction example</em><p><em>The following example expresses that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> nodes must satisfy two shape expressions at the same time.
Notice that the appearance of the repeated property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">owns</span></em></code><em> means that both expressions must be satisfied, i.e., that the value of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">owns</span></em></code><em> must be an </em><em>
</em><code><em><span class="c006">IRI</span></em></code><em> and must have shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Product</span></em></code><em>, which must have a property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">productId</span></em></code><em> whose value is a </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em> between 5 and 10 characters.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ; </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">owns</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> }</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">owns</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> }</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">MINLENGTH</span></span></em><em><span class="c011"> 5 </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">MAXLENGTH</span></span></em><em><span class="c011"> 10</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;            </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">owns</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">product1</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> ;             </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">owns</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">product2</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">product3</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;            </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">owns</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">product1</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Product1"</span></em></span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">product2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Product2"</span></em></span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">product3</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Product3"</span></em></span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">product4</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"P4"</span></em></span></span></em><em><span class="c011"> .       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Product </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"ProductX"</span></em></span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product </span></em></span></span></em></td></tr>
</table></div></div><p>If the left-hand side of the conjunction is a node constraint, the 
<code><span class="c006">AND</span></code> keyword can be omitted. </p><div class="example"><div class="theorem"><span class="c013">Example 73</span>  <em>Omitting ANDs</em><p><em>In the following schema, 
</em><em>
</em><code><em>:</em></code><code><em><span class="c006">User1</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User2</span></em></code><em>, and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Product1</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Product2</span></em></code><em> are equivalent:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User1</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> }</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> }</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product1</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">MINLENGTH</span></span></em><em><span class="c011"> 5 </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">MAXLENGTH</span></span></em><em><span class="c011"> 10 }</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product2</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">MINLENGTH</span></span></em><em><span class="c011"> 5 </span></em><em><span class="c011"><span class="c003">MAXLENGTH</span></span></em><em><span class="c011"> 10 }</span></em></td></tr>
</table></div></div><p><a id="hevea_default422"></a>
</p>
<!--TOC paragraph id="sec102" Reusing shape expressions-->
<h5 class="paragraph" id="sec102">Reusing shape expressions</h5><!--SEC END --><p> 
<a id="ch040ReusingShapesShEx"></a></p><p>A common situation is to declare a set of constraints that we want to repeat. </p><div class="example"><div class="theorem"><span class="c013">Example 74</span>  <em>Reusing constraints</em><p><em>In the following example, 
we reuse </em><em>
</em><code><em>:</em></code><code><em><span class="c006">CompanyConstraints</span></em></code><em> in two places (for </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">worksFor</span></em></code><em> and for </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">affiliation</span></em></code><em>).</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CompanyConstraints</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> /^</span></em><em><span class="c011"><span class="c006">http</span></span></em><em><span class="c011">:\/\/</span></em><em><span class="c011"><span class="c006">example</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c004">org</span></span></em><em><span class="c011">\/</span></em><em><span class="c011"><span class="c006">id</span></span></em><em><span class="c011">[0-9]+/ </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CompanyShape</span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CompanyConstraints</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">affiliation</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CompanyConstraints</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CompanyShape</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">founder</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;     </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011">    :</span></em><em><span class="c011"><span class="c006">id1</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">affiliation</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">id2</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">id1</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">founder</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">id2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">founder</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div><p>Another example of shape reuse is to extend a shape with more constraints emulating a kind of inheritance as in Object-Oriented languages.</p><div class="example"><div class="theorem"><span class="c013">Example 75</span>  <em>Extending shapes</em><em> 
</em><a id="ch040ExtendingShapesShEx"></a><p><em>The following example declares a top-level shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em> whose nodes must have </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> with value </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em> and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em>. 
The shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> extends </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em> adding a new constraint on the existing property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> and declaring the need of another property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">email</span></em></code><em>. 
Finally, the shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Student</span></em></code><em> extends </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> adding a new property </em><em>
</em><code><em>:</em></code><code><em><span class="c006">course</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">                    [ </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">  ;</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c003">MaxLength</span></span></em><em><span class="c011"> 20 ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Student</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">course</span></span></em><em><span class="c011">              </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> *;</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> ;      </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Person</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011">;            </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :User   </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;bob@example.org&gt;</span></em></span></span></em><em><span class="c011"> .  </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># lacks rdf:type :Person *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011">;       </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Person and :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;carol@example.org&gt;</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011">;      </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Person, :User and Student</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;carol@example.org&gt;</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">course</span></span></em><em><span class="c011">      :</span></em><em><span class="c011"><span class="c006">algebra</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>Notice that this kind of reuse requires the shapes extended to be compatible with the new ones. 
Otherwise, there will be no nodes satisfying them. </em></p><p><em>For example, we may want to declare a </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Teacher</span></em></code><em> shape extending </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> but adding the constraint that teachers have no email.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011"> . {0,0} ;</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>However, there will be no nodes satisfying it, because shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> prescribes that they must have exactly one </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">email</span></em></code><em>, while the extended shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Teacher</span></em></code><em> prescribes that they must have no </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">email</span></em></code><em>. </em></p><p><em>In order to obtain the desired model, it is necessary that the shapes to be extended are general enough to be compatible with the new shapes.
In this case, for example, it would be better to declare that the cardinality of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">email</span></em></code><em> in </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> was optional. </em></p></div></div>
<!--TOC subsection id="sec103" Disjunction-->
<h3 class="subsection" id="sec103">4.8.2  Disjunction</h3><!--SEC END --><p>
<a id="ch4.sec7.2"></a></p><p><a id="hevea_default423"></a> <a id="hevea_default424"></a>
The 
<code><span class="c006">Or</span></code> operator combines two shape expressions with an inclusive disjunction, 
i.e., either one side or the other, or both must be satisfied.</p><div class="example"><div class="theorem"><span class="c013">Example 76</span>  <em>Disjunction</em><p><em>The following example declares that nodes of shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> must have either a </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> with </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em> value or 
a combination of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">givenName</span></em></code><em> and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">familyName</span></em></code><em> with </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em> values, or both.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> }</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">OR</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">      }</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> .        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011">;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Smith"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol King"</span></em></span></span></em><em><span class="c011"> ;  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"King"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div><div class="example"><div class="theorem"><span class="c013">Example 77</span>  <em>Difference between </em><em>
</em><code><em><span class="c006">Or</span></em></code><em> and </em><em>
</em><code><em>|</em></code><p><em>There is a difference between the </em><em>
</em><code><em><span class="c006">Or</span></em></code><em> and the choice (</em><em>
</em><code><em>|</em></code><em>) operator. 
The former defines an inclusive-or, while the latter specifies an exclusive-or in this case (only one of the shape expressions must be satisfied, but not both).</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User1</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> }</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c003">OR</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">       }</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User2</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">       | </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">       }</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> .        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User1 and :User2</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011">;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User1 and :User2</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Smith"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol King"</span></em></span></span></em><em><span class="c011"> ;  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User1</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011">;        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User2</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"King"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Dave"</span></em></span></span></em><em><span class="c011"> ;        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User1</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Dave"</span></em></span></span></em><em><span class="c011"> .        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User2</span></em></span></span></em></td></tr>
</table></div></div><div class="example"><div class="theorem"><span class="c013">Example 78</span>  <em>Disjunction of datatypes</em><p><em>A common use case is to declare that the value of some property is the disjunction of several datatypes or value sets. 
The following example declares that products must have a </em><em>
</em><code><em><span class="c004">rdfs</span></em></code><code><em>:</em></code><code><em><span class="c006">label</span></em></code><em> with a string value or a language tagged literal (remember that those literal have type </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">langString</span></em></code><em>), and a </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">releaseDate</span></em></code><em> whose values must be either </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">date</span></em></code><em>, </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">gYear</span></em></code><em> or one of the values </em><em>
</em><code><em><code><em>"unknown-past"</em></code></em></code><em> or </em><em>
</em><code><em><code><em>"unknown-future"</em></code></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">OR</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">langString</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">releaseDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">OR</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gYear</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">OR</span></span></em><em><span class="c011">
</span></em><em><span class="c011">                    [ </span></em><em><span class="c011"><em><span class="c011">"unknown-past"</span></em></span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"unknown-future"</span></em></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p1</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;                           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Laptop"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">releaseDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"1990"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gYear</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;                           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Car"</span></em></span></span></em><em><span class="c011"><span class="c006">@en</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">releaseDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"unknown-future"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p3</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;                           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">House</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">releaseDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"2020"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">integer</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div>
<!--TOC paragraph id="sec104" Emulating recursive property paths-->
<h5 class="paragraph" id="sec104">Emulating recursive property paths</h5><!--SEC END --><p>SPARQL property paths are a very expressive feature that can define complex expressions. 
ShEx does not support property paths in order to have a more controlled way to define shapes. 
However, using nested shapes (see Example <a href="#ch040%3ANestedShapesPropertyPaths">58</a>), 
recursion and logical operators, it is possible to emulate their behavior.</p><div class="example"><div class="theorem"><span class="c013">Example 79</span>  <em>SHACL instance of Person</em><p><em>In SHACL, instances are declared by the expression </em><em>
</em><code><em><span class="c004">rdfs</span></em></code><code><em>:</em></code><code><em><span class="c006">subClassOf</span></em></code><code><em>*/</em></code><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em>, which defines the closure of the </em><em>
</em><code><em><span class="c004">rdfs</span></em></code><code><em>:</em></code><code><em><span class="c006">subClassof</span></em></code><em> property followed by </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> 
(see Section </em><a href="#ch050SHACLInstance"><em>5.7.2</em></a><em>). 
The following example declares that nodes conforming to shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em> must be SHACL instances of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">PersonShape</span></span></em><em><span class="c011"> }</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">PersonShape</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> ] </span></em><em><span class="c011"><span class="c003">OR</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">subClassOf</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">PersonShape</span></span></em><em><span class="c011"> }</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> .               </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Person</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> .                    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Person</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Assistant</span></span></em><em><span class="c011"> .                  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Person</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">subClassOf</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Assistant</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">subClassOf</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div>
<!--TOC subsection id="sec105" Negation-->
<h3 class="subsection" id="sec105">4.8.3  Negation</h3><!--SEC END --><p> 
<a id="ch040ShExNegation"></a>
<a id="ch4.sec7.3"></a>
<a id="hevea_default425"></a></p><p>
<code><span class="c006">NOT</span></code><code> </code><code><span class="c006">s</span></code> creates a new shape expression from a shape 
<code><span class="c006">s</span></code>. 
Nodes conform to 
<code><span class="c006">NOT</span></code><code> </code><code><span class="c006">s</span></code> when they do not conform to 
<code><span class="c006">s</span></code>. </p><div class="example"><div class="theorem"><span class="c013">Example 80</span>  <em>Not</em><em> </em><a id="ch040ShExNot"></a><em>
</em><em>

</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NoName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">Not</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :NoName</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Cooper"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :NoName</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :NoName</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div><p>A common use case for 
<code><span class="c006">Not</span></code> is to check other shapes. 
Defining a shape 
<code>:</code><code><span class="c006">NotS</span></code> as 
<code><span class="c006">Not</span></code><code> :</code><code><span class="c006">S</span></code>, 
all nodes in an RDF graph can be valid, some of them will conform to 
<code>:</code><code><span class="c006">S</span></code> while the others will conform to 
<code>:</code><code><span class="c006">NotS</span></code>.
In this way, a continuous integration system can define the shape map that all nodes must satisfy (either positive or negatively)
and check whether they satisfy it or not.</p><div class="example"><div class="theorem"><span class="c013">Example 81</span>  <em>Not</em><em> 
</em><a id="ch040ShExNotCheck"></a><p><em>The following code declares a shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> and its complementary </em><em>
</em><code><em>:</em></code><code><em><span class="c006">NotUser</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011">? ;</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NoUser</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">Not</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em></td></tr>
</table><p><em>Both nodes </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> conform to one of the shapes, </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">NoUser</span></em></code><em>. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"1980-03-10"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">       23 ;       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :NoUser</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Unknown"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div>
<!--TOC paragraph id="sec106" Difference between Not and Max-cardinality 0-->
<h5 class="paragraph" id="sec106">Difference between Not and Max-cardinality 0</h5><!--SEC END --><p>
<a id="hevea_default426"></a>
The operator 
<code><span class="c006">Not</span></code> checks that a node fails to conform to a whole shape expression. 
Sometimes, the intended meaning is not to negate a whole shape expression but to declare that some properties cannot appear.
This behavior is better described by declaring the maximum cardinality to 0.</p><div class="example"><div class="theorem"><span class="c013">Example 82</span>  <em>Difference between Not and Max-0</em><em> 
</em><a id="ch040ShExNotMaxCard0"></a><p><em>Shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">NoName1</span></em></code><em> prohibits the appearance of property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> establishing its maximum cardinality to 0.
Shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">NoName2</span></em></code><em> looks like it does the same thing using the negation. 
However, notice that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">NoName2</span></em></code><em> will be satisfied by any node that does not conform to </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><code><em> </em></code><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NoName1</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> {0}</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NoName2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">Not</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>The behavior differs for node </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> which conforms to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">NoName2</span></em></code><em>. The reason is that it fails to have a string value for </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> so it fails to conform to the shape </em><em>
</em><code><em>{</em></code><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><code><em> </em></code><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><code><em>}</em></code><em> and thus, conforms to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">NoName2</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011">. </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :NoName1 and :NoName2</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> 23 .     </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :NoName1 Passes as a :NoName2</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">age</span></span></em><em><span class="c011"> 34 .        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :NoName1}*) \Passes{:NoName2</span></em></span></span></em></td></tr>
</table></div></div>
<!--TOC paragraph id="sec107" IF-THEN pattern-->
<h5 class="paragraph" id="sec107">IF-THEN pattern</h5><!--SEC END --><p>
<a id="hevea_default427"></a>
A common pattern is the IF-THEN construct:
if some condition holds, then a given shape expression must be satisfied. </p><p>This pattern can be modeled using the logical operators 
<code><span class="c006">OR</span></code> and 
<code><span class="c006">NOT</span></code>. 
Remember that 
<code><span class="c006">IF</span></code><code> </code><code><span class="c006">x</span></code><code> </code><code><span class="c006">THEN</span></code><code> </code><code><span class="c006">y</span></code> is equivalent to 
<code>(</code><code><span class="c006">NOT</span></code><code> </code><code><span class="c006">x</span></code><code>) </code><code><span class="c006">OR</span></code><code> </code><code><span class="c006">y</span></code>.</p><div class="example"><div class="theorem"><span class="c013">Example 83</span>  <em>IF-THEN pattern example</em><em> 
</em><a id="ch040ShExIFTHEN"></a><p><em>The following example specifies that all products must have a </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">productID</span></em></code><em> and 
if a product has type </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Vehicle</span></em></code><em>, 
then it must have the properties </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">vehicleEngine</span></em></code><em> and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">fuelType</span></em></code><em>. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> . } </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">NOT</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Vehicle</span></span></em><em><span class="c011"> ] }</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">OR</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">vehicleEngine</span></span></em><em><span class="c011"> . ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">fuelType</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011"> }</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">kitt</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"C21"</span></em></span></span></em><em><span class="c011">;     </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Vehicle</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">vehicleEngine</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">x42</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">fuelType</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">electric</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bad</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"C22"</span></em></span></span></em><em><span class="c011">;     </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Vehicle</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">fuelType</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">electric</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">c23</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"C23"</span></em></span></span></em><em><span class="c011"> ;    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Computer</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div>
<!--TOC paragraph id="sec108" IF-THEN-ELSE pattern-->
<h5 class="paragraph" id="sec108">IF-THEN-ELSE pattern</h5><!--SEC END --><p> 
<a id="ch040ShExIFTHENELSE"></a>
<a id="hevea_default428"></a>
The 
<code><span class="c006">IF</span></code><code>-</code><code><span class="c006">THEN</span></code><code>-</code><code><span class="c006">ELSE</span></code> pattern construct can be defined in a similar way. 
In this case: </p><p>IF X THEN Y ELSE Z≡((NOT X) OR Y) AND (X OR Z)</p><div class="example"><div class="theorem"><span class="c013">Example 84</span>  <em>IF-THEN-ELSE pattern example</em><em> </em><p><em>The following shape declares that if a product has type </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Vehicle</span></em></code><em>, 
then it must have the properties </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">vehicleEngine</span></em></code><em> and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">fuelType</span></em></code><em>, otherwise, 
it must have the property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">category</span></em></code><em> with a </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em> value.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">NOT</span></span></em><em><span class="c011">  { </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Vehicle</span></span></em><em><span class="c011"> ] } </span></em><em><span class="c011"><span class="c003">OR</span></span></em><em><span class="c011">
</span></em><em><span class="c011">       { </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">vehicleEngine</span></span></em><em><span class="c011"> . ;</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">fuelType</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">       }</span></em><em><span class="c011">
</span></em><em><span class="c011"> ) </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> ({ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Vehicle</span></span></em><em><span class="c011">] } </span></em><em><span class="c011"><span class="c003">OR</span></span></em><em><span class="c011">
</span></em><em><span class="c011">        { </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">category</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> } )</span></em></td></tr>
</table><p><em>With the following data, nodes </em><em>
</em><code><em>:</em></code><code><em><span class="c006">kitt</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">c23</span></em></code><em> conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Product</span></em></code><em> each one passing one of the branches, while </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bad1</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bad2</span></em></code><em> do not conform.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">kitt</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Vehicle</span></span></em><em><span class="c011">;           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">vehicleEngine</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">x42</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">fuelType</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">electric</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">c23</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Computer</span></span></em><em><span class="c011"> ;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">category</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Laptop"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bad1</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Vehicle</span></span></em><em><span class="c011">;          </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">fuelType</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">electric</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bad2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Computer</span></span></em><em><span class="c011"> .         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Product</span></em></span></span></em></td></tr>
</table></div></div>
<!--TOC paragraph id="sec109" Restriction on cyclic dependencies with negation-->
<h5 class="paragraph" id="sec109">Restriction on cyclic dependencies with negation</h5><!--SEC END --><p> 
<a id="ch040ShExCyclicDependencies"></a></p><p>One problem of combining recursion with negation freely is the possibility of defining paradoxical shapes.</p><div class="example"><div class="theorem"><span class="c013">Example 85</span>  <em>Barber’s paradox</em><p><em>The following shape declares a </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Barber</span></em></code><em> as someone who shaves a person but does not shave a barber. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Barber</span></span></em><em><span class="c011"> {               </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Violates the negation requirement</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">shaves</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011">
</span></em><em><span class="c011">} </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">NOT</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">shaves</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Barber</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">albert</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">shaves</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011"> .        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Barber</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> ;    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Person</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">shaves</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .            </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes :Barber or not? *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Dave"</span></em></span></span></em><em><span class="c011"> .     </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Person</span></em></span></span></em></td></tr>
</table><p><em>It is easy to check that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> conforms to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em> (he has </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> with a </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em> value), so he shaves a person, but:</em></p><p><em>Does </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Barber</span></em></code><em>?</em></p><p><em>If we assume he does, then it should not shave another barber, but as he shaves himself, and we assumed he conformed to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Barber</span></em></code><em> then he fails the constraint of not shaving barbers which means that he should not conform. 
On the other hand, if we assumed he does not conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Barber</span></em></code><em> then he satisfies both constraints, and he should conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Barber</span></em></code><em>.</em></p></div></div><p>This kind of problems that arise when combining negation and recursion have been studied by the logic programming and databases community.
Several approaches have been studied such as negation-as-failure, stratified negation and well-founded semantics [<a href="#Abiteboul1995">1</a>]. </p><p>ShEx imposes a constraint to avoid ill formed data models: whenever a shape refers to itself either directly or indirectly, the chain of references cannot traverse an occurrence of the negation operation 
<code><span class="c006">NOT</span></code>. </p><p>The previous shape 
<code>:</code><code><span class="c006">Barber</span></code> violates the negation requirement as is has one self reference pointing to itself that includes a negation. 
More formally, we say that there is a dependency from 
<code>:</code><code><span class="c006">ShapeA</span></code> to 
<code>:</code><code><span class="c006">ShapeB</span></code> if the definition of 
<code>:</code><code><span class="c006">ShapeA</span></code> contains a reference 
<code><span class="c006">@</span></code><code>:</code><code><span class="c006">ShapeB</span></code>.</p><p><a id="hevea_default429"></a>
We say that a dependency from 
<code>:</code><code><span class="c006">ShapeA</span></code> to 
<code>:</code><code><span class="c006">ShapeB</span></code> is a negative dependency if at least one of the following holds:</p><ul class="itemize"><li class="li-itemize">
the occurrence of 
<code><span class="c006">@</span></code><code>:</code><code><span class="c006">ShapeB</span></code> in the definition of 
<code>:</code><code><span class="c006">ShapeA</span></code> appears under an occurrence of the negation operator 
<code><span class="c006">NOT</span></code>; and </li><li class="li-itemize">there is a triple constraint 
<code>:</code><code><span class="c006">prop</span></code><code> </code><code><span class="c006">@</span></code><code>:</code><code><span class="c006">ShapeB</span></code> in the definition of 
<code>:</code><code><span class="c006">ShapeA</span></code> and the property 
<code>:</code><code><span class="c006">prop</span></code> is declared as 

<code><span class="c006">EXTRA</span></code> in the corresponding triple expression.</li></ul><p>In the latter case, the negation operator 
<code><span class="c006">NOT</span></code> does not appear explicitly, 
but we still need to verify that a 
<code>:</code><code><span class="c006">ShapeB</span></code> is not satisfied in some neighbor nodes.
<a id="hevea_default430"></a>
This was called hidden negation in Section <a href="#ch040ShExExtra">4.6.8</a>.</p><p><a id="hevea_default431"></a>
</p>
<!--TOC section id="sec110" Shape Maps-->
<h2 class="section" id="sec110">4.9  Shape Maps</h2><!--SEC END --><p> 
<a id="ch040ShapeMaps"></a>
<a id="ch4.sec8"></a></p><p>The ShEx 2 specification is focused on the semantics of the validation language and separates the invocation mechanisms to a different specification called Shape Maps [<a href="#ShapeMap">77</a>].
They were already introduced in Section <a href="#ch040ValidationProcess">4.4.2</a> and are node/shape associations that are used as input to the validation process and are also the result of it. </p><p>In ShEx, the construction of shape maps is orthogonal to their use in validation.
Decoupling these processes enables ShEx to address a wide range of use cases.
<a id="hevea_default432"></a> <a id="hevea_default433"></a>
Just as XML Schema could not have predicted its use in WSDL (a protocol that was developed years later), it is impossible to predict the many and varied ways 
in which shape maps may be constructed in the future.</p><p>The current ShapeMap specification defines three kinds of shape map. </p><ul class="itemize"><li class="li-itemize"><em>Fixed shape map</em>: input to the validation process.
</li><li class="li-itemize"><em>Query shape map</em>: query mechanism to construct a fixed shape map.
</li><li class="li-itemize"><em>Result shape map</em>: result of validation.
</li></ul><p>Each of these consists of a comma-separated list of node/shape associations with at least two components. </p><ul class="itemize"><li class="li-itemize">

<code><span class="c006">nodeSelector</span></code> - identify a set of RDF nodes.
</li><li class="li-itemize">
<code><span class="c006">shapeLabel</span></code> - select a shape expression from the schema.
</li></ul><p>The simplest kind of shape map is a fixed shape map.</p><p><a id="hevea_default434"></a>
</p>
<!--TOC subsection id="sec111" Fixed Shape Maps-->
<h3 class="subsection" id="sec111">4.9.1  Fixed Shape Maps</h3><!--SEC END --><p> 
<a id="ch040fixedShapeMaps"></a>
<a id="ch4.sec8.1"></a></p><p>ShEx validation takes as input a set of nodeSelector/shapeLabel pairs called a <em>fixed shape map</em>.</p><p><a id="hevea_default435"></a> <a id="hevea_default436"></a> 
The 
<code><span class="c006">shapeLabel</span></code> is either the label for a shape expression in the schema or the case-insensitive keyword 
<code><span class="c006">START</span></code> to identify the start shape 
(see Section <a href="#ch040startExpr">4.4.4</a>).</p><p>For the fixed shape map, the 
<code><span class="c006">nodeSelector</span></code> is one of:</p><ul class="itemize"><li class="li-itemize">an RDF IRI,
</li><li class="li-itemize">an RDF literal, or 
</li><li class="li-itemize">for systems which support it, the label of a bnode in an RDF dataset.
</li></ul><p>Note that because the shapeLabel can identify a shape expression with only node constraints, one can use ShEx to valdiate RDF terms that do not appear in the graph.
This can be useful for testing membership in a value set or verifying the form of a URL.</p><p>Fixed shape maps have a compact syntax which consists of separating each shape association by comma and node selectors from shape labels by 
<code><span class="c006">@</span></code>:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">alice@</span></span><span class="c011">:</span><span class="c011"><span class="c006">User</span></span><span class="c011">,</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">alice@</span></span><span class="c011">:</span><span class="c011"><span class="c006">Employee</span></span><span class="c011">,</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">bob@</span></span><span class="c011">:</span><span class="c011"><span class="c006">User</span></span></td></tr>
</table><p><a id="hevea_default437"></a>
</p>
<!--TOC subsection id="sec112" Query Shape Maps-->
<h3 class="subsection" id="sec112">4.9.2  Query Shape Maps</h3><!--SEC END --><p> 
<a id="ch040queryShapeMaps"></a>
<a id="ch4.sec8.2"></a></p><p>The query shape map extends the fixed shape map to enable simple pattern matching to select focus nodes from the data graph.
This is done by permitting the node selectors to be either an RDF node as in a fixed map or a triple pattern.
<a id="hevea_default438"></a> <a id="hevea_default439"></a> <a id="hevea_default440"></a>
A triple pattern can have a focus keyword to represent the nodes that will be validated and a node or wildcard (represented by the underscore character 
<code><span class="c006">_</span></code>). </p><div class="example"><div class="theorem"><span class="c013">Example 86</span>  <em>Query shape map example</em><p><em>The shape map:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">{ </span></em><em><span class="c011"><span class="c006">FOCUS</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">            }</span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">{ </span></em><em><span class="c011"><span class="c006">FOCUS</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">type</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011">}</span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">{ </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">FOCUS</span></span></em><em><span class="c011">        }</span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company</span></span></em></td></tr>
</table><p><em>associates all subjects of property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">worksFor</span></em></code><em> and all nodes of type </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em> with </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>, 
and all objects of property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">worksFor</span></em></code><em> with shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Company</span></em></code><em>.</em></p><p><em>Any node in the data graph which is both of type </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em> and the subject of a </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">worksFor</span></em></code><em> triple would be selected by both triple patterns and associated with </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> in the fixed map.
Such duplicates are eliminated in accordance with the rule that a shape map can have no duplicate pairs of node selector and shape label.</em></p><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 
</em><div class="center"><em>
<img src="ShEx_QueryShapeMap.png">
</em></div><em>

</em><a id="ch040.ShExValidatorQueryShapeMap"></a><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 4.10: Shape map resolution which accepts a query shape map and emits 
a fixed shape map.</em></td></tr>
</table></div><em>
</em><div class="center"><hr class="c021"></div></blockquote></div></div><p>While the node selector may be a triple pattern, it may also be an RDF node as we would see in a fixed shape map.
Common idioms of query map can do the following. </p><ul class="itemize"><li class="li-itemize">
Explicitly bind nodes to shapes. 
This effectively adds one nodeSelector/shapeLabel pair to the shape map.
<a id="hevea_default441"></a>
This mechanism is employed in SHACL with the declaration 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">targetNode</span></code> 
(see Section <a href="#ch050TargetNodes">5.7</a>). </li><li class="li-itemize">Declare that all nodes with some property must match a given shape.
<a id="hevea_default442"></a>
<a id="hevea_default443"></a>
This mechanism is also defined in SHACL with the declarations 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">targetSubjectsOf</span></code> and 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">targetObjectsOf</span></code>. </li><li class="li-itemize">Select nodes with a given property and value.
<a id="hevea_default444"></a>
This refinement of the previous approach is especially useful for general-purpose predicates like 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code>.
<a id="hevea_default445"></a>
In fact, the SHACL directive 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">targetClass</span></code> offers a similar selection mechanism for the 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> predicate (the difference is that SHACL uses the notion of <em>SHACL instance</em>), see <a href="#ch050SHACLInstance">5.7.2</a>).
As with the above selectors, this one is very use-case 
specific—one may not want to say that everything with an 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> property should be validated against a 
<code>:</code><code><span class="c006">Person</span></code>, 
but it may be reasonable to select everything with type 
<code>:</code><code><span class="c006">Employee</span></code>.</li></ul><p><a id="hevea_default446"></a> <a id="hevea_default447"></a>
While it is not currently part of the shape map specification, the Wikidata use of shape maps extends the nodeSelector to contain a SPARQL query, enabling another common use case. </p><ul class="itemize"><li class="li-itemize">
Select nodes or node/shape pairs by SPARQL query or inference. 
Where earlier mechanisms are all limited to either a direct identification of an RDF node or its selection by triple pattern, 
this one enables a more nuanced heuristics in the selection of focus nodes.</li></ul><p>Query shape maps are not the only way to select focus nodes.
<a id="hevea_default448"></a>
For instance, it would make sense to associate a shape with a service endpoint.
<a id="hevea_default449"></a>
<a id="hevea_default450"></a>
The Linked Data Platform [<a href="#linkedDataPlatform">93</a>] defines a notion of container which handles 
requests to get, create, modify and delete objects with a given structure.
While it does not specify a mechanism to publish that structure or validate incoming data against it, 
<a id="hevea_default451"></a>
earlier work at OSLC used Resource Shapes for that purpose.
It is reasonable to assume that protocols like the linked data platform will exploit shapes technology, 
<a id="hevea_default452"></a>
perhaps with the added precision of using HTTP Link headers to specify a node of interest, 
which would be associated with the related shape with that interface.</p>
<!--TOC subsection id="sec113" Result Shape Maps-->
<h3 class="subsection" id="sec113">4.9.3  Result Shape Maps</h3><!--SEC END --><p> 
<a id="ch040resultShapeMaps"></a>
<a id="ch4.sec8.3"></a></p><p>The product of validation is a result shape map which is annotated with errors encountered while testing the conformance of each node/shape pair.
The result shape map is again an extension of the fixed map.
Each nodeSelector/shapeLabel association in the result shape map may include any of these three additional components:</p><ul class="itemize"><li class="li-itemize">

<code><span class="c006">result</span></code>: either 
<code><span class="c006">conformant</span></code> or 
<code><span class="c006">nonconformant</span></code>;
</li><li class="li-itemize">
<code><span class="c006">reason</span></code>: a human-readable report, usualy to explain a non-conformant 
result; or 
</li><li class="li-itemize">
<code><span class="c006">appInfo</span></code>: a machine readable structure.
</li></ul><p>Engines vary in how they report errors, and they may add extra information to the resulting shape map.
Some implementations extend this to include machine-readable failure messages in case of errors or recursive <em>proof</em>
of conformance in case of success.</p><div class="example"><div class="theorem"><span class="c013">Example 87</span>  <em>Full validation process</em><p><em>Given the following ShEx schema:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">*</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>and the RDF data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>If we have the query shape map:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">{</span></em><em><span class="c011"><span class="c006">FOCUS</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011"> }</span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em></td></tr>
</table><p><em>A shape map resolver would generate the fixed shape map:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em></td></tr>
</table><p><em>After applying the validation process, the result shape map obtained would be:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em></td></tr>
</table><p><em>Figure </em><a href="#ch040.ShExValidatorProcessFull"><em>87</em></a><em> depicts a whole validation process with the different shape maps involved.</em></p><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 
</em><div class="center"><em>
<img src="ShEx_ValidationFull.png">
</em></div><em>

</em><a id="ch040.ShExValidatorProcessFull"></a><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 4.11: Full validation process with query, fixed, and result shape map.</em></td></tr>
</table></div><em>
</em><div class="center"><hr class="c021"></div></blockquote></div></div>
<!--TOC subsection id="sec114" JSON Representation-->
<h3 class="subsection" id="sec114">4.9.4  JSON Representation</h3><!--SEC END --><p> 
<a id="ch040jsonShapeMaps"></a>
<a id="ch4.sec8.4"></a></p><p>The fixed shape map from Figure <a href="#ch040.ShExValidatorProcessFull">87</a> can be represented as:<sup><a id="text9" href="#note9">2</a></sup> </p><div class="example"><div class="theorem"><span class="c013">Example 88</span>  <em>JSON representation of shape maps</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">[ { </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"node"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">":alice"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"shape"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">":User"</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  },</span></em><em><span class="c011">
</span></em><em><span class="c011">  { </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"node"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">":bob"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"shape"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">":User"</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  }</span></em><em><span class="c011">
</span></em><em><span class="c011">]</span></em></td></tr>
</table><p><em>The output shape map would be:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">[ { </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"node"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">":alice"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"shape"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">":User"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"status"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"conformant"</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  },</span></em><em><span class="c011">
</span></em><em><span class="c011">  { </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"node"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">":bob"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"shape"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">":User"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"status"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"conformant"</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  },</span></em><em><span class="c011">
</span></em><em><span class="c011">  { </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"node"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">":carol"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"shape"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">":User"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"status"</span></em></span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"conformant"</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  }</span></em><em><span class="c011">
</span></em><em><span class="c011">]</span></em></td></tr>
</table></div></div>
<!--TOC subsection id="sec115" Chaining Validation Workflows-->
<h3 class="subsection" id="sec115">4.9.5  Chaining Validation Workflows</h3><!--SEC END --><p> 
<a id="ch040LongRunning"></a>
<a id="ch4.sec8.5"></a></p><p>Because the input and output of the validation process is a shape map, 
long-running workflows can use the result shape map as a starting state for further validation.
This is useful when shapes have inter-dependencies, i.e., when validating one node/shape pair requires validating others.
Let’s look at a simplified subset of that schema and data. </p><div class="example"><div class="theorem"><span class="c013">Example 89</span>  <em>ShEx validator and shape maps</em><p><em>Given the following schema:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">*</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>and RDF graph</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>If we were to individually validate </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em>, we would validate </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> twice, once while validating </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em>’s </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> arc and once for the explicit call to validate </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em>.</em></p></div></div><p><a id="hevea_default453"></a>
</p>
<!--TOC section id="sec116" Semantic Actions-->
<h2 class="section" id="sec116">4.10  Semantic Actions</h2><!--SEC END --><p> 
<a id="ch040SemanticActions"></a>
<a id="ch4.sec9"></a></p><p>Semantic actions<sup><a id="text10" href="#note10">3</a></sup> 
serve as an extension point for Shape Expressions.
They can be used to signal a failure or perform some operations during the validation process.</p><p>A semantic action contains a label that indicates the language in which the action is written and a string with its contents.
When the ShEx validator finds a semantic action, it checks if it has a processor for that language and calls it with the action contents. 
The result of the processor is cast to a Boolean value, in case the result is 
<code><span class="c003">false</span></code>, the corresponding shape would fail.</p><div class="example"><div class="theorem"><span class="c013">Example 90</span>  <em>Semantic actions</em><p><em>The following example uses a hypothetical Javascript semantic actions processor to capture the start and end events in a conference and to check that the start date is before the end date. </em></p><pre class="verbatim"><em>prefix js: &lt;http://shex.io/extensions/javascript&gt;

:Event {
 schema:startDate xsd:dateTime  %js:{ let start = o %} ;
 schema:endDate   xsd:dateTime  %js:{ let end = o %} ;
}
</em></pre><p><em>The following example checks that the declared area of a rectangle is effectively its width times height. </em></p><pre class="verbatim"><em>prefix js: &lt;http://shex.io/extensions/javascript&gt;

:Rectangle {
 :height xsd:float  %js:{ let height = o %} ;
 :width  xsd:float  %js:{ let width = o %} ;
 :area xsd:float    %js:{ o = height * width  %} 
}
</em></pre></div></div><p>Semantic actions have been employed to transform RDF files to other formats like XML or JSON [<a href="#EricSemantics2014">80</a>], or even other ShEx schemas as performed by the Map extension.<sup><a id="text11" href="#note11">4</a></sup></p><p>The test suite defines a single extension language called Test<sup><a id="text12" href="#note12">5</a></sup> 
that can fail a validation and/or return a message.
</p>
<!--TOC section id="sec117" ShEx and Inference-->
<h2 class="section" id="sec117">4.11  ShEx and Inference</h2><!--SEC END --><p> 
<a id="ch040ShExInference"></a>
<a id="ch4.sec10"></a></p><p><a id="hevea_default454"></a></p><p>ShEx was designed as an RDF validation language which is independent of reasoners or inference systems. 
A ShEx processor takes as input an RDF graph and checks if its nodes conform to the shapes defined in a ShEx schema. 
The shapes describe the topology of the RDF graph taking into account the possible values of nodes as well as the incoming and outgoing arcs.
In ShEx, a triple whose predicate is 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> is treated as any other triple, and in fact there is no special treatment for nodes that are also RDF classes. 
ShEx separates RDF classes and types following the guidelines described 
in Section <a href="#ch030ShapesNotTypes">3.2</a>.</p><p>This independence between ShEx and reasoners makes it possible to apply a ShEx processor to a plain RDF graph before inference, 
to validate the resulting graph after applying a reasoner, or even to validate the intermediate graphs during the reasoning phase, 
checking reasoner’s behavior.</p><div class="example"><div class="theorem"><span class="c013">Example 91</span>  <em>Validating data before and after inference</em><em>
</em><a id="hevea_default455"></a><em>
</em><a id="hevea_default456"></a><p><em>The following shapes can be used to check an RDF graph before and after RDF Schema inference. 
Shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">TeacherBefore</span></em></code><em> describes that nodes must have </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Teacher</span></em></code><em>, 
a property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> with a </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em> value and zero or more properties </em><em>
</em><code><em>:</em></code><code><em><span class="c006">teaches</span></em></code><em> whose nodes must conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Course</span></em></code><em>.</em></p><p><em>Shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">TeacherAfter</span></em></code><em> describes the shape that teachers must have after inference. 
For example, they must have </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Teacher</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em>, 
and the values of property </em><em>
</em><code><em>:</em></code><code><em><span class="c006">teaches</span></em></code><em> must have </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Course</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">TeacherBefore</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">EXTRA</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">           [:</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011">]? ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Course</span></span></em><em><span class="c011">*</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">TeacherAfter</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">EXTRA</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">           [:</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011">];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">           [:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011">];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011">    { </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [:</span></em><em><span class="c011"><span class="c006">Course</span></span></em><em><span class="c011">] } </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Course</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Course</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [:</span></em><em><span class="c011"><span class="c006">Course</span></span></em><em><span class="c011">]?</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>If we validate the following RDF data before applying inference,
nodes </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> do not conform to shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">TeacherAfter</span></em></code><em> </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">           :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011">; </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :TeacherBefore</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Alice"</span></em></span></em><em><span class="c011"> ;          </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :TeacherAfter</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011">    :</span></em><em><span class="c011"><span class="c006">algebra</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Robert"</span></em></span></em><em><span class="c011"> ;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :TeacherBefore   </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011">    :</span></em><em><span class="c011"><span class="c006">logic</span></span></em><em><span class="c011"> .           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :TeacherAfter</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">           :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> ;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :TeacherBefore   </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><em><span class="c011">"Carol"</span></em></span></em><em><span class="c011"> .          </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :TeacherAfter </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">algebra</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">               :</span></em><em><span class="c011"><span class="c006">Course</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">domain</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">range</span></span></em><em><span class="c011">      :</span></em><em><span class="c011"><span class="c006">Course</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">subClassOf</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>On the other side, if we validate the previous RDF graph after applying RDF Schema inference, both </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> should conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">TeacherAfter</span></em></code><em>. </em></p><p><em>This combination of shapes before and after inference can be used to check the behavior of a reasoner. 
For example, if in the previous case, a faulty RDFS reasoner does not infer that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">logic</span></em></code><em> must have </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Course</span></em></code><em>, 
</em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> would not conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">TeacherAfter</span></em></code><em> and the bug could be detected.</em></p></div></div>
<!--TOC section id="sec118" Importing schemas-->
<h2 class="section" id="sec118">4.12  Importing schemas</h2><!--SEC END --><p> 
<a id="ch040ImportMechanism"></a></p><p><a id="hevea_default457"></a>
ShEx has an 
<code><span class="c006">import</span></code> keyword that specifies the IRI of another schema that can be imported.
The ShEx processor puts the labeled shapes and triple expressions of the imported schema in scope 
for resolution of references in the importing document.
If the imported schema imports other schemas, they are also imported.</p><div class="example"><div class="theorem"><span class="c013">Example 92</span>  <em>Import example</em><p><em>For example, if there is a schema located at </em><em>
</em><code><em><span class="c006">http</span></em></code><code><em>://</em></code><code><em><span class="c006">example</span></em></code><code><em>.</em></code><code><em><span class="c004">org</span></em></code><code><em>/</em></code><code><em><span class="c006">Person</span></em></code><code><em>.</em></code><code><em><span class="c006">shex</span></em></code><em> with the content.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c006">$</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ( </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">          | </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> . ; </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">          ) ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>And we define a new schema as.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c006">import</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.org/Person.shex&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Employee</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">    &amp;:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;CompanyShape&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">employee</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Employee</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">founder</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011">;      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Employee</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">employee</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">founder</span></span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;mailto:bob@example.com&gt;</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div><p>The ShEx processor imports each imported schemas exactly once so cyclic imports are allowed.
For instance, a schema may import itself or it may import some schema which directly or indirectly imports it.</p><p>However, it is an error to import a schema which attempts to re-define a shape expression or triple expression.
For instance, if 
<code><span class="c006">http</span></code><code>://</code><code><span class="c006">example</span></code><code>.</code><code><span class="c004">org</span></code><code>/</code><code><span class="c006">Person</span></code><code>.</code><code><span class="c006">shex</span></code> defined either 
<code>:</code><code><span class="c006">Employee</span></code> or 
<code>:</code><code><span class="c006">Company</span></code>, 
or if the importing schema defined 
<code>:</code><code><span class="c006">name</span></code>, the import would fail and processing would stop.</p>
<!--TOC section id="sec119" RDF and JSON-LD Syntax-->
<h2 class="section" id="sec119">4.13  RDF and JSON-LD Syntax</h2><!--SEC END --><p> 
<a id="ch040OtherShExSyntaxes"></a>
<a id="ch4.sec11"></a></p><p><a id="hevea_default458"></a> <a id="hevea_default459"></a>
The ShEx language is defined in terms of a JSON-LD syntax, called “ShExJ”, which separates the compact syntax details from the language specification.
This serves as an abstract syntax in that it has constructs to capture all of the logic of ShEx.
Having an abstract syntax provides a clear definition of the language, 
makes it easier to write language processors and encourages the definition of other concrete syntax formats.
<a id="hevea_default460"></a> <a id="hevea_default461"></a> <a id="hevea_default462"></a>
The fact that it is JSON-LD means that the RDF representation of ShEx, 
called “ShExR”, is simply the JSON-LD interpretation of ShExJ.</p><div class="example"><div class="theorem"><span class="c013">Example 93</span>  <em> 
</em><a id="ch040.ExampleShExR"></a><p><em>The following ShEx schema</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c003">PREFIX</span></span></em><em><span class="c011"> :       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.org/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c003">PREFIX</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://schema.org/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c003">PREFIX</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">  ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">*</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>can be represented in ShExR as</em><sup><a id="text13" href="#note13"><em>6</em></a></sup><em>: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c006">PREFIX</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://shex.io/ns/shex#&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">PREFIX</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> : </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.org/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://schema.org/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c004">Schema</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">shapes</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ShapeAnd</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">shapeExprs</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">   [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeConstraint</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">iri</span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">   [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Shape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">expression</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">EachOf</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">expressions</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">      [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">TripleConstraint</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">predicate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">valueExpr</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeConstraint</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">        ]</span></em><em><span class="c011">
</span></em><em><span class="c011">      ]</span></em><em><span class="c011">
</span></em><em><span class="c011">      [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">TripleConstraint</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">predicate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">valueExpr</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">min</span></span></em><em><span class="c011">       0 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">max</span></span></em><em><span class="c011">       -1</span></em><em><span class="c011">
</span></em><em><span class="c011">      ] )</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] ] ).</span></em></td></tr>
</table><p><em>It can can also be represented in JSON-LD as: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">{ "</span></em><em><span class="c011">@context</span></em><em><span class="c011">": "</span></em><em><span class="c011">https</span></em><em><span class="c011">://</span></em><em><span class="c011">shexspec</span></em><em><span class="c011">.</span></em><em><span class="c011">github</span></em><em><span class="c011">.</span></em><em><span class="c011">io</span></em><em><span class="c011">/</span></em><em><span class="c011">context</span></em><em><span class="c011">.</span></em><em><span class="c011">jsonld</span></em><em><span class="c011">",</span></em><em><span class="c011">
</span></em><em><span class="c011">  "</span></em><em><span class="c011">type</span></em><em><span class="c011">": "</span></em><em><span class="c011">Schema</span></em><em><span class="c011">",</span></em><em><span class="c011">
</span></em><em><span class="c011">  "</span></em><em><span class="c011">shapes</span></em><em><span class="c011">": [</span></em><em><span class="c011">
</span></em><em><span class="c011">    { "</span></em><em><span class="c011">type</span></em><em><span class="c011">": "</span></em><em><span class="c011">ShapeAnd</span></em><em><span class="c011">",</span></em><em><span class="c011">
</span></em><em><span class="c011">      "</span></em><em><span class="c011">shapeExprs</span></em><em><span class="c011">": [</span></em><em><span class="c011">
</span></em><em><span class="c011">        { "</span></em><em><span class="c011">type</span></em><em><span class="c011">": "</span></em><em><span class="c011">NodeConstraint</span></em><em><span class="c011">",</span></em><em><span class="c011">
</span></em><em><span class="c011">          "</span></em><em><span class="c011">nodeKind</span></em><em><span class="c011">": "</span></em><em><span class="c011">iri</span></em><em><span class="c011">"</span></em><em><span class="c011">
</span></em><em><span class="c011">        },</span></em><em><span class="c011">
</span></em><em><span class="c011">        { "</span></em><em><span class="c011">type</span></em><em><span class="c011">": "</span></em><em><span class="c011">Shape</span></em><em><span class="c011">",</span></em><em><span class="c011">
</span></em><em><span class="c011">          "</span></em><em><span class="c011">expression</span></em><em><span class="c011">": {</span></em><em><span class="c011">
</span></em><em><span class="c011">            "</span></em><em><span class="c011">type</span></em><em><span class="c011">": "</span></em><em><span class="c011">EachOf</span></em><em><span class="c011">",</span></em><em><span class="c011">
</span></em><em><span class="c011">            "</span></em><em><span class="c011">expressions</span></em><em><span class="c011">": [</span></em><em><span class="c011">
</span></em><em><span class="c011">              { "</span></em><em><span class="c011">type</span></em><em><span class="c011">":      "</span></em><em><span class="c011">TripleConstraint</span></em><em><span class="c011">",</span></em><em><span class="c011">
</span></em><em><span class="c011">                "</span></em><em><span class="c011">predicate</span></em><em><span class="c011">": "</span></em><em><span class="c011">http</span></em><em><span class="c011">://</span></em><em><span class="c011">schema</span></em><em><span class="c011">.</span></em><em><span class="c011">org</span></em><em><span class="c011">/</span></em><em><span class="c011">name</span></em><em><span class="c011">",</span></em><em><span class="c011">
</span></em><em><span class="c011">                "</span></em><em><span class="c011">valueExpr</span></em><em><span class="c011">": { "</span></em><em><span class="c011">type</span></em><em><span class="c011">": "</span></em><em><span class="c011">NodeConstraint</span></em><em><span class="c011">",</span></em><em><span class="c011">
</span></em><em><span class="c011">                  "</span></em><em><span class="c011">datatype</span></em><em><span class="c011">": "</span></em><em><span class="c011">xsd</span></em><em><span class="c011">:</span></em><em><span class="c011">string</span></em><em><span class="c011">"</span></em><em><span class="c011">
</span></em><em><span class="c011">                }</span></em><em><span class="c011">
</span></em><em><span class="c011">              },</span></em><em><span class="c011">
</span></em><em><span class="c011">              { "</span></em><em><span class="c011">type</span></em><em><span class="c011">":      "</span></em><em><span class="c011">TripleConstraint</span></em><em><span class="c011">",</span></em><em><span class="c011">
</span></em><em><span class="c011">                "</span></em><em><span class="c011">predicate</span></em><em><span class="c011">": "</span></em><em><span class="c011">http</span></em><em><span class="c011">://</span></em><em><span class="c011">schema</span></em><em><span class="c011">.</span></em><em><span class="c011">org</span></em><em><span class="c011">/</span></em><em><span class="c011">knows</span></em><em><span class="c011">",</span></em><em><span class="c011">
</span></em><em><span class="c011">                "</span></em><em><span class="c011">valueExpr</span></em><em><span class="c011">": "</span></em><em><span class="c011">http</span></em><em><span class="c011">://</span></em><em><span class="c011">example</span></em><em><span class="c011">.</span></em><em><span class="c011">org</span></em><em><span class="c011">/</span></em><em><span class="c011">User</span></em><em><span class="c011">",</span></em><em><span class="c011">
</span></em><em><span class="c011">                "</span></em><em><span class="c011">min</span></em><em><span class="c011">":       0,</span></em><em><span class="c011">
</span></em><em><span class="c011">                "</span></em><em><span class="c011">max</span></em><em><span class="c011">":       -1</span></em><em><span class="c011">
</span></em><em><span class="c011">              }</span></em><em><span class="c011">
</span></em><em><span class="c011">            ]</span></em><em><span class="c011">
</span></em><em><span class="c011">          }</span></em><em><span class="c011">
</span></em><em><span class="c011">        }</span></em><em><span class="c011">
</span></em><em><span class="c011">      ],</span></em><em><span class="c011">
</span></em><em><span class="c011">      "</span></em><em><span class="c011">id</span></em><em><span class="c011">": "</span></em><em><span class="c011">http</span></em><em><span class="c011">://</span></em><em><span class="c011">example</span></em><em><span class="c011">.</span></em><em><span class="c011">org</span></em><em><span class="c011">/</span></em><em><span class="c011">User</span></em><em><span class="c011">"</span></em><em><span class="c011">
</span></em><em><span class="c011">    }</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table></div></div>
<!--TOC section id="sec120" Summary-->
<h2 class="section" id="sec120">4.14  Summary</h2><!--SEC END --><p>
<a id="ch4.sec12"></a></p><p>In this chapter we learned about the ShEx language. </p><ul class="itemize"><li class="li-itemize">ShEx was designed as a human-readable language for RDF description and validation. </li><li class="li-itemize">ShEx can be considered as a grammar for RDF.</li><li class="li-itemize">There are two syntaxes for ShEx: A compact syntax and an RDF-based.</li><li class="li-itemize">ShEx defines the notion of shape expressions and node constraints.</li><li class="li-itemize">Shape Expressions can be combined using the logical operators: AND, OR, and NOT on top of triple expressions.</li><li class="li-itemize">Triple expressions declare the topology of the neighborhood of a node (incoming and outgoing edges).</li><li class="li-itemize">Node constraints declare constraints on the form of a single node.</li><li class="li-itemize">Semantic actions offer an extension mechanism over ShEx.</li></ul>
<!--TOC section id="sec121" Suggested Reading-->
<h2 class="section" id="sec121">4.15  Suggested Reading</h2><!--SEC END --><p>
<a id="ch4.sec13"></a></p><p>We collected the following selection of references about Shape Expressions. </p><ul class="itemize"><li class="li-itemize">Short introduction to ShEx: <a href="#ShExPrimer">Baker and Prud’hommeaux</a>,<a href="#ShExPrimer">2017</a> [<a href="#ShExPrimer">7</a>] 
</li><li class="li-itemize">ShEx 2.0 language specification: <a href="#ShExSpec">Prud’hommeaux, Boneva, Labra Gayo, and
Kellog</a>,<a href="#ShExSpec">2017</a> [<a href="#ShExSpec">81</a>]
</li><li class="li-itemize">Description of the first version of ShEx: <a href="#EricSemantics2014">Prud’hommeaux, Labra Gayo, and
Solbrig</a>,<a href="#EricSemantics2014">2014</a> [<a href="#EricSemantics2014">80</a>] 
</li><li class="li-itemize">An algorithm to implement Shape Expressions based on derivatives: <a href="#LabraShexDerivatives15">Gayo, Prud’hommeaux, Boneva, Staworko, Solbrig, and
Hym</a>,<a href="#LabraShexDerivatives15">2016</a> [<a href="#LabraShexDerivatives15">40</a>] 
</li><li class="li-itemize">Theoretical foundations of ShEx: <a href="#Slawek2015">Staworko, Boneva, Labra Gayo, Hym, Prud’hommeaux,
and Solbrig</a>,<a href="#Slawek2015">2015</a> [<a href="#Slawek2015">94</a>]
<a href="http://labra.github.io/pdf/2015_ComplexityExpressivenessShEx.pdf"><span class="c010">http://labra.github.io/pdf/2015_ComplexityExpressivenessShEx.pdf</span></a>
</li><li class="li-itemize">Well-founded semantics of shape schemas (which are the basis of ShEx): <a href="#Boneva17">Boneva, Labra Gayo, and Prud’hommeaux</a>,<a href="#Boneva17">2017</a> [<a href="#Boneva17">11</a>]
<a href="https://labra.github.io/pdf/2017_SemanticsValidationShapesSchemas.pdf"><span class="c010">https://labra.github.io/pdf/2017_SemanticsValidationShapesSchemas.pdf</span></a></li></ul>
<!--BEGIN NOTES chapter-->
<hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note8" href="#text8">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">We will see that the pipe operator can also be used to form triple expressions in Section <a href="#ch040oneOf">4.6.4</a>.</div></dd><dt class="dt-thefootnotes"><a id="note9" href="#text9">2</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">At the time of this writing shape maps specification requires full IRIs but we use prefixed IRIs for simplicity.</div></dd><dt class="dt-thefootnotes"><a id="note10" href="#text10">3</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">The name semantic actions is inspired by parser generators.
It is not related to the semantic web.</div></dd><dt class="dt-thefootnotes"><a id="note11" href="#text11">4</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: http://shex.io/extensions/Map/</div></dd><dt class="dt-thefootnotes"><a id="note12" href="#text12">5</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: http://shexspec.github.io/extensions/Test/</div></dd><dt class="dt-thefootnotes"><a id="note13" href="#text13">6</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">Note that a value of 
<code>-1</code> in 
<code><span class="c006">max</span></code> means unbounded.</div></dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec122" SHACL-->
<h1 class="chapter" id="sec122">Chapter 5  SHACL</h1><!--SEC END --><p> 
<a id="hevea_default463"></a>
<a id="ch5"></a>
<a id="ch050SHACL"></a>

</p><p><a id="hevea_default464"></a>
Shapes Constraint Language (SHACL) has been developed by the W3C RDF Data Shapes Working Group, 
which was chartered in 2014 with the goal to 
“produce a language for defining structural constraints on RDF graphs [<a href="#SHACLCharter">6</a>].” </p><p><a id="hevea_default465"></a>
The first public working draft was published in October 2015 and it was proposed as a W3C Recommendation in June 2017.<sup><a id="text14" href="#note14">1</a></sup></p><p><a id="hevea_default466"></a> <a id="hevea_default467"></a> <a id="hevea_default468"></a> 
SHACL was influenced by SPIN, and some parts from OSLC resource shapes and ShEx. 
At the beginning of the Working Group activity it was considered that SHACL was going to be 
an integration of all the validation approaches into a unified language.
However, due to core differences, SHACL and ShEx did not converge. 
Chapter <a href="#ch070Comparing">7</a> contains a comparison of both languages and 
describes the main differences. </p><p><a id="hevea_default469"></a> <a id="hevea_default470"></a> 
SHACL is divided in two parts. 
The first part, called SHACL Core, describes a core RDF vocabulary to define common shapes and constraints while 
the second part describes an extension mechanism in terms of SPARQL and has been called: SHACL-SPARQL. </p><p>Two working group notes have been published to extend SHACL with 
(a) advanced features such as rules and complex expressions<sup><a id="text15" href="#note15">2</a></sup> and 
(b) to enable the definition of constraint components in Javascript (called SHACL-Javascript).<sup><a id="text16" href="#note16">3</a></sup></p><p><a id="hevea_default471"></a>
A W3C SHACL community group<sup><a id="text17" href="#note17">4</a></sup> has been created to continue working on SHACL preparing educational contents and 
supporting SHACL adoption. 
A working group note was also suggested for a SHACL Compact 
Syntax<sup><a id="text18" href="#note18">5</a></sup>
but it was decided to postpone it for the W3C community group.</p>
<!--TOC section id="sec123" Simple Example-->
<h2 class="section" id="sec123">5.1  Simple Example</h2><!--SEC END --><p>
<a id="ch5.sec1"></a></p><p><a id="hevea_default472"></a> 
SHACL groups the information and constraints that apply to data nodes into some constructs called shapes. 
<a id="hevea_default473"></a>
SHACL shapes differ from ShEx shapes in the sense that they also contain information about the target nodes or set of nodes to which they can be applied.</p><p><a id="hevea_default474"></a>
<a id="hevea_default475"></a>
<a id="hevea_default476"></a>
The syntax of SHACL is defined in terms of RDF so we will use Turtle in this book although it is possible to employ other RDF serialization formats such as JSON-LD or 
RDF/XML. </p><div class="example"><div class="theorem"><span class="c013">Example 94</span>  <em>UserShape example in SHACL</em><em> </em><a id="ch050SHACLExample"></a><p><em>The following example is similar to the ShEx definition in 
Example </em><a href="#ch040%3AShExSimpleExample"><em>26</em></a><em>.</em><sup><a id="text19" href="#note19"><em>6</em></a></sup><em> 
</em><a id="hevea_default477"></a><em>
It defines a shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> of type </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">NodeShape</span></em></code><em>.
</em><a id="hevea_default478"></a><em>
It has target class declaration pointing to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> which means that it applies to all nodes that are instances of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> (see Section </em><a href="#ch050targetClass"><em>5.7.2</em></a><em>).
The next lines declare that nodes conforming to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> must satisfy the following constraints.</em></p><ul class="itemize"></em><li class="li-itemize"><em> <em><em>They must have exactly one property </em></em><em><em>
</em></em><code><em><em><span class="c004">schema</span></em></em></code><code><em><em>:</em></em></code><code><em><em><span class="c006">name</span></em></em></code><em><em> with values of type </em></em><em><em>
</em></em><code><em><em><span class="c004">xsd</span></em></em></code><code><em><em>:</em></em></code><code><em><em><span class="c006">string</span></em></em></code><em><em> (lines 3–8).</em></em></li><li class="li-itemize"><em><em>They must have exaclty one property </em></em><em><em>
</em></em><code><em><em><span class="c004">schema</span></em></em></code><code><em><em>:</em></em></code><code><em><em><span class="c006">gender</span></em></em></code><em><em> whose value must be either 
</em></em><em><em>
</em></em><code><em><em><span class="c004">schema</span></em></em></code><code><em><em>:</em></em></code><code><em><em><span class="c006">Male</span></em></em></code><em><em> or </em></em><em><em>
</em></em><code><em><em><span class="c004">schema</span></em></em></code><code><em><em>:</em></em></code><code><em><em><span class="c006">Female</span></em></em></code><em><em> or any </em></em><em><em>
</em></em><code><em><em><span class="c004">xsd</span></em></em></code><code><em><em>:</em></em></code><code><em><em><span class="c006">string</span></em></em></code><em><em> literal (lines 9–17).</em></em></li><li class="li-itemize"><em><em>They have zero or one </em></em><em><em>
</em></em><code><em><em><span class="c004">schema</span></em></em></code><code><em><em>:</em></em></code><code><em><em><span class="c006">birthDate</span></em></em></code><em><em> property whose datatype must be </em></em><em><em>
</em></em><code><em><em><span class="c004">xsd</span></em></em></code><code><em><em>:</em></em></code><code><em><em><span class="c006">date</span></em></em></code><em><em> (lines 18–22).</em></em></li><li class="li-itemize"><em><em>They have zero or more </em></em><em><em>
</em></em><code><em><em><span class="c004">schema</span></em></em></code><code><em><em>:</em></em></code><code><em><em><span class="c006">knows</span></em></em></code><em><em> properties whose nodes must be IRIs and have type </em></em><em><em>
</em></em><code><em><em>:</em></em></code><code><em><em><span class="c006">User</span></em></em></code><em><em> (lines 23–27).</em></em></li></ul><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [                  </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Blank node 1</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [                   </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Blank node 2</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">or</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">    [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">in</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011">) ]</span></em><em><span class="c011">
</span></em><em><span class="c011">    [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011">   )</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [                   </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Blank node 3  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [                   </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Blank node 4 </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">class</span></span></em><em><span class="c011">    :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table></div></div><p>SHACL defines shapes as a conjunction of constraints that nodes must satisfy. 
A SHACL processor checks each of the constraints and returns validation errors for every constraint that is not satisfied.</p><p>When no error is reported, it is assumed that the RDF graph has been validated. </p><div class="example"><div class="theorem"><span class="c013">Example 95</span>  <em>RDF graph conforming to Example </em><a href="#ch050SHACLExample"><em>94</em></a><em> 
</em><a id="ch050GoodRDFGraph"></a><p><em>The following RDF data graph conforms to the previous example: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                             </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape     </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">          :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                             </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape     </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"1980-03-10"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                             </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape     </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">             </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>When an RDF graph conforms to a shapes graph, SHACL processors return a validation report with no errors.
The validation report contains the declaration:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">[ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ValidationReport</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">conforms</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011">
</span></em><em><span class="c011">].</span></em></td></tr>
</table></div></div><div class="example"><div class="theorem"><span class="c013">Example 96</span>  <em>Example of non conforming RDF graph</em><em> 
</em><a id="ch050SHACLBadDataGraph"></a><p><a id="hevea_default479"></a><em>
The following RDF graph does not conform to the shapes graph declared in 
Example </em><a href="#ch050SHACLExample"><em>94</em></a><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape     </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Dave"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">Unknown</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011">  1980 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">      :</span></em><em><span class="c011"><span class="c006">grace</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">emily</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape          </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Emily"</span></em></span></span></em><em><span class="c011">, </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Emilee"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">frank</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape     </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Frank"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape          </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Unknown"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor reports the following errors.</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> has value different from </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Male</span></em></code><em>, </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Female</span></em></code><em> or string for property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">gender</span></em></code><em> (the allowed values).</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> has value </em><em>
</em><code><em>1980</em></code><em> for property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">birthDate</span></em></code><em> which is of datatype integer when it should be of datatype </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">date</span></em></code><em>.</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> has value </em><em>
</em><code><em>:</em></code><code><em><span class="c006">grace</span></em></code><em> for property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> which is not an instance of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>.</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">emily</span></em></code><em> has 2 values for property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> when the maximum count is 1.</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">frank</span></em></code><em> does not have value for property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em>.</em></li><li class="li-itemize"><em>
</em><code><em><span class="c006">_</span></em></code><code><em>:</em></code><code><em><span class="c006">x</span></em></code><em> fails because the value of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> is a blank node and must be an IRI.
</em></li></ul></div></div><p>When an RDF graph does not conform to a shapes graph, SHACL processors return a validation report that contains several errors. 
Section <a href="#ch050ValidationReport">5.5</a> describes the validation report structure.</p>
<!--TOC section id="sec124" SHACL Implementations-->
<h2 class="section" id="sec124">5.2  SHACL Implementations</h2><!--SEC END --><p> <a id="ch05SHACLImplementations"></a>
<a id="ch5.sec2"></a></p><p>At the time of this writing, there are several implementations of SHACL.</p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default480"></a> 
<a id="hevea_default481"></a> 
<a id="hevea_default482"></a>
<a id="hevea_default483"></a>
<a id="hevea_default484"></a>
<a id="hevea_default485"></a>
</p>TopQuadrant has an open source implementation in Java 
(using the Apache Jena Library) called TopBraid SHACL API<sup><a id="text20" href="#note20">7</a></sup>. 
<a id="hevea_default486"></a> <a id="hevea_default487"></a>
It implements SHACL Core, SHACL-SPARQL, and SHACL rules (see <a href="#ch5.sec19">5.19</a>) and 
also offers a command line tool.
TopQuadrant is the company behind TopBraid Composer, which is a commercial interactive development environment for semantic web and linked data applications. 
TopBraid Composer (including the free edition) includes a version of the API for RDF validation. <p><a id="hevea_default488"></a> <a id="hevea_default489"></a>
</p></li><li class="li-itemize">SHACL Playground,<sup><a id="text21" href="#note21">8</a></sup> an online SHACL demo implemented in Javascript by TopQuadrant.<p><a id="hevea_default490"></a>
</p></li><li class="li-itemize">SHACLex<sup><a id="text22" href="#note22">9</a></sup> implements SHACL Core (it also implements ShEx). 
It has been written in Scala based on a simple and generic RDF Library 
(currently it works on top of Apache Jena library but there are plans to use other libraries). 
SHACLex can be used to deploy an online validator service and an online demo is deployed in Heroku.<sup><a id="text23" href="#note23">10</a></sup>
<p><a id="hevea_default491"></a> <a id="hevea_default492"></a> <a id="hevea_default493"></a>
</p></li><li class="li-itemize">Corese STTL SHACL validator. Implemented by Olivier Corby. 
It is an implementation of SHACL Core using STTL (SPARQL Template Transformation language), which is a generic transformation language for 
RDF.<sup><a id="text24" href="#note24">11</a></sup> 
STTL is itself implemented in Java.
An online demo of the validator is also available.<sup><a id="text25" href="#note25">12</a></sup> <p><a id="hevea_default494"></a> <a id="hevea_default495"></a>
</p></li><li class="li-itemize">Netage SHACL Engine<sup><a id="text26" href="#note26">13</a></sup> implemented in Java (using the Jena Library) by Nicky van Oorschot. 
It has support for SHACL-SPARQL.<p><a id="hevea_default496"></a>
</p></li><li class="li-itemize">SHACL-Check a prototype implemented by Tim Berners-Lee to check the 
specification.<sup><a id="text27" href="#note27">14</a></sup><p><a id="hevea_default497"></a>
</p></li><li class="li-itemize">RDFUnit.<sup><a id="text28" href="#note28">15</a></sup> 
A test driven data-debugging framework that runs test cases against RDF data and records any violations in structured form. 
Besides its SPARQL-based constraint definition language, RDFUnit supports rule translation from multiple formats i.e. OWL under closed world semantics, OSLC and DSP.
At the time of this writing, RDFUnit supports a very big part of SHACL-Core and SHACL-SPARQL<sup><a id="text29" href="#note29">16</a></sup>.
One of the future plans for RDFUnit is to support ShEx through the SHACLex implementation.<p><a id="hevea_default498"></a>
</p></li><li class="li-itemize">Alternative SHACL implementation, by Peter F. Patel-Schneider in 
Python.<sup><a id="text30" href="#note30">17</a></sup> <p><a id="hevea_default499"></a>
</p></li><li class="li-itemize">ELI Validator, by the ELI (European Legislation Identifier) Initiative<sup><a id="text31" href="#note31">18</a></sup> which is 
based on the TopBraid SHACL API.</li><li class="li-itemize">SHACL for rdf4j<sup><a id="text32" href="#note32">19</a></sup> (formerly Sesame) developed as a Google Summer of Code
2017 project.</li></ul>
<!--TOC section id="sec125" Basic Definitions: Shapes Graphs, Node, and Property Shapes-->
<h2 class="section" id="sec125">5.3  Basic Definitions: Shapes Graphs, Node, and Property Shapes</h2><!--SEC END --><p>
<a id="ch5.sec3"></a></p><p><a id="hevea_default500"></a> <a id="hevea_default501"></a>
A SHACL processor has two inputs: a data graph that contains the RDF data to validate and a shapes graph that contains the shapes. 
Example <a href="#ch050SHACLExample">94</a> contains a shapes graph and 
Examples <a href="#ch050GoodRDFGraph">95</a> and <a href="#ch050SHACLBadDataGraph">96</a> contain two possible RDF data graphs. 
It is possible to use a single graph that contains both the data and shapes graph merged.</p><p><a id="hevea_default502"></a> <a id="hevea_default503"></a>
There are two main types of shapes: node shapes and property shapes.
Node shapes declare constraints directly on a node. 
Property shapes declare constraints on the values associated with a node through a path. </p><p><a id="hevea_default504"></a>
Property shapes have a property 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">path</span></code> that declares the path that goes from the focus node to the value that they describe. 
The most frequent paths are predicate paths which are formed by a single IRI. </p><p>A node shape usually contains several property shapes which are declared through the 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">property</span></code> predicate. </p><p>Example <a href="#ch050SHACLExample">94</a> contained four such property shape declarations.
The first one was defined as:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">UserShape</span></span><span class="c011"> ...</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [                  </span><span class="c011"><span class="c008"><span class="c011"># Blank node 1</span></span></span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  ] ;</span><span class="c011">
</span><span class="c011"> ...</span></td></tr>
</table><p>Which means that nodes that conform to 
<code>:</code><code><span class="c006">UserShape</span></code> must also conform to the property shape identified by blank node 1.
The path of that property shape (line 3) is the predicate 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">name</span></code> which is, in this case, a single IRI.
The property shape contains several components that declare that there can be a minimum and a maximum of one values that can be accessed through that path (lines 4 and 5) 
and that they must belong to the 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code> datatype (line 6).</p><p>Notice that in Example <a href="#ch050SHACLExample">94</a> we used blank nodes for property shapes and enumerated them from 1–4 because we will refer to them when we describe the validation report in next section. 
<a id="hevea_default505"></a>
Although using blank nodes may be more readable, sometimes, it may be better to declare an IRI for the property shapes so they can be referenced from other shapes graphs when they are imported (see the next section).</p><div class="example"><div class="theorem"><span class="c013">Example 97</span>  <em>Declaring IRIs for property shapes</em><p><em>Example </em><a href="#ch050SHACLExample"><em>94</em></a><em> could be rewritten as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">HasEmail</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">HasGender</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">MaybeBirthDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">KnowsUsers</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">HasEmail</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">HasGender</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">or</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">    [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">in</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011">) ]</span></em><em><span class="c011">
</span></em><em><span class="c011">    [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011">   ) .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">MaybeBirthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">KnowsUsers</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">class</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div>
<!--TOC section id="sec126" Importing other Shapes Graphs-->
<h2 class="section" id="sec126">5.4  Importing other Shapes Graphs</h2><!--SEC END --><p> 
<a id="ch050ImportingShapes"></a>
<a id="ch5.sec4"></a></p><p><a id="hevea_default506"></a>
<a id="hevea_default507"></a>
A shapes graph contains shapes definitions that will be passed to the SHACL validation process. 
Shapes graphs can be reusable modules that can be referenced by other shapes graphs with the predicate 
<code><span class="c004">owl</span></code><code>:</code><code><span class="c006">imports</span></code>.
As a pre-validation step, SHACL processors should extend the original shapes graph by following and importing all referenced shapes graphs through 
<code><span class="c004">owl</span></code><code>:</code><code><span class="c006">imports</span></code> declarations. 
The resulting graph will be the input shapes graph that will be used for validation. </p><div class="example"><div class="theorem"><span class="c013">Example 98</span>  <em>Importing shapes graphs</em><em> 
</em><a id="ch050ImportingShapesGraphs"></a><p><em>If we assume that Example </em><a href="#ch050SHACLExample"><em>94</em></a><em> is available at 
IRI </em><code><em>http://example.org/UserShapes</em></code><em>, then, the following shapes graph imports its shapes and uses them to declare that nodes that conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">TeacherShape</span></em></code><em> must also conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> (line 5) and have the predicate </em><em>
</em><code><em>:</em></code><code><em><span class="c006">teaches</span></em></code><em> with a value of datatype </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c008"><em><span class="c011">&lt;&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">owl</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">imports</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.org/UserShapes&gt;</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">TeacherShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011">;                         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :TeacherShape     </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">          :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011">              </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Algebra"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape     </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> ;                        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :TeacherShape     </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011"> 23 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Logic"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor validates that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> conforms to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">TeacherShape</span></em></code><em>, and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> but reports that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> does not conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">TeacherShape</span></em></code><em>.</em></p></div></div><p><a id="hevea_default508"></a>
</p>
<!--TOC section id="sec127" Validation Report-->
<h2 class="section" id="sec127">5.5  Validation Report</h2><!--SEC END --><p> 
<a id="ch050ValidationReport"></a>
<a id="ch5.sec5"></a></p><p>As we said, SHACL processors take as input a data graph and a shapes graph and return a validation report. </p><p>The validation report is defined as an RDF graph with the following structure.
If the data graph conforms to the shapes graph, the report contains a 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">conforms</span></code> declaration with the value 
<code><span class="c003">true</span></code>:</p><p><a id="hevea_default509"></a>


</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">report</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">ValidationReport</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">conforms</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011"> .</span></td></tr>
</table><p><a id="hevea_default510"></a>
<a id="hevea_default511"></a>
<a id="hevea_default512"></a>
If the data graph does not conform to the shapes graph, the validation report will have a value 
<code><span class="c003">false</span></code> for the property 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">conforms</span></code> and a set of validation errors of type 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">ValidationResult</span></code> linked by the property 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">result</span></code>. </p><p><a id="hevea_default513"></a>
Each validation result contains metadata about the cause of the error such as 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">focusNode</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">value</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">resultPath</span></code>, etc.
Table <a href="#ch050.ValidationReportProperties">5.1</a> describes the properties of validation results.</p><p><a id="hevea_default514"></a>
<a id="hevea_default515"></a>
<a id="hevea_default516"></a>
<a id="hevea_default517"></a>
<a id="hevea_default518"></a>
<a id="hevea_default519"></a>
<a id="hevea_default520"></a>
<a id="hevea_default521"></a></p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.1: SHACL validation result properties</td></tr>
</table></div>
<a id="ch050.ValidationReportProperties"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c017"> <span class="c013">Property</span></td><td class="c019"><span class="c013">Description
</span></td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">focusNode</span></code></td><td class="c019">The focus node that was being validated when the error happened
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">resultPath</span></code></td><td class="c019">The path from the focus node. This property is optional usually corresponds to the 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">path</span></code> declaration of property shapes
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">value</span></code></td><td class="c019">The value that violated the constraint, when available
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">sourceShape</span></code></td><td class="c019">The shape that the focus node was validated against when the constraint was violated. 
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">sourceConstraintComponent</span></code></td><td class="c019">The IRI that identifies the component that caused the violation. 
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">detail</span></code></td><td class="c019">May point to further details about the cause of the error. 
This property can be used for reporting errors in nested nested shapes. 
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">resultMessage</span></code></td><td class="c019">Textual details about the error. This message can be affected by the 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">message</span></code> property (see section <a href="#ch050shMessage">5.6.4</a>)
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">resultSeverity</span></code></td><td class="c019">A value which is equal to the 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">severity</span></code> value of the shape that caused the violation error. If the shape doesn’t have 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">severity</span></code> declaration then the default value will be 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">Violation</span></code>.</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><div class="example"><div class="theorem"><span class="c013">Example 99</span>  <p><em>The validation report generated by a SHACL processor when trying to validate the shapes graph in Example </em><a href="#ch050SHACLExample"><em>94</em></a><em> with 
the data graph from Example </em><a href="#ch050SHACLBadDataGraph"><em>96</em></a><em> could be:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">report</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ValidationReport</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">conforms</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">false</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">result</span></span></em><em><span class="c011">
</span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">                            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ValidationResult</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultSeverity</span></span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Violation</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sourceConstraintComponent</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">InConstraintComponent</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sourceShape</span></span></em><em><span class="c011"> ... ;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># blank node 2</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">focusNode</span></span></em><em><span class="c011">                 :</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011">                     :</span></em><em><span class="c011"><span class="c006">Unknown</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultPath</span></span></em><em><span class="c011">                </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultMessage</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Value has none of the shapes from the or list"</span></em></span></span></em><em><span class="c011">],</span></em><em><span class="c011">
</span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">                            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ValidationResult</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultSeverity</span></span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Violation</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sourceConstraintComponent</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">DatatypeConstraintComponent</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sourceShape</span></span></em><em><span class="c011"> ... ;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># blank node 3</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">focusNode</span></span></em><em><span class="c011">                 :</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011">                     1980 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultPath</span></span></em><em><span class="c011">                </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultMessage</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Value does not have datatype xsd:date"</span></em></span></span></em><em><span class="c011"> ],</span></em><em><span class="c011">
</span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">                            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ValidationResult</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultSeverity</span></span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Violation</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sourceConstraintComponent</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ClassConstraintComponent</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sourceShape</span></span></em><em><span class="c011"> ... ;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># blank node 4</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">focusNode</span></span></em><em><span class="c011">                 :</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011">                     :</span></em><em><span class="c011"><span class="c006">grace</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultPath</span></span></em><em><span class="c011">                </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultMessage</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Value is not an instance of User"</span></em></span></span></em><em><span class="c011"> ],</span></em><em><span class="c011">
</span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">                            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ValidationResult</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultSeverity</span></span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Violation</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sourceConstraintComponent</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">MaxCountConstraintComponent</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sourceShape</span></span></em><em><span class="c011"> ... ;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># blank node 1</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">focusNode</span></span></em><em><span class="c011">                 :</span></em><em><span class="c011"><span class="c006">emily</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultPath</span></span></em><em><span class="c011">                </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultMessage</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"More than 1 values"</span></em></span></span></em><em><span class="c011"> ],</span></em><em><span class="c011">
</span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">                            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ValidationResult</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultSeverity</span></span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Violation</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sourceConstraintComponent</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">MinCountConstraintComponent</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sourceShape</span></span></em><em><span class="c011"> ...;          </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># blank node 1</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">focusNode</span></span></em><em><span class="c011">                 :</span></em><em><span class="c011"><span class="c006">frank</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultPath</span></span></em><em><span class="c011">                </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultMessage</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Less than 1 values"</span></em></span></span></em><em><span class="c011"> ],</span></em><em><span class="c011">
</span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">                            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ValidationResult</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultSeverity</span></span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Violation</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sourceConstraintComponent</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeKindConstraintComponent</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sourceShape</span></span></em><em><span class="c011">               :</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">focusNode</span></span></em><em><span class="c011">                 </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011">                     </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultMessage</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Value does not have node kind sh:IRI"</span></em></span></span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div><p>Although in the rest of this chapter we will describe the different errors in natural language for simplicity, 
the validation results returned by SHACL processors will have the structure above.</p>
<!--TOC section id="sec128" Shapes-->
<h2 class="section" id="sec128">5.6  Shapes</h2><!--SEC END --><p>
<a id="ch5.sec6"></a></p><p>There are two types of shapes in SHACL: node shapes and property shapes.
Node shapes specify constraints about a node while 
property shapes specify constraints about the values that can be reached from a node by a path.</p><blockquote class="figure"><div class="center"><hr class="c021"></div> 
<div class="center">
<img src="SHACL_Shapes.png">
</div>

<a id="ch050.SHACLShapes"></a>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Figure 5.1: Shapes in SHACL.</td></tr>
</table></div>
<div class="center"><hr class="c021"></div></blockquote><p><a id="hevea_default522"></a>
</p>
<!--TOC subsection id="sec129" Node shapes-->
<h3 class="subsection" id="sec129">5.6.1  Node shapes</h3><!--SEC END --><p>
<a id="ch5.sec6.1"></a></p><p>Node shapes directly specify constraints about a focus node. </p><div class="example"><div class="theorem"><span class="c013">Example 100</span>  <em>Node shape example</em><p><em>The following shapes graph declares a node shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> 
which applies to all nodes that are instances of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>
and the constraint that nodes conforming to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> must be IRIs. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">              </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>Given the following RDF graph: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> .                     </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://other.uri.com/bob&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:1 </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> .                        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape </span></em></span></span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> and </em><em>
</em><code><em>&lt;</em></code><code><em><span class="c006">http</span></em></code><code><em>://</em></code><code><em><span class="c006">other</span></em></code><code><em>.</em></code><code><em><span class="c006">uri</span></em></code><code><em>.</em></code><code><em><span class="c006">com</span></em></code><code><em>/</em></code><code><em><span class="c006">bob</span></em></code><code><em>&gt;</em></code><em> conform to shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> and returns the error:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><em>
</em><code><em><span class="c006">_</span></em></code><code><em>:1</em></code><em> is not an IRI
</em></li></ul></div></div><p><a id="hevea_default523"></a>
</p>
<!--TOC subsection id="sec130" Property Shapes-->
<h3 class="subsection" id="sec130">5.6.2  Property Shapes</h3><!--SEC END --><p>
<a id="ch5.sec6.2"></a></p><p><a id="hevea_default524"></a>
Property shapes specify constraints about the values that can be reached from a focus node by some path. 

<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">property</span></code> associates a shape with a property shape.</p><p>The nodes that are affected by a property shape are specified using 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">path</span></code> property 
that can take as value IRIs or SHACL paths.</p><p><a id="hevea_default525"></a>
<a id="hevea_default526"></a>
SHACL paths are semantically equivalent to a subset of the SPARQL 1.1 property paths but they use an RDF encoding based on the following rules.</p><ul class="itemize"><li class="li-itemize">Direct predicates use a single IRI.<p><a id="hevea_default527"></a>
</p></li><li class="li-itemize">Inverse paths are declared by a blank node with the property 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">inversePath</span></code>.<p><a id="hevea_default528"></a>
</p></li><li class="li-itemize">Sequence paths are encoded by RDF lists whose values are SHACL paths themselves.<p><a id="hevea_default529"></a>
</p></li><li class="li-itemize">Alternative paths are declared by a blank node with the property 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">alternativePath</span></code> whose value is an RDF list with the different alternatives.<p><a id="hevea_default530"></a>
<a id="hevea_default531"></a>
<a id="hevea_default532"></a>
</p></li><li class="li-itemize">The path modifiers 
<code>?</code>, 
<code>*</code>, and 
<code>+</code> are encoded by a blank node with the corresponding 
properties 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">zeroOrOnePath</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">zeroOrMorePath</span></code> or 
<code><span class="c006">oneOrMorePath</span></code>.
</li></ul><p>Table <a href="#ch050.SHACLPaths">5.2</a> presents some examples of SHACL paths and their corresponding SPARQL paths.</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.2: SHACL and SPARQL paths</td></tr>
</table></div>
<a id="ch050.SHACLPaths"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c020"> <span class="c013">SHACL path</span></td><td class="c020"><span class="c013">SPARQL path
</span></td></tr>
<tr><td class="c020"> 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">name</span></code></td><td class="c020">
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">name</span></code>
</td></tr>
<tr><td class="c020"> 
<code>[</code><code><span class="c004">sh</span></code><code>:</code><code><span class="c006">inversePath</span></code><code> </code><code><span class="c004">schema</span></code><code>:</code><code><span class="c006">knows</span></code><code>]</code></td><td class="c020">
<code>^</code><code><span class="c004">schema</span></code><code>:</code><code><span class="c006">knows</span></code>
</td></tr>
<tr><td class="c020"> 
<code>(</code><code><span class="c004">schema</span></code><code>:</code><code><span class="c006">knows</span></code><code> </code><code><span class="c004">schema</span></code><code>:</code><code><span class="c006">name</span></code><code>)</code></td><td class="c020">
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">knows</span></code><code>/</code><code><span class="c004">schema</span></code><code>:</code><code><span class="c006">name</span></code>
</td></tr>
<tr><td class="c020"> 
<code>[</code><code><span class="c004">sh</span></code><code>:</code><code><span class="c006">alternativePath</span></code><code> (</code><code><span class="c004">schema</span></code><code>:</code><code><span class="c006">knows</span></code><code> </code><code><span class="c004">schema</span></code><code>:</code><code><span class="c006">follows</span></code><code>)]</code></td><td class="c020">
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">knows</span></code>|
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">follows</span></code> 
</td></tr>
<tr><td class="c020"> 
<code>[</code><code><span class="c004">sh</span></code><code>:</code><code><span class="c006">zeroOrOnePath</span></code><code> </code><code><span class="c004">schema</span></code><code>:</code><code><span class="c006">knows</span></code><code>]</code></td><td class="c020">
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">knows</span></code><code>?</code>
</td></tr>
<tr><td class="c020"> 
<code>[</code><code><span class="c004">sh</span></code><code>:</code><code><span class="c006">oneOrMorePath</span></code><code> </code><code><span class="c004">schema</span></code><code>:</code><code><span class="c006">knows</span></code><code>]</code></td><td class="c020">
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">knows</span></code><code>+</code>
</td></tr>
<tr><td class="c020"> 
<code>([</code><code><span class="c004">sh</span></code><code>:</code><code><span class="c006">zeroOrMorePath</span></code><code> </code><code><span class="c004">schema</span></code><code>:</code><code><span class="c006">knows</span></code><code>] </code><code><span class="c004">schema</span></code><code>:</code><code><span class="c006">name</span></code><code>)</code></td><td class="c020">
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">knows</span></code><code>*/</code><code><span class="c004">schema</span></code><code>:</code><code><span class="c006">name</span></code>
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><div class="example"><div class="theorem"><span class="c013">Example 101</span>  <em>SHACL paths example</em><p><em>The following shape declares that nodes that are instances of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> 
must satisfy that they must have a value for property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> or </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">follows</span></em></code><em>, 
which must be an IRI and 
that any node linked to users by the transitive closure of the </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> property 
must have a </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">email</span></em></code><em> whose value must also be an IRI.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     [</span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alternativePath</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011">)] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     ([</span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">oneOrMorePath</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">] </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011">) ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011">
</span></em><em><span class="c011"> ].</span></em></td></tr>
</table><p><em>Given the following RDF data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">              :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                 </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;mailto:alice@mail.org&gt;</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">   :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;mailto:bob@mail.org&gt;</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;mailto:carol@mail.org&gt;</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;mailto:dave@mail.org&gt;</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">emily</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">emily</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Unknown"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor verifies that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> conforms to shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> because it has </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">email</span></em></code><em> with an IRI value and 
all the nodes that can be reached by the property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> one or more times followed by the property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">email</span></em></code><em> 
(which is equivalent to </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><code><em>+/</em></code><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">email</span></em></code><em> using SPARQL notation) are also IRIs. </em></p><p><em>The SHACL processor would return error for </em><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> because one of the values of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> has an </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">email</span></em></code><em> that is not an IRI (</em><em>
</em><code><em>:</em></code><code><em><span class="c006">emily</span></em></code><em>).</em></p></div></div>
<!--TOC subsection id="sec131" Constraint Components-->
<h3 class="subsection" id="sec131">5.6.3  Constraint Components</h3><!--SEC END --><p>
<a id="ch5.sec6.3"></a></p><p><a id="hevea_default533"></a>
SHACL defines the concept of constraint components which are associated with shapes to declare constraints. 
Each node or property shape can be associated with several constraint components. </p><p>Constraint components are identified by an IRI and have two types of parameters: mandatory and optional. 
The association between a shape and a constraint component is made by declaring values for the parameters. 
The parameters are also identified by IRIs and have values. 
Most of the constraint components in SHACL Core have a single parameter and follow the convention that 
if the parameter is named 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">p</span></code>, the corresponding constraint component is named 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">pConstraintComponent</span></code>.</p><div class="example"><div class="theorem"><span class="c013">Example 102</span>  <em>Shape with two constraints</em><p><em>The following code:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">class</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>declares a node shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> with two constraints which are associated with the following constraint components:</em></p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default534"></a><em>
</em></p><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">NodeKindConstraintComponent</span></em></code><em> with the value </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c003">IRI</span></em></code><em> for the parameter </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">nodeKind</span></em></code><em>. 
The constraint means that nodes that conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> must be IRIs; and</em><p><a id="hevea_default535"></a><em>
</em></p></li><li class="li-itemize"><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">ClassConstraintComponent</span></em></code><em> with the value </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em> for the parameter </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">class</span></em></code><em>. 
The constraint means that nodes conforming to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> must be instances of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em>.
</em></li></ul><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> .   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> .    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> .      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape</span></em></span></span></em></td></tr>
</table></div></div><p>When a constraint component declares a single parameter, 
the parameter may be used several times in the same shape. 
Each value of the parameter declares a different constraint. 
The interpretations of such declarations is conjunctive, i.e., all constraints apply. </p><div class="example"><div class="theorem"><span class="c013">Example 103</span>  <em>Shape with two constraints with the same parameter</em><p><em>The following code:</em></p><p><a id="hevea_default536"></a><em>
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">class</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">class</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>Declares two constraints with the parameter </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">class</span></em></code><em> that means that nodes conforming to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> must be instances of both </em><em>
</em><code><em><span class="c004">foaf</span></em></code><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em> and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em>.</em></p></div></div><p>Constraint components are associated with validators which define the behavior of the constraint. </p><p>SHACL Core contains a list of built-in constraint components that are classified in 
Table <a href="#ch050CoreConstraintComponents">5.3</a>.
In the table, we included the parameter names because they are shorter than the component IRIs.
Those components will be described in more detail in their corresponding sections later in this chapter. </p><p><a id="hevea_default537"></a> <a id="hevea_default538"></a> 
<a id="hevea_default539"></a> <a id="hevea_default540"></a> <a id="hevea_default541"></a> 
<a id="hevea_default542"></a> <a id="hevea_default543"></a> 
<a id="hevea_default544"></a> 
<a id="hevea_default545"></a> 
<a id="hevea_default546"></a> 
<a id="hevea_default547"></a> 
<a id="hevea_default548"></a> 
<a id="hevea_default549"></a> 
<a id="hevea_default550"></a> 
<a id="hevea_default551"></a> 
<a id="hevea_default552"></a> 
<a id="hevea_default553"></a> 
<a id="hevea_default554"></a> <a id="hevea_default555"></a> <a id="hevea_default556"></a> <a id="hevea_default557"></a> 
<a id="hevea_default558"></a> 
<a id="hevea_default559"></a> 
<a id="hevea_default560"></a> 
<a id="hevea_default561"></a> 
<a id="hevea_default562"></a> 
<a id="hevea_default563"></a> 
<a id="hevea_default564"></a> <a id="hevea_default565"></a> <a id="hevea_default566"></a> <a id="hevea_default567"></a> 
<a id="hevea_default568"></a> <a id="hevea_default569"></a> <a id="hevea_default570"></a> <a id="hevea_default571"></a>
</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.3: SHACL core constraint components</td></tr>
</table></div>
<a id="ch050CoreConstraintComponents"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c020"> <span class="c013">Operation</span></td><td class="c019"><span class="c013">Parameters</span></td><td class="c017"><span class="c013">Section 
</span></td></tr>
<tr><td class="c020"> Cardinality constraints</td><td class="c019">
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">minCount</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">maxCount</span></code></td><td class="c017"><a href="#ch050Cardinalities">5.8</a> 
</td></tr>
<tr><td class="c020"> Value types</td><td class="c019">
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">class</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">datatype</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">nodeKind</span></code> <br>

<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">in</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">hasValue</span></code></td><td class="c017"><a href="#ch050ValueTypes">5.9</a>
</td></tr>
<tr><td class="c020"> Value range constraints</td><td class="c019">
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">minInclusive</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">maxInclusive</span></code> <br>

<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">minExclusive</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">maxExclusive</span></code></td><td class="c017"><a href="#ch050ValueRanges">5.10.1</a>
</td></tr>
<tr><td class="c020"> String based constraints</td><td class="c019">
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">minLength</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">maxLength</span></code> <br>

<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">length</span></code> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">pattern</span></code></td><td class="c017"><a href="#ch040Stringbased">5.10.2</a>
</td></tr>
<tr><td class="c020"> Language based</td><td class="c019">
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">uniqueLang</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">languageIn</span></code></td><td class="c017"><a href="#ch050LanguageBased">5.10.3</a>
</td></tr>
<tr><td class="c020"> Logical constraints</td><td class="c019">
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">and</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">or</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">xone</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">not</span></code></td><td class="c017"><a href="#ch050logicalConstraints">5.11</a>
</td></tr>
<tr><td class="c020"> Shape-based constraints</td><td class="c019">
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">node</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">property</span></code> <br>

<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">qualifiedValueShape</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">qualifiedValueShapesDisjoint</span></code> <br>

<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">qualifiedMinCount</span></code> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">qualifiedMaxCount</span></code></td><td class="c017"><a href="#ch050shapeBasedConstraints">5.12</a>
</td></tr>
<tr><td class="c020"> Closed shapes</td><td class="c019">
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">closed</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">ignoredProperties</span></code></td><td class="c017"><a href="#ch050Closed">5.13</a>
</td></tr>
<tr><td class="c020"> Property pair constraints</td><td class="c019">
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">equals</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">disjoint</span></code> <br>

<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">lesThan</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">lessThanOrEquals</span></code></td><td class="c017"><a href="#ch050propertyPairConstraints">5.14</a>
</td></tr>
<tr><td class="c020"> Non-validating constraints</td><td class="c019">
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">name</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">description</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">order</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">group</span></code></td><td class="c017"><a href="#ch050NonValidating">5.15</a>
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><p><a id="hevea_default572"></a>
As we will show in Section <a href="#ch050SHACLSPARQL">5.16</a>, SHACL-SPARQL can be used to declare other constraint components.</p>
<!--TOC subsection id="sec132" Human Friendly Messages-->
<h3 class="subsection" id="sec132">5.6.4  Human Friendly Messages</h3><!--SEC END --><p> 
<a id="ch050shMessage"></a>
<a id="ch5.sec6.4"></a></p><p><a id="hevea_default573"></a>
<a id="hevea_default574"></a>
The property <span class="c007"><span class="c011"><span class="c010">sh:message</span></span></span> can be used to associate a human-friendly message
with a shape. 
If there is a violation that affects that shape, a SHACL processor can include 
the value of <span class="c007"><span class="c011"><span class="c010">sh:message</span></span></span> as the value of 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">resultMessage</span></code> 
in the validation report. </p><div class="example"><div class="theorem"><span class="c013">Example 104</span>  <em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">message</span></em></code><em> example</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [             </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Blank node 1</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011">  1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">message</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Where is the name?"</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Given the following RDF graph: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Bob"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor would return the following validation report:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">report</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">ValidationReport</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">conforms</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">false</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">result</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">                 </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ValidationResult</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultSeverity</span></span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Violation</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sourceConstraintComponent</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">MinCountConstraintComponent</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sourceShape</span></span></em><em><span class="c011"> ... ;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Blank node 1</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">focusNode</span></span></em><em><span class="c011">                :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultPath</span></span></em><em><span class="c011">               </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultMessage</span></span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Where is the name?"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">] .</span></em></td></tr>
</table></div></div>
<!--TOC subsection id="sec133" Declaring Shape Severities-->
<h3 class="subsection" id="sec133">5.6.5  Declaring Shape Severities</h3><!--SEC END --><p> 
<a id="ch050severity"></a>
<a id="ch5.sec6.5"></a></p><p><a id="hevea_default575"></a>
The property <span class="c007"><span class="c011"><span class="c010">sh:severity</span></span></span> can be used to declare a severity value for a shape. 
If there is a violation that affects that shape, a SHACL processor can include the value of <span class="c007"><span class="c011"><span class="c010">sh:severity</span></span></span> as the value of 

<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">resultSeverity</span></code> in the validation report. 
<a id="hevea_default576"></a>
<a id="hevea_default577"></a>
<a id="hevea_default578"></a>
SHACL describes three kinds of severity levels: 
<span class="c007"><span class="c011"><span class="c010">sh:Info</span></span></span>, <span class="c007"><span class="c011"><span class="c010">sh:Warning</span></span></span>, and <span class="c007"><span class="c011"><span class="c010">sh:Violation</span></span></span>. 
If the shape does not declare a severity value, the default one is 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">Violation</span></code>.</p><div class="example"><div class="theorem"><span class="c013">Example 105</span>  <em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">severity</span></em></code><em> example</em><p><em>Given the following shapes graph: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [             </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Blank node 1</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">severity</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Warning</span></span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>and the RDF graph: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> 23 .</span></em></td></tr>
</table><p><em>A SHACL processor returns the following validation report:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">report</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">                      :</span></em><em><span class="c011"><span class="c006">ValidationReport</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">conforms</span></span></em><em><span class="c011">                   </span></em><em><span class="c011"><span class="c003">false</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">result</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">                 </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ValidationResult</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultSeverity</span></span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Warning</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sourceConstraintComponent</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">DatatypeConstraintComponent</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sourceShape</span></span></em><em><span class="c011"> ... ;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Blank node 1</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">focusNode</span></span></em><em><span class="c011">                 :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultPath</span></span></em><em><span class="c011">                </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">resultMessage</span></span></em><em><span class="c011">             </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Datatype should be xsd:string"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011">                     23</span></em><em><span class="c011">
</span></em><em><span class="c011">] .</span></em></td></tr>
</table></div></div>
<!--TOC subsection id="sec134" Deactivating Shapes-->
<h3 class="subsection" id="sec134">5.6.6  Deactivating Shapes</h3><!--SEC END --><p> 
<a id="ch050deactivate"></a>
<a id="ch5.sec6.6"></a></p><p><a id="hevea_default579"></a>
If a shape has the property 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">deactivated</span></code> with the value 
<code><span class="c003">true</span></code> then it is deactivated and all RDF terms will conform to it.</p><p>A typical use case for deactivated shapes is when one 
imports shapes from another graph by a third party and wants to deactivate some of the shapes in the local shapes graph that do not apply in the current context. </p><p>Notice that if the author of a shapes library anticipates that a shape may need to be disabled or modified by others, 
it may be better to use IRIs instead of blank nodes, so they can be referenced later.</p><div class="example"><div class="theorem"><span class="c013">Example 106</span>  <em>Deactivating shapes</em><em> 
</em><a id="ch050DeactivatingShapes"></a><p><em>Let’s assume that there is a shapes library available at IRI 
</em><a href="http://example.org/UserShapes"><em><span class="c010">http://example.org/UserShapes</span></em></a><em> with the following shapes graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011">    :</span></em><em><span class="c011"><span class="c006">HasName</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011">    :</span></em><em><span class="c011"><span class="c006">HasEmail</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">HasName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011">  1;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011">  1;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">HasEmail</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>And we define a shapes graph importing the previous shapes and adding a declaration for </em><em>
</em><code><em>:</em></code><code><em><span class="c006">TeacherShape</span></em></code><em> that deactivates the property </em><em>
</em><code><em>:</em></code><code><em><span class="c006">HasEmail</span></em></code><em>:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c008"><em><span class="c011">&lt;&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">owl</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">imports</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.org/UserShapes&gt;</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">TeacherShape</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011">        :</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">      :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011">  1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">HasEmail</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">deactivated</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>The merged shapes graph deactivates the property shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">HasEmail</span></em></code><em> so nodes that conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">TeacherShape</span></em></code><em> need to conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> but do not need to have </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">email</span></em></code><em> property.</em></p><p><em>Given the following RDF data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> ;                      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :TeacherShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;mailto:alice@example.org&gt;</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Logic"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bod</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> ;                      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :TeacherShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"This email is not an IRI"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Algebra"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> ;                      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :TeacherShape   </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> 23 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Logic"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">TeacherShape</span></em></code><em> even if </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> does not conform to the </em><em>
</em><code><em>:</em></code><code><em><span class="c006">HasEmail</span></em></code><em> shape. 
It returns the following error:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> does not conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">TeacherShape</span></em></code><em> because it does not conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> as the value of property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> does not have datatype </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em>.
</em></li></ul></div></div><p><a id="hevea_default580"></a>
</p>
<!--TOC section id="sec135" Target Declarations-->
<h2 class="section" id="sec135">5.7  Target Declarations</h2><!--SEC END --><p> 
<a id="ch050TargetNodes"></a>
<a id="ch5.sec7"></a></p><p>SHACL shapes may define several target declarations.
Target declarations specify the set of nodes that will be validated against a shape. 
Table <a href="#ch050.TargetDeclarations">5.4</a> contains the different target declarations defined in SHACL core.</p><p>SHACL targets provide the same functionality as the ShEx Shape maps (see <a href="#ch040ShapeMaps">4.9</a>).
We discuss the core differences in section <a href="#ch7.sec4">7.4</a>.</p><p><a id="hevea_default581"></a>
<a id="hevea_default582"></a>
<a id="hevea_default583"></a>
<a id="hevea_default584"></a>
</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.4: SHACL target declarations</td></tr>
</table></div>
<a id="ch050.TargetDeclarations"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c020"> <span class="c013">Value</span></td><td class="c019"><span class="c013">Description
</span></td></tr>
<tr><td class="c020"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">targetNode</span></code></td><td class="c019">Directly point to a node
</td></tr>
<tr><td class="c020"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">targetClass</span></code></td><td class="c019">All nodes that are instances of some class
</td></tr>
<tr><td class="c020"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">targetSubjectsOf</span></code></td><td class="c019">All nodes that are subjects of some predicate 
</td></tr>
<tr><td class="c020"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">targetObjectsOf</span></code></td><td class="c019">All nodes that are objects of some predicate 
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><p><a id="hevea_default585"></a>
</p>
<!--TOC subsection id="sec136" Target Node-->
<h3 class="subsection" id="sec136">5.7.1  Target Node</h3><!--SEC END --><p> 
<a id="ch050TargetNode"></a>
<a id="ch5.sec7.1"></a></p><p>The predicate 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">targetNode</span></code> declares a node that must conform to some shape. </p><div class="example"><div class="theorem"><span class="c013">Example 107</span>  <em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">targetNode</span></em></code><em> example</em><p><em>In the following example, </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em>, </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em>, and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> are declared as the target nodes of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> so a SHACL processor will validate those nodes.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetNode</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Given the RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice Cooper"</span></em></span></span></em><em><span class="c011"> .   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Bob"</span></em></span></span></em><em><span class="c011"> .            </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> 23 .               </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> 45 .               </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Ignored</span></em></span></span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> conforms to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> and returns the errors:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> does not have have value for property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em>
</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> has a value which is not a </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em> for property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em>.
</em></li></ul><p><em>Notice that it ignores </em><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> as it was not affected by the </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">targetNode</span></em></code><em> declaration.</em></p></div></div><p>
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">targetNode</span></code> provides a similar functionality to the ShEx Fixed shape map (see  <a href="#ch040fixedShapeMaps">4.9.1</a>).
However, the difference is that SHACL target nodes silently ignore missing target nodes from the data graph, while in ShEx, we get back a failure.
Depending on the data and constraint modeling approach, silent ignore may lead to false-positives and thus, target nodes should be used with caution.</p><p><a id="hevea_default586"></a>
</p>
<!--TOC subsection id="sec137" Target Class-->
<h3 class="subsection" id="sec137">5.7.2  Target Class</h3><!--SEC END --><p> 
<a id="ch050targetClass"></a>
<a id="ch5.sec7.2"></a></p><p>Target class declarations specify that all instances of some class must be validated with some shape. </p><p><a id="hevea_default587"></a> <a id="ch050SHACLInstance"></a>
<a id="hevea_default588"></a>
<a id="hevea_default589"></a>
SHACL employs a specific notion of instance, which is called <em>SHACL instance</em>, which can be defined using SPARQL property paths as: 
A node 
<code><span class="c006">X</span></code> is a SHACL instance of a class 
<code><span class="c006">C</span></code> if 
<code><span class="c006">X</span></code><code> </code><code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code><code>/</code><code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">subClassOf</span></code><code>* </code><code><span class="c006">C</span></code>.</p><p>It means that nodes with an explicit 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> arc declaration are considered 
but also values that have an 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> declaration pointing to some class that is transitively linked to another class by the 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">subClassOf</span></code> predicate.
Note that the definition uses only the predicate 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">subClassOf</span></code> but does not take into account other predicates from RDFS like 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">domain</span></code>, 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">target</span></code>, etc. 
The definition is does not require RDFS inference.</p><div class="example"><div class="theorem"><span class="c013">Example 108</span>  <em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">targetClass</span></em></code><em> example</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>Given the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                     </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice Cooper"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                     </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Bob"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                     </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> 23 .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Student</span></span></em><em><span class="c011"> ;                 </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> 45 .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">emily</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Student</span></span></em><em><span class="c011"> ;                 </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Emily"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Student</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">subClassOf</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL validator checks that both </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">emily</span></em></code><em> conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> and returns the following errors:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> does not have property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em>.
</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> has a value for </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> that is not an </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em>.
</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> has a value for </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> that is not an </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em>.
</em></li></ul></div></div>
<!--TOC subsection id="sec138" Implicit Class Target-->
<h3 class="subsection" id="sec138">5.7.3  Implicit Class Target</h3><!--SEC END --><p> 
<a id="ch050implicitTargetClass"></a>
<a id="ch5.sec7.3"></a></p><p><a id="hevea_default590"></a> <a id="hevea_default591"></a>
<a id="hevea_default592"></a>
<a id="hevea_default593"></a>
A shape with type 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">NodeShape</span></code> and 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">Class</span></code> is a target class of itself.
This means that the 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">targetClass</span></code> declaration is implicit.</p><div class="example"><div class="theorem"><span class="c013">Example 109</span>  <em>Example using implicit targetClass</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">, </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Class</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>has the same validation behavior as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>So given the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice Cooper"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>The system would return the following error. </em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> does not have property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em>.
</em></li></ul></div></div><p>Implicit target class declarations conflate the concept of shape and class as a single entity. 
This can be a dangerous practice in the open semantic web as they are different concepts (see <a href="#ch030ShapesNotTypes">3.2</a>). 
It can also be a very convenient feature to associate shape constraints with classes, 
and the Data Shapes Working Group decided to support it. </p><p>In this book, we opt to separate shapes and classes, using the following pattern:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">UserShape</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011">              </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">           </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetClass</span></span><span class="c011"> :</span><span class="c011"><span class="c006">User</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ...</span></td></tr>
</table>
<!--TOC subsection id="sec139" Target Subjects Of-->
<h3 class="subsection" id="sec139">5.7.4  Target Subjects Of</h3><!--SEC END --><p> 
<a id="ch5.sec7.4"></a></p><p><a id="hevea_default594"></a> 
The property 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">targetSubjectsOf</span></code> selects as focus nodes the subjects of some property.</p><div class="example"><div class="theorem"><span class="c013">Example 110</span>  <em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">targetSubjectsOf</span></em></code><em> example</em><em> 
</em><a id="ch050targetSubjectsOfExample"></a><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetSubjectsOf</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>Given the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Algebra</span></span></em><em><span class="c011"> ;     </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Logic</span></span></em><em><span class="c011"> ;       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> 23 .          </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Ignored</span></em></span></span></em></td></tr>
</table><p><em>The system checks that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> has shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> and signals the error: </em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> does not have property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em>.
</em></li></ul><p><em>In this case, the system ignores </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em>. </em></p></div></div>
<!--TOC subsection id="sec140" Target Objects Of-->
<h3 class="subsection" id="sec140">5.7.5  Target Objects Of</h3><!--SEC END --><p> 
<a id="ch5.sec7.5"></a></p><p><a id="hevea_default595"></a> 
The property 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">targetObjectsOf</span></code> selects as focus nodes the objects of some property.</p><div class="example"><div class="theorem"><span class="c013">Example 111</span>  <em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">targetObjectsOf</span></em></code><em> example</em><em> 
</em><a id="ch050targetObjectsOfExample"></a><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetObjectsOf</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">isTaughtBy</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>Given the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> .  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> 23 .        </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Ignored</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">algebra</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">isTaughtBy</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>The system checks that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> has shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> and signals the error: </em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> does not have property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em>.
</em></li></ul><p><em>The system ignores </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> as it is not the object of the </em><em>
</em><code><em>:</em></code><code><em><span class="c006">isTaughtBy</span></em></code><em> property.</em></p></div></div>
<!--TOC section id="sec141" Cardinality-->
<h2 class="section" id="sec141">5.8  Cardinality</h2><!--SEC END --><p> 
<a id="ch050Cardinalities"></a>
<a id="ch5.sec8"></a></p><p><a id="hevea_default596"></a>
Cardinality constraint components specify restrictions on the minimum and maximum number of distinct value nodes.
Table <a href="#ch050.Cardinality">5.5</a> defines the cardinality constraint component parameters in SHACL.
The default cardinality in SHACL for property shapes is 
<code>{0,</code><code><span class="c006">unbounded</span></code><code>}</code>. </p><p><a id="hevea_default597"></a> 
<a id="hevea_default598"></a>
</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.5: SHACL cardinality constraint components</td></tr>
</table></div>
<a id="ch050.Cardinality"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c017"> <span class="c013">Operation</span></td><td class="c019"><span class="c013">Description 
</span></td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">minCount</span></code></td><td class="c019">Restricts minimum number of value nodes.<br>
If not defined, there is no restriction (no minimum).
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">maxCount</span></code></td><td class="c019">Restricts maximum number of value nodes. <br>
If not defined, there is no restriction (unbounded).
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><div class="example"><div class="theorem"><span class="c013">Example 112</span>  <em>Cardinality</em><p><em>Given the following shapes graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">, </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Class</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 2 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 3 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>and the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">                      :</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL validator returns the errors:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> has less than two values for the property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">follows</span></em></code><em>; and
</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> has more than three values for the property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">follows</span></em></code><em>.
</em></li></ul></div></div>
<!--TOC section id="sec142" Constraints on Values-->
<h2 class="section" id="sec142">5.9  Constraints on Values</h2><!--SEC END --><p> 
<a id="ch050ValueTypes"></a>
<a id="ch5.sec9"></a></p><p>These constraint components specify the set of values that a node can have. 
For example, nodes with some datatype, or are IRIs, or literals, etc.
Table <a href="#ch050ConstraintsValueTypes">5.6</a> describes the different possibilities which we will detail in the following sections.</p><p><a id="hevea_default599"></a> 
<a id="hevea_default600"></a> 
<a id="hevea_default601"></a> 
<a id="hevea_default602"></a> 
<a id="hevea_default603"></a> 
<a id="hevea_default604"></a> 
<a id="hevea_default605"></a> 
<a id="hevea_default606"></a> 
<a id="hevea_default607"></a> 
<a id="hevea_default608"></a> 
<a id="hevea_default609"></a> 
</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.6: Constraints on values</td></tr>
</table></div>
<a id="ch050ConstraintsValueTypes"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c017"> <span class="c013">Operation</span></td><td class="c019"><span class="c013">Description 
</span></td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">datatype</span></code></td><td class="c019">Specifies the values must be literals with some datatype
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">class</span></code></td><td class="c019">Specifies that values must be SHACL instances of some class
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">nodeKind</span></code></td><td class="c019">Possible values: 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">BlankNode</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">IRI</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">Literal</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">BlankNodeOrIRI</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">BlankNodeOrLiteral</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">IRIOrLiteral</span></code>
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">in</span></code></td><td class="c019">Enumerates the value nodes that a property is allowed to have
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">hasValue</span></code></td><td class="c019">A node must have a given value
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><p><a id="hevea_default610"></a>
</p>
<!--TOC subsection id="sec143" Datatypes-->
<h3 class="subsection" id="sec143">5.9.1  Datatypes</h3><!--SEC END --><p> 
<a id="ch050Datatypes"></a>
<a id="ch5.sec9.1"></a></p><p><a id="hevea_default611"></a>

<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">datatype</span></code> specifies the datatype that a focus node must have. </p><p>Remember that all literals in the RDF data model have an associated datatype 
(see Section <a href="#ch020RDFStringLiterals">2.2</a>). 
Plain string literals have 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code> datatype by default.</p><p>SHACL contains a list of built-in datatypes that are based on XML Schema datatypes (which are the same as in SPARQL 1.1).
For those datatypes SHACL processors also check that the lexical form conforms to the datatype rules.
This means that something like 
<code><span class="c005"><code>"Unknown"</code></span></code><code>^^</code><code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">date</span></code> is not a well-typed 
literal because 
<code><span class="c005"><code>"Unknown"</code></span></code> does not conform to the 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">date</span></code> rules.</p><div class="example"><div class="theorem"><span class="c013">Example 113</span>  <em>Simple datatypes example</em><p><em>Given the following shapes 
graph</em><sup><a id="text33" href="#note33"><em>20</em></a></sup><em>:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>and the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                                 </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Passes as a :User   </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"1981-07-10"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">  ;                                </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Fails as a :User  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> 1981 .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                                 </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Carol</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"2003-06-10"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                                 </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Dave"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Unknown"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor validates that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> has shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> and returns the following errors: </em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> has a value for path </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">birthDate</span></em></code><em> that is not a </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">date</span></em></code><em> (it is an integer);</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> has a value for path </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> that is not a </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em> (it is an IRI); and </em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> has a value for path </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">birthDate</span></em></code><em> that is not a </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">date</span></em></code><em> (its lexical form does not match </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">date</span></em></code><em>).</em></li></ul></div></div><div class="example"><div class="theorem"><span class="c013">Example 114</span>  <em>Custom datatypes example</em><p><a id="hevea_default612"></a><em>
</em><a id="hevea_default613"></a><em>
The RDF data model enables the use of other datatypes apart from the popular XML Schema datatypes.</em></p><p><em>In the following example, a picture contains the properties </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">width</span></em></code><em> and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">height</span></em></code><em> using a hypothetical custom datatype (</em><em>
</em><code><em><span class="c004">cdt</span></em></code><code><em>:</em></code><code><em><span class="c006">distance</span></em></code><em>).</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">PictureShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Picture</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">width</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">cdt</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">distance</span></span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">height</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">cdt</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">distance</span></span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gioconda</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">             :</span></em><em><span class="c011"><span class="c006">Picture</span></span></em><em><span class="c011"> ;              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Passes as a :PictureShape  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">width</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"21 in"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">cdt</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">distance</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">height</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"30 in"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">cdt</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">distance</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">other</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">             :</span></em><em><span class="c011"><span class="c006">Picture</span></span></em><em><span class="c011"> ;              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Fails as a :PictureShape  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">width</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"21 in"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">height</span></span></em><em><span class="c011"> 30 .</span></em></td></tr>
</table></div></div><p><a id="hevea_default614"></a>
</p><div class="example"><div class="theorem"><span class="c013">Example 115</span>  <em>Language-tagged literals</em><p><a id="hevea_default615"></a><em> 
A common use case is to declare that some literals must be language-tagged strings. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CountryShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Country</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">langString</span></span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">italy</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Country</span></span></em><em><span class="c011"> ;               </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :CountryShape   </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Italia"</span></em></span></span></em><em><span class="c011"><span class="c006">@es</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">france</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Country</span></span></em><em><span class="c011"> ;              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :CountryShape  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"France"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div>
<!--TOC subsection id="sec144" Class of Values-->
<h3 class="subsection" id="sec144">5.9.2  Class of Values</h3><!--SEC END --><p>
<a id="ch5.sec9.2"></a></p><p><a id="hevea_default616"></a>
<a id="hevea_default617"></a>
<a id="hevea_default618"></a>
<a id="hevea_default619"></a>
<a id="hevea_default620"></a>

<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">class</span></code> specifies that each value is an instance of a given class. 
As in Section <a href="#ch050targetClass">5.7.2</a>, the notion of instance that SHACL uses is a variation of RDF Schema where a node X is an instance of C if 
<code><span class="c006">X</span></code><code> </code><code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code><code>/</code><code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">subClassOf</span></code><code>* </code><code><span class="c006">C</span></code>.</p><div class="example"><div class="theorem"><span class="c013">Example 116</span>  <em>Class of values</em><p><em>The following shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> declares that the values of property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">worksFor</span></em></code><em> must be SHACL instances of the </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Organization</span></em></code><em> class. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">class</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>Given the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                     </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">aCompany</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                     </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User      </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">aUniversity</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                     </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Unknown</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">aCompany</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">              :</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">aUniversity</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">              :</span></em><em><span class="c011"><span class="c006">University</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">University</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">subClassOf</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor verifies that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> conform to shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> and returns the following error:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> has the value </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Unknown</span></em></code><em> for property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">worksFor</span></em></code><em> which is not a SHACL instance of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Organization</span></em></code><em>.
</em></li></ul></div></div>
<!--TOC subsection id="sec145" Node Kinds-->
<h3 class="subsection" id="sec145">5.9.3  Node Kinds</h3><!--SEC END --><p> 
<a id="ch050NodeKinds"></a>
<a id="ch5.sec9.3"></a></p><p><a id="hevea_default621"></a>

<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">nodeKind</span></code> specifies the kind of values according to the RDF Data model. 
Table <a href="#ch050NodeKindsTable">5.7</a> contains the possible values for that property. </p><p><a id="hevea_default622"></a>
<a id="hevea_default623"></a>
<a id="hevea_default624"></a>
<a id="hevea_default625"></a>
<a id="hevea_default626"></a>
<a id="hevea_default627"></a>
</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.7: Node kinds</td></tr>
</table></div>
<a id="ch050NodeKindsTable"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c017"> <span class="c013">Nodekind</span></td><td class="c019"><span class="c013">Description 
</span></td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">IRI</span></code></td><td class="c019">Nodes must be IRIs
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">BlankNode</span></code></td><td class="c019">Nodes must be Blank nodes
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">Literal</span></code></td><td class="c019">Nodes must be Literals
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">BlankNodeOrLiteral</span></code></td><td class="c019">Nodes must be Blank nodes or literals
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">BlankNodeOrIRI</span></code></td><td class="c019">Nodes must be Blank nodes or IRIs
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">IRIOrLiteral</span></code></td><td class="c019">Nodes must be IRIs or literals
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><div class="example"><div class="theorem"><span class="c013">Example 117</span>  <em>Nodekind example</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Literal</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">BlankNodeOrIRI</span></span></em><em><span class="c011">
</span></em><em><span class="c011">  ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011">
</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>Given the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                               </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Dave"</span></em></span></span></em><em><span class="c011"> ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                               </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                               </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape    </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">follows</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Dave"</span></em></span></span></em><em><span class="c011">  .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> .                               </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:1 </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> .                                 </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape    </span></em></span></span></em></td></tr>
</table><p><em>A SHACL processor verifies that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> conform to shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> and returns the following errors:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> has a value that is not a literal for property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em>.</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> has a value that is not a blank node or IRI for property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">follows</span></em></code><em>.</em></li><li class="li-itemize"><em>
</em><code><em><span class="c006">_</span></em></code><code><em>:1</em></code><em> is not an IRI . 
</em></li></ul><p><em>
Note that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> pases as </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> because there are no cardinality restrictions on </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">follows</span></em></code><em>.</em></p></div></div>
<!--TOC subsection id="sec146" Sets of Values-->
<h3 class="subsection" id="sec146">5.9.4  Sets of Values</h3><!--SEC END --><p> 
<a id="ch050ValueSets"></a>
<a id="ch5.sec9.4"></a></p><p><a id="hevea_default628"></a>

<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">in</span></code> specifies that each value must be a member of the provided list.</p><div class="example"><div class="theorem"><span class="c013">Example 118</span>  <em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">in</span></em></code><em> example</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">in</span></span></em><em><span class="c011">   ( </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011"> )</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Given the following RDF graph: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">                  :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">affiliation</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">                  :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">male</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor verifies that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> conforms to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> and returns the following errors:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> has a value for </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">gender</span></em></code><em> that is not in the list </em><em>
</em><code><em>( </em></code><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Male</span></em></code><code><em> </em></code><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Female</span></em></code><code><em>)</em></code><em> because </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Male</span></em></code><em> is not equal to </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">male</span></em></code><em>.
</em></li></ul></div></div>
<!--TOC subsection id="sec147" Specific Value-->
<h3 class="subsection" id="sec147">5.9.5  Specific Value</h3><!--SEC END --><p> 
<a id="ch050HasValue"></a>
<a id="ch5.sec9.5"></a></p><p><a id="hevea_default629"></a>
<a id="hevea_default630"></a>

<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">hasValue</span></code> declares the value that a node must have . 
Notice that even if there is no 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">minCount</span></code> declared, this constraint checks that the property has that value (and possibly others).</p><div class="example"><div class="theorem"><span class="c013">Example 119</span>  <em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">hasValue</span></em></code><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">affiliation</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">hasValue</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Given the following RDF graph: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">affiliation</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">affiliation</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">OurUniversity</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> .                             </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">affiliation</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">affiliation</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">OurUniversity</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor verifies that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> conforms to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> and returns the following errors:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> does not have value </em><em>
</em><code><em>:</em></code><code><em><span class="c006">OurCompany</span></em></code><em> for property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">affiliation</span></em></code><em>; and 
</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> does not have value for property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">affiliation</span></em></code><em>. 
</em></li></ul></div></div><p><a id="hevea_default631"></a>
</p>
<!--TOC section id="sec148" Datatype Facets-->
<h2 class="section" id="sec148">5.10  Datatype Facets</h2><!--SEC END --><p> 
<a id="ch050Facets"></a>
<a id="ch5.sec10"></a></p><p><a id="hevea_default632"></a>
SHACL contains a list of built-in constraint components that resemble XML Schema facets and have the same semantics. </p>
<!--TOC subsection id="sec149" Value Ranges-->
<h3 class="subsection" id="sec149">5.10.1  Value Ranges</h3><!--SEC END --><p> 
<a id="ch050ValueRanges"></a>
<a id="ch5.sec10.1"></a></p><p><a id="hevea_default633"></a>
<a id="hevea_default634"></a>
<a id="hevea_default635"></a>
<a id="hevea_default636"></a>
The parameters 

<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">minInclusive</span></code>, 

<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">minExclusive</span></code>, 

<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">maxInclusive</span></code>, 

<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">maxExclusive</span></code> declare the minimum or maximum value of a literal with the variants to include or exclude the given value.</p><div class="example"><div class="theorem"><span class="c013">Example 120</span>  <em>Example with value ranges</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Rating</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetSubjectsOf</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ratingValue</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ratingValue</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minInclusive</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxInclusive</span></span></em><em><span class="c011"> 5 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">integer</span></span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>Given the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">low</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ratingValue</span></span></em><em><span class="c011"> 1 .    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Rating </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">average</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ratingValue</span></span></em><em><span class="c011"> 3 .    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Rating </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">veryGood</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ratingValue</span></span></em><em><span class="c011"> 5 .    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Rating </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">zero</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ratingValue</span></span></em><em><span class="c011"> 0 .    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Rating </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">incredible</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ratingValue</span></span></em><em><span class="c011"> 100 .  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Rating </span></em></span></span></em></td></tr>
</table><p><em>A SHACL processor verifies that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">low</span></em></code><em>, </em><em>
</em><code><em>:</em></code><code><em><span class="c006">average</span></em></code><em>, and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">veryGood</span></em></code><em> conform to shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Rating</span></em></code><em> and returns the errors:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">zero</span></em></code><em> has a value below the minimum </em><em>
</em><code><em>1</em></code><em>; and</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">incredible</span></em></code><em> has a value bigger than the maximum </em><em>
</em><code><em>5</em></code><em>.
</em></li></ul></div></div>
<!--TOC subsection id="sec150" String-based Constraints-->
<h3 class="subsection" id="sec150">5.10.2  String-based Constraints</h3><!--SEC END --><p> 
<a id="ch040Stringbased"></a>
<a id="ch5.sec10.2"></a></p><p><a id="hevea_default637"></a>
<a id="hevea_default638"></a>
<a id="hevea_default639"></a>
<a id="hevea_default640"></a>
<a id="hevea_default641"></a>
The parameters 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">minLength</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">maxLength</span></code>, 
and 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">pattern</span></code> (with 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">flags</span></code>) specify string facets on value nodes.
These constraints check the string representation of the value.<sup><a id="text34" href="#note34">21</a></sup> </p><p><a id="hevea_default642"></a>
String facets are always violated when the value node is a blank node.</p><p>
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">minLength</span></code> and 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">maxLength</span></code> specify constraints on the size of the string representation of a value node.
When 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">minLength</span></code> is 0, it means that there is no restriction on the length of the string.</p><div class="example"><div class="theorem"><span class="c013">Example 121</span>  <em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c003">minLength</span></em></code><em>, </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c003">maxLength</span></em></code><em> example</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">, </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Class</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minLength</span></span></em><em><span class="c011"> 4 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxLength</span></span></em><em><span class="c011"> 20 ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">description</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minLength</span></span></em><em><span class="c011"> 0 ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>The following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                          </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">description</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"...long description..."</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                          </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Bob"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                          </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Carol</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">strange</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                          </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">strange</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>verifies that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> conform to shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> and reports the errors:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> has a </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> whose length is less that 4; and </em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">strange</span></em></code><em> has a blank node as the value for property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> whose length can’t be calculated.</em></li></ul><p><em>In the case of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em>, notice that the example depends on the length of the prefixed name </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Carol</span></em></code><em> which will 
be calculated after concatenating the IRI associated with the empty prefix </em><em>
</em><code><em>:</em></code><em> to </em><em>
</em><code><em><span class="c006">Carol</span></em></code><em>. 
In this case, if </em><em>
</em><code><em>:</em></code><em> is associated with </em><em>
</em><code><em><span class="c006">http</span></em></code><code><em>://</em></code><code><em><span class="c006">example</span></em></code><code><em>.</em></code><code><em><span class="c004">org</span></em></code><code><em>/</em></code><em>, the processor will evaluate the length of </em><em>
</em><code><em><span class="c006">http</span></em></code><code><em>://</em></code><code><em><span class="c006">example</span></em></code><code><em>.</em></code><code><em><span class="c004">org</span></em></code><code><em>/</em></code><code><em><span class="c006">Carol</span></em></code><em> (which is 24) and fails because it is bigger than 20.</em></p></div></div><p><a id="hevea_default643"></a>
</p><div class="example"><div class="theorem"><span class="c013">Example 122</span>  <em>Example with pattern</em><p><a id="hevea_default644"></a><em>
</em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">pattern</span></em></code><em> specifies that a value must match a regular expression. 
It has the same definition as the SPARQL regex function.</em><sup><a id="text35" href="#note35"><em>22</em></a></sup><em> </em></p><p><a id="hevea_default645"></a><em>
</em><a id="hevea_default646"></a><em>
</em><a id="hevea_default647"></a><em>
The parameter </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">flags</span></em></code><em> is optional and can modify the way the regular expression matches. 
The definition of </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">flags</span></em></code><em> is the same as SPARQL and XPath regular expressions.
One of the most popular flags is </em><em>
</em><code><em><span class="c006">i</span></em></code><em> which indicates that the match is case-insensitive.</em></p><p><em>We already gave a short introduction to regular expressions in 
Section </em><a href="#RegularExpressions"><em>4.5.3</em></a><em>. 
Although that section was for ShEx, the concept is the same. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ProductShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">pattern</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"^P\\d{3,4}"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">flags</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"i"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>Given the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">car</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"P2345"</span></em></span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bus</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"p567"</span></em></span></span></em><em><span class="c011"> .  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">truck</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"P12"</span></em></span></span></em><em><span class="c011"> .   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Product </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bike</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"B123"</span></em></span></span></em><em><span class="c011"> .  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Product </span></em></span></span></em></td></tr>
</table><p><em>A SHACL processor verifies that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">car</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bus</span></em></code><em> conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Product</span></em></code><em> and returns the following errors:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">truck</span></em></code><em> has a value for </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">productID</span></em></code><em> that is too short; and </em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">bike</span></em></code><em> has a value for </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">productID</span></em></code><em> that does not start with </em><em>
</em><code><em><span class="c006">P</span></em></code><em> or </em><em>
</em><code><em><span class="c006">p</span></em></code><em>.</em></li></ul></div></div>
<!--TOC subsection id="sec151" Language-based Constraints-->
<h3 class="subsection" id="sec151">5.10.3  Language-based Constraints</h3><!--SEC END --><p> 
<a id="ch050LanguageBased"></a>
<a id="ch5.sec10.3"></a></p><p><a id="hevea_default648"></a>
<a id="hevea_default649"></a>

<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">languageIn</span></code> declares the allowed languages of a literal and 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">uniqueLang</span></code> specifies that no pair of nodes can have the same language tag.</p><div class="example"><div class="theorem"><span class="c013">Example 123</span>  <em>Example with </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">languageIn</span></em></code><p><em>The following example declares that the </em><em>
</em><code><em><span class="c004">rdfs</span></em></code><code><em>:</em></code><code><em><span class="c006">label</span></em></code><em> property of a product must be a tagged literal in Spanish, English, or French.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ProductShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">languageIn</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><span class="c005"><em><span class="c011">"es"</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"en"</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"fr"</span></em></span></span></em><em><span class="c011">)</span></em><em><span class="c011">
</span></em><em><span class="c011">] .</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p234</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :ProductShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"leche"</span></em></span></span></em><em><span class="c011"><span class="c006">@es</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">                 </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"milk"</span></em></span></span></em><em><span class="c011"><span class="c006">@en</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p235</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :ProductShape  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"ham"</span></em></span></span></em><em><span class="c011"><span class="c006">@en</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p236</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :ProductShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"tomaten"</span></em></span></span></em><em><span class="c011"><span class="c006">@de</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p237</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :ProductShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"patatas"</span></em></span></span></em><em><span class="c011"><span class="c006">@es</span></span></em><em><span class="c011"> ,</span></em><em><span class="c011">
</span></em><em><span class="c011">                 </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"kartofeln"</span></em></span></span></em><em><span class="c011"><span class="c006">@de</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div><div class="example"><div class="theorem"><span class="c013">Example 124</span>  <em>Example with </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">uniqueLang</span></em></code><em> </em><a id="ch050UniqueLang"></a><p><em>The following example declares that if the nodes of shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">CountryShape</span></em></code><em> have property </em><em>
</em><code><em><span class="c004">skos</span></em></code><code><em>:</em></code><code><em><span class="c006">prefLabel</span></em></code><em> then the values must have different language tags. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CountryShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Country</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">skos</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">prefLabel</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">uniqueLang</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011">
</span></em><em><span class="c011">] .</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">italy</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Country</span></span></em><em><span class="c011">;                </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :CountryShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">skos</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">prefLabel</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Italy"</span></em></span></span></em><em><span class="c011"><span class="c006">@en</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">                       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Italia"</span></em></span></span></em><em><span class="c011"><span class="c006">@es</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">france</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Country</span></span></em><em><span class="c011">;                </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :CountryShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">skos</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">prefLabel</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"France"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">                       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"France"</span></em></span></span></em><em><span class="c011"><span class="c006">@en</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">                       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Francia"</span></em></span></span></em><em><span class="c011"><span class="c006">@es</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">spain</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Country</span></span></em><em><span class="c011"> .               </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :CountryShape     </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">usa</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Country</span></span></em><em><span class="c011">;                </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :CountryShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">skos</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">prefLabel</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"USA"</span></em></span></span></em><em><span class="c011"><span class="c006">@en</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">                       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"United States"</span></em></span></span></em><em><span class="c011"><span class="c006">@en</span></span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>The previous example returns the error:</em></p><ul class="itemize"><li class="li-itemize"><em>Node </em><em>
</em><code><em>:</em></code><code><em><span class="c006">usa</span></em></code><em> has more than one language for English at property </em><em>
</em><code><em><span class="c004">skos</span></em></code><code><em>:</em></code><code><em><span class="c006">prefLabel</span></em></code><em>.
</em></li></ul></div></div><p>In the previous example, a node without 
<code><span class="c004">skos</span></code><code>:</code><code><span class="c006">prefLabel</span></code> (e.g., 
<code>:</code><code><span class="c006">spain</span></code>) also conforms to 
<code>:</code><code><span class="c006">CountryShape</span></code>.</p><div class="example"><div class="theorem"><span class="c013">Example 125</span>  <em>Example with one language tag in a list of languages</em><p><em>A typical situation is to require exactly one literal per language from a list of allowed languages. 
For example, declaring that nodes of shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">CountryShape</span></em></code><em> have at least one </em><em>
</em><code><em><span class="c004">skos</span></em></code><code><em>:</em></code><code><em><span class="c006">prefLabel</span></em></code><em> in English or Spanish.</em></p><p><a id="hevea_default650"></a><em>
</em><a id="hevea_default651"></a></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CountryShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Country</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">skos</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">prefLabel</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011">   1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">uniqueLang</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">languageIn</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><span class="c005"><em><span class="c011">"en"</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"es"</span></em></span></span></em><em><span class="c011">) ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">italy</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Country</span></span></em><em><span class="c011">;                </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :CountryShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">skos</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">prefLabel</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Italy"</span></em></span></span></em><em><span class="c011"><span class="c006">@en</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">                       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Italia"</span></em></span></span></em><em><span class="c011"><span class="c006">@es</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">france</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Country</span></span></em><em><span class="c011">;                </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :CountryShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">skos</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">prefLabel</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"France"</span></em></span></span></em><em><span class="c011"> ,</span></em><em><span class="c011">
</span></em><em><span class="c011">                       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"France"</span></em></span></span></em><em><span class="c011"><span class="c006">@en</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">                       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Francia"</span></em></span></span></em><em><span class="c011"><span class="c006">@es</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">spain</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Country</span></span></em><em><span class="c011"> .               </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :CountryShape     </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">usa</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Country</span></span></em><em><span class="c011">;                </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :CountryShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">skos</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">prefLabel</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"USA"</span></em></span></span></em><em><span class="c011"><span class="c006">@en</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">                       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"United States"</span></em></span></span></em><em><span class="c011"><span class="c006">@en</span></span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>In this case, </em><em>
</em><code><em>:</em></code><code><em><span class="c006">spain</span></em></code><em> fails because it has no </em><em>
</em><code><em><span class="c004">skos</span></em></code><code><em>:</em></code><code><em><span class="c006">prefLabel</span></em></code><em>, </em><em>
</em><code><em>:</em></code><code><em><span class="c006">france</span></em></code><em> fails because if has one value that is not in English or Spanish, and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">usa</span></em></code><em> fails because it has more than one value in English.</em></p></div></div>
<!--TOC section id="sec152" Logical Constraints: and, or, not, xone-->
<h2 class="section" id="sec152">5.11  Logical Constraints: and, or, not, xone</h2><!--SEC END --><p> 
<a id="ch050logicalConstraints"></a>
<a id="ch5.sec11"></a></p><p><a id="hevea_default652"></a>
<a id="hevea_default653"></a>
<a id="hevea_default654"></a>
<a id="hevea_default655"></a>
The operators 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">and</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">or</span></code>, 
<code><span class="c006">xone</span></code>, and 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">not</span></code> can be used to form complex constraints. </p><p><a id="hevea_default656"></a> 
Their semantics is described in Table <a href="#ch050.LogicalOperatorsSHACL">5.8</a>. 

<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">and</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">or</span></code>, and 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">not</span></code> have the traditional meaning of the corresponding Boolean operators while 

<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">xone</span></code> (<em>exactly one</em>) is similar to the exclusive-or when applied to two arguments.
When applied to more than 2 arguments, the former requires exactly one, 
while the latter requires an odd number of arguments to be satisfied.</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.8: SHACL logical operators</td></tr>
</table></div>
<a id="ch050.LogicalOperatorsSHACL"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c017"> <span class="c013">Operation</span></td><td class="c019"><span class="c013">Description 
</span></td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">and</span></code></td><td class="c019">
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">and</span></code><code> (</code><code><span class="c006">S1</span></code><code> ... </code><code><span class="c006">SN</span></code><code>)</code> specifies that each value node must conform to all the shapes 
<code><span class="c006">S1</span></code>…
<code><span class="c006">SN</span></code>.
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">or</span></code></td><td class="c019">
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">or</span></code><code> (</code><code><span class="c006">S1</span></code><code> ... </code><code><span class="c006">SN</span></code><code>)</code> specifies that each value node conforms to at least one of the shapes 
<code><span class="c006">S1</span></code>…
<code><span class="c006">SN</span></code>.
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">not</span></code></td><td class="c019">
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">not</span></code><code> </code><code><span class="c006">S</span></code> specifies that each value node must not conform to 
<code><span class="c006">S</span></code>. 
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">xone</span></code></td><td class="c019">
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">xone</span></code><code> (</code><code><span class="c006">S1</span></code><code> ... </code><code><span class="c006">SN</span></code><code>)</code> specifies that exactly one node conforms to one of the shapes 
<code><span class="c006">S1</span></code>…
<code><span class="c006">SN</span></code>.
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote>
<!--TOC subsection id="sec153" AND-->
<h3 class="subsection" id="sec153">5.11.1  AND</h3><!--SEC END --><p> 
<a id="ch050and"></a>
<a id="ch5.sec11.1"></a>
<a id="hevea_default657"></a></p><p>A node conforms to a shape containing the 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">and</span></code> operator if it conforms to all the shapes linked by it. </p><p>The following example declares a 
<code>:</code><code><span class="c006">User</span></code> shape as the conjunction of two property shapes. </p><div class="example"><div class="theorem"><span class="c013">Example 126</span>  <em>SHACL AND example</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">and</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">affiliation</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> )</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>The declaration of type </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">NodeShape</span></em></code><em> and the use of </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">property</span></em></code><em> is not required when we want to reference a property shape. The following code is equivalent to the previous example.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">and</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">affiliation</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> )</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">and</span></em></code><em> is a little redundant because by default, when we associate constraint components to a shape, 
the meaning is that all those constraints must conform, so there is an implicit conjunction. </em></p><p><em>For example, the previous shape and the following one have the same meaning. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">affiliation</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table></div></div><p>In case of complex expressions, using 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">and</span></code> may improve readability.
One example is using 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">and</span></code> to extend one shape with other constraints.</p><div class="example"><div class="theorem"><span class="c013">Example 127</span>  <em>Extending a shape with other constraints</em><em> 
</em><a id="ch050ExtendingShapesSHACL"></a><p><em>The following example declares a top-level shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em> whose nodes must have </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em>. 
The shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> extends </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em> adding a new constraint on the existing property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> and declaring the need of another property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">email</span></em></code><em>. 
Finally, the shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Student</span></em></code><em> extends </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> adding a new property 
</em><em>
</em><code><em>:</em></code><code><em><span class="c006">course</span></em></code><em>.</em><sup><a id="text36" href="#note36"><em>23</em></a></sup></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">, </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Class</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">, </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Class</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">and</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">   :</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011">
</span></em><em><span class="c011">   [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxLength</span></span></em><em><span class="c011"> 5</span></em><em><span class="c011">
</span></em><em><span class="c011">   ]</span></em><em><span class="c011">
</span></em><em><span class="c011">   [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011">  1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011">  1</span></em><em><span class="c011">
</span></em><em><span class="c011">   ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ) .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Student</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">, </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Class</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">and</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">   :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">
</span></em><em><span class="c011">   [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">      :</span></em><em><span class="c011"><span class="c006">course</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011">  1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ) .</span></em></td></tr>
</table><p><em>If we have the following RDF data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">            :</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> ; </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Person</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">              :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;   </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :User   </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert Smith"</span></em></span></span></em><em><span class="c011">;  </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># long name *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;bob@example.org&gt;</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">   :</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;    </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Person and :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;carol@example.org&gt;</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">            :</span></em><em><span class="c011"><span class="c006">Student</span></span></em><em><span class="c011">; </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Person,:User and Student</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Dave"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">email</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;carol@example.org&gt;</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">course</span></span></em><em><span class="c011">      :</span></em><em><span class="c011"><span class="c006">algebra</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div>
<!--TOC subsection id="sec154" OR-->
<h3 class="subsection" id="sec154">5.11.2  OR</h3><!--SEC END --><p> 
<a id="ch050or"></a>
<a id="ch5.sec11.2"></a></p><p><a id="hevea_default658"></a>
The parameter 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">or</span></code> declares a disjunction between several shapes. </p><div class="example"><div class="theorem"><span class="c013">Example 128</span>  <em>SHACL disjunction example</em><p><em>The following shape declares that nodes must either have property </em><em>
</em><code><em><span class="c004">foaf</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> or </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> (or both).</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">or</span></span></em><em><span class="c011"> ( [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">         ]</span></em><em><span class="c011">
</span></em><em><span class="c011">         [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">         ]</span></em><em><span class="c011">
</span></em><em><span class="c011">       )</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>Given the following data:
	
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> .  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011">;    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Dave"</span></em></span></span></em><em><span class="c011"> .  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User</span></em></span></span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em>, </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em>, and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> but returns an error on </em><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em>.</em></p></div></div><p>For this particular example, the use of 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">or</span></code> could be replaced by a SHACL property with 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">alternativePath</span></code>:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">UserShape</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">alternativePath</span></span><span class="c011"> (</span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011">)] ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">  ] .</span></td></tr>
</table><div class="example"><div class="theorem"><span class="c013">Example 129</span>  <em>Union of datatypes</em><p><em>A common use case of </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c003">or</span></em></code><em> is to declare the union of several datatypes.
The following example declares that products must have a </em><em>
</em><code><em><span class="c004">rdfs</span></em></code><code><em>:</em></code><code><em><span class="c006">label</span></em></code><em> which must be either a </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em> or a language tagged literal, and
must have a release date that must be either a </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">date</span></em></code><em>, or </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">gYear</span></em></code><em> or the string </em><em>
</em><code><em><span class="c005"><code><em>"unknown-past"</em></code></span></em></code><em> or </em><em>
</em><code><em><span class="c005"><code><em>"unknown-future"</em></code></span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ProductShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">or</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">          [</span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011">          [</span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">langString</span></span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011">     );</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">releaseDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">or</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">          [</span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011">          [</span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gYear</span></span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011">          [</span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">in</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><span class="c005"><em><span class="c011">"unknown-past"</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"unknown-future"</span></em></span></span></em><em><span class="c011">)]</span></em><em><span class="c011">
</span></em><em><span class="c011">     );</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ];</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>Given the following data:
	
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p1</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;                           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Laptop"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">releaseDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"1990"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gYear</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;                           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Car"</span></em></span></span></em><em><span class="c011"><span class="c006">@en</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">releaseDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"unknown-future"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p3</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;                           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">House</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">releaseDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"2020"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">integer</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">p1</span></em></code><em>, and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">p2</span></em></code><em> conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">ProductShape</span></em></code><em> but returns an error on </em><em>
</em><code><em>:</em></code><code><em><span class="c006">p3</span></em></code><em>.</em></p></div></div>
<!--TOC subsection id="sec155" Exactly One-->
<h3 class="subsection" id="sec155">5.11.3  Exactly One</h3><!--SEC END --><p> 
<a id="ch050xone"></a>
<a id="ch5.sec11.3"></a></p><p><a id="hevea_default659"></a>
<a id="hevea_default660"></a>
A node conforms to a shape containing the 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">xone</span></code> operator if it conforms to exactly one of the shapes linked by it.</p><p><a id="hevea_default661"></a>
The semantics of 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">xone</span></code> is different from 
<code><span class="c006">Exclusive</span></code><code> </code><code><span class="c003">OR</span></code> (XOR) when there are more than 2 arguments.
XOR is usually defined as requiring conformance of an odd number of arguments, while 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">xone</span></code> requires conformance of exactly one.</p><div class="example"><div class="theorem"><span class="c013">Example 130</span>  <em>SHACL Xone example</em><p><em>The following shape declares that nodes must have either </em><em>
</em><code><em><span class="c004">foaf</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> or </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> but not both.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">xone</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">   [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">     ]</span></em><em><span class="c011">
</span></em><em><span class="c011">   ]</span></em><em><span class="c011">
</span></em><em><span class="c011">   [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">     ]</span></em><em><span class="c011">
</span></em><em><span class="c011">   ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ) .</span></em></td></tr>
</table><p><em>Given the previous shape declaration and the following RDF graph: 
	
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User    </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Dave"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> but gives errors for </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em>.
</em></p></div></div><p>The 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">xone</span></code> constraint component only checks that exactly one of its arguments is satisfied. </p><p>When defining complex models, it must be used with caution as its behavior may not be the intended one.</p><div class="example"><div class="theorem"><span class="c013">Example 131</span>  <em>Exactly one on complex expressions</em><em> 
</em><a id="ch050exampleChoicesSHACL"></a><p><em>We want to declare that a user has either one name or a combination of one or more given names plus a family name, but not both. 
This example is the same as Example </em><a href="#ch040%3AexampleChoices"><em>55</em></a><em> in ShEx.
A first attempt to model it in SHACL would be:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">xone</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> ) .</span></em></td></tr>
</table><p><em>Note, however, that xone does not reject everything we might expect it to:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Bob"</span></em></span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">                    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Smith"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"King"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;               </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Dave"</span></em></span></span></em><em><span class="c011"> ;  </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># But it should fail  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"King"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>In the case of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> it passes although the intended meaning is that it should fail (it conforms to one of the branches 
but partially matches the other one). </em></p><p><em>The solution is to change the expression representing each alternative at the top-level excluding 
the other ones.
In which case, </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">xone</span></em></code><em> is not required and </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c003">or</span></em></code><em> is enough. 
Note that </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">maxCount</span></em></code><code><em> 0</em></code><em> plays the role of negation. </em></p><p><em>The SHACL code equivalent to Example </em><a href="#ch040%3AexampleChoices"><em>55</em></a><em> is:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">or</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 0</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 0</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 0;</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> ) .</span></em></td></tr>
</table><p><em>With this definition the node </em><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> would now fail as expected.
Note that this definition can become quite verbose for more complex expressions 
(see Section </em><a href="#ch060xoneAlternatives"><em>7.13</em></a><em> for a longer example).</em></p></div></div>
<!--TOC subsection id="sec156" Not-->
<h3 class="subsection" id="sec156">5.11.4  Not</h3><!--SEC END --><p> 
<a id="ch050not"></a>
<a id="ch5.sec11.4"></a></p><p>The parameter 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">not</span></code> specifies the condition that each node must not conform to a given shape.</p><div class="example"><div class="theorem"><span class="c013">Example 132</span>  <em>SHACL Not</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NotFoaf</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">not</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>	
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> .   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> .  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> .   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User </span></em></span></span></em></td></tr>
</table></div></div>
<!--TOC subsection id="sec157" Combining Logical Operators-->
<h3 class="subsection" id="sec157">5.11.5  Combining Logical Operators</h3><!--SEC END --><p>
<a id="ch5.sec11.5"></a></p><p>It is possible to combine the previous logical operators to form more complex expressions. </p><p><a id="hevea_default662"></a>
</p>
<!--TOC paragraph id="sec158" IF-THEN pattern-->
<h5 class="paragraph" id="sec158">IF-THEN pattern</h5><!--SEC END --><p> 
<a id="ch050IFTHENSHACL"></a>
A typical pattern is to emulate an IF-THEN. 
Remember that 
<code><span class="c006">IF</span></code><code> </code><code><span class="c006">x</span></code><code> </code><code><span class="c006">THEN</span></code><code> </code><code><span class="c006">y</span></code> is equivalent to 
<code>(</code><code><span class="c003">NOT</span></code><code> </code><code><span class="c006">x</span></code><code>) </code><code><span class="c003">OR</span></code><code> </code><code><span class="c006">y</span></code>.</p><div class="example"><div class="theorem"><span class="c013">Example 133</span>  <em>IF-THEN pattern in SHACL</em><em> </em><p><em>The following shape declares that all products must have a </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">productID</span></em></code><em> and if a product has </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Vehicle</span></em></code><em> then it must have the properties </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">vehicleEngine</span></em></code><em> and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">fuelType</span></em></code><em>. 
This example is the same as ShEx Example </em><a href="#ch040ShExIFTHEN"><em>83</em></a><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ProductShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1; </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">or</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">    [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">not</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">type</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">hasValue</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Vehicle</span></span></em><em><span class="c011">
</span></em><em><span class="c011">      ]]</span></em><em><span class="c011">
</span></em><em><span class="c011">    ]</span></em><em><span class="c011">
</span></em><em><span class="c011">    [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">vehicleEngine</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1; </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">      ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">fuelType</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1; </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">      ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ) .</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p1</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Book</span></span></em><em><span class="c011">;                   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :ProductShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"P1"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Vehicle</span></span></em><em><span class="c011"> ;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :ProductShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"P2"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">fuelType</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Gasoline"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">vehicleEngine</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"X2"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p3</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Vehicle</span></span></em><em><span class="c011"> ;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :ProductShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"P3"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">p1</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">p2</span></em></code><em> conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">ProductShape</span></em></code><em> but signals an error for </em><em>
</em><code><em>:</em></code><code><em><span class="c006">p3</span></em></code><em>.</em></p></div></div>
<!--TOC paragraph id="sec159" IF-THEN-ELSE pattern-->
<h5 class="paragraph" id="sec159">IF-THEN-ELSE pattern</h5><!--SEC END --><p> 
<a id="ch050IFTHENELSESHACL"></a></p><p>In the same way as before, an IF-THEN-ELSE can also be declared.
Remember that: 

<code><span class="c006">IF</span></code><code> </code><code><span class="c003">A</span></code><code> </code><code><span class="c006">THEN</span></code><code> </code><code><span class="c006">B</span></code><code> </code><code><span class="c006">ELSE</span></code><code> </code><code><span class="c006">C</span></code> is equivalent to 
<code><span class="c006">IF</span></code><code> </code><code><span class="c003">A</span></code><code> </code><code><span class="c006">THEN</span></code><code> </code><code><span class="c006">B</span></code><code> </code><code><span class="c006">AND</span></code><code> </code><code><span class="c006">IF</span></code><code> </code><code><span class="c003">NOT</span></code><code> </code><code><span class="c003">A</span></code><code> </code><code><span class="c006">THEN</span></code><code> </code><code><span class="c006">C</span></code></p><div class="example"><div class="theorem"><span class="c013">Example 134</span>  <em>IF-THEN-ELSE pattern in SHACL</em><em> </em><p><em>The following example declares that if a product has </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> with value </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">Vehicle</span></em></code><em> then it must have </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">vehicleEngine</span></em></code><em>
and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">fuelType</span></em></code><em>, else it must have </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">category</span></em></code><em> with a </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em> value. 
This example is equivalent to the ShEx example presented in 
Section </em><a href="#ch040ShExIFTHENELSE"><em>4.8.3</em></a><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">or</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">not</span></span></em><em><span class="c011">
</span></em><em><span class="c011">     [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">type</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">hasValue</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Vehicle</span></span></em><em><span class="c011">
</span></em><em><span class="c011">     ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">and</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">     [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">vehicleEngine</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">     ]</span></em><em><span class="c011">
</span></em><em><span class="c011">     [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">fuelType</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">     ]</span></em><em><span class="c011">
</span></em><em><span class="c011">   )</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> );</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">or</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">   [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">type</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">hasValue</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Vehicle</span></span></em><em><span class="c011">
</span></em><em><span class="c011">   ]</span></em><em><span class="c011">
</span></em><em><span class="c011">   [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">category</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">   ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> )</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>With the following data, nodes </em><em>
</em><code><em>:</em></code><code><em><span class="c006">kitt</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">c23</span></em></code><em> conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Product</span></em></code><em> each one passing one of the branches, while </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bad1</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bad2</span></em></code><em> do not conform.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">kitt</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Vehicle</span></span></em><em><span class="c011">;           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">vehicleEngine</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">x42</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">fuelType</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">electric</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">c23</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Computer</span></span></em><em><span class="c011"> ;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">category</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Laptop"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bad1</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Vehicle</span></span></em><em><span class="c011">;          </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">fuelType</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">electric</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bad2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Computer</span></span></em><em><span class="c011"> .         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Product</span></em></span></span></em></td></tr>
</table></div></div>
<!--TOC section id="sec160" Shape-based Constraints-->
<h2 class="section" id="sec160">5.12  Shape-based Constraints</h2><!--SEC END --><p> 
<a id="ch050shapeBasedConstraints"></a>
<a id="ch5.sec12"></a>
<a id="ch5.sec12.1"></a></p><p><a id="hevea_default663"></a>

<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">node</span></code> specifies that the value nodes conform to a given shape.</p><div class="example"><div class="theorem"><span class="c013">Example 135</span>  <em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">node</span></em></code><em> example</em><em> 
</em><a id="ch050NodeExample"></a><p><em>The following shapes graph declares that nodes of shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> have a property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">worksFor</span></em></code><em> whose values must conform to the shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Company</span></em></code><em> and that nodes of shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Company</span></em></code><em> have a property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> whose values are strings.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CompanyShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Consider the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">CompanyShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CompanyShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>This data would raise the following error: </em></p><ul class="itemize"><li class="li-itemize"><em>
</em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> does not conform to shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> because the value of property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">worksFor</span></em></code><em> does not conform to shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">CompanyShape</span></em></code><em>. 
The reason is that the value of property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> does not have datatype </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em>.
</em></li></ul></div></div><p><a id="hevea_default664"></a>

<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">property</span></code> specifies that the values conform to a given property shape. </p><p>Although in most of the previous examples 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">property</span></code> was pointing to blank nodes, 
it may be possible (and even recommended) to use IRIs for property shapes. </p><div class="example"><div class="theorem"><span class="c013">Example 136</span>  <em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">property</span></em></code><em> example</em><p><em>The following shapes graph declares that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> nodes have a name and work for something that also has a name. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">HasName</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">HasName</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">HasName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1 .</span></em></td></tr>
</table><p><em>Consider the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape   </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;                       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Another</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">OurCompany</span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"OurCompany"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Another</span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> 23 .</span></em></td></tr>
</table><p><em>A SHACL processor raises the error: </em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> does not conform to shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> because the value of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">worksFor</span></em></code><em> (</em><em>
</em><code><em>:</em></code><code><em><span class="c006">Another</span></em></code><em>) has 23 as </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> which does not have datatype </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em>.</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> does not conform to shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> because it does not have a name.</em></li></ul></div></div><p><a id="hevea_default665"></a> <a id="hevea_default666"></a>
</p>
<!--TOC subsection id="sec161" Shape References and Recursion-->
<h3 class="subsection" id="sec161">5.12.1  Shape References and Recursion</h3><!--SEC END --><p> 
<a id="050SHACLRecursion"></a>
<a id="ch5.sec12.2"></a></p><p>Declarations with shape references like 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">node</span></code> and 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">property</span></code> trigger validation of nodes with other shapes.
In Example <a href="#ch050NodeExample">135</a>, validating 
<code>:</code><code><span class="c006">alice</span></code> with 
<code>:</code><code><span class="c006">UserShape</span></code> shape, triggered validation of 
<code>:</code><code><span class="c006">OurCompany</span></code> with shape 
<code>:</code><code><span class="c006">Company</span></code>. 
This process can be problematic if there are some cyclic dependencies between shapes. </p><p><a id="hevea_default667"></a>
<a id="hevea_default668"></a>
<a id="hevea_default669"></a>
<a id="hevea_default670"></a>
<a id="hevea_default671"></a>
We will see other predicates that implicitly introduce shape references like the 
logical predicates 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">and</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">or</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">not</span></code>, and 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">xone</span></code> (see Section <a href="#ch050logicalConstraints">5.11</a>) 
and the qualified value shapes (see Section <a href="#ch050QualifiedValueShapes">5.12.2</a>).</p><div class="example"><div class="theorem"><span class="c013">Example 137</span>  <em>Simple cyclic data</em><p><em>Shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> represents nodes that have one </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> with </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em> value, 
an optional </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">birthDate</span></em></code><em> with value </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">date</span></em></code><em> and 
zero or more values of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> that conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>. </em></p><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 
</em><div class="center"><em>
<img src="CyclicModelSimple.png">
</em></div><em>

</em><a id="ch050.CylicModelSimple"></a><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 5.2: Example of cyclic model.</em></td></tr>
</table></div><em>
</em><div class="center"><hr class="c021"></div></blockquote><p><em>Given the following data, </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> while </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> do not conform. </em><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> fails because the value of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> is not a </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> fails because the value of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> does not conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"1995-06-03"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      23 .</span></em></td></tr>
</table><p><em>A direct representation of the cyclic model in SHACL could be the following:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;          </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># \color{red}{Undefined shapes graph} *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [                  </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># \color{red}{because :User refers to itself} *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011">    :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ].</span></em></td></tr>
</table><p><em>The behavior of a SHACl processor with </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> shape is undefined because it is recursive: 
</em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> is defined in terms of itself.
Validation with recursive shapes is undefined and it is left to processor implementations. 
Some processors may support it while others may produce an error.</em></p></div></div><p>Sometimes recursion appears indirectly when one shape refers to other shapes that refer to others, 
and eventually, one of the shapes refers to the first one. </p><div class="example"><div class="theorem"><span class="c013">Example 138</span>  <em>Cyclic data model with two shapes</em><p><em>Figure </em><a href="#ch050.RecursiveShapesDataModel"><em>138</em></a><em> contains a simple cyclic data model. </em></p><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 
</em><div class="center"><em>
<img src="RecursiveShapesSHACL.png">
</em></div><em>

</em><a id="ch050.RecursiveShapesDataModel"></a><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 5.3: Example of cyclic model with two shapes.</em></td></tr>
</table></div><em>
</em><div class="center"><hr class="c021"></div></blockquote><p><em>A direct representation of the data model could be the following SHACL shapes graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ; </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># \color{red}{Undefined shapes graph because :User and :Company} *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [         </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># \color{red}{refer to each other recursively} *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">legalName</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">employee</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ]  .</span></em></td></tr>
</table><p><em>The previous shapes are mutually recursive and again, the behavior of SHACL processors is undefined.</em></p></div></div>
<!--TOC paragraph id="sec162" Avoiding recursion using target declarations-->
<h5 class="paragraph" id="sec162">Avoiding recursion using target declarations</h5><!--SEC END --><p>Target declarations can be used to avoid recursion by directly selecting which nodes we want to validate.</p><div class="example"><div class="theorem"><span class="c013">Example 139</span>  <em>Simulating recursion with targetClass</em><p><em>We can require that every node has a discriminating </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> declaration and replace </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">node</span></em></code><em> 
by </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">class</span></em></code><em>, i.e., we declare that the values of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> are instances of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">class</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ].</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">                :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;             </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"1995-06-03"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">                :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;             </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">                :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;             </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;           </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Is it ok to pass? *) </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">                :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;             </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      23 .                </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># wrong value of schema:name *) </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">emily</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">                :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;             </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Emily"</span></em></span></span></em><em><span class="c011"> ;           </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># wrong value of schema:knows*) </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">frank</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor returns the following. </em></p><ul class="itemize"><li class="li-itemize"><em>It validates that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>.</em></li><li class="li-itemize"><em>It returns a violation for </em><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> because the value of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> is not a </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em>. </em></li><li class="li-itemize"><em>It also returns a violation for </em><em>
</em><code><em>:</em></code><code><em><span class="c006">emily</span></em></code><em> because the value of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> is not an instance of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>.</em></li><li class="li-itemize"><em>It does not return a violation for </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> because our only requirement is that the value of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> is an instance of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> is declared to be an instance of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> (although it does not validate).</em></li></ul></div></div><p>This approach has the advantage that it not only finds instances of class 
<code>:</code><code><span class="c006">User</span></code>, 
but also instances of subclasses of 
<code>:</code><code><span class="c006">User</span></code>. For example, if we declare:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">grace</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> :</span><span class="c011"><span class="c006">Teacher</span></span><span class="c011"> ;               </span><span class="c011"><span class="c008"><span class="c011">#Passes as a :User</span></span></span><span class="c011">
</span><span class="c011">       </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Grace"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">       </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">knows</span></span><span class="c011"> :</span><span class="c011"><span class="c006">heidi</span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">heidi</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> :</span><span class="c011"><span class="c006">Student</span></span><span class="c011"> ;               </span><span class="c011"><span class="c008"><span class="c011">#Passes as a :User</span></span></span><span class="c011">
</span><span class="c011">       </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Heidi"</span></span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">Student</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">subClassOf</span></span><span class="c011"> :</span><span class="c011"><span class="c006">User</span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">Teacher</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">subClassOf</span></span><span class="c011"> :</span><span class="c011"><span class="c006">User</span></span><span class="c011"> .</span></td></tr>
</table><p>The system would check that both 
<code>:</code><code><span class="c006">grace</span></code> and 
<code>:</code><code><span class="c006">heidi</span></code> conform to the 
<code>:</code><code><span class="c006">User</span></code> shape.</p><p>Being able to validate future subclasses of a given class may be helpful if there are some unexpected changes in the hierarchy. 
Nevertheless, it also has the problem of requiring a discriminating 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> declaration for every instance 
which may not always be possible. </p><p>Another possibility is to use other target declarations such as 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">targetSubjectsOf</span></code> or 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">targetObjectsOf</span></code>.</p><div class="example"><div class="theorem"><span class="c013">Example 140</span>  <em>Simulating indirect recursion with target declarations</em><p><em>In order to simulate the model from Figure </em><a href="#ch050.RecursiveShapesDataModel"><em>138</em></a><em> we can declare that the subjects of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">worksFor</span></em></code><em> conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> and the objects to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Company</span></em></code><em>; 
and the opposite for </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">employee</span></em></code><em>. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetSubjectsOf</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetObjectsOf</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">employee</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetSubjectsOf</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">employee</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetObjectsOf</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">legalName</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">employee</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;         </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">OneCompany</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> ;        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">OneCompany</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> 34 ;              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Something</span></span></em><em><span class="c011"> .  </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Wrong datatype for schema:name *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">OneCompany</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">legalName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"One"</span></em></span></span></em><em><span class="c011"> ; </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Company  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">employee</span></span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">                             :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">                             :</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Something</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011"> ;              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Company </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">legalName</span></span></em><em><span class="c011"> 0 .      </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Wrong datatype for schema:name *)</span></em></span></span></em></td></tr>
</table></div></div>
<!--TOC paragraph id="sec163" Simulating recursion with property paths-->
<h5 class="paragraph" id="sec163">Simulating recursion with property paths</h5><!--SEC END --><p> 
<a id="ch050RecursionPropertyPaths"></a></p><p><a id="hevea_default672"></a>
<a id="hevea_default673"></a>
<a id="hevea_default674"></a>
SHACL property paths can be used to simulate recursion in some cases. 
The idea is combining 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">zeroOrMorePath</span></code> with an auxiliary shape that defines the structure of the expected shape without recursion.
The recursion is implicitly defined by the property path.</p><div class="example"><div class="theorem"><span class="c013">Example 141</span>  <em>Simulating recursion with property paths</em><p><em>Example </em><a href="#ch050.CylicModelSimple"><em>137</em></a><em> can be defined without recursion as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">zeroOrMorePath</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">UserStructure</span></span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserStructure</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>Where </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserStructure</span></em></code><em> is a non-recursive auxiliary shape that defines the structure of nodes conforming to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>.
Figure </em><a href="#ch050.FigureRecursionSimpleModelPropertyPaths"><em>141</em></a><em> depicts the new model. </em></p><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 
</em><div class="center"><em>
<img src="CyclicModelPropertyPaths.png">
</em></div><em>

</em><a id="ch050.FigureRecursionSimpleModelPropertyPaths"></a><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 5.4: Simulating cyclic model with property paths.</em></td></tr>
</table></div><em>
</em><div class="center"><hr class="c021"></div></blockquote><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User       </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"1995-06-03"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> .          </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011"> .             </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># wrong value of schema:knows*) </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      23 .                </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">                                            </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># wrong value of schema:name *) </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">emily</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Emily"</span></em></span></span></em><em><span class="c011"> ;           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">frank</span></span></em><em><span class="c011"> .            </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># wrong value of schema:knows*) </span></em></span></span></em></td></tr>
</table><p><em>A SHACL processor returns the following. </em></p><ul class="itemize"><li class="li-itemize"><em>It checks that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>.</em></li><li class="li-itemize"><em>It returns violation errors for </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em>, </em><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">emily</span></em></code><em>. 
In this case, </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> fails to validate as expected.
</em></li></ul></div></div><p>Indirect recursion more tricky to simulate as it is difficult to determine the property path that can be used. </p><p><a id="hevea_default675"></a>
<a id="hevea_default676"></a>
</p><div class="example"><div class="theorem"><span class="c013">Example 142</span>  <em>Indirect recursion with property paths</em><p><em>Example </em><a href="#ch050.RecursiveShapesDataModel"><em>138</em></a><em> can also be simulated using a similar pattern. 
In this case, we use two non-recursive auxiliary shapes </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserStructure</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">CompanyStructure</span></em></code><em> 
that contain the plain properties. 
Shapes </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Company</span></em></code><em> refer to them and capture recursion with property paths. 
The dependency from </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Company</span></em></code><em> and back to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> is captured by 
the property path </em><em>
</em><code><em>(</em></code><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">worksFor</span></em></code><code><em>/</em></code><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">employee</span></em></code><code><em>)*</em></code><em> and similarly the other way around.</em></p><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 
</em><div class="center"><em>
<img src="CyclicModelMutualPropertyPaths.png">
</em></div><em>

</em><a id="ch050.FigureMutualRecursionPropertyPaths"></a><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 5.5: Simulating indirect recursion with property paths.</em></td></tr>
</table></div><em>
</em><div class="center"><hr class="c021"></div></blockquote><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">zeroOrMorePath</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">employee</span></span></em><em><span class="c011">) ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">UserStructure</span></span></em><em><span class="c011">
</span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">CompanyStructure</span></span></em><em><span class="c011">
</span></em><em><span class="c011"> ]  .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserStructure</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1; </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Company</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">zeroOrMorePath</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">employee</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011">) ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">CompanyStructure</span></span></em><em><span class="c011">
</span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">employee</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">UserStructure</span></span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CompanyStructure</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">legalName</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1; </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table></div></div><p>The previous solution does not scale well for more involved data models were cycles can appear by different means. 
As an exercise, the reader can try to simulate the cyclic data model depicted in 
Figure <a href="#ch040.CyclicModelExercise">67</a> 
or the WebIndex data model from Figure <a href="#SimplifiedModel">6.1</a>.</p><p><a id="hevea_default677"></a>
</p>
<!--TOC subsection id="sec164" Qualified Value Shapes-->
<h3 class="subsection" id="sec164">5.12.2  Qualified Value Shapes</h3><!--SEC END --><p> 
<a id="ch050QualifiedValueShapes"></a>
<a id="ch5.sec12.3"></a></p><p><a id="hevea_default678"></a>
<a id="hevea_default679"></a>
<a id="hevea_default680"></a>
Qualified value shapes declare that a specified number of nodes conform to some shape. 
The shape is declared by the 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">qualifiedValueShape</span></code> parameter and 
the parameters 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">qualifiedMinCount</span></code> and 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">qualifiedMaxCount</span></code> declare the minimum and maximum number of values of that shape.</p><p>A typical use case for qualified value shapes is to model repeated properties whose values must conform to different shapes. 
For example, a data model may contain the property 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">parent</span></code> to represent the biological parent of a person and may want to define that one of the values is male and the other is female.</p><div class="example"><div class="theorem"><span class="c013">Example 143</span>  <em>Qualified value shapes example</em><em> </em><a id="ch050QualifiedValueShapesExample"></a><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">                </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">qualifiedValueShape</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">isMale</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">hasValue</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011">
</span></em><em><span class="c011">     ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">qualifiedMinCount</span></span></em><em><span class="c011">   1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">qualifiedMaxCount</span></span></em><em><span class="c011">   1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">                </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">qualifiedValueShape</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">isFemale</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">hasValue</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011">
</span></em><em><span class="c011">     ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">qualifiedMinCount</span></span></em><em><span class="c011">   1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">qualifiedMaxCount</span></span></em><em><span class="c011">   1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ].</span></em></td></tr>
</table><p><em>Given the following example:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">             :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">;              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape   </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">             :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;             </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape   </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">isMale</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> [ :</span></em><em><span class="c011"><span class="c006">isMale</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> [ :</span></em><em><span class="c011"><span class="c006">isFemale</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011"> ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">isFemale</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">             :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">emily</span></span></em><em><span class="c011">, :</span></em><em><span class="c011"><span class="c006">frank</span></span></em><em><span class="c011"> .     </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># :emily does not have :isMale true *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">emily</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">            :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> .              </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">frank</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">isFemale</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gordon</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">             :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;            </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> [ :</span></em><em><span class="c011"><span class="c006">isMale</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011">] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> [ :</span></em><em><span class="c011"><span class="c006">isFemale</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011">] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">heidi</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em>, </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em>, and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">gordon</span></em></code><em> conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> but returns the following errors. </em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> does not conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> because the number of values that satisfy the qualified value shape that 
checks that a parent is male is 0.</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">emily</span></em></code><em> does not conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> because the number of values that satisfy the qualified value shapes that 
checks that a parent is male and the other is female is 0.</em></li></ul><p><em>
</em><code><em>:</em></code><code><em><span class="c006">gordon</span></em></code><em> conforms to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> but has three parents.
If we want to further constraint that the number of biological parents must be exactly two, we can add:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 2 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 2</span></em><em><span class="c011">
</span></em><em><span class="c011"> ].</span></em></td></tr>
</table></div></div><p>In the shapes graph of example <a href="#ch050QualifiedValueShapesExample">143</a>, there is no constraint the declares that the biological parents must not be male or female at the same time. Using the following data:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">oscar</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011">             :</span><span class="c011"><span class="c006">User</span></span><span class="c011"> ;           </span><span class="c011"><span class="c008"><span class="c011">#Passes as a :UserShape</span></span></span><span class="c011">
</span><span class="c011">       </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">parent</span></span><span class="c011"> :</span><span class="c011"><span class="c006">x</span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">x</span></span><span class="c011"> :</span><span class="c011"><span class="c006">isMale</span></span><span class="c011">   </span><span class="c011"><span class="c003">true</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">   :</span><span class="c011"><span class="c006">isFemale</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011"> .</span></td></tr>
</table><p>Node 
<code>:</code><code><span class="c006">oscar</span></code> conforms to 
<code>:</code><code><span class="c006">UserShape</span></code> which seems counter intuitive as it has a single parent that satisfies both being female and male at the same time. 
There are two solutions, 
the first one is to add the previous declaration that 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">minCount</span></code><code> 2</code> and 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">maxCount</span></code><code> 2</code> for property 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">parent</span></code>. In this way, 
<code>:</code><code><span class="c006">oscar</span></code> would not conform because it has only one parent. 
Another solution is to declare that the qualified value shapes are disjoint as follows.</p><p><a id="hevea_default681"></a>
<a id="hevea_default682"></a>
Qualified value shapes contain a Boolean optional parameter 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">qualifiedValueShapesDisjoint</span></code>. 
It it is true, then the value nodes must not conform to any of the sibling shapes.
The default value is false.</p><p>Using this parameter, we could add the constraint that nodes that satisfy the female constraint are disjoint from nodes that satisfy the male constraint in the case of biological parents.<sup><a id="text37" href="#note37">24</a></sup></p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">UserShape</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetClass</span></span><span class="c011"> :</span><span class="c011"><span class="c006">User</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011">                         </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">parent</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">qualifiedValueShape</span></span><span class="c011">          [</span><span class="c011">
</span><span class="c011">      </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011">     :</span><span class="c011"><span class="c006">isMale</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">      </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">hasValue</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011">
</span><span class="c011">    ] ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">qualifiedMinCount</span></span><span class="c011">            1 ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">qualifiedMaxCount</span></span><span class="c011">            1 ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">qualifiedValueShapesDisjoint</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011">
</span><span class="c011">  ];</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011">                         </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">parent</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">qualifiedValueShape</span></span><span class="c011">          [</span><span class="c011">
</span><span class="c011">      </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011">     :</span><span class="c011"><span class="c006">isFemale</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">      </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">hasValue</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011">
</span><span class="c011">     ] ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">qualifiedMinCount</span></span><span class="c011">            1 ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">qualifiedMaxCount</span></span><span class="c011">            1 ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">qualifiedValueShapesDisjoint</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011">
</span><span class="c011">  ].</span></td></tr>
</table><p><a id="hevea_default683"></a>
</p>
<!--TOC section id="sec165" Closed Shapes-->
<h2 class="section" id="sec165">5.13  Closed Shapes</h2><!--SEC END --><p> 
<a id="ch050Closed"></a>
<a id="ch5.sec13"></a></p><p><a id="hevea_default684"></a>

<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">closed</span></code> can be used to specify the condition that nodes do not have triples with properties different 
than the ones that have been explicitly enumerated as a value of 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">path</span></code> in any of the property shapes.</p><p>The value of 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">closed</span></code> is a Boolean that only has effect if it is true (it is assumed to be false if not specified).</p><p><a id="hevea_default685"></a>
The parameter 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">ignoredProperties</span></code> specifies a list of properties that are also permitted in addition to those 
enumerated by the value of 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">path</span></code> in property shapes.</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.9: Closed shapes</td></tr>
</table></div>
<a id="ch050ClosedShapesParameters"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c017"> <span class="c013">Parameter</span></td><td class="c019"><span class="c013">Description 
</span></td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">closed</span></code></td><td class="c019">Valid resources must only have values for properties that appear as values of 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">path</span></code> in property shapes. 
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">ignoredProperties</span></code></td><td class="c019">List of predicates that are also permitted in addition to those that are explicitly enumerated
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><div class="example"><div class="theorem"><span class="c013">Example 144</span>  <em>Closed shapes</em><p><em>The following example declares that nodes conforming to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> have only one property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em>, zero or more properties </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> and are allowed to have extra values for property </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">closed</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ignoredProperties</span></span></em><em><span class="c011"> ( </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">type</span></span></em><em><span class="c011"> );</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011"> ].</span></em></td></tr>
</table><p><em>Given the following data:
	
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">           :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#\Pass{:UserShape} *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">           :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">,       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#\Pass{:UserShape} *) </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">                   :</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">               :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">cookTime</span></span></em><em><span class="c011"> 23 .</span></em></td></tr>
</table><p><em>A SHACL processor will check that both </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> but will return the error:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> does not conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> because it has an extra property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">cookTime</span></em></code><em> which is not allowed.
</em></li></ul></div></div><p><a id="hevea_default686"></a>
<a id="hevea_default687"></a>
<a id="hevea_default688"></a>
<a id="hevea_default689"></a>
<a id="hevea_default690"></a>
<a id="hevea_default691"></a>
<a id="hevea_default692"></a>
<a id="hevea_default693"></a></p><p>Note that 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">closed</span></code> does not take into account SHACL property paths or constraints with 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">node</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">and</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">or</span></code> , etc.</p><div class="example"><div class="theorem"><span class="c013">Example 145</span>  <em>Closed only accounts for top-level predicates</em><p><em>The following shape does not allow any property except from </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em>. </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">closed</span></span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ignoredProperties</span></span></em><em><span class="c011"> ( </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">type</span></span></em><em><span class="c011"> );</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     [</span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">zeroOrOnePath</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ] .</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">   :</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :User </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">myCompany</span></span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>A SHACL processor:</em></p><ul class="itemize"><li class="li-itemize"><em>Checks that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> conforms to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>.</em></li><li class="li-itemize"><em>Fails for nodes </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> because they use properties </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">worksFor</span></em></code><em> in a closed shape.</em></li></ul><p><em>A solution is to add those predicates to the list of ignored properties:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">closed</span></span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ignoredProperties</span></span></em><em><span class="c011"> ( </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">type</span></span></em><em><span class="c011">
</span></em><em><span class="c011">                         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">
</span></em><em><span class="c011">                         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> );</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     [</span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">zeroOrOnePath</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">worksFor</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ] .</span></em></td></tr>
</table><p><em>An advice to use </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c003">closed</span></em></code><em> is to enumerate all relevant properties as direct values of </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">path</span></em></code><em>, or add them to the </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">ignoredProperties</span></em></code><em> list.</em></p></div></div><p><a id="hevea_default694"></a>
</p>
<!--TOC section id="sec166" Property Pair Constraints-->
<h2 class="section" id="sec166">5.14  Property Pair Constraints</h2><!--SEC END --><p> 
<a id="ch050propertyPairConstraints"></a>
<a id="ch5.sec14"></a></p><p>Property pair constraints specify conditions in relation to other properties. 
These constraint components can only be used in property shapes.
Table <a href="#ch050PropertyPairConstraintsParameters">5.10</a> lists the parameters that can be used 
to declare property pair constraints. 
All the predicates have a similar behavior, they 
compare pairs of values of the current and referenced property on the current focus node
and check the condition.</p><p><a id="hevea_default695"></a>
<a id="hevea_default696"></a>
<a id="hevea_default697"></a>
<a id="hevea_default698"></a>
</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.10: Property pair constraints</td></tr>
</table></div>
<a id="ch050PropertyPairConstraintsParameters"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c017"> <span class="c013">Operation</span></td><td class="c019"><span class="c013">Description 
</span></td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">equals</span></code></td><td class="c019">The sets of values from both properties at a given focus node must be equal
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">disjoint</span></code></td><td class="c019">The sets of values from both properties at a given focus node must be different
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">lessThan</span></code></td><td class="c019">Current values must be smaller than another property values
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">lessThanOrEquals</span></code></td><td class="c019">Current values must be smaller or equal than another property values
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><div class="example"><div class="theorem"><span class="c013">Example 146</span>  <em>Equality constraints example</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">equals</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">firstName</span></span></em><em><span class="c011">
</span></em><em><span class="c011">];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">disjoint</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">lastName</span></span></em><em><span class="c011">
</span></em><em><span class="c011">] .</span></em></td></tr>
</table><p><em>	
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">lastName</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Cooper"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">firstName</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Bob"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">lastName</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Smith"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">firstName</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">lastName</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">firstName</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> conforms to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> and returns the following errors.</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> has a different value for </em><em>
</em><code><em><span class="c004">foaf</span></em></code><code><em>:</em></code><code><em><span class="c006">firstName</span></em></code><em> and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">givenName</span></em></code><em>.</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> has the same value for </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">givenName</span></em></code><em> and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">lastName</span></em></code><em> when they should be different.
</em></li></ul></div></div><div class="example"><div class="theorem"><span class="c013">Example 147</span>  <em>Value comparison example</em><p><em>The following example declares a </em><em>
</em><code><em>:</em></code><code><em><span class="c006">ConcertShape</span></em></code><em> with three properties: </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">doorTime</span></em></code><em>, </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">startDate</span></em></code><em>, and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">endDate</span></em></code><em> whose values must have datatype </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">dateTime</span></em></code><em> and establishes the conditions that door time must be less or equals to start date, and start date must be before end date.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ConcertShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Concert</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">             </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">doorTime</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dateTime</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">lessThanOrEquals</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">startDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">             </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">startDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dateTime</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">lessThan</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">endDate</span></span></em><em><span class="c011">
</span></em><em><span class="c011">];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">endDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dateTime</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">] .</span></em></td></tr>
</table><p><em>Given the following data:
	
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">concert1</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Concert</span></span></em><em><span class="c011"> ;                  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :ConcertShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">doorTime</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"2017-04-20T20:00:00"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dateTime</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">startDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"2017-04-20T21:30:00"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dateTime</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">endDate</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"2017-04-20T23:00:00"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dateTime</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">concert2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Concert</span></span></em><em><span class="c011"> ;                  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :ConcertShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">doorTime</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"2018-04-20T20:00:00"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dateTime</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">startDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"2017-04-20T21:00:00"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dateTime</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">endDate</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"2017-04-20T21:00:00"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dateTime</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">concert1</span></em></code><em> conforms to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">ConcertShape</span></em></code><em> and reports the following.</em></p><ul class="itemize"><li class="li-itemize"><em>The value of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">doorTime</span></em></code><em> must be less than or equal to the value of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">startDate</span></em></code><em> in </em><em>
</em><code><em>:</em></code><code><em><span class="c006">concert2</span></em></code><em>.</em></li><li class="li-itemize"><em>The value of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">startDate</span></em></code><em> must be less than the value of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">endDate</span></em></code><em> in </em><em>
</em><code><em>:</em></code><code><em><span class="c006">concert2</span></em></code><em>.
</em></li></ul></div></div><p><a id="hevea_default699"></a>
</p>
<!--TOC section id="sec167" Non-validating SHACL Properties-->
<h2 class="section" id="sec167">5.15  Non-validating SHACL Properties</h2><!--SEC END --><p> 
<a id="ch050NonValidating"></a>
<a id="ch5.sec15"></a></p><p>SHACL introduces several properties that are not intended for validation and are ignored during the validation process. 
These properties are intended for documentation or declarative User Interface (form) building and are listed in 
Table <a href="#ch050NonValidatingProperties">5.11</a>.</p><p><a id="hevea_default700"></a>
<a id="hevea_default701"></a>
<a id="hevea_default702"></a>
<a id="hevea_default703"></a>
<a id="hevea_default704"></a>
</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.11: Property pair constraints</td></tr>
</table></div>
<a id="ch050NonValidatingProperties"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c017"> <span class="c013">Operation</span></td><td class="c019"><span class="c013">Description 
</span></td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">equals</span></code></td><td class="c019">The sets of values from both properties at a given focus node must be equal
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">disjoint</span></code></td><td class="c019">The sets of values from both properties at a given focus node must be different
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">lessThan</span></code></td><td class="c019">Current values must be smaller than another property values
</td></tr>
<tr><td class="c017"> 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">lessThanOrEquals</span></code></td><td class="c019">Current values must be smaller or equal than another property values
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><div class="example"><div class="theorem"><span class="c013">Example 148</span>  <em>Non-validating SHACL properties</em><em> 
</em><a id="ch050NonValidatingExample"></a><p><em>The following example declares a </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> with several property shapes.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"family Name"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">description</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Family name. In the U.S., the last name of an Person"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">order</span></span></em><em><span class="c011">       2 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">group</span></span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">nameGroup</span></span></em><em><span class="c011">
</span></em><em><span class="c011">] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Given name"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">description</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Given name. In the U.S., the first name of a Person"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">order</span></span></em><em><span class="c011">       1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">group</span></span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">nameGroup</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">streetAddress</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Street address"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">order</span></span></em><em><span class="c011">       5 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">group</span></span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">addressGroup</span></span></em><em><span class="c011">
</span></em><em><span class="c011">] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">addressCountry</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Country"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">defaultValue</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Spain"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">order</span></span></em><em><span class="c011">        6 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">group</span></span></em><em><span class="c011">        :</span></em><em><span class="c011"><span class="c006">addressGroup</span></span></em><em><span class="c011">
</span></em><em><span class="c011">] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nameGroup</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">PropertyGroup</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Name"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">addressGroup</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">PropertyGroup</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">              </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Address"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>An application could generate a web form like the 
one in Figure </em><a href="#ch050FormGenerated"><em>148</em></a><em>.
</em></p><blockquote class="figure"><div class="center"><hr class="c021"></div><em> 
</em><div class="center"><em>
<img src="SHACL_form.png">
</em></div><em>

</em><a id="ch050FormGenerated"></a><em>
</em><div class="caption"><table class="c002 cellpading0"><tr><td class="c018"><em>Figure 5.6: Possible form generated from a shapes graph.</em></td></tr>
</table></div><em>
</em><div class="center"><hr class="c021"></div></blockquote></div></div><p><a id="hevea_default705"></a>
</p>
<!--TOC section id="sec168" SHACL-SPARQL-->
<h2 class="section" id="sec168">5.16  SHACL-SPARQL</h2><!--SEC END --><p> 
<a id="ch050SHACLSPARQL"></a>
<a id="ch5.sec16"></a></p><p><a id="hevea_default706"></a>
<a id="hevea_default707"></a>
<a id="hevea_default708"></a>
The SHACL recommendation was divided in two parts: SHACL Core and SHACL-SPARQL. 
SHACL Core (which was discussed until now in this chapter) was designed so it could be implemented without the need of an underlying SPARQL processor.
It contains what was considered the most frequent constraint components. 
However, there will be use cases where some extra features will be necessary to express more complex constraints.
To that end, SHACL-SPARQL contains an extension mechanism that enables the definition of other constraints using SPARQL.</p><p>SHACL Core processors are not required to support SHACL-SPARQL.
However, SHACL-SPARQL processors must support SHACL Core.</p><p>A working group note has also proposed to define a similar extension mechanism using Javascript.<sup><a id="text38" href="#note38">25</a></sup></p>
<!--TOC subsection id="sec169" SPARQL Constraints-->
<h3 class="subsection" id="sec169">5.16.1  SPARQL Constraints</h3><!--SEC END --><p>
<a id="ch5.sec16.1"></a></p><p><a id="hevea_default709"></a>

<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">sparql</span></code> associates a shape with a SPARQL based constraint that declares the SPARQL query to evaluate. </p><p>SPARQL-based constraints are nodes of type 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">SPARQLConstraint</span></code> that can have the following properties. </p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default710"></a>
</p>
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">message</span></code>: A human-readable message explaining the cause of the violation.<p><a id="hevea_default711"></a>
<a id="hevea_default712"></a>
<a id="hevea_default713"></a>
<a id="hevea_default714"></a>
<a id="hevea_default715"></a>
<a id="hevea_default716"></a>
</p></li><li class="li-itemize">
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">select</span></code>: Contains a string with the SPARQL query. 
The SPARQL query can refer to a special variable <code>$this</code> which is bound to the focus node before executing the SPARQL query.
SHACL processors may also bind the variables <code>$shapesGraph</code> and <code>$currentShape</code> to the current shapes graph and shape.
In case of property shapes, the variable <code>$PATH</code> acts as a placeholder for the path used by the property shape.
A validation result (see section <a href="#ch050ValidationReport">5.5</a>) will be generated by each solution in the SPARQL query. <p><a id="hevea_default717"></a>
<a id="hevea_default718"></a>
<a id="hevea_default719"></a>
<a id="hevea_default720"></a>
<a id="hevea_default721"></a>
</p></li><li class="li-itemize">
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">prefixes</span></code>: Points to namespace prefix declarations. 
Prefix declarations are the values of the 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">declare</span></code> which are pairs of property values 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">prefix</span></code> and 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">namespace</span></code>. 
The first one is the prefix alias and the second one is the namespace, which must be a literal of type 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">anyURI</span></code>. </li></ul><p><a id="hevea_default722"></a>
</p><div class="example"><div class="theorem"><span class="c013">Example 149</span>  <em>SPARQL constraint example</em><p><em>The following shape declares that nodes conforming to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> have the constraint that </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> must be equal to the concatenation of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">givenName</span></em></code><em> and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">familyName</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">sparql</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">SPARQLConstraint</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">message</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"schema:name must equal schema:givenName+schema:familyName"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">prefixes</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">declare</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">                </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"schema"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">                </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">namespace</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"http://schema.org/"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">anyURI</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">        ]</span></em><em><span class="c011">
</span></em><em><span class="c011">   ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">select</span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c005"><em><span class="c011">""</span></em></span></span></em><em><span class="c011"><span class="c005"><em><span class="c011">"SELECT $this (schema:name AS ?path) (?name as ?value)</span></em><em><span class="c011">
</span></em><em><span class="c011">       WHERE {</span></em><em><span class="c011">
</span></em><em><span class="c011">         $this schema:name       ?name .</span></em><em><span class="c011">
</span></em><em><span class="c011">         $this schema:givenName  ?givenName .</span></em><em><span class="c011">
</span></em><em><span class="c011">         $this schema:familyName ?familyName .</span></em><em><span class="c011">
</span></em><em><span class="c011">         FILTER (!isLiteral(?value) ||</span></em><em><span class="c011">
</span></em><em><span class="c011">                 !isLiteral(?givenName) ||</span></em><em><span class="c011">
</span></em><em><span class="c011">                 !isLiteral(?familyName) ||</span></em><em><span class="c011">
</span></em><em><span class="c011">                 concat(str(?givenName), ' ', str(?familyName))!=?name</span></em><em><span class="c011">
</span></em><em><span class="c011">                )</span></em><em><span class="c011">
</span></em><em><span class="c011">    }"</span></em></span></span></em><em><span class="c011"><span class="c005"><em><span class="c011">""</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">                 :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;          </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Cooper"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice Cooper"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">                 :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;          </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Bob"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Smith"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert Smith"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> conforms to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> and returns the error: </em></p><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> does not conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> because values of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> must be equal to the concatenation of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">givenName</span></em></code><em> and </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">familyName</span></em></code><em>.
</em></li></ul></div></div><p><a id="hevea_default723"></a>
</p>
<!--TOC subsection id="sec170" SPARQL-based Constraint Components-->
<h3 class="subsection" id="sec170">5.16.2  SPARQL-based Constraint Components</h3><!--SEC END --><p>
<a id="ch5.sec16.2"></a>
<a id="ch050SHACLSPARQLCOMPONENTS"></a></p><p>SHACL-SPARQL also contains the possibility to declare reusable constraint components. 
Once defined, they can be used just like the other built-in SHACL Core components, without the need to write SPARQL. </p><p>SHACL constraint components are defined by declaring the list of parameters and associating them with validators. 
Those validators are usually declared in SPARQL, 
although there is a WG note for allowing Javascript-based validations (see section <a href="#ch050SHACLJS">5.20</a>).</p><p>The properties that can be used to define constraint components are the following. </p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default724"></a>
<a id="hevea_default725"></a>
<a id="hevea_default726"></a>
</p>
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">parameter</span></code> associates a parameter declaration with the constraint component. 
The declaration has a value for 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">path</span></code> that must be an IRI and may have a Boolean value for 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">optional</span></code> (if not present, it is assumed false by default).<p>The local name of the IRI associated by 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">path</span></code> will be taken as the local name for the parameter. For example, in the following parameter declaration:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">parameter</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011">     :</span><span class="c011"><span class="c006">listOfLength</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">optional</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">]</span></td></tr>
</table><p>The local name of the parameter is 
<code><span class="c006">listOfLength</span></code> and is used as a SPARQL (or Javascript) variable that is prebound to the component parameter value.</p><p><a id="hevea_default727"></a>
</p></li><li class="li-itemize">
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">labelTemplate</span></code> can be used to specify how the constraint will be rendered. 
The value is a string that can contain references to parameter names inside curly brackets. 
For example: 
<code><span class="c005"><code>"Checks the list has {?listOfLength} values"</code></span></code>.<p><a id="hevea_default728"></a>
</p></li><li class="li-itemize">
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">validator</span></code> associates a validator with the constraint component. 
In SHACL-SPARQL, there are two types of validators: SELECT-based and ASK-based. <p><a id="hevea_default729"></a>
<a id="hevea_default730"></a>
<a id="hevea_default731"></a>
SELECT-based validators are introduced by 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">nodeValidator</span></code> or 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">propertyValidator</span></code> 
(depending on whether they are declared for a node or a property shape). 
<a id="hevea_default732"></a>
<a id="hevea_default733"></a>
They have one value for the property 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">select</span></code> that is a string containing a SPARQL select query.
<a id="hevea_default734"></a>
<a id="hevea_default735"></a>
SHACL processors prebind the variable 
<code><span class="c006">$this</span></code> in the SELECT clause and the variable 
<code><span class="c006">$PATH</span></code> in case of property shapes.
Each solution of the SPARQL select query will be reported as a violation. </p><p><a id="hevea_default736"></a> 
<a id="hevea_default737"></a>
ASK-based validators are introduced by the property 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">validator</span></code> and are executed for each value node. 
If the result of the ASK query is true, then the value node conforms to the shape. 
Notice that ASK-based validators work in the opposite direction to SELECT-based ones. 
While SELECT-based validators return no results to indicate conformance, 
ASK-based validators return 
<code><span class="c003">true</span></code> to indicate conformance.</p></li></ul><p><a id="hevea_default738"></a>
</p><div class="example"><div class="theorem"><span class="c013">Example 150</span>  <em>SPARQL constraint component example</em><p><em>The following code declares a SPARQL constraint component that checks that an RDF list given as a value, has a fixed length.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">FixedListConstraintComponent</span></span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ConstraintComponent</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Fixed list constraint component"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parameter</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">size</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Size of list"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">description</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"The size of the list"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">labelTemplate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Size of values: \"{$size}\""</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">propertyValidator</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">SPARQLSelectValidator</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">message</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"{$PATH} must have length {?size}, not {?count}"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">prefixes</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">declare</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"rdf"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">namespace</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"http://www.w3.org/1999/02/22-rdf-syntax-ns#"</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">   ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">select</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">""</span></em></span></span></em><em><span class="c011"><span class="c005"><em><span class="c011">"</span></em><em><span class="c011">
</span></em><em><span class="c011">   SELECT $this ?value $count WHERE {</span></em><em><span class="c011">
</span></em><em><span class="c011">     $this $PATH ?value .</span></em><em><span class="c011">
</span></em><em><span class="c011">     { { SELECT $this ?value (COUNT(?member) AS ?count) $size WHERE {</span></em><em><span class="c011">
</span></em><em><span class="c011">          ?value rdf:rest*/rdf:first ?member</span></em><em><span class="c011">
</span></em><em><span class="c011">       } GROUP BY $this ?value $size</span></em><em><span class="c011">
</span></em><em><span class="c011">      }</span></em><em><span class="c011">
</span></em><em><span class="c011">     FILTER (!isBlank(?value) || ?count != $size)</span></em><em><span class="c011">
</span></em><em><span class="c011">    }</span></em><em><span class="c011">
</span></em><em><span class="c011">  }"</span></em></span></span></em><em><span class="c011"><span class="c005"><em><span class="c011">""</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"> ]</span></em></td></tr>
</table><p><em>A property shape can be declared as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">.:</span></em><em><span class="c011"><span class="c006">ProductShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">color</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">size</span></span></em><em><span class="c011"> 3 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>Given the following data: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p1</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Product </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">color</span></span></em><em><span class="c011"> (255 0 255) .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Product </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> ( :</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">y</span></span></em><em><span class="c011"> ) ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">color</span></span></em><em><span class="c011"> (255 0 210 345) .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p3</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Product  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">color</span></span></em><em><span class="c011"> 3 .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p4</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> .        </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Product  </span></em></span></span></em></td></tr>
</table><p><em>A SHACL processor would validate that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">p1</span></em></code><em> conforms to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Product</span></em></code><em> but would report the following errors. </em></p><ul class="itemize"><li class="li-itemize"><em>For </em><em>
</em><code><em>:</em></code><code><em><span class="c006">p2</span></em></code><em> the error message </em><em>
</em><code><em><span class="c005"><code><em>":color must have length 3, not 4"</em></code></span></em></code><em>.
</em></li><li class="li-itemize"><em>For </em><em>
</em><code><em>:</em></code><code><em><span class="c006">p3</span></em></code><em> the error message </em><em>
</em><code><em><span class="c005"><code><em>":color must have length 3, not 0"</em></code></span></em></code><em>.
</em></li><li class="li-itemize"><em>For </em><em>
</em><code><em>:</em></code><code><em><span class="c006">p4</span></em></code><em> the message that </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">minCount</span></em></code><em> failed because there are no values for property </em><em>
</em><code><em>:</em></code><code><em><span class="c006">color</span></em></code><em>.
</em></li></ul><p><em>Notice that the following example, although similar in effect, is not a valid shape definition:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ProductShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetObjectsOf</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">color</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">size</span></span></em><em><span class="c011">              3 .</span></em></td></tr>
</table><p><a id="hevea_default739"></a><em>
The reason is that a </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">nodeValidator</span></em></code><em> is not defined for the </em><em>
</em><code><em>:</em></code><code><em><span class="c006">FixedListConstraintComponent</span></em></code><em> and a SHACL-SPARQL processor does not know how to execute the </em><em>
</em><code><em>:</em></code><code><em><span class="c006">size</span></em></code><em> parameter in this context. 
A solution would be to define both a property and a node validator, or define one ASK-based validator.</em></p></div></div>
<!--TOC section id="sec171" SHACL and Inference Systems-->
<h2 class="section" id="sec171">5.17  SHACL and Inference Systems</h2><!--SEC END --><p>
<a id="ch050SHACLINFERENCE"></a>
<a id="ch5.sec17"></a></p><p><a id="hevea_default740"></a> 
<a id="hevea_default741"></a> 
<a id="hevea_default742"></a> 
<a id="hevea_default743"></a> 
SHACL uses some parts of the RDF Schema and OWL vocabularies, but full RDF Schema or OWL inference is not required.</p><p><a id="hevea_default744"></a> 
<a id="hevea_default745"></a> 
<a id="hevea_default746"></a>
SHACL processors may support different entailment regimes which are defined in the same way as for SPARQL. 
An entailment regime is identified by an IRI and defines the kind of inference a processor will do to the data graph. 
A shapes graph that contains a triple with predicate 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">entailment</span></code> and value 
<code><span class="c006">E</span></code> indicates that it requires entailment 
<code><span class="c006">E</span></code>. 
If a SHACL processor does not support entailment 
<code><span class="c006">E</span></code>, it will return an error.</p><p><a id="hevea_default747"></a>
Some values for the property 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">entailment</span></code> are described in 
Table <a href="#ch050.EntailmentRegimes">5.12</a>.</p><blockquote class="table"><div class="center"><hr class="c021"></div>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Table 5.12: Some entailment regimes</td></tr>
</table></div>
<a id="ch050.EntailmentRegimes"></a> 
<div class="center">
<table class="c000 cellpadding1" border=1><tr><td class="c017"> <span class="c013">IRI</span></td><td class="c017"><span class="c013">Name
</span></td></tr>
<tr><td class="c017"> 
<code><span class="c006">http</span></code><code>://</code><code><span class="c006">www</span></code><code>.</code><code><span class="c006">w3</span></code><code>.</code><code><span class="c004">org</span></code><code>/</code><code><span class="c006">ns</span></code><code>/</code><code><span class="c006">entailment</span></code><code>/</code><code><span class="c004">RDF</span></code></td><td class="c017">RDF 
</td></tr>
<tr><td class="c017"> 
<code><span class="c006">http</span></code><code>://</code><code><span class="c006">www</span></code><code>.</code><code><span class="c006">w3</span></code><code>.</code><code><span class="c004">org</span></code><code>/</code><code><span class="c006">ns</span></code><code>/</code><code><span class="c006">entailment</span></code><code>/</code><code><span class="c004">RDFS</span></code></td><td class="c017">RDF Schema  </td></tr>
<tr><td class="c017"> 
<code><span class="c006">http</span></code><code>://</code><code><span class="c006">www</span></code><code>.</code><code><span class="c006">w3</span></code><code>.</code><code><span class="c004">org</span></code><code>/</code><code><span class="c006">ns</span></code><code>/</code><code><span class="c006">entailment</span></code><code>/</code><code><span class="c004">OWL</span></code><code>-</code><code><span class="c006">Direct</span></code></td><td class="c017">OWL 2 direct semantics 
</td></tr>
</table>
</div>
<div class="center"><hr class="c021"></div></blockquote><div class="example"><div class="theorem"><span class="c013">Example 151</span>  <em>Example with entailment</em><p><em>The following shapes graph declares a </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Teacher</span></em></code><em> shape as someone that has property </em><em>
</em><code><em>:</em></code><code><em><span class="c006">teaches</span></em></code><em> with a value that is an instance of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Course</span></em></code><em> 
and has </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> with value </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em>.
It also requires RDF Schema entailment.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c008"><em><span class="c011">&lt;&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">entailment</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://www.w3.org/ns/entailment/RDFS&gt;</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">, </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Class</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">class</span></span></em><em><span class="c011">    :</span></em><em><span class="c011"><span class="c006">Course</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">type</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">qualifiedValueShape</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">hasValue</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">        :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011">,  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Teacher with RDFS entailment </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">                :</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> ;  </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Teacher without RDFS entailment </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">algebra</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">        :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> ; </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Teacher with RDFS entailment  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">logic</span></span></em><em><span class="c011">   . </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :Teacher without RDFS entailment</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">        :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> ; </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Teacher with RDFS entailment  </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">algebra</span></span></em><em><span class="c011"> . </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :Teacher without RDFS entailment</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">                           </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># It uses SHACL instances *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">algebra</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">      :</span></em><em><span class="c011"><span class="c006">Course</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">range</span></span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">Course</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">domain</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">subClassOf</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><ul class="itemize"><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> conforms to teacher with or without RDFS entailment, 
because it has </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><code><em> :</em></code><code><em><span class="c006">Person</span></em></code><em> and it </em><em>
</em><code><em>:</em></code><code><em><span class="c006">teaches</span></em></code><code><em> :</em></code><code><em><span class="c006">algebra</span></em></code><em>, and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">algebra</span></em></code><em> has </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><code><em> :</em></code><code><em><span class="c006">Course</span></em></code><em>. </em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> only conforms if RDF Schema entailment is performed, because it infers that it has </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><code><em> :</em></code><code><em><span class="c006">Person</span></em></code><em> and that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">logic</span></em></code><code><em> </em></code><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><code><em> :</em></code><code><em><span class="c006">Course</span></em></code><em>. Without RDF Schema entailment it fails.</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> conforms to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Teacher</span></em></code><em> even without RDF Schema entailment activated and even if it does not have </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><code><em> :</em></code><code><em><span class="c006">Person</span></em></code><em>. 
The reason is that it is a SHACL instance of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em> 
(see Section </em><a href="#ch050SHACLInstance"><em>5.7.2</em></a><em>). </em></li></ul></div></div><p><a id="hevea_default748"></a>
<a id="hevea_default749"></a>
<a id="hevea_default750"></a>
Although SHACL does not require inference, it has a special treatment for the properties 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">subClassOf</span></code>, 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> and 
<code><span class="c004">owl</span></code><code>:</code><code><span class="c006">imports</span></code>.</p><p><a id="hevea_default751"></a> 
</p>
<!--TOC section id="sec172" SHACL Compact Syntax-->
<h2 class="section" id="sec172">5.18  SHACL Compact Syntax</h2><!--SEC END --><p> 
<a id="ch050SHACLC"></a>
<a id="ch5.sec18"></a></p><p>A SHACL compact syntax has been suggested for a subset of SHACL inspired by ShEx compact syntax.<sup><a id="text39" href="#note39">26</a></sup> 
Although it was not published as a working group note, 
it is expected that further development will be done in the context of the W3C SHACL community group.</p><p>Given the temporary status, the following description may differ from the final compact syntax that is published. </p><div class="example"><div class="theorem"><span class="c013">Example 152</span>  <em>SHACL example using compact syntax</em><p><em>Example </em><a href="#ch050SHACLExample"><em>94</em></a><em> could be written in SHACL compact syntax as: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> -&gt; :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> [1..1] .</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">in</span></span></em><em><span class="c011"> = [</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011">] [1..1] .</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> [0..1] .</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table></div></div><p><a id="hevea_default752"></a>
<a id="hevea_default753"></a>
The operator 
<code>-&gt;</code> declares a 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">targetClass</span></code> and the dot operator 
<code>.</code> separates the different constraint components.</p><p><a id="hevea_default754"></a>
<a id="hevea_default755"></a>
</p>
<!--TOC section id="sec173" SHACL Rules and Advanced Features-->
<h2 class="section" id="sec173">5.19  SHACL Rules and Advanced Features</h2><!--SEC END --><p>
<a id="ch5.sec19"></a></p><p>The Data Shapes Working Group published a note called SHACL Advanced Features 
(<sup><a id="text40" href="#note40">27</a></sup>).
It defines the following language constructs. </p><ul class="itemize"><li class="li-itemize"><p><a id="hevea_default756"></a>
<a id="hevea_default757"></a>
</p><span class="c013">SPARQL-based targets</span> provide a vocabulary that extend the ways targets can be declared from SHACL Core. 
Two types of targets are defined: 
<a id="hevea_default758"></a>
(a) 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">SPARQLTarget</span></code> that provides a SPARQL query directly in the target 
definition; and, 
<a id="hevea_default759"></a>
(b) 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">SPARQLTargetType</span></code> that provides a mechanism similar to constraint components for parametrizable targets.<p><a id="hevea_default760"></a>
</p></li><li class="li-itemize"><span class="c013">Annotations properties</span> 
provide an injection mechanism where users can pass static or dynamic annotations from the shape definitions to the validation results. <p><a id="hevea_default761"></a>
<a id="hevea_default762"></a>
<a id="hevea_default763"></a>
<a id="hevea_default764"></a>
</p></li><li class="li-itemize"><span class="c013">Functions</span> provide a vocabulary to define SPARQL functions that can be reused in the SELECT or ASK based validators 
(see Section <a href="#ch050SHACLSPARQLCOMPONENTS">5.16.2</a>).<p><a id="hevea_default765"></a>
</p></li><li class="li-itemize"><span class="c013">Node expressions</span> a set of predefined functions that can be used to compute values from focus nodes, e.g., compute a display label for an IRI.<p><a id="hevea_default766"></a>
</p></li><li class="li-itemize"><span class="c013">Constraint expressions</span> extend the <em>node expressions</em> for validation purposes.<p><a id="hevea_default767"></a>
</p></li><li class="li-itemize"><span class="c013">Rules</span> provide a light-weight RDF inferencing mechanism based on SHACL shapes.
	
</li></ul><p>At the time of this writing, there are no implementation reports for the advanced SHACL features. 
We showcase the SPARQL-based targets and the SHACL rules with examples and point the reader to the working group note for further reference.</p><div class="example"><div class="theorem"><span class="c013">Example 153</span>  <em>SPARQL-based target declarations</em><p><em>The following shape declares a target that selects only instances of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Teacher</span></em></code><em> that teach algebra.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">AlgebraTeacher</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">target</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">SPARQLTarget</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">prefixes</span></span></em><em><span class="c011"> [  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">declare</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">":"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">                   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">namespace</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"http://example.org/"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">select</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">""</span></em></span></span></em><em><span class="c011"><span class="c005"><em><span class="c011">" SELECT ?this WHERE {</span></em><em><span class="c011">
</span></em><em><span class="c011">                    ?this a :Teacher .</span></em><em><span class="c011">
</span></em><em><span class="c011">                    ?this :teaches :Algebra .} "</span></em></span></span></em><em><span class="c011"><span class="c005"><em><span class="c011">""</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">field</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">hasValue</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Mathematics</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">        :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> ;      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :AlgebraTeacher </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">algebra</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">field</span></span></em><em><span class="c011">   :</span></em><em><span class="c011"><span class="c006">Mathematics</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">        :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> ;      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :AlgebraTeacher </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">algebra</span></span></em><em><span class="c011"> .      </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># No value for :field *) </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">        :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> ;      </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Ignored</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">logic</span></span></em><em><span class="c011">   .</span></em></td></tr>
</table><p><em>A SHACL processor with SPARQL-based target support checks that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> conforms to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">AlgebraTeacher</span></em></code><em> shape and signals the error. </em></p><ul class="itemize"><li class="li-itemize"><em>
</em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> does not have value </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Mathematics</span></em></code><em> for </em><em>
</em><code><em>:</em></code><code><em><span class="c006">field</span></em></code><em> property. 
	
</em></li><li class="li-itemize"><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> is ignored although it does not have </em><em>
</em><code><em>:</em></code><code><em><span class="c006">field</span></em></code><em> property, because it is not selected by the SPARQL target.
</em></li></ul></div></div><div class="example"><div class="theorem"><span class="c013">Example 154</span>  <em>SHACL rules example</em><p><em>The following shape defines a rule that states that users with a value for the property </em><em>
</em><code><em>:</em></code><code><em><span class="c006">teaches</span></em></code><em> are instances of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Teacher</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">rule</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">            </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">TripleRule</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">subject</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">this</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">predicate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">type</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">object</span></span></em><em><span class="c011">    :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">condition</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">        :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">algebra</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">        :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">teaches</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">logic</span></span></em><em><span class="c011">   .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">        :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      :</span></em><em><span class="c011"><span class="c006">attends</span></span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">algebra</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL rules engine will infer the following RDF triples:
</em><em>

</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">        :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">        :</span></em><em><span class="c011"><span class="c006">Teacher</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><ul class="itemize"><li class="li-itemize"><p><em>	</em></p><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em> does not get an inferred triple because it does not have a value for </em><em>
</em><code><em>:</em></code><code><em><span class="c006">teaches</span></em></code><em>. 
</em></li></ul><p><em>
	
</em></p></div></div><p><a id="hevea_default768"></a>
</p>
<!--TOC section id="sec174" SHACL Javascript-->
<h2 class="section" id="sec174">5.20  SHACL Javascript</h2><!--SEC END --><p> 
<a id="ch050SHACLJS"></a>
<a id="ch5.sec20"></a></p><p><a id="hevea_default769"></a>
<a id="hevea_default770"></a>
<a id="hevea_default771"></a>
<a id="hevea_default772"></a>
SHACL Javascript (SHACL-JS)<sup><a id="text41" href="#note41">28</a></sup> 
was published as a Working Group Note to enable the definition of constraint components in Javascript. 
It is also intended to express advanced features like custom targets, fuctions and rules in Javascript.</p><p>SHACL-JS is similar to SHACL-SPARQL but for Javascript instead of SPARQL. 
The basic idea is that shapes can point to JavaScript functions available at some URL that can be resolved from the Web. 
When shapes get evaluated, a SHACL-JS engine calls those functions and constructs validation results 
from the results obtained by these calls.
The Javascript code can access the RDF triples available in the data and shapes graphs through a Javascript API.</p><p>Note that at the time of this writing, there are no implementation reports 
for SHACL JS (the following code is speculative). </p><p><a id="hevea_default773"></a>
</p><div class="example"><div class="theorem"><span class="c013">Example 155</span>  <em>Javascript-based constraint example</em><em>
	
Assuming the following Javascript function is defined in </em><em>
</em><code><em><span class="c006">http</span></em></code><code><em>://</em></code><code><em><span class="c006">example</span></em></code><code><em>.</em></code><code><em><span class="c004">org</span></em></code><code><em>/</em></code><code><em><span class="c006">numberFunctions</span></em></code><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c006">function</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">isOddNumber</span></span></em><em><span class="c011">(</span></em><em><span class="c011"><span class="c006">$value</span></span></em><em><span class="c011">) {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">if</span></span></em><em><span class="c011">(</span></em><em><span class="c011"><span class="c006">$value</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">isLiteral</span></span></em><em><span class="c011">()) {</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">return</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">$value</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">lex</span></span></em><em><span class="c011"> </span></em></td></tr>
</table><p><em>and given the following shape: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"> 2 == 1
  } else { 
    return false;
  }
:</span></em><em><span class="c011"><span class="c006">VotingCommittee</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">VotingCommittee</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">numberOfVoters</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">js</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">JSConstraint</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">message</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Number of voters must be odd to avoid ties"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">jsLibrary</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">jsLibraryURL</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"http://example.org/numberFunctions"</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">jsFunctionName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"isOddNumber"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>With the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">JuryCommittee</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">VotingCommittee</span></span></em><em><span class="c011">; </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :VotingCommittee   </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">numberOfVoters</span></span></em><em><span class="c011"> 7 .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CityCommittee</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">VotingCommittee</span></span></em><em><span class="c011">; </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :VotingCommittee   </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">numberOfVoters</span></span></em><em><span class="c011"> 8 .</span></em></td></tr>
</table><p><em>A SHACL-JS processor:</em></p><ul class="itemize"><li class="li-itemize"><em>checks that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">JuryCommittee</span></em></code><em> conforms to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">VotimgCommittee</span></em></code><em>; and </em></li><li class="li-itemize"><em>returns a violation error for </em><em>
</em><code><em>:</em></code><code><em><span class="c006">CityCommittee</span></em></code><em> with the message </em><em>
</em><code><em><span class="c005"><code><em>"Number of voters must be odd to avoid ties."</em></code></span></em></code><em>
</em></li></ul></div></div>
<!--TOC section id="sec175" Summary-->
<h2 class="section" id="sec175">5.21  Summary</h2><!--SEC END --><p>
<a id="ch5.sec21"></a></p><ul class="itemize"><li class="li-itemize">SHACL is divided in two parts: SHACL Core and SHACL SPARQL.</li><li class="li-itemize">Shapes in SHACL contain the notion of target declarations which declare the sets of nodes that they apply.</li><li class="li-itemize">There are two types of shapes: node and property shapes.</li><li class="li-itemize">Shapes contain a list of parameters of constraint components.</li><li class="li-itemize">SHACL SPARQL allows users to define their own constraint components.</li><li class="li-itemize">Some SHACL extensions have already been proposed like SHACL rules and SHACL Javascript.</li></ul>
<!--TOC section id="sec176" Suggested Reading-->
<h2 class="section" id="sec176">5.22  Suggested Reading</h2><!--SEC END --><p>
<a id="ch5.sec22"></a></p><ul class="itemize"><li class="li-itemize"><a href="#SHACLSpec">Knublauch and Kontokostas</a>,<a href="#SHACLSpec">2017</a> [<a href="#SHACLSpec">52</a>]
</li><li class="li-itemize"><a href="#SHACLUseCases">Simon Steyskal and Karen Coyle</a>,<a href="#SHACLUseCases">2016</a> [<a href="#SHACLUseCases">91</a>]
</li><li class="li-itemize"><a href="#Cagle17">Cagle</a>,<a href="#Cagle17">2017</a> [<a href="#Cagle17">17</a>].
</li></ul>
<!--BEGIN NOTES chapter-->
<hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note14" href="#text14">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: https://www.w3.org/TR/shacl</div></dd><dt class="dt-thefootnotes"><a id="note15" href="#text15">2</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: https://www.w3.org/TR/shacl-af/</div></dd><dt class="dt-thefootnotes"><a id="note16" href="#text16">3</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: https://www.w3.org/TR/shacl-js/</div></dd><dt class="dt-thefootnotes"><a id="note17" href="#text17">4</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="https://www.w3.org/community/shacl/"><span class="c010">https://www.w3.org/community/shacl/</span></a></div></dd><dt class="dt-thefootnotes"><a id="note18" href="#text18">5</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="https://w3c.github.io/data-shapes/shacl-compact-syntax/"><span class="c010">https://w3c.github.io/data-shapes/shacl-compact-syntax/</span></a></div></dd><dt class="dt-thefootnotes"><a id="note19" href="#text19">6</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">The example differs in the avoidance of recursion for SHACL. See Section <a href="#050SHACLRecursion">5.12.1</a>.</div></dd><dt class="dt-thefootnotes"><a id="note20" href="#text20">7</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: https://github.com/TopQuadrant/shacl</div></dd><dt class="dt-thefootnotes"><a id="note21" href="#text21">8</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="http://shacl.org/playground/"><span class="c010">http://shacl.org/playground/</span></a></div></dd><dt class="dt-thefootnotes"><a id="note22" href="#text22">9</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: http://labra.github.io/shaclex/</div></dd><dt class="dt-thefootnotes"><a id="note23" href="#text23">10</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="http://shaclex.herokuapp.com/"><span class="c010">http://shaclex.herokuapp.com/</span></a></div></dd><dt class="dt-thefootnotes"><a id="note24" href="#text24">11</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: http://ns.inria.fr/sparql-template</div></dd><dt class="dt-thefootnotes"><a id="note25" href="#text25">12</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: http://corese.inria.fr/</div></dd><dt class="dt-thefootnotes"><a id="note26" href="#text26">13</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: http://www.netage.nl</div></dd><dt class="dt-thefootnotes"><a id="note27" href="#text27">14</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: https://github.com/linkeddata/shacl-check</div></dd><dt class="dt-thefootnotes"><a id="note28" href="#text28">15</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: http://aksw.org/Projects/RDFUnit.html</div></dd><dt class="dt-thefootnotes"><a id="note29" href="#text29">16</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="https://github.com/AKSW/RDFUnit/issues/62"><span class="c010">https://github.com/AKSW/RDFUnit/issues/62</span></a></div></dd><dt class="dt-thefootnotes"><a id="note30" href="#text30">17</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: https://github.com/pfps/shacl</div></dd><dt class="dt-thefootnotes"><a id="note31" href="#text31">18</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: http://labs.sparna.fr/eli-validator/</div></dd><dt class="dt-thefootnotes"><a id="note32" href="#text32">19</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: https://github.com/eclipse/rdf4j</div></dd><dt class="dt-thefootnotes"><a id="note33" href="#text33">20</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">This example is similar to ShEx Example <a href="#ch040SimpleDatatypes">35</a>.</div></dd><dt class="dt-thefootnotes"><a id="note34" href="#text34">21</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">Technically, it is the <em>lexical form</em> of literals or the <em>codepoint representation</em> of IRIs.</div></dd><dt class="dt-thefootnotes"><a id="note35" href="#text35">22</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: https://www.w3.org/TR/sparql11-query/#func-regex</div></dd><dt class="dt-thefootnotes"><a id="note36" href="#text36">23</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">This example is the same as Example <a href="#ch040ExtendingShapesShEx">75</a> for ShEx.</div></dd><dt class="dt-thefootnotes"><a id="note37" href="#text37">24</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">Notice that forcing this condition in general may not always be desirable in some contexts.</div></dd><dt class="dt-thefootnotes"><a id="note38" href="#text38">25</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="http://W3C.github.io/data-shapes/shacl-js/"><span class="c010">http://W3C.github.io/data-shapes/shacl-js/</span></a></div></dd><dt class="dt-thefootnotes"><a id="note39" href="#text39">26</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: http://W3C.github.io/data-shapes/shacl-compact-syntax/</div></dd><dt class="dt-thefootnotes"><a id="note40" href="#text40">27</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: https://www.w3.org/TR/shacl-af/</div></dd><dt class="dt-thefootnotes"><a id="note41" href="#text41">28</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: https://www.w3.org/TR/shacl-js/</div></dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec177" Applications-->
<h1 class="chapter" id="sec177">Chapter 6  Applications</h1><!--SEC END --><p>
<a id="ch6"></a>
<a id="ch060Applications"></a></p><p>In this chapter we describe several applications of RDF validation. 
We start with the WebIndex, a medium-size linked data portal that was 
one of the earliest applications of ShEx. 
We describe it using ShEx and SHACL so the reader can see how both formalisms can be applied to describe RDF data.</p><p>In Section <a href="#ch060FHIR">6.2</a>, we present the use of ShEx in HL7 FHIR, 
which was one of the main motivations for the development of ShEx.</p><p>Section <a href="#ch070SciGraph">6.3</a> describes Springer Nature SciGraph, 
a real-world application of SHACL. Section <a href="#ch070DBpedia">6.4</a>
talks about validation use cases that have emerged in the DBpedia project.</p><p>We end the chapter with two exercises:
the validation of ShEx files, encoded as RDF using ShEx itself 
(Section <a href="#ch070ShExForShEx">6.5</a>), 
and the validation of SHACL shapes graphs in RDF using SHACL 
(Section <a href="#ch070ShaclInShacl">6.6</a>). 
These exercises help us understand the expressiveness of both formalisms.</p>
<!--TOC section id="sec178" Describing a Linked Data Portal-->
<h2 class="section" id="sec178">6.1  Describing a Linked Data Portal</h2><!--SEC END --><p>
<a id="ch6.sec1"></a></p><p>Linked data portals have emerged as a way to publish data on the Web in accordance with principles that 
improve data reuse and integration. 
As discussed in Section <a href="#LinkedDataPrinciples">1.1</a>, linked data uses RDF 
to make statements that establish relationships between arbitrary things. 
In this section, we consider one of the earliest practical applications of ShEx, 
the description of a real linked data portal, the WebIndex, and its data model. 
Some contents of this section have been taken from this paper [<a href="#LabraValidatingDescribingDataPortalsArxivVersion2017">58</a>] where 
we also compare the performance of two early implementations of ShEx and SHACL.</p><p>The WebIndex is a multi-dimensional measure of the World Wide Web’s contribution to development and human rights globally. 
In its latest edition (from 2014), it covers 81 countries and incorporates indicators that assess several areas such as universal access; 
freedom and openness; relevant content; and empowerment. 
Its first version provided a data portal where the data was obtained by transforming raw observations and precomputed values from Excel sheets into RDF. 
The second version added an approach to validation and computation that resulted in a verifiable version of the index data.</p><p>The WebIndex data model is based on the RDF Data Cube vocabulary [<a href="#RDFDataCube">24</a>]
and reuses several vocabularies such as Organization ontology [<a href="#Organization14">83</a>] and 
Dublin Core [<a href="#DublinCore">10</a>]. </p><p>Figure <a href="#SimplifiedModel">6.1</a> shows the main concepts of the data model. 
The boxes represent the different shapes of nodes that are published in the data portal.</p><blockquote class="figure"><div class="center"><hr class="c021"></div> 
<div class="center">
<img src="wiModel.png">
</div>

<a id="SimplifiedModel"></a>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Figure 6.1: Simplified WebIndex data model.</td></tr>
</table></div>
<div class="center"><hr class="c021"></div></blockquote><p>The main concept is an observation of type 
<code><span class="c004">wf</span></code><code>:</code><code><span class="c006">Observation</span></code> which has a float value 
<code><span class="c004">cex</span></code><code>:</code><code><span class="c006">value</span></code> for a given indicator, as well as the country, year, and dataset. 
Observations can be raw observations, which are obtained from an external source, or computed observations, 
which are obtained from other observations by computational processes. </p><p>A dataset contains a number of slices, each of which also contains a number of observations. 
Indicators are provided by an organization of type 
<code><span class="c004">org</span></code><code>:</code><code><span class="c006">Organization</span></code>, which is based on the Organization ontology. </p><p>Datasets are also published by organizations. </p><p>A sample from the DITU dataset provided by ITU (International Telecommunication Union) states 
that, in 2011, Spain had a value of 23.78 for the TU-B (<em>Broadband subscribers per 100 population</em>) indicator. 
This information is represented in Turtle as:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">obs8165</span></span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011">, </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"ITU B in ESP"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">:</span><span class="c011"><span class="c006">issued</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"2013-05-30T09:15:00"</span></span></span><span class="c011">^^</span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">dateTime</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">indicator</span></span><span class="c011">   :</span><span class="c011"><span class="c006">ITU_B</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">dataSet</span></span><span class="c011">      :</span><span class="c011"><span class="c006">DITU</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">value</span></span><span class="c011">       </span><span class="c011"><span class="c005"><span class="c011">"23.78"</span></span></span><span class="c011">^^</span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">float</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">ref</span></span><span class="c011">-</span><span class="c011"><span class="c006">area</span></span><span class="c011">    :</span><span class="c011"><span class="c006">Spain</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">ref</span></span><span class="c011">-</span><span class="c011"><span class="c006">year</span></span><span class="c011">    </span><span class="c011"><span class="c005"><span class="c011">"2011"</span></span></span><span class="c011">^^</span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">gYear</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">computation</span></span><span class="c011"> :</span><span class="c011"><span class="c006">comp234</span></span><span class="c011"> .</span></td></tr>
</table><p>Data following the WebIndex data model is richly interrelated.
Observations are linked to indicators and to datasets. 
Datasets contain links to slices. Slices have links both to indicators and back to observations.
Both datasets and indicators are linked to the organizations by which they are published or made available.
Such links are illustrated in the following example:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">DITU</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011">        </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">DataSet</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">structure</span></span><span class="c011">  </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">DSD</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011">    </span><span class="c011"><span class="c005"><span class="c011">"ITU Dataset"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">:</span><span class="c011"><span class="c006">publisher</span></span><span class="c011"> :</span><span class="c011"><span class="c006">ITU</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">slice</span></span><span class="c011">      :</span><span class="c011"><span class="c006">ITU09B</span></span><span class="c011"> ,</span><span class="c011">
</span><span class="c011">               :</span><span class="c011"><span class="c006">ITU10B</span></span><span class="c011">,</span><span class="c011">
</span><span class="c011">               ...</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">ITU09B</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011">          </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">Slice</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">sliceStructure</span></span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">sliceByArea</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">observation</span></span><span class="c011">    :</span><span class="c011"><span class="c006">obs8165</span></span><span class="c011">,</span><span class="c011">
</span><span class="c011">                   :</span><span class="c011"><span class="c006">obs8166</span></span><span class="c011">,</span><span class="c011">
</span><span class="c011">                   ...</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">ITU</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011">         </span><span class="c011"><span class="c004">org</span></span><span class="c011">:</span><span class="c011"><span class="c006">Organization</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011">    </span><span class="c011"><span class="c005"><span class="c011">"ITU"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">homepage</span></span><span class="c011"> </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.itu.int/&gt;</span></span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">Spain</span></span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">iso2</span></span><span class="c011">    </span><span class="c011"><span class="c005"><span class="c011">"ES"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Spain"</span></span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">ITU_B</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011">     </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">SecondaryIndicator</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011">  </span><span class="c011"><span class="c005"><span class="c011">"Broadband subscribers percent"</span></span></span><span class="c011">;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">provider</span></span><span class="c011"> :</span><span class="c011"><span class="c006">ITU</span></span><span class="c011"> .</span></td></tr>
</table><p>For verification, the WebIndex data model includes a representation of computations that declare how each observation has been obtained, either from a raw dataset or computed from the observations of other datasets. 
The structure of computation descriptions, presented in [<a href="#LabraMTSR14">56</a>], is omitted here for simplicity.</p><p>In the next section we formally define the structure of this simplified WebIndex data model using ShEx 
and review the main differences with the original.</p>
<!--TOC subsection id="sec179" WebIndex in ShEx-->
<h3 class="subsection" id="sec179">6.1.1  WebIndex in ShEx</h3><!--SEC END --><p> 
<a id="ch070WebIndexShEx"></a>
<a id="ch6.sec1.1"></a></p><p>The following declaration indicates that a valid 
<code>:</code><code><span class="c006">Country</span></code> shape must have exactly one

<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">label</span></code> and exactly one 
<code><span class="c004">wf</span></code><code>:</code><code><span class="c006">iso2</span></code> both of which must be literals 
of type 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code>. In the case of 
<code><span class="c004">wf</span></code><code>:</code><code><span class="c006">iso2</span></code> it must also have length 2.</p><p><a id="ShExCountry"></a>


</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Country</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">iso2</span></span><span class="c011">    </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> </span><span class="c011"><span class="c003">LENGTH</span></span><span class="c011"> 2</span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>In this example, we deliberately omitted the requirement for a 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> declaration.
This means that, in order to satisfy the 
<code>:</code><code><span class="c006">Country</span></code> shape, 
a node need only have the properties that have been specified and may or may not include 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> declarations.</p><p>By default, shape definitions are <em>open</em>
meaning that additional triples with different predicates may be present,
so nodes of shape 
<code>:</code><code><span class="c006">Country</span></code> could have other properties beyond those
prescribed by the shape.</p><p>The shape of datasets is described as follows:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">DataSet</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011">   [ </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">DataSet</span></span><span class="c011"> ],</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">structure</span></span><span class="c011">  [ </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">DSD</span></span><span class="c011"> ],</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011">    </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ?,</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">slice</span></span><span class="c011">      </span><span class="c011"><span class="c006">@</span></span><span class="c011">:</span><span class="c011"><span class="c006">Slice</span></span><span class="c011"> +,</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">:</span><span class="c011"><span class="c006">publisher</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011">:</span><span class="c011"><span class="c006">Organization</span></span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>This says that nodes conforming to 
<code>:</code><code><span class="c006">DataSet</span></code> shape must have 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> with value 
<code><span class="c004">qb</span></code><code>:</code><code><span class="c006">DataSet</span></code>,
a 
<code><span class="c004">qb</span></code><code>:</code><code><span class="c006">structure</span></code> of 
<code><span class="c004">wf</span></code><code>:</code><code><span class="c006">DSD</span></code>, 
an optional 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">label</span></code>
of type 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code>, 
one or more 
<code><span class="c004">qb</span></code><code>:</code><code><span class="c006">slice</span></code> predicates whose object is the subject of a set of triples 
matching the 
<code>:</code><code><span class="c006">Slice</span></code> shape definition and exactly one 
<code><span class="c004">dct</span></code><code>:</code><code><span class="c006">publisher</span></code>, 
whose object is the subject of a set of triples matching the 
<code>:</code><code><span class="c006">Organization</span></code> shape.</p><p>The 
<code>:</code><code><span class="c006">Slice</span></code> shape is defined in a similar fashion:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Slice</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011">         [ </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">Slice</span></span><span class="c011"> ],</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">sliceStructure</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">sliceByYear</span></span><span class="c011"> ],</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">observation</span></span><span class="c011">    </span><span class="c011"><span class="c006">@</span></span><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011">+,</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">indicator</span></span><span class="c011">     </span><span class="c011"><span class="c006">@</span></span><span class="c011">:</span><span class="c011"><span class="c006">Indicator</span></span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>The 
<code>:</code><code><span class="c006">Observation</span></code> shape in the WebIndex data model has two 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> declarations, which indicate that 
they must be instances of both the RDF Data Cube class of Observation (
<code><span class="c004">qb</span></code><code>:</code><code><span class="c006">Observation</span></code>) and the

<code><span class="c004">wf</span></code><code>:</code><code><span class="c006">Observation</span></code> class from the Web Foundation ontology.
The property 
<code><span class="c004">dct</span></code><code>:</code><code><span class="c006">publisher</span></code> is optional, but if it appears, it must have value 
<code><span class="c004">wf</span></code><code>:</code><code><span class="c006">WebFoundation</span></code>.</p><p>Values conforming to 
<code>:</code><code><span class="c006">Observation</span></code> shape can either have a 
<code><span class="c004">wf</span></code><code>:</code><code><span class="c006">source</span></code> property of type 
<code><span class="c003">IRI</span></code> (which, in this context, is used to indicate that it is a raw observation that has been taken from the source represented by the IRI), 
or a 
<code><span class="c004">cex</span></code><code>:</code><code><span class="c006">computation</span></code> property whose value conforms to the 
<code>:</code><code><span class="c006">Computation</span></code> shape.</p><p>It should be noted that shapes do not define the semantics of an RDF graph. 
While the designers of the WebIndex dataset model have determined that a raw observation would be indicated using the 
<code><span class="c004">wf</span></code><code>:</code><code><span class="c006">source</span></code> predicate and with the object 
<code><span class="c003">IRI</span></code> referencing the original source, 
ShEx simply states that, in order for a subject to satisfy the 
<code>:</code><code><span class="c006">Observation</span></code>, it must include either a 
<code><span class="c004">wf</span></code><code>:</code><code><span class="c006">source</span></code> or a 
<code><span class="c004">cex</span></code><code>:</code><code><span class="c006">computation</span></code> predicate, period. 
Meaning must be found elsewhere.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011">                 [ </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011"> ],</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011">                 [ </span><span class="c011"><span class="c006">wi</span></span><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011"> ],</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">value</span></span><span class="c011">         </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">float</span></span><span class="c011">,</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">:</span><span class="c011"><span class="c006">issued</span></span><span class="c011">        </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">dateTime</span></span><span class="c011">,</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">:</span><span class="c011"><span class="c006">publisher</span></span><span class="c011">     [</span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">WebFoundation</span></span><span class="c011">]?,</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">dataSet</span></span><span class="c011">        </span><span class="c011"><span class="c006">@</span></span><span class="c011">:</span><span class="c011"><span class="c006">DataSet</span></span><span class="c011">,</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">ref</span></span><span class="c011">-</span><span class="c011"><span class="c006">area</span></span><span class="c011">      </span><span class="c011"><span class="c006">@</span></span><span class="c011">:</span><span class="c011"><span class="c006">Country</span></span><span class="c011">,</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">indicator</span></span><span class="c011">     </span><span class="c011"><span class="c006">@</span></span><span class="c011">:</span><span class="c011"><span class="c006">Indicator</span></span><span class="c011">,</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">ref</span></span><span class="c011">-</span><span class="c011"><span class="c006">year</span></span><span class="c011">      </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">gYear</span></span><span class="c011">,</span><span class="c011">
</span><span class="c011"> ( </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">source</span></span><span class="c011">       </span><span class="c011"><span class="c003">IRI</span></span><span class="c011">
</span><span class="c011"> | </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">computation</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011">:</span><span class="c011"><span class="c006">Computation</span></span><span class="c011">
</span><span class="c011"> )</span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>A computation is represented as a node with type 
<code><span class="c004">cex</span></code><code>:</code><code><span class="c006">Computation</span></code>.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Computation</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">Computation</span></span><span class="c011"> ]</span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>The type of indicators must be either 
<code><span class="c004">wf</span></code><code>:</code><code><span class="c006">PrimaryIndicator</span></code> or 

<code><span class="c004">wf</span></code><code>:</code><code><span class="c006">SecondaryIndicator</span></code>. 
They must also contain the property 
<code><span class="c004">wf</span></code><code>:</code><code><span class="c006">provider</span></code> with a value conforming to shape 
<code>:</code><code><span class="c006">Organization</span></code>.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Indicator</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011">           [ </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">PrimaryIndicator</span></span><span class="c011">
</span><span class="c011">               </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">SecondaryIndicator</span></span><span class="c011">
</span><span class="c011">             ],</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">provider</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011">:</span><span class="c011"><span class="c006">Organization</span></span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>In the case of organizations, we declare these as closed shapes using the 
<code><span class="c003">CLOSED</span></code> modifier and only allow the properties 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">label</span></code>, 
<code><span class="c004">foaf</span></code><code>:</code><code><span class="c006">homepage</span></code> and 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code>, which must have the value 
<code><span class="c004">org</span></code><code>:</code><code><span class="c006">Organization</span></code>.
The 
<code><span class="c003">EXTRA</span></code> modifier is used to declare that we allow other values for the 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> property (using the Turtle keyword 
<code><span class="c003">a</span></code>).</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Organization</span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> </span><span class="c011"><span class="c003">EXTRA</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011">             [ </span><span class="c011"><span class="c004">org</span></span><span class="c011">:</span><span class="c011"><span class="c006">Organization</span></span><span class="c011"> ],</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011">    </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011">,</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">homepage</span></span><span class="c011"> </span><span class="c011"><span class="c003">IRI</span></span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>Shape Expressions offer an intuitive way to describe the contents of linked data portals.
They have been used to document both the WebIndex<sup><a id="text42" href="#note42">1</a></sup> and 
another data portal with a similar model, the Landbook<sup><a id="text43" href="#note43">2</a></sup> data portal.
Their documentation defines templates for the different shapes of resources and for the triples that can be retrieved when dereferencing those resources. 
These templates define the dataset structure in a declarative way and can serve as a contract between developers of the data portal contents and designers of the data model. 
Having a good data model with a corresponding Shape Expressions specification facilitated the communication between the various stakeholders involved.</p><p>The data model described in this chapter differs from the original one for readability and didactic proposes in the following ways:</p><ul class="itemize"><li class="li-itemize">
We omitted the representation of computations, which are represented as single nodes with type 
<code><span class="c004">cex</span></code><code>:</code><code><span class="c006">Computation</span></code>. 
A more detailed description of computations was described at [<a href="#LabraMTSR14">56</a>].
We have also simplified the representation of the webindex structure,
which was composed of sub-indexes, components and other properties such as labels and provenance information.</li><li class="li-itemize">We defined the shapes of countries to include just two simple properties.
We deliberately omit the mandatory use of 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> declaration to show that 
it is possible to have nodes without that declaration. 
In the original WebIndex data model all countries had a mandatory 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> arc but there were several generated nodes 
which did not have 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> declarations. 
As we omitted the representation of computations we decided to offer that possibility for countries as an example. </li></ul><p>Appendix <a href="#AppendixWebIndexShEx">A</a> includes the full version of the WebIndex ShEx description used in this book. </p>
<!--TOC subsection id="sec180" WebIndex in SHACL-->
<h3 class="subsection" id="sec180">6.1.2  WebIndex in SHACL</h3><!--SEC END --><p> 
<a id="ch070WebIndexSHACL"></a>
<a id="ch6.sec1.2"></a></p><p>Although the original data portal was modeled in ShEx, 
we undertook the exercise of defining a SHACL description for the same contents so that we could compare the expressiveness of ShEx and SHACL. 
In this section we present a possible encoding in SHACL.</p><p>An equivalent description in SHACL of the 
<code>:</code><code><span class="c006">Country</span></code> shape defined on 
page <a href="#ShExCountry">??</a> would be:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Country</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">iso2</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">length</span></span><span class="c011"> 2 ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011">] .</span></td></tr>
</table><p>As can be seen, the 
<code>:</code><code><span class="c006">Country</span></code> shape is defined by two constraints which specify that the datatype of 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">label</span></code> and 
<code><span class="c004">wf</span></code><code>:</code><code><span class="c006">iso2</span></code> properties must be 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code> and that 
<code><span class="c004">wf</span></code><code>:</code><code><span class="c006">iso2</span></code> has length 2.</p><p><a id="hevea_default774"></a>
<a id="hevea_default775"></a>
<a id="hevea_default776"></a>
The default SHACL cardinality constraint is 
<code>[0..*]</code> meaning that cardinality constraints that are omitted in ShEx grammar must be explicitly stated in SHACL as:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span></td></tr>
</table><p>Optionality (
<code>?</code> or 
<code>*</code> in ShEx) can be represented either by omitting 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">minCount</span></code> or by 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">minCount</span></code><code>=0</code>. 
An unbounded maximum cardinality (
<code>*</code> or 
<code>+</code> in ShEx) must be represented in SHACL by omitting 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">maxCount</span></code>.
As an example, the definition of the 
<code>:</code><code><span class="c006">DataSet</span></code> shape declares that 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">label</span></code> is optional (by omitting the 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">minCount</span></code> property) and declares that there must be one or more 
<code><span class="c004">qb</span></code><code>:</code><code><span class="c006">slice</span></code> predicates conforming to the 
<code><span class="c004">qb</span></code><code>:</code><code><span class="c006">slice</span></code> definition (by omitting the value of 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">maxCount</span></code>).</p><p><a id="hevea_default777"></a>
The predicate 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">node</span></code> is used to indicate that the value of a property must have a given shape. 
In this way, a shape can refer to another shape. 
Note that the WebIndex data model contains cycles—shapes refer to other shapes and those shapes can refer back to the first ones—which can generate recursive shapes. 
Nevertheless, the handling of recursion in SHACL is implementation-dependent so it is necessary to circumvent this feature following some of the techniques shown in section <a href="#050SHACLRecursion">5.12.1</a>).</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">DataSet</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">type</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">hasValue</span></span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">DataSet</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">structure</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">hasValue</span></span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">DSD</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">slice</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011">     :</span><span class="c011"><span class="c006">Slice</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">:</span><span class="c011"><span class="c006">publisher</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">Organization</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011"> ] .</span></td></tr>
</table><p>The definition of 
<code>:</code><code><span class="c006">Slice</span></code> is similar to 
<code>:</code><code><span class="c006">DataSet</span></code>, so we can omit it for clarity. 
The full version of the SHACL shapes that we used in this section is shown in appendix <a href="#AppendixWebIndexSHACL">B</a>.</p><p>There are three items that need more explanation in the SHACL definition of the 
<code>:</code><code><span class="c006">Observation</span></code> shape. 
The first of these is the repeated appearance of the 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> property with two values.
Although we initially represented it using qualified value shapes, we noticed that it could also be 
represented as: </p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">type</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">in</span></span><span class="c011"> ( </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011"> )</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">type</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 2; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 2</span><span class="c011">
</span><span class="c011">] ;</span><span class="c011">
</span><span class="c011">...</span></td></tr>
</table><p>The definition of observations also contains an optional property with a fixed value. This was defined in ShEx as:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011"> {  ...</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">:</span><span class="c011"><span class="c006">publisher</span></span><span class="c011"> (</span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">WebFoundation</span></span><span class="c011">)?</span><span class="c011">
</span><span class="c011"> ...</span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>which means that observations can either have a property 
<code><span class="c004">dct</span></code><code>:</code><code><span class="c006">publisher</span></code> with the fixed 
value 
<code><span class="c004">wf</span></code><code>:</code><code><span class="c006">WebFoundation</span></code> or they can not have that property. </p><p>A possible representation in SHACL is to use an 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">or</span></code> of two shapes: 
one in which there is no 
<code><span class="c004">dct</span></code><code>:</code><code><span class="c006">publisher</span></code> (
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">maxCount</span></code>=0) and one with exactly one value for 
<code><span class="c004">dct</span></code><code>:</code><code><span class="c006">published</span></code>. </p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011">  ...</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">or</span></span><span class="c011"> ( [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">:</span><span class="c011"><span class="c006">publisher</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">           </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0</span><span class="c011">
</span><span class="c011">         ]</span><span class="c011">
</span><span class="c011">         [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">:</span><span class="c011"><span class="c006">publisher</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">           </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">hasValue</span></span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">WebFoundation</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">           </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011">           </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
</span><span class="c011">         ]</span><span class="c011">
</span><span class="c011"> )</span><span class="c011">
</span><span class="c011"> ...</span></td></tr>
</table><p>The last item requiring additional explanation is the disjunction definition which says that observations 
must have either the property 
<code><span class="c004">cex</span></code><code>:</code><code><span class="c006">computation</span></code> with a value of shape 
<code>:</code><code><span class="c006">Computation</span></code> or the property 
<code><span class="c004">wf</span></code><code>:</code><code><span class="c006">source</span></code> with an IRI value, but not both.
In ShEx, it was defined as:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011"> { ...</span><span class="c011">
</span><span class="c011"> , ( </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">computation</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011">:</span><span class="c011"><span class="c006">Computation</span></span><span class="c011">
</span><span class="c011">   | </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">source</span></span><span class="c011"> </span><span class="c011"><span class="c003">IRI</span></span><span class="c011">
</span><span class="c011">   )</span><span class="c011">
</span><span class="c011"> ...</span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>In SHACL, this declaration can be defined using the 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">xone</span></code> (exactly one) property constraint:</p><p><a id="DisjointOrShacl"></a>


</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011">
</span><span class="c011"> ...</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">xone</span></span><span class="c011"> ( [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">source</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">             </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">             </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011">           ]</span><span class="c011">
</span><span class="c011">           [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">computation</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">             </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">Computation</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">             </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011">           ]</span><span class="c011">
</span><span class="c011"> )</span><span class="c011">
</span><span class="c011">...</span></td></tr>
</table><p>In the case of indicators we can see again the separation between the 
<code>:</code><code><span class="c006">Indicator</span></code> shape and 
the 
<code><span class="c004">wf</span></code><code>:</code><code><span class="c006">PrimaryIndicator</span></code> and 
<code><span class="c004">wf</span></code><code>:</code><code><span class="c006">SecondaryIndicator</span></code> classes.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Indicator</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">type</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">in</span></span><span class="c011"> ( </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">PrimaryIndicator</span></span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">SecondaryIndicator</span></span><span class="c011"> ) ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> ...</span></td></tr>
</table><p>We defined organizations as closed shapes with the possibility that the 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> property has some extra values apart from the 
<code><span class="c004">org</span></code><code>:</code><code><span class="c006">Organization</span></code>. 
This constraint can be expressed in SHACL as:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Organization</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">closed</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">ignoredProperties</span></span><span class="c011"> ( </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">type</span></span><span class="c011"> )</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">type</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">hasValue</span></span><span class="c011"> </span><span class="c011"><span class="c004">org</span></span><span class="c011">:</span><span class="c011"><span class="c006">Organization</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  ] ;</span><span class="c011">
</span><span class="c011"> ...</span></td></tr>
</table><p>An important aspect that deserves some explanation is the use of recursion to represent cyclic data models. 
While ShEx can define cyclic data models in a natural way, the lack of recursion in SHACL needs to be circumvented.</p><p>One possibility is to add a discriminating 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> arc to every node so that its shape can be associated to its class. 
We opted to add a 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">targetClass</span></code> declaration to some shapes, such as 
<code>:</code><code><span class="c006">Observation</span></code>, conflating that shape 
with the class 
<code><span class="c004">qb</span></code><code>:</code><code><span class="c006">Observation</span></code>. Any node that contains a 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> arc pointing to 
<code><span class="c004">qb</span></code><code>:</code><code><span class="c006">Observation</span></code> must conform 
to the 
<code>:</code><code><span class="c006">Observation</span></code> shape declared by the WebIndex.</p><p>While this approach may be reasonable in closed contexts, it can cause problems in the open semantic web if one combines data from other datasets. 
For example, we defined another data model based on RDF data cube for the LandPortal project<sup><a id="text44" href="#note44">3</a></sup> 
which also contained values of type 
<code><span class="c004">qb</span></code><code>:</code><code><span class="c006">Observation</span></code> but with different structures. 
We consider that forcing every node of type 
<code><span class="c004">qb</span></code><code>:</code><code><span class="c006">Observation</span></code> to have the same structure is not a good practice and that it may be better to separate the target declarations from the shapes definitions.</p><p><a id="hevea_default778"></a>
</p>
<!--TOC section id="sec181" Describing Clinical Records—FHIR-->
<h2 class="section" id="sec181">6.2  Describing Clinical Records—FHIR</h2><!--SEC END --><p> 
<a id="ch060FHIR"></a>
<a id="ch6.sec2"></a></p><p><a id="hevea_default779"></a>
<a id="hevea_default780"></a> <a id="hevea_default781"></a>
<a id="hevea_default782"></a></p><p>Fast Healthcase Interoperability Resources 
(FHIR)<sup><a id="text45" href="#note45">4</a></sup> is a framework created by HL7,
a clinical standards organization, to define data formats and APIs for exchanging electronic health records. 
FHIR Release 3.0 was published in March 2017 and adds support for RDF.</p><p><a id="hevea_default783"></a> <a id="hevea_default784"></a> <a id="hevea_default785"></a>
FHIR has a resource-oriented architecture that describes the different entities involved in a clinical record. 
In a typical example, a patient (
<code><span class="c006">Patient</span></code> resource) visits a clinician (
<code><span class="c006">Practitioner</span></code> resource), who records some observations (
<code><span class="c006">Observation</span></code> resource), reviews some lab results (
<code><span class="c006">Diagnostic</span></code> results probably referencing other observations) and diagnoses a clinical issue (
<code><span class="c006">Condition</span></code> resource). 
These resources can be expressed interchangeably in multiple formats:
JSON, XML, and RDF.</p><p><a id="hevea_default786"></a> <a id="hevea_default787"></a> <a id="hevea_default788"></a>
FHIR resources are described by structure definitions in a FHIR-specific
schema language. 
This machine-readable language is translated into format-specific schema languages such as XML Schema plus Schematron, JSON Schema, and ShEx.</p><p>The structure of FHIR resources is documented as machine-generated HTML tables. 
Figure <a href="#ch070.ObservationFHIR">6.2</a> shows part of the FHIR 
<code><span class="c006">Observation</span></code> resource<sup><a id="text46" href="#note46">5</a></sup>.</p><p>FHIR structure definitions have two forms of limited disjunction.
The first, choices of the types of referenced resources, can be seen in 
<code><span class="c006">subject</span></code> and 
<code><span class="c006">performer</span></code> in Figure <a href="#ch070.ObservationFHIR">6.2</a>.
The second is a choice between a set of datatypes where the name of the datatype is appended to the property name, indicated by the 
<code>[</code><code><span class="c006">x</span></code><code>]</code> notation 
(see 
<code><span class="c006">effective</span></code><code>[</code><code><span class="c006">x</span></code><code>]</code> and 
<code><span class="c006">value</span></code><code>[</code><code><span class="c006">x</span></code><code>]</code> in Figure <a href="#ch070.ObservationFHIR">6.2</a>).
These are captured in ShEx using the shape expression ShapeOr (’
<code><span class="c003">OR</span></code>’) and the triple expression OneOf (’
<code>|</code>’) respectively:</p><div class="example"><div class="theorem"><span class="c013">Example 156</span>  <em>FHIR Observation representation in ShEx</em><em>
</em><em>

</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c008"><em><span class="c011">&lt;Observation&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">CLOSED</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [</span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">];</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">obs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;code&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> {</span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@fhirvs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">observation</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011">};</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">obs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">code</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;CodeableConcept&gt;</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">obs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">subject</span></span></em><em><span class="c011">
</span></em><em><span class="c011">    (   </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;PatientReference&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">OR</span></span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;GroupReference&gt;</span></em></span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">OR</span></span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;DeviceReference&gt;</span></em></span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">OR</span></span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;LocationReference&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    )?;</span></em><em><span class="c011">
</span></em><em><span class="c011">    (   </span></em><em><span class="c011"><span class="c006">obs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">effectiveDateTime</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;dateTime&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     |  </span></em><em><span class="c011"><span class="c006">obs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">effectiveTiming</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;Timing&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    )?;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">obs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">issued</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;instant&gt;</span></em></span></span></em><em><span class="c011">?;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">obs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">performer</span></span></em><em><span class="c011">
</span></em><em><span class="c011">    (   </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;PractitionerReference&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">OR</span></span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;OrganizationReference&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">OR</span></span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;PatientReference&gt;</span></em></span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c003">OR</span></span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;RelatedPersonReference&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    )*;</span></em><em><span class="c011">
</span></em><em><span class="c011">    (   </span></em><em><span class="c011"><span class="c006">obs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">valueQuantity</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;Quantity&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     |  </span></em><em><span class="c011"><span class="c006">obs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">valueCodeableConcept</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;CodeableConcept&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     |  </span></em><em><span class="c011"><span class="c006">obs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">valueDateTime</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;dateTime&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     |  </span></em><em><span class="c011"><span class="c006">obs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">valuePeriod</span></span></em><em><span class="c011">          </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;Period&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    )?;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">obs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bodySite</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;CodeableConcept&gt;</span></em></span></span></em><em><span class="c011">?;</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">fhirvs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">observation</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> [</span></em><em><span class="c011"><span class="c005"><em><span class="c011">"registered"</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"preliminary"</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">                           </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"final"</span></em></span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"amended"</span></em></span></span></em><em><span class="c011"> ]</span></em></td></tr>
</table></div></div><blockquote class="figure"><div class="center"><hr class="c021"></div> 
<div class="center">
<img src="Observation-cut3.eps.png">
</div>

<a id="ch070.ObservationFHIR"></a>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Figure 6.2: Part of Observation resource in FHIR.</td></tr>
</table></div>
<div class="center"><hr class="c021"></div></blockquote>
<!--TOC subsection id="sec182" FHIR as Linked Data-->
<h3 class="subsection" id="sec182">6.2.1  FHIR as Linked Data</h3><!--SEC END --><p>
<a id="ch6.sec2.2"></a></p><p>The definition of the RDF representation of FHIR was greatly simplified because FHIR was designed to be resource-oriented.
While clinical records are not expected to end up on the web, 
the REST architecture was an easy way to implement addressability and separation of concerns.</p><p>This means that FHIR resources are interlinked in a fashion that is already familiar to users of Linked Data.
For example, the 
<code><span class="c006">Observation</span></code> excerpt includes references for the 
<code><span class="c006">subject</span></code> and 
<code><span class="c006">performer</span></code>.
The 
<code><span class="c006">subject</span></code> may be a resource of type

<code><span class="c006">Patient</span></code>, 
<code><span class="c006">Group</span></code>, 
<code><span class="c006">Device</span></code> or 
<code><span class="c006">Location</span></code>, and the 
<code><span class="c006">performer</span></code> may be a 
<code><span class="c006">Practitioner</span></code>, 
<code><span class="c006">Organization</span></code>, 
<code><span class="c006">Patient</span></code>, or a 
<code><span class="c006">RelatedPerson</span></code> (see Figure <a href="#ch070.ObservationFHIR">6.2</a>).
While Linked Data is most commonly associated with RDF, these constraints apply equally to the XML and JSON representations of FHIR.
However, of the four schema languages used to validate FHIR, only ShEx validation spans resources.</p><p>There are several reasons why one might want to limit validation to a single document: 
other resources might not be available or relevant and 
it may be impractical either computationally or procedurally to test conformance of many resources at once.
However, a common use case for Linked Data is that all related data is addressable and available. 
Extending our schema to include verification of external referents allows us to ensure that a resource is coherent not only on its own but also when used in the context of the resources to which it is linked. </p>
<!--TOC subsection id="sec183" Consistency constraints-->
<h3 class="subsection" id="sec183">6.2.2  Consistency constraints</h3><!--SEC END --><p>
<a id="ch6.sec2.1"></a></p><p><a id="hevea_default789"></a> <a id="hevea_default790"></a>
The FHIR-specific schemas are expressed as combinations of structure definitions describing types and containership, and constraints.
Most constraints are co-existence constraints, e.g., 
if there is a 
<code><span class="c006">duration</span></code> there must be a 
<code><span class="c006">durationUnits</span></code>.
For XML, structure definitions are expressed as XML Schema, and co-existence constraints are expressed, where possible, in Schematron. 
For RDF, structure definitions and coexistence constraints are both expressed in ShEx.</p><p>An example with co-existence constraints is the representation of the 
<code><span class="c006">Timing</span></code> datatype, which represents an event that may occur multiple times. 
A Timing schedule can be a list of events and/or criteria for when the event happens, 
which can be expressed in a structured form and/or as a code. Figure <a href="#ch070.TimingFHIRDSL">6.2.2</a> shows the HTML representation of 
<code><span class="c006">Timing</span></code>.</p><blockquote class="figure"><div class="center"><hr class="c021"></div> 
<div class="center">
<img src="ch06-02.png">
</div>

<a id="ch070.TimingFHIRDSL"></a>
<div class="caption"><table class="c002 cellpading0"><tr><td class="c018">Figure 6.3: Complete Timing datatype in FHIR.</td></tr>
</table></div>
<div class="center"><hr class="c021"></div></blockquote><p><a id="hevea_default791"></a> <a id="hevea_default792"></a> <a id="hevea_default793"></a> <a id="hevea_default794"></a> 
While these human-friendly HTML representations are generated from the FHIR schema,
they could easily be generated from representations in other schema languages such as XML Schema, ShEx or SHACL. 
Schemas using more expressivity may be difficult to convey graphically to users. 
For instance, these property trees do not have a way to assert co-existence constraints, e.g. that certain properties are mutually exclusive.
<a id="hevea_default795"></a> <a id="hevea_default796"></a>
In a UML stack, these sorts of constraints would be expressed using OCL (see section <a href="#ch3.sec1.1">3.1.1</a>).</p><div class="example"><div class="theorem"><span class="c013">Example 157</span>  <em>Timing representation in ShEx</em><sup><a id="text47" href="#note47"><em>6</em></a></sup><p><em>The ShEx representation of </em><em>
</em><code><em><span class="c006">Timing</span></em></code><em> is defined as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c003">PREFIX</span></span></em><em><span class="c011"> :       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://hl7.org/fhir/Timing.&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c003">PREFIX</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">fhirvs</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://hl7.org/fhir/ValueSet/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c003">BASE</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://hl7.org/fhir/shape/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;Timing&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">CLOSED</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">event</span></span></em><em><span class="c011">              </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;dateTime&gt;</span></em></span></span></em><em><span class="c011">*;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">             </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;Timing.repeat&gt;</span></em></span></span></em><em><span class="c011">?;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">code</span></span></em><em><span class="c011">               </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;CodeableConcept&gt;</span></em></span></span></em><em><span class="c011">?;</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>where </em><em>
</em><code><em><span class="c006">Timing</span></em></code><code><em>.</em></code><code><em><span class="c006">repeat</span></em></code><em> shape contains two parts: a structure definition (lines 1–24) and several co-existence constraints (lines 25–35) which can be expressed in natural language as:</em></p><ul class="itemize"><li class="li-itemize"><em>
</em><em>If there is a </em><em>
</em><code><em><span class="c006">duration</span></em></code><em>, there needs to be </em><em>
</em><code><em><span class="c006">durationUnits</span></em></code><em>.
</em></li><li class="li-itemize"><em>If there’s a </em><em>
</em><code><em><span class="c006">period</span></em></code><em>, there needs to be </em><em>
</em><code><em><span class="c006">periodUnits</span></em></code><em>.
</em></li><li class="li-itemize"><em>
</em><code><em><span class="c006">duration</span></em></code><em> shall be a non-negative value.
</em></li><li class="li-itemize"><em>
</em><code><em><span class="c006">period</span></em></code><em> shall be a non-negative value. 
</em></li><li class="li-itemize"><em>If there is a </em><em>
</em><code><em><span class="c006">periodMax</span></em></code><em>, there must be a </em><em>
</em><code><em><span class="c006">period</span></em></code><em>. 
</em></li><li class="li-itemize"><em>If there is a </em><em>
</em><code><em><span class="c006">durationMax</span></em></code><em>, there must be a </em><em>
</em><code><em><span class="c006">duration</span></em></code><em>.
</em></li><li class="li-itemize"><em>If there is a </em><em>
</em><code><em><span class="c006">countMax</span></em></code><em>, there must be a </em><em>
</em><code><em><span class="c006">count</span></em></code><em>.
</em></li><li class="li-itemize"><em>If there is an </em><em>
</em><code><em><span class="c006">offset</span></em></code><em>, there must be a </em><em>
</em><code><em><span class="c006">when</span></em></code><em> (and not </em><em>
</em><code><em><span class="c006">C</span></em></code><em>, </em><em>
</em><code><em><span class="c006">CM</span></em></code><em>, </em><em>
</em><code><em><span class="c006">CD</span></em></code><em>, </em><em>
</em><code><em><span class="c006">CV</span></em></code><em>).
</em></li><li class="li-itemize"><em>If there is a </em><em>
</em><code><em><span class="c006">timeOfDay</span></em></code><em>, there cannot be a when, or vice versa.
</em></li></ul><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c008"><em><span class="c011">&lt;Timing.repeat&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">CLOSED</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  ( :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">boundsDuration</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;Duration&gt;</span></em></span></span></em><em><span class="c011"> |</span></em><em><span class="c011">
</span></em><em><span class="c011">    :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">boundsRange</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;Range&gt;</span></em></span></span></em><em><span class="c011">    |</span></em><em><span class="c011">
</span></em><em><span class="c011">    :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">boundsPeriod</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;Period&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  )?;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">count</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;integer&gt;</span></em></span></span></em><em><span class="c011">?;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">countMax</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;integer&gt;</span></em></span></span></em><em><span class="c011">?;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">duration</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;decimal&gt;</span></em></span></span></em><em><span class="c011">?;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">durationMax</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;decimal&gt;</span></em></span></span></em><em><span class="c011">?;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">durationUnit</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;code&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011">
</span></em><em><span class="c011">                       { </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@fhirvs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">units</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">of</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">time</span></span></em><em><span class="c011"> }?;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">frequency</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;integer&gt;</span></em></span></span></em><em><span class="c011">?;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">frequencyMax</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;integer&gt;</span></em></span></span></em><em><span class="c011">?;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">period</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;decimal&gt;</span></em></span></span></em><em><span class="c011">?;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">periodMax</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;decimal&gt;</span></em></span></span></em><em><span class="c011">?;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">periodUnit</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;code&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011">
</span></em><em><span class="c011">                       { </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@fhirvs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">units</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">of</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">time</span></span></em><em><span class="c011"> }?;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">dayOfWeek</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;code&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011">
</span></em><em><span class="c011">                       { </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@fhirvs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">days</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">of</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">week</span></span></em><em><span class="c011"> }*;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">timeOfDay</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;time&gt;</span></em></span></span></em><em><span class="c011">*;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">when</span></span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;code&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011">
</span></em><em><span class="c011">                       { </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@fhirvs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">event</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">timing</span></span></em><em><span class="c011"> }*;</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">offset</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;unsignedInt&gt;</span></em></span></span></em><em><span class="c011">?;</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> {(:</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">duration</span></span></em><em><span class="c011"> .; :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">durationUnits</span></span></em><em><span class="c011"> .)? }</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> {(:</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">period</span></span></em><em><span class="c011"> .  ; :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">periodUnits</span></span></em><em><span class="c011"> .)? }</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> {:</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">duration</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">MinInclusive</span></span></em><em><span class="c011"> 0 ? }</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> {:</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">period</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">MinInclusive</span></span></em><em><span class="c011"> 0 ? }</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> {(:</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">periodMax</span></span></em><em><span class="c011">   . ; :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">period</span></span></em><em><span class="c011"> .  )? }</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> {(:</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">durationMax</span></span></em><em><span class="c011"> . ; :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">duration</span></span></em><em><span class="c011"> .)? }</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> {(:</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">countMax</span></span></em><em><span class="c011"> . ; :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">count</span></span></em><em><span class="c011"> .)? }</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> { :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">offset</span></span></em><em><span class="c011"> . ; :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">when</span></span></em><em><span class="c011"> [. - </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"C"</span></em></span></span></em><em><span class="c011"> - </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"CM"</span></em></span></span></em><em><span class="c011"> - </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"CD"</span></em></span></span></em><em><span class="c011"> - </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"CV"</span></em></span></span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011">    | :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">when</span></span></em><em><span class="c011"> . ? </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># if there is no offset there can still be a when</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    }</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> {:</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">timeOfDay</span></span></em><em><span class="c011"> . | :</span></em><em><span class="c011"><span class="c006">repeat</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">when</span></span></em><em><span class="c011"> . }</span></em></td></tr>
</table></div></div><p>The value set idiom of specifying a value type and a value set (e.g., 
<code>&lt;</code><code><span class="c006">code</span></code><code>&gt;</code> and 
<code><span class="c006">fhirvs</span></code><code>:</code><code><span class="c006">units</span></code><code>-</code><code><span class="c006">of</span></code><code>-</code><code><span class="c006">time</span></code>) allows one to specify the structure and also to specify values within that structure.</p>
<!--TOC subsection id="sec184" FHIR/RDF Development-->
<h3 class="subsection" id="sec184">6.2.3  FHIR/RDF Development</h3><!--SEC END --><p>
<a id="ch6.sec2.3"></a>
<a id="ch070.FHIRRDFDevelopment"></a></p><p>The FHIR/RDF group, a joint undertaking of W3C and HL7, used ShEx not only to define the final product but also to describe intermediate ideas and test them against example data.
To this end, members of the group learned ShEx to streamline the process with concrete, testable proposals.
During the development and deployment of version 3 of FHIR, Harold Solbrig (Mayo Clinic) implemented a pipeline to test shapes against FHIR example data, catching errors in both the examples and the ShEx schema. </p><p>Because the agile FHIR standardization process is centered around the maintenance of FHIR resource structure definitions, 
the ShEx for FHIR is generated from these definitions. 
The easy way to do this is to generate ShExJ (the JSON representation) but because the FHIR group wanted these to be appealing to readers, 
they were transformed into ShExC, making specific white space decisions in the process. 
These ShExC representations could then be parsed to the abstract syntax to be tested against the reference ShExJ schemas. 
The latter transformation was simpler and less error prone as it is involved only with the direct semantics.</p>
<!--TOC subsection id="sec185" Generic Properties-->
<h3 class="subsection" id="sec185">6.2.4  Generic Properties</h3><!--SEC END --><p>
<a id="ch6.sec2.4"></a>
<a id="ch070.FHIRGenericProperties"></a></p><p>Because electronic medical records use a consistent template to represent most clinical data, they rely heavily on generic properties.
These properties may be used multiple times with different constraints.
A simple example of this is a blood pressure, which actually consists of two measurements: systolic (pressure during heart beat) and diastolic (pressure between heart beats).
Both of these measurements are connected to the blood pressure measurement by a 
<code><span class="c006">fhir</span></code><code>:</code><code><span class="c006">Observation</span></code><code>.</code><code><span class="c006">component</span></code> 
property.</p><div class="example"><div class="theorem"><span class="c013">Example 158</span>  <em>FHIR blood pressure</em><sup><a id="text48" href="#note48"><em>7</em></a></sup><p><em>A </em><em>
</em><code><em>&lt;</em></code><code><em><span class="c006">blood</span></em></code><code><em>-</em></code><code><em><span class="c006">pressure</span></em></code><code><em>&gt;</em></code><em> shape can be defined in ShEx as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c008"><em><span class="c011">&lt;blood-pressure&gt;</span></em></span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [</span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">code</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CodeableConcept</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">coding</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [</span></em><em><span class="c011"><span class="c006">loinc</span></span></em><em><span class="c011">:8480-6] ; </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># systolic</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       }</span></em><em><span class="c011">
</span></em><em><span class="c011">     } ;</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">valueQuantity</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Quantity</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">decimal</span></span></em><em><span class="c011"> };</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Quantity</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">unit</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> [</span></em><em><span class="c011"><span class="c005"><em><span class="c011">"mmHg"</span></em></span></span></em><em><span class="c011">] };</span></em><em><span class="c011">
</span></em><em><span class="c011">     }</span></em><em><span class="c011">
</span></em><em><span class="c011">  } ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">code</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CodeableConcept</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">coding</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [</span></em><em><span class="c011"><span class="c006">loinc</span></span></em><em><span class="c011">:8462-4] ; </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># diastolic</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       }</span></em><em><span class="c011">
</span></em><em><span class="c011">     };</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">valueQuantity</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Quantity</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">decimal</span></span></em><em><span class="c011"> };</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Quantity</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">unit</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> [</span></em><em><span class="c011"><span class="c005"><em><span class="c011">"mmHg"</span></em></span></span></em><em><span class="c011">] };</span></em><em><span class="c011">
</span></em><em><span class="c011">     }</span></em><em><span class="c011">
</span></em><em><span class="c011">  }</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>and an example data conforming to that shape can be:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://hl7.org/fhir/Observation/blood-pressure&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">;    </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#  Passes as a &lt;blood-pressure&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">code</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CodeableConcept</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">coding</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">loinc</span></span></em><em><span class="c011">:8480-6; </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># systolic</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       ]</span></em><em><span class="c011">
</span></em><em><span class="c011">     ];</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">valueQuantity</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Quantity</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"107"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">decimal</span></span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Quantity</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">unit</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"mmHg"</span></em></span></span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011">     ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ], [</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">code</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CodeableConcept</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">coding</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">loinc</span></span></em><em><span class="c011">:8462-4; </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># diastolic</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       ]</span></em><em><span class="c011">
</span></em><em><span class="c011">     ];</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">valueQuantity</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Quantity</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"60"</span></em></span></span></em><em><span class="c011">^^</span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">decimal</span></span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Quantity</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">unit</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"mmHg"</span></em></span></span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011">     ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table></div></div><p>This example is long, but it is taken directly from a use case.
In fact, its length encourages us to do a bit of factoring.
While we want to keep constraints on the codes for systolic and diastolic, we can create a separate 
<code>&lt;</code><code><span class="c006">valueObs</span></code><code>&gt;</code> shape to capture the quantity measurement.</p><div class="example"><div class="theorem"><span class="c013">Example 159</span>  <em>Factored FHIR blood pressure</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c003">PREFIX</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://hl7.org/fhir/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c003">PREFIX</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">loinc</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://loinc.org/owl#&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c003">PREFIX</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">owl</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://www.w3.org/2002/07/owl#&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c003">PREFIX</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c003">PREFIX</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">sct</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://snomed.info/id/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c003">PREFIX</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c003">BASE</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://hl7.org/fhir/shape/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;blood-pressure&gt;</span></em></span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [</span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;valueObs&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">code</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CodeableConcept</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">coding</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [</span></em><em><span class="c011"><span class="c006">loinc</span></span></em><em><span class="c011">:8480-6] ; </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># systolic</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       }</span></em><em><span class="c011">
</span></em><em><span class="c011">     }</span></em><em><span class="c011">
</span></em><em><span class="c011">  } ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;valueObs&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">code</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">CodeableConcept</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">coding</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [</span></em><em><span class="c011"><span class="c006">loinc</span></span></em><em><span class="c011">:8462-4] ; </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># diastolic</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       }</span></em><em><span class="c011">
</span></em><em><span class="c011">     }</span></em><em><span class="c011">
</span></em><em><span class="c011">  }</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;valueObs&gt;</span></em></span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Observation</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">component</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">valueQuantity</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Quantity</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">decimal</span></span></em><em><span class="c011"> };</span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Quantity</span></span></em><em><span class="c011">.</span></em><em><span class="c011"><span class="c006">unit</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c006">fhir</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">value</span></span></em><em><span class="c011"> [</span></em><em><span class="c011"><span class="c005"><em><span class="c011">"mmHg"</span></em></span></span></em><em><span class="c011">] };</span></em><em><span class="c011">
</span></em><em><span class="c011">   }</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table></div></div><p>This schema has two repeated properties: 
<code><span class="c006">fhir</span></code><code>:</code><code><span class="c006">Observation</span></code><code>.</code><code><span class="c006">component</span></code> with different constraints (one for systolic and the other for diastolic). It takes advantage of ShEx’s intuitive <em>additive semantics</em> where requirements for repeated properties 
are simply expressed as additional triple patterns (see section <a href="#ch040.RepeatedPropertiesSection">4.6.7</a>).</p>
<!--TOC section id="sec186" Springer Nature SciGraph-->
<h2 class="section" id="sec186">6.3  Springer Nature SciGraph</h2><!--SEC END --><p> 
<a id="ch070SciGraph"></a>
<a id="ch6.sec3"></a></p><p>Springer Nature SciGraph<sup><a id="text49" href="#note49">8</a></sup> is a new Linked Open Data platform aggregating data sources from Springer Nature and key partners from the scholarly domain. 
The platform currently collates information from across the research landscape, 
such as funders, research projects, conferences, affiliations, and publications (books and journals). 
This high-quality data from trusted and reliable sources provides a rich semantic description of how information is related, 
as well as enabling innovative visualizations of the scholarly domain.</p><p>Data quality is a key component in SciGraph. 
In earlier work, SPIN was used in various validation scenarios. 
However, SPIN was hard to maintain and to read by non-experts and SHACL was chosen instead. 
SHACL is now used to validate data before the data enters the main triplestore. 
SHACL is also used to specify which classes and properties can be published from the triplestore.</p><p>All of the SHACL shapes used in building public datasets of Springer Nature SciGraph are published in a Github 
repository.<sup><a id="text50" href="#note50">9</a></sup> 
There are shapes that define the RDF structure of all SciGraph entity types such as articles, grants, and journals. </p><p>The following snippet of the 
<code><span class="c006">Article</span></code> shape says that all SHACL instances of 
<code><span class="c006">sg</span></code><code>:</code><code><span class="c006">Article</span></code> must have 
exactly one 
<code><span class="c006">sg</span></code><code>:</code><code><span class="c006">scigraphId</span></code> that is a string, 
at most one value for 
<code><span class="c006">sg</span></code><code>:</code><code><span class="c006">doi</span></code>, 
a string following a specific pattern and at most one value for 
<code><span class="c006">sg</span></code><code>:</code><code><span class="c006">role</span></code> that can be one of:<em>author</em>, <em>editor</em> or <em>principal investigator</em>.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Article</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetClass</span></span><span class="c011"> </span><span class="c011"><span class="c006">sg</span></span><span class="c011">:</span><span class="c011"><span class="c006">Article</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"RDF shape for the sg:Article model"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c008"><span class="c011"># Identity</span></span></span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c006">sg</span></span><span class="c011">:</span><span class="c011"><span class="c006">scigraphId</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011">  ] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c006">sg</span></span><span class="c011">:</span><span class="c011"><span class="c006">doi</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">pattern</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"^10\\.\\d{4,5}\\/\\S+$"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011">  ] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c008"><span class="c011"># ...</span></span></span><span class="c011">
</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c006">sg</span></span><span class="c011">:</span><span class="c011"><span class="c006">role</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">in</span></span><span class="c011"> ( </span><span class="c011"><span class="c005"><span class="c011">"author"</span></span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"editor"</span></span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"principal investigator"</span></span></span><span class="c011"> ) ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011">  ] ;</span></td></tr>
</table>
<!--TOC section id="sec187" DBpedia Validation Use Cases-->
<h2 class="section" id="sec187">6.4  DBpedia Validation Use Cases</h2><!--SEC END --><p> 
<a id="ch070DBpedia"></a>
<a id="ch6.sec4"></a></p><p>DBpedia<sup><a id="text51" href="#note51">10</a></sup> 
([<a href="#dbpedia-swj">60</a>]) is a crowdsourced community effort to extract structured information from Wikipedia and make this information available on the Web.
DBpedia data is available as RDF dumps, through a linked data interface and a SPARQL endpoint.
The current DBpedia release (version 2016-04<sup><a id="text52" href="#note52">11</a></sup>) provides circa 9.5 billion RDF triples.</p><p>Validating such large amounts of RDF data is a challenging task, and various methods have been applied.
At the time of writing, the core validation of DBpedia is performed with neither ShEx nor SHACL.
However, it is worth mentioning some approaches that work on large and noisy datasets.</p>
<!--TOC subsection id="sec188" Ontology-based Validation-->
<h3 class="subsection" id="sec188">6.4.1  Ontology-based Validation</h3><!--SEC END --><p>
<a id="ch6.sec4.1"></a></p><p>One of the core sources of validation for DBpedia is the DBpedia ontology.
The DBpedia ontology is crowdsourced and maintained by the community on the 
<a href="http://mappings.dbpedia.org"><span class="c010">http://mappings.dbpedia.org</span></a> wiki.
At the time of writing, the ontology consists of circa 750 classes, organized in a hierarchy, and 2,600 properties.
The community can define class disjoint statements and for properties, axioms such as domain, range, literal datatypes, and functional properties.
The DBpedia ontology both drives the correct extraction of RDF triples from Wikipedia pages and is used in post-processing steps to remove data violations.</p><p>The DBpedia extraction framework has many extractors that parse different parts of a Wikipedia page and generate RDF triples.
The Mapping-based extractor is a special extractor that focuses on high-quality extraction from Wikipedia infoboxes.
To achieve this it uses the DBpedia ontology and the community-maintained infobox-to-ontology mappings.
Each infobox mapping maps a Wikipedia infobox template to a DBpedia class and each infobox template parameter to a property mapping (see [<a href="#dbpedia-swj">60, sec. 2.4</a>]) .
At extraction time, each property mapping is associated with a different parser, according to the 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">range</span></code> of the DBpedia property of each property mapping.
For example, if the range of a property is defined as an 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">date</span></code> (e.g. 
<code><span class="c004">dbo</span></code><code>:</code><code><span class="c006">birthDate</span></code>), property mappings with this property generate a value only if the value can be parsed as a date.</p><p>As a post-processing step, the RDFS and OWL axioms defined in the DBpedia ontology are used to further clean up the extracted data. 
A common approach is to run RDFUnit on the data and get back detailed violation reports. 
These reports are used to identify common sources of error that can be planned for fixing.
Another approach is a set of scripts that parse facts and, depending on the conformance of a fact to a set of axioms (e.g., 

<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">domain</span></code>, 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">range</span></code>, 
<code><span class="c004">owl</span></code><code>:</code><code><span class="c006">disjointWith</span></code>, etc) 
dispatches the facts to different dataset buckets before publishing.</p>
<!--TOC subsection id="sec189" RDF Mappings Validation-->
<h3 class="subsection" id="sec189">6.4.2  RDF Mappings Validation</h3><!--SEC END --><p>
<a id="ch6.sec4.2"></a></p><p>A very common way to generate RDF data is through a mapping document.
In a general case, a mapping document contains rules that can be used to transform input data to RDF.
The mapping rules can be encoded in a script (e.g., using XSLT), in code, or formulated in mapping languages such as R2RML [<a href="#R2RML">28</a>] and RML [<a href="#RML">30</a>].</p><p>A single error in the mapping document can, in many cases, be propagated to many errors on the generated instance data, 
and the number of errors is usually proportional to the input size.
Consider for example a mapping document that generates person data and represents the age of a person with the property 

<code><span class="c004">foaf</span></code><code>:</code><code><span class="c006">age</span></code> and the value as 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">double</span></code> instead of 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">integer</span></code>.
Every person instance in the generated RDF will have a violation for the datatype of 
<code><span class="c004">foaf</span></code><code>:</code><code><span class="c006">age</span></code>.
Fixing such errors in the mapping document is an easy task, but 
once the data is generated the task becomes harder, especially on big datasets.</p><p>Dimou et al. [<a href="#iswc15_rml_rdfunit">31</a>] propose a workflow for including quality assessment of the mappings in the general dataset quality assessment workflow.
The authors use the dataset schema information (i.e., ontologies) to identify schema errors of the dataset directly from an RML mapping document.
The results illustrate that violations such as domain and range, mistyped datatypes, class and property disjointness, and the like can be identified directly from the mapping document.
Evaluation of this work indicates that fixing errors directly in the mapping document is more efficient. 
For example, in the case of DBpedia, an automatic quality assessment of the mappings took less than a minute while the complete dataset validation took more than 16 hours.</p><p>However, the mapping quality assessment of the mappings cannot identify all possible schema errors in the target dataset.
Some constraints, such as cardinality, can only be identified on the target dataset.</p><p><a id="hevea_default797"></a> <a id="hevea_default798"></a> 
Even though this approach currently works with OWL and RDFS, it would be an easy exercise to extend it to SHACL or ShEx.
Given a set of mappings and a set of Shapes, one could identify incompatibilities directly from the mapping document.</p>
<!--TOC subsection id="sec190" Validating Link Contributions with SHACL-->
<h3 class="subsection" id="sec190">6.4.3  Validating Link Contributions with SHACL</h3><!--SEC END --><p>
<a id="ch6.sec4.3"></a></p><p><a id="hevea_default799"></a> <a id="hevea_default800"></a> 
DBpedia promotes Github for accepting link contributions from the DBpedia 
community<sup><a id="text53" href="#note53">12</a></sup> 
and, recently, there has been an effort to automate the link verification process 
(see [<a href="#DojchinovskiDBpediaLinks">32, Section 3.3</a>]).
<a id="hevea_default801"></a> <a id="hevea_default802"></a> <a id="hevea_default803"></a>
This has put into place a set of quality checks that validate various aspects of the link submission and is integrated with common continuous integration services, such as Travis CI.</p><p>This approach enables instant checks on pull requests and reports problems to the submitter.
In addition to scripts that check for instance valid RDF files, 
there is a script that checks if the link manifest file conforms to the following SHACL schema.<sup><a id="text54" href="#note54">13</a></sup></p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c006">dbp</span></span><span class="c011">:</span><span class="c011"><span class="c006">LinkManifest</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetClass</span></span><span class="c011"> </span><span class="c011"><span class="c004">void</span></span><span class="c011">:</span><span class="c011"><span class="c006">Linkset</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">dc</span></span><span class="c011">:</span><span class="c011"><span class="c006">author</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">:</span><span class="c011"><span class="c006">description</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">Literal</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">:</span><span class="c011"><span class="c006">license</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c006">dbp</span></span><span class="c011">:</span><span class="c011"><span class="c006">script</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c006">dbp</span></span><span class="c011">:</span><span class="c011"><span class="c006">linkConf</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c006">dbp</span></span><span class="c011">:</span><span class="c011"><span class="c006">ntriplefilelocation</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c006">dbp</span></span><span class="c011">:</span><span class="c011"><span class="c006">endpoint</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c006">dbp</span></span><span class="c011">:</span><span class="c011"><span class="c006">constructQuery</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">Literal</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c006">dbp</span></span><span class="c011">:</span><span class="c011"><span class="c006">approvedPatch</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c006">dbp</span></span><span class="c011">:</span><span class="c011"><span class="c006">optionalPatch</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c006">dbp</span></span><span class="c011">:</span><span class="c011"><span class="c006">updateFrequencyInDays</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">Literal</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span></td></tr>
</table><p>The defined quality checks cannot capture all possible errors in a link submission process.
However, they can 
(a) provide a very useful feedback to the link submitter, and 
(b) enable DBpedia to automatically pre-process some steps in the link generation pipeline.</p>
<!--TOC subsection id="sec191" Ontology Validation with SHACL-->
<h3 class="subsection" id="sec191">6.4.4  Ontology Validation with SHACL</h3><!--SEC END --><p>
<a id="ch6.sec4.4"></a></p><p>The DBpedia ontology has been maintained by the DBpedia community in a crowdsourced manner at the <a href="http://mappings.dbpedia.org"><span class="c010">http://mappings.dbpedia.org</span></a> wiki.
There is an ongoing effort to move ontology development onto Github for easier collaboration and for the sake of more control over the ontology structure.
<sup><a id="text55" href="#note55">14</a></sup>
At the time of writing, the following constraints are defined to ensure that each DBpedia class and each DBpedia property conform to DBpedia community requirements:</p><ul class="itemize"><li class="li-itemize">
Each DBpedia class and property must have at least one 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">label</span></code> and at least one 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">comment</span></code> that are of 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">langString</span></code> datatype with unique language.
</li><li class="li-itemize">Each DBpedia class can have at most one direct super class.
</li><li class="li-itemize">Each DBpedia property can have at most one direct super property.
</li><li class="li-itemize">Each DBpedia property can have at most one 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">domain</span></code>.
</li><li class="li-itemize">Each DBpedia property can have at most one 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">range</span></code>.
</li><li class="li-itemize">The domain and range of each property must be defined as an 
<code><span class="c004">owl</span></code><code>:</code><code><span class="c006">Class</span></code>.
</li><li class="li-itemize">Top-level DBpedia classes must be discussed before defined.
</li></ul><p>These constraints are implemented with the following SHACL definitions.
RDFUnit is used to perform the validation as well as integrate with Travis CI and automate the checks on each commit and pull request.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c004">dbo</span></span><span class="c011">-</span><span class="c011"><span class="c006">shape</span></span><span class="c011">:</span><span class="c011"><span class="c006">ClassShape</span></span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">Shape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetClass</span></span><span class="c011"> </span><span class="c011"><span class="c004">owl</span></span><span class="c011">:</span><span class="c011"><span class="c006">Class</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetSubjectsOf</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">subClassOf</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">severity</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">Error</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">message</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Each owl:Class should have at least one rdfs:label"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">dataType</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">langString</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">uniqueLang</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  ] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">message</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Each owl:Class should have at least one rdfs:comment"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">comment</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">dataType</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">langString</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">uniqueLang</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  ] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">message</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Each owl:Class should have at most one superclass"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">subClassOf</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">  ] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">sparql</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">message</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"DBpedia Ontology only allows 9 top level classes, any new top level classes need to be discussed"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">severity</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">Warning</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">select</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">""</span></span></span><span class="c011"><span class="c005"><span class="c011">"</span><span class="c011">
</span><span class="c011">      PREFIX owl: &lt;http://www.w3.org/2002/07/owl#&gt;</span><span class="c011">
</span><span class="c011">      PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span><span class="c011">
</span><span class="c011">      SELECT DISTINCT $this ?otherClass</span><span class="c011">
</span><span class="c011">      WHERE {</span><span class="c011">
</span><span class="c011">        $this rdfs:subClassOf owl:Thing  .</span><span class="c011">
</span><span class="c011">        FILTER($this NOT IN (</span><span class="c011">
</span><span class="c011">          &lt;http://dbpedia.org/ontology/Activity&gt;,</span><span class="c011">
</span><span class="c011">          &lt;http://dbpedia.org/ontology/Agent&gt;,</span><span class="c011">
</span><span class="c011">          &lt;http://dbpedia.org/ontology/Concept&gt;,</span><span class="c011">
</span><span class="c011">          &lt;http://dbpedia.org/ontology/CommunicationSystem&gt;,</span><span class="c011">
</span><span class="c011">          &lt;http://dbpedia.org/ontology/Condition&gt;,</span><span class="c011">
</span><span class="c011">          &lt;http://dbpedia.org/ontology/Event&gt;,</span><span class="c011">
</span><span class="c011">          &lt;http://dbpedia.org/ontology/PhysicalThing&gt;,</span><span class="c011">
</span><span class="c011">          &lt;http://dbpedia.org/ontology/Place&gt;,</span><span class="c011">
</span><span class="c011">          &lt;http://dbpedia.org/ontology/TimePeriod&gt;)</span><span class="c011">
</span><span class="c011">        ).</span><span class="c011">
</span><span class="c011">      } "</span></span></span><span class="c011"><span class="c005"><span class="c011">""</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  ] .</span><span class="c011">
</span><span class="c011">
</span><span class="c011"><span class="c004">dbo</span></span><span class="c011">-</span><span class="c011"><span class="c006">shape</span></span><span class="c011">:</span><span class="c011"><span class="c006">PropertyShape</span></span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">Shape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetClass</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">Property</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetClass</span></span><span class="c011"> </span><span class="c011"><span class="c004">owl</span></span><span class="c011">:</span><span class="c011"><span class="c006">DatatypeProperty</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetClass</span></span><span class="c011"> </span><span class="c011"><span class="c004">owl</span></span><span class="c011">:</span><span class="c011"><span class="c006">ObjectProperty</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetSubjectsOf</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">subPropertyOf</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">message</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Each property should have at least one rdfs:label"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">dataType</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">langString</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">uniqueLang</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  ] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">message</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Each property should have at least one rdfs:comment"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">comment</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">dataType</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">langString</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">uniqueLang</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  ] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">message</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Each property should have at most one rdfs:domain"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">domain</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">  ] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">message</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Each property should have an rdfs:domain that is defined as an owl:Class"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">domain</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">class</span></span><span class="c011"> </span><span class="c011"><span class="c004">owl</span></span><span class="c011">:</span><span class="c011"><span class="c006">Class</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">  ] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">message</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Each property should have at most one rdfs:range"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">range</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">  ] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">message</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Each property should have an rdfs:range that is defined as an owl:Class"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">range</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">class</span></span><span class="c011"> </span><span class="c011"><span class="c004">owl</span></span><span class="c011">:</span><span class="c011"><span class="c006">Class</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">  ] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">message</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Each property should have at most one super property"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">subPropertyOf</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">  ] .</span></td></tr>
</table><p>An interesting part of this use case is the use of SHACL-SPARQL to define the complex constraint <em>Top-level DBpedia classes must be discussed before defined</em>.
Here, only nine specific classes are allowed as top-level classes (i.e. classes with no superclass except 
<code><span class="c004">owl</span></code><code>:</code><code><span class="c006">Thing</span></code>) and are hard-coded in the SPARQL query.
Even though this creates a tight coupling of the shape to the data, top-level DBpedia classes are not changing frequently and adjusting the constraint can indeed stimulate discussion.</p>
<!--TOC section id="sec192" ShEx for ShEx-->
<h2 class="section" id="sec192">6.5  ShEx for ShEx</h2><!--SEC END --><p> 
<a id="ch070ShExForShEx"></a>
<a id="ch6.sec5"></a></p><p><a id="hevea_default804"></a>
Given that one serialization format for ShEx is RDF, it is possible to use ShEx to validate itself, i.e., 
to validate RDF graphs representing ShEx schemas. 
The RDF serialization representation of ShEx is called ShExR.</p><p>The following example contains a simple ShEx schema using ShExR in Turtle:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c004">Schema</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">shapes</span></span><span class="c011"> :</span><span class="c011"><span class="c006">User</span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">User</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">Shape</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">expression</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">EachOf</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">expressions</span></span><span class="c011"> (</span><span class="c011">
</span><span class="c011">   [ </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">TripleConstraint</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">predicate</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">valueExpr</span></span><span class="c011"> [ </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeConstraint</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">       </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ]</span><span class="c011">
</span><span class="c011">   ]</span><span class="c011">
</span><span class="c011">   [ </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">TripleConstraint</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">predicate</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">gender</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">valueExpr</span></span><span class="c011"> [ </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeConstraint</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">       </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">values</span></span><span class="c011"> ( </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">Male</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">Female</span></span><span class="c011"> )</span><span class="c011">
</span><span class="c011">     ]</span><span class="c011">
</span><span class="c011">   ]</span><span class="c011">
</span><span class="c011">  )</span><span class="c011">
</span><span class="c011"> ] .</span></td></tr>
</table><p>In the following, we will describe the ShEx schemas that can validate RDF files in ShExR (as above). 
The full code is included in the annex <a href="#AnnexShExInShEx">C</a> and has been adapted from Appendix C (ShEx shape) 
of the ShEx specification.<sup><a id="text56" href="#note56">15</a></sup> </p><p><a id="hevea_default805"></a> <a id="hevea_default806"></a> 
ShExR graphs contain an RDF node with 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code><code> </code><code><span class="c004">sx</span></code><code>:</code><code><span class="c004">Schema</span></code>, 
an optional list of starting semantic actions, 
a start declaration and zero or more 
<code><span class="c004">sx</span></code><code>:</code><code><span class="c006">shapes</span></code> declarations whose values
must be shape expressions 
<code>&lt;</code><code><span class="c006">ShapeExpr</span></code><code>&gt;</code>.</p><p>Most of the shapes in this schema are defined as 
<code><span class="c003">CLOSED</span></code> to limit the appearance of unexpected triples.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;Schema&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011">            [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c004">Schema</span></span><span class="c011">] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">startActs</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;SemActList1Plus&gt;</span></span></span><span class="c011">? ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">start</span></span><span class="c011">     </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;ShapeExpr&gt;</span></span></span><span class="c011">?;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">shapes</span></span><span class="c011">    </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;ShapeExpr&gt;</span></span></span><span class="c011">*</span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>As discussed in Section <a href="#ch040StructureofaShapeExpression">4.4.3</a>, there are six possibilities for defining shape expressions.
Which can be enumerated as:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;ShapeExpr&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;ShapeOr&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011">
</span><span class="c011">            </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;ShapeAnd&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011">
</span><span class="c011">            </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;ShapeNot&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011">
</span><span class="c011">            </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;NodeConstraint&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011">
</span><span class="c011">            </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;Shape&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011">
</span><span class="c011">            </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;ShapeExternal&gt;</span></span></span></td></tr>
</table><p>
<code>&lt;</code><code><span class="c006">ShapeOr</span></code><code>&gt;</code> and 
<code>&lt;</code><code><span class="c006">ShapeAnd</span></code><code>&gt;</code> have a similar representation which contains a list of at least two shape expressions 
represented by the 
<code>&lt;</code><code><span class="c006">shapeExprList2Plus</span></code><code>&gt;</code> shape, which will be described later.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;ShapeOr&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011">             [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">ShapeOr</span></span><span class="c011">] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">shapeExprs</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExprList2Plus&gt;</span></span></span><span class="c011">
</span><span class="c011">}</span><span class="c011">
</span><span class="c011">
</span><span class="c011"><span class="c008"><span class="c011">&lt;ShapeAnd&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011">             [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">ShapeAnd</span></span><span class="c011">] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">shapeExprs</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExprList2Plus&gt;</span></span></span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>
<code>&lt;</code><code><span class="c006">ShapeNot</span></code><code>&gt;</code> contains a shape expression:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;ShapeNot&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011">            [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">ShapeNot</span></span><span class="c011">] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">shapeExpr</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExpr&gt;</span></span></span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>The following code represents lists of shape expressions. 
<code>&lt;</code><code><span class="c006">shapeExprList2Plus</span></code> is a list of at least two shape expressions, and 
<code>&lt;</code><code><span class="c006">shapeExprList1Plus</span></code><code>&gt;</code> is a list of at least one.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;shapeExprList2Plus&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExpr&gt;</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011">  </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExprList1Plus&gt;</span></span></span><span class="c011">
</span><span class="c011">}</span><span class="c011">
</span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExprList1Plus&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExpr&gt;</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011">  [</span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">nil</span></span><span class="c011">] </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExprList1Plus&gt;</span></span></span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>Node constraints are formed by one or more declarations of node kind, 
datatype, 
string facet, 
numeric facet, or 
a list of possible values.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;NodeConstraint&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011">             [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeConstraint</span></span><span class="c011">] ;</span><span class="c011">
</span><span class="c011">  ( </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">iri</span></span><span class="c011"> </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">bnode</span></span><span class="c011"> </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">literal</span></span><span class="c011"> </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">nonliteral</span></span><span class="c011">]</span><span class="c011">
</span><span class="c011">  | </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c003">IRI</span></span><span class="c011">
</span><span class="c011">  | &amp;</span><span class="c011"><span class="c008"><span class="c011">&lt;stringFacet&gt;</span></span></span><span class="c011">
</span><span class="c011">  | &amp;</span><span class="c011"><span class="c008"><span class="c011">&lt;numericFacet&gt;</span></span></span><span class="c011">
</span><span class="c011">  | </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">values</span></span><span class="c011">   </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;valueSetValueList1Plus&gt;</span></span></span><span class="c011">
</span><span class="c011">  )+</span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>A shape can contain the Boolean directives 
<code><span class="c004">sx</span></code><code>:</code><code><span class="c003">closed</span></code> and 
<code><span class="c004">sx</span></code><code>:</code><code><span class="c003">extra</span></code> as well as a 
<code><span class="c004">sx</span></code><code>:</code><code><span class="c006">tripleExpression</span></code> and an optional list of semantic actions.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;Shape&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011">             [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">Shape</span></span><span class="c011">] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">closed</span></span><span class="c011">     [</span><span class="c011"><span class="c003">true</span></span><span class="c011"> </span><span class="c011"><span class="c003">false</span></span><span class="c011">]? ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">extra</span></span><span class="c011">      </span><span class="c011"><span class="c003">IRI</span></span><span class="c011">* ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">expression</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpression&gt;</span></span></span><span class="c011">? ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">semActs</span></span><span class="c011">    </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;SemActList1Plus&gt;</span></span></span><span class="c011">? ;</span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>External shapes only contain a type declaration.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;ShapeExternal&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011">            [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">ShapeExternal</span></span><span class="c011">] ;</span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>Semantic actions contain a 
<code><span class="c004">sx</span></code><code>:</code><code><span class="c006">name</span></code> that points to an IRI describing the processor and a 
<code><span class="c004">sx</span></code><code>:</code><code><span class="c006">code</span></code> value with the string code that will be passed to that processor.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;SemAct&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011">            [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">SemAct</span></span><span class="c011">] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011">      </span><span class="c011"><span class="c003">IRI</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">code</span></span><span class="c011">      </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011">?</span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>Annotations contain a predicate (which must be an IRI) and an object. </p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;Annotation&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011">            [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">Annotation</span></span><span class="c011">] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">predicate</span></span><span class="c011"> </span><span class="c011"><span class="c003">IRI</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">object</span></span><span class="c011">    </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;objectValue&gt;</span></span></span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>String and numeric facets just enumerate the different possibilities:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;stringFacet&gt;</span></span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">length</span></span><span class="c011">         </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">
</span><span class="c011">  | </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">minlength</span></span><span class="c011">      </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">
</span><span class="c011">  | </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">maxlength</span></span><span class="c011">      </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">
</span><span class="c011">  | </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">pattern</span></span><span class="c011">        </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011">
</span><span class="c011">}</span><span class="c011">
</span><span class="c011"><span class="c008"><span class="c011">&lt;numericFacet&gt;</span></span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">mininclusive</span></span><span class="c011">   </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;numericLiteral&gt;</span></span></span><span class="c011">
</span><span class="c011">  | </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">minexclusive</span></span><span class="c011">   </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;numericLiteral&gt;</span></span></span><span class="c011">
</span><span class="c011">  | </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">maxinclusive</span></span><span class="c011">   </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;numericLiteral&gt;</span></span></span><span class="c011">
</span><span class="c011">  | </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">maxexclusive</span></span><span class="c011">   </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;numericLiteral&gt;</span></span></span><span class="c011">
</span><span class="c011">  | </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">totaldigits</span></span><span class="c011">    </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">
</span><span class="c011">  | </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">fractiondigits</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">
</span><span class="c011">}</span><span class="c011">
</span><span class="c011"><span class="c008"><span class="c011">&lt;numericLiteral&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011">
</span><span class="c011">                 </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">decimal</span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011">
</span><span class="c011">                 </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">double</span></span></td></tr>
</table><p>The values that can appear in a value set are object values, stems, or ranges:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;valueSetValue&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;objectValue&gt;</span></span></span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;IriStem&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;IriStemRange&gt;</span></span></span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;LiteralStem&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;LiteralStemRange&gt;</span></span></span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;LanguageStem&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;LanguageStemRange&gt;</span></span></span></td></tr>
</table><p>Object values can be IRIs or literals:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;objectValue&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">IRI</span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c003">LITERAL</span></span></td></tr>
</table><p>Stems and ranges are defined for the different possibilities: IRIs, literals, or language-tagged literals.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;IriStem&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">IriStem</span></span><span class="c011">]; </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">stem</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">anyUri</span></span><span class="c011"> }</span><span class="c011">
</span><span class="c011"><span class="c008"><span class="c011">&lt;IriStemRange&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">IriStemRange</span></span><span class="c011">];</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">stem</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">anyUri</span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;Wildcard&gt;</span></span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">exclusion</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;objectValue&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;IriStem&gt;</span></span></span><span class="c011">*</span><span class="c011">
</span><span class="c011">}</span><span class="c011">
</span><span class="c011"><span class="c008"><span class="c011">&lt;LiteralStem&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">LiteralStem</span></span><span class="c011">]; </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">stem</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> }</span><span class="c011">
</span><span class="c011"><span class="c008"><span class="c011">&lt;LiteralStemRange&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">LiteralStemRange</span></span><span class="c011">];</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">stem</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;Wildcard&gt;</span></span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">exclusion</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;objectValue&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;LiteralStem&gt;</span></span></span><span class="c011">*</span><span class="c011">
</span><span class="c011">}</span><span class="c011">
</span><span class="c011"><span class="c008"><span class="c011">&lt;LanguageStem&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">LanguageStem</span></span><span class="c011">]; </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">stem</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> }</span><span class="c011">
</span><span class="c011"><span class="c008"><span class="c011">&lt;LanguageStemRange&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">LanguageStemRange</span></span><span class="c011">];</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">stem</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;Wildcard&gt;</span></span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">exclusion</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;objectValue&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;LanguageStem&gt;</span></span></span><span class="c011">*</span><span class="c011">
</span><span class="c011">}</span><span class="c011">
</span><span class="c011"><span class="c008"><span class="c011">&lt;Wildcard&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">BNODE</span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011">           [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">Wildcard</span></span><span class="c011">]</span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>A triple expression is either a triple constraint, an inclusion of another shape expression of a composed triple expression made from 

<code>&lt;</code><code><span class="c006">OneOf</span></code><code>&gt;</code> or 
<code>&lt;</code><code><span class="c006">EachOf</span></code><code>&gt;</code>.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpression&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;TripleConstraint&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011">
</span><span class="c011">                   </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;OneOf&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011">
</span><span class="c011">                   </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;EachOf&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011">
</span><span class="c011">                   </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;Inclusion&gt;</span></span></span></td></tr>
</table><p>The definition of 
<code>&lt;</code><code><span class="c006">OneOf</span></code><code>&gt;</code> and 
<code>&lt;</code><code><span class="c006">EachOf</span></code><code>&gt;</code> is very similar: 
they contain 
<code><span class="c004">sx</span></code><code>:</code><code><span class="c006">min</span></code> and 
<code><span class="c004">sx</span></code><code>:</code><code><span class="c006">max</span></code> cardinalities. 
a list of at least two triple expressions, 
and optional list of semantic actions and a list of annotations.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;OneOf&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011">              [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">OneOf</span></span><span class="c011">] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">min</span></span><span class="c011">         </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">? ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">max</span></span><span class="c011">         </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">?  ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">expressions</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpressionList2Plus&gt;</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">semActs</span></span><span class="c011">     </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;SemActList1Plus&gt;</span></span></span><span class="c011">? ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">annotation</span></span><span class="c011">  </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;Annotation&gt;</span></span></span><span class="c011">*</span><span class="c011">
</span><span class="c011">}</span><span class="c011">
</span><span class="c011">
</span><span class="c011"><span class="c008"><span class="c011">&lt;EachOf&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011">              [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">EachOf</span></span><span class="c011">] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">min</span></span><span class="c011">         </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">? ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">max</span></span><span class="c011">         </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">? ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">expressions</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpressionList2Plus&gt;</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">semActs</span></span><span class="c011">     </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;SemActList1Plus&gt;</span></span></span><span class="c011">? ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">annotation</span></span><span class="c011">  </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;Annotation&gt;</span></span></span><span class="c011">*</span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>
<code>&lt;</code><code><span class="c006">tripleExpressionList2Plus</span></code><code>&gt;</code> declares a list of at least two triple expressions.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpressionList2Plus&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpression&gt;</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011">  </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpressionList1Plus&gt;</span></span></span><span class="c011">
</span><span class="c011">}</span><span class="c011">
</span><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpressionList1Plus&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpression&gt;</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011">  [</span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">nil</span></span><span class="c011">] </span><span class="c011"><span class="c003">OR</span></span><span class="c011">
</span><span class="c011">            </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpressionList1Plus&gt;</span></span></span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>A 
<code>&lt;</code><code><span class="c006">tripleConstraint</span></code><code>&gt;</code> contains a mandatory 
<code><span class="c004">sx</span></code><code>:</code><code><span class="c006">predicate</span></code> property, an optional value expression, the cardinality declarations 
<code><span class="c004">sx</span></code><code>:</code><code><span class="c006">min</span></code> and 
<code><span class="c004">sx</span></code><code>:</code><code><span class="c006">max</span></code>, the 
<code><span class="c004">sx</span></code><code>:</code><code><span class="c006">inverse</span></code> and 
<code><span class="c004">sx</span></code><code>:</code><code><span class="c006">negated</span></code> qualifiers and the semantic actions and annotations.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;TripleConstraint&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011">             [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">TripleConstraint</span></span><span class="c011">] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">inverse</span></span><span class="c011">    [</span><span class="c011"><span class="c003">true</span></span><span class="c011"> </span><span class="c011"><span class="c003">false</span></span><span class="c011">]? ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">negated</span></span><span class="c011">    [</span><span class="c011"><span class="c003">true</span></span><span class="c011"> </span><span class="c011"><span class="c003">false</span></span><span class="c011">]? ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">min</span></span><span class="c011">        </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">? ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">max</span></span><span class="c011">        </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">? ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">predicate</span></span><span class="c011">  </span><span class="c011"><span class="c003">IRI</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">valueExpr</span></span><span class="c011">  </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExpr&gt;</span></span></span><span class="c011">? ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">semActs</span></span><span class="c011">    </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;SemActList1Plus&gt;</span></span></span><span class="c011">? ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">annotation</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;Annotation&gt;</span></span></span><span class="c011">*</span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>An inclusion has a predicate 
<code><span class="c004">sx</span></code><code>:</code><code><span class="c006">include</span></code> that points to an IRI or a blank node (non-literals).</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;Inclusion&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011">          [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">Inclusion</span></span><span class="c011">]? ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">include</span></span><span class="c011"> </span><span class="c011"><span class="c003">NONLITERAL</span></span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>The following definitions declare lists of at least one element: semantic actions or value set values.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c008"><span class="c011">&lt;SemActList1Plus&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011">  </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;SemAct&gt;</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011">   [</span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">nil</span></span><span class="c011">] </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;SemActList1Plus&gt;</span></span></span><span class="c011">
</span><span class="c011">}</span><span class="c011">
</span><span class="c011"><span class="c008"><span class="c011">&lt;valueSetValueList1Plus&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;valueSetValue&gt;</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011">  [</span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">nil</span></span><span class="c011">] </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;valueSetValueList1Plus&gt;</span></span></span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table>
<!--TOC section id="sec193" SHACL in SHACL-->
<h2 class="section" id="sec193">6.6  SHACL in SHACL</h2><!--SEC END --><p> 
<a id="ch070ShaclInShacl"></a></p><p>In this section we describe how to use SHACL to validate Shapes graphs that contain SHACL code. 
This is similar to what we described in the previous section although in this case we are using SHACL to validate SHACL. 
The full code described in this section appears in 
Appendix <a href="#annexSHACLinSHACL">D</a> 
and has been adapted from Appendix C of the SHACL specification. 
We have done some modifications to the original code for readability.</p><p>The document declares the shape of shapes 
<code>:</code><code><span class="c006">ShapeShape</span></code> as a 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">NodeShape</span></code> that contains a long list of target declarations to define the nodes that must be validated as shapes. </p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetClass</span></span><span class="c011">      </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">PropertyShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetSubjectsOf</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetClass</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetNode</span></span><span class="c011">,</span><span class="c011">
</span><span class="c011">                     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetObjectsOf</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetSubjectsOf</span></span><span class="c011"> ,</span><span class="c011">
</span><span class="c011">                     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">and</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">class</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">closed</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011">,</span><span class="c011">
</span><span class="c011">                     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">disjoint</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">equals</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">flags</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">hasValue</span></span><span class="c011">,</span><span class="c011">
</span><span class="c011">                     ... </span><span class="c011"><span class="c008"><span class="c011"># All the other constraint component parameters</span></span></span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetObjectsOf</span></span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">not</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">qualifiedValueShape</span></span><span class="c011"> .</span></td></tr>
</table><p>It declares that every node that is an instance of 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">NodeShape</span></code> or 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">PropertyShape</span></code> 
must conform to 
<code>:</code><code><span class="c006">ShapeShape</span></code> 
and that the subjects of properties 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">targetClass</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">targetNode</span></code>, …must also conform to 
<code>:</code><code><span class="c006">ShapeShape</span></code> 
as well as the objects of 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">node</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">not</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">property</span></code>, 
and 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">qualifiedValueShape</span></code>.</p><p>The next statement declares that nodes conforming to shapes, 
must conform to one of 
<code>:</code><code><span class="c006">NodeShapeShape</span></code> or 
<code>:</code><code><span class="c006">PropertyShapeShape</span></code>. </p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">ShapeShape</span></span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">xone</span></span><span class="c011"> ( :</span><span class="c011"><span class="c006">NodeShapeShape</span></span><span class="c011"> :</span><span class="c011"><span class="c006">PropertyShapeShape</span></span><span class="c011"> ) ;</span></td></tr>
</table><p>The following statements declare the types of values that can be associated with target declarations.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">ShapeShape</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetNode</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRIOrLiteral</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetClass</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetSubjectsOf</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetObjectsOf</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> ...</span></td></tr>
</table><p>In the same way, it declares the values that can have the different constraint components. </p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">ShapeShape</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">severity</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">deactivated</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">in</span></span><span class="c011"> ( </span><span class="c011"><span class="c003">true</span></span><span class="c011"> </span><span class="c011"><span class="c003">false</span></span><span class="c011"> ) ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">and</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">ListShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">class</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> ...</span></td></tr>
</table><p>We omit the full list of declarations as all of them follow the same style. 
They declare the expected value of each predicate. For example, in the last case, 
that the predicate 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">class</span></code> can have an IRI as value.</p><p>A remarkable aspect is the following declaration:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">ShapeShape</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">or</span></span><span class="c011"> (</span><span class="c011">
</span><span class="c011">  [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">not</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">class</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">Class</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">or</span></span><span class="c011"> ( [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">class</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ]</span><span class="c011">
</span><span class="c011">             [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">class</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">PropertyShape</span></span><span class="c011"> ]</span><span class="c011">
</span><span class="c011">           )</span><span class="c011">
</span><span class="c011">    ]</span><span class="c011">
</span><span class="c011">  ]</span><span class="c011">
</span><span class="c011">  [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ]</span><span class="c011">
</span><span class="c011"> ).</span></td></tr>
</table><p>It represents a syntax rule of implicit class targets 
(see Section <a href="#ch050implicitTargetClass">5.7.3</a>) by which a NodeShape or PropertyShape that are also instances of 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">Class</span></code> must be IRIs. 
This is an example of an 
IF-THEN pattern (see Section <a href="#ch050IFTHENSHACL">5.11.5</a>) and could be defined in pseudo-code as:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c006">IF</span></span><span class="c011"> (</span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">class</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">Class</span></span><span class="c011"> </span><span class="c011"><span class="c006">AND</span></span><span class="c011">
</span><span class="c011">    (</span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">class</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> </span><span class="c011"><span class="c006">OR</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">class</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">PropertyShape</span></span><span class="c011">)</span><span class="c011">
</span><span class="c011">   ) </span><span class="c011"><span class="c006">THEN</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span></td></tr>
</table><p>Another interesting declaration is:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">message</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">or</span></span><span class="c011"> ( [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ]</span><span class="c011">
</span><span class="c011">          [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">langString</span></span><span class="c011"> ] ) ;</span><span class="c011">
</span><span class="c011">        ] .</span></td></tr>
</table><p>which declares that messages can be any string literal or languages tagged string literal, which is a common pattern for messages 
that admit not only plain string literals but multilingual ones.</p><p>Another aspect that can be remarked is the use of 
<code>:</code><code><span class="c006">ListShape</span></code> as the value of several predicates like 

<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">and</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">or</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">in</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">ignoredProperties</span></code>, and 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">xone</span></code>.</p><p>The declarations are done as:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">and</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">ListShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">or</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">ListShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c008"><span class="c011"># ... similar for the other predicates </span></span></span><span class="c011">
</span><span class="c011">.</span></td></tr>
</table><p><a id="hevea_default807"></a>
The meaning is that the values of those predicates must be well-formed RDF lists 
(see Section <a href="#ch020RDFLists">2.2</a>). </p><p><a id="hevea_default808"></a>
<a id="hevea_default809"></a>
<a id="hevea_default810"></a>
An RDF list is a collection of values linked by the 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">rest</span></code> predicate whose last value is 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">nil</span></code>. 
Each node in the list must contain exactly one value of 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">first</span></code>.
The declaration of 
<code>:</code><code><span class="c006">ListShape</span></code> is defined as:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">zeroOrMorePath</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">hasValue</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">nil</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">ListNodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] .</span></td></tr>
</table><p>which means that all the nodes are linked by the predicate 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">rest</span></code> zero or more times, and that those nodes must conform to 
<code>:</code><code><span class="c006">ListNodeShape</span></code> which is defined as:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">or</span></span><span class="c011"> (</span><span class="c011">
</span><span class="c011">    [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">hasValue</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">nil</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">      </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011"> ; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0 ] ;</span><span class="c011">
</span><span class="c011">      </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011"> ; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0 ] ;</span><span class="c011">
</span><span class="c011">        ]</span><span class="c011">
</span><span class="c011">    [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">not</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">hasValue</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">nil</span></span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011">      </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011"> ; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ] ;</span><span class="c011">
</span><span class="c011">      </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011"> ; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ] ;</span><span class="c011">
</span><span class="c011">    ]) .</span></td></tr>
</table><p>This means that a list node is either 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">nil</span></code>, in which case it must not have any arc with predicates 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">first</span></code> or 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">rest</span></code>, or 
a node with exactly one value for those predicates.
In this case, the pattern followed is an 
<code><span class="c006">IF</span></code><code>-</code><code><span class="c006">THEN</span></code><code>-</code><code><span class="c006">ELSE</span></code> pattern.</p><p>In the case of 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">ignoredProperties</span></code> and 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">languageIn</span></code>, 
the list nodes must also conform to some specific shape (to be an IRI or a string). This can be expressed as:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> (</span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">ignoredProperties</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">zeroOrMorePath</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011">] </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011">);</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ];</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> (</span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">languageIn</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">zeroOrMorePath</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011">] </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011">) ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] .</span></td></tr>
</table><p>Similarly, a constraint is established on the values of 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">and</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">or</span></code> and 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">xone</span></code> which must be lists of nodes conforming to 
<code>:</code><code><span class="c006">ShapeShape</span></code>. This is declared as:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">ShapesListShape</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> ( [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">zeroOrMorePath</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011"> ] </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011"> ) ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">ShapeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] .</span></td></tr>
</table><p>Some properties, like the 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">path</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">lessThan</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">minCount</span></code>, etc. cannot be applied to node shapes. 
This constraint is declared as:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">NodeShapeShape</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> ; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0 ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">lessThan</span></span><span class="c011"> ; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0 ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011">; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0 ];</span><span class="c011">
</span><span class="c011"> ... </span><span class="c011"><span class="c008"><span class="c011"># Similar for sh:lessThanOrEquals, sh:minCount, </span></span></span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c008"><span class="c011">#             sh:qualifiedValueShape and sh:uniqueLang</span></span></span></td></tr>
</table><p>Property shapes must have exactly one value for property 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">path</span></code>. </p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">PropertyShapeShape</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">PathShape</span></span><span class="c011">
</span><span class="c011"> ] .</span></td></tr>
</table><p>The value of 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">path</span></code> must conform to 
<code>:</code><code><span class="c006">PathShape</span></code>. 
The first version of 
<code>:</code><code><span class="c006">PathShape</span></code> employed recursion with the following pattern:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">PathShape</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">xone</span></span><span class="c011"> (</span><span class="c011">
</span><span class="c011">   [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ]</span><span class="c011">
</span><span class="c011">   [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">BlankNode</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">PathListWithAtLeast2Members</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">   ]</span><span class="c011">
</span><span class="c011">   [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">BlankNode</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">closed</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">         </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">alternativePath</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">            </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">PathListWithAtLeast2Members</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">            </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011">     ]</span><span class="c011">
</span><span class="c011">   ]</span><span class="c011">
</span><span class="c011">   [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">BlankNode</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">closed</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">inversePath</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">      </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">PathShape</span></span><span class="c011"> ;  </span><span class="c011"><span class="c008"><span class="c011"># Recursive reference</span></span></span><span class="c011">
</span><span class="c011">      </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011">     ]</span><span class="c011">
</span><span class="c011">   ]</span><span class="c011">
</span><span class="c011">  ...</span><span class="c011"><span class="c008"><span class="c011"># similar for sh:zeroOrMorePath, sh:oneOrMorePath </span></span></span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c008"><span class="c011"># and sh:zeroOrOnePath</span></span></span><span class="c011">
</span><span class="c011"> );</span><span class="c011">
</span><span class="c011">.</span></td></tr>
</table><p>However, as recursion is undefined in SHACL, that definition was changed to simulate recursion using the property path 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">zeroOrMorePath</span></code> with an auxiliary shape 
(see Section <a href="#ch050RecursionPropertyPaths">5.12.1</a>). 
The new definition is:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">PathShape</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">zeroOrMorePath</span></span><span class="c011"> </span><span class="c011"><span class="c006">_</span></span><span class="c011">:</span><span class="c011"><span class="c006">PathPath</span></span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">PathNodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ] .</span><span class="c011">
</span><span class="c011">
</span><span class="c011"><span class="c006">_</span></span><span class="c011">:</span><span class="c011"><span class="c006">PathPath</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">alternativePath</span></span><span class="c011"> (</span><span class="c011">
</span><span class="c011"> ( [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">zeroOrMorePath</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011"> ] </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011"> )</span><span class="c011">
</span><span class="c011"> ( </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">alternativePath</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">zeroOrMorePath</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011"> ] </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011"> )</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">inversePath</span></span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">zeroOrMorePath</span></span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">oneOrMorePath</span></span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">zeroOrOnePath</span></span><span class="c011">
</span><span class="c011">) .</span><span class="c011">
</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">PathNodeShape</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">xone</span></span><span class="c011"> (</span><span class="c011">
</span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ]</span><span class="c011">
</span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">BlankNode</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">PathListWithAtLeast2Members</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ]</span><span class="c011">
</span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">BlankNode</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">closed</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">alternativePath</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">PathListWithAtLeast2Members</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011">   ]</span><span class="c011">
</span><span class="c011"> ]</span><span class="c011">
</span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">BlankNode</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">closed</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">inversePath</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011">   ]</span><span class="c011">
</span><span class="c011"> ]</span><span class="c011">
</span><span class="c011">  ...</span><span class="c011"><span class="c008"><span class="c011"># similar for sh:zeroOrMorePath, sh:oneOrMorePath </span></span></span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c008"><span class="c011"># and sh:zeroOrOnePath</span></span></span><span class="c011">
</span><span class="c011"> ) .</span></td></tr>
</table><p>The previous definitions use the following auxiliary shape 
<code>:</code><code><span class="c006">PathListWithAtLeast2Members</span></code>:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">PathListWithAtLeast2Members</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">ListShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">oneOrMorePath</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011">        </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 2 ; </span><span class="c011"><span class="c008"><span class="c011"># 1 other list node plus rdf:nil   </span></span></span><span class="c011">
</span><span class="c011"> ] .</span></td></tr>
</table><p>The last two definitions declare that the values of 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">shapesGraph</span></code> and the values of 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">entailment</span></code> must be IRIs. </p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">ShapesGraphShape</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetObjectsOf</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">shapesGraph</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">EntailmentShape</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetObjectsOf</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">entailment</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> .</span></td></tr>
</table>
<!--TOC section id="sec194" Summary-->
<h2 class="section" id="sec194">6.7  Summary</h2><!--SEC END --><p>
<a id="ch6.sec6"></a></p><ul class="itemize"><li class="li-itemize">ShEx and SHACL can be used to describe and validate linked data portals.
We show how they can be used to describe the WebIndex data model. </li><li class="li-itemize">FHIR describes an abstract information model which can be represented in JSON, XML, and RDF. FHIR/RDF data model is described using ShEx.</li><li class="li-itemize">Springer Nature SciGraph is an early adopter of SHACL to validate data.</li><li class="li-itemize">DBpedia is an example of a big linked data portal whose needs for validation offer new challenges. </li><li class="li-itemize">The RDF representation of ShEx can be described and validated in ShEx.</li><li class="li-itemize">SHACL Core shapes graphs can be described and validated in SHACL.</li></ul>
<!--TOC section id="sec195" Suggested Reading-->
<h2 class="section" id="sec195">6.8  Suggested Reading</h2><!--SEC END --><p>
<a id="ch6.sec7"></a></p><ul class="itemize"><li class="li-itemize">
Paper describing the WebIndex: <a href="#LabraValidatingDescribingDataPortalsArxivVersion2017">Labra Gayo, Prud’hommeaux, Solbrig, and
Boneva</a>,<a href="#LabraValidatingDescribingDataPortalsArxivVersion2017">2017</a> [<a href="#LabraValidatingDescribingDataPortalsArxivVersion2017">58</a>]
</li><li class="li-itemize">FHIR linked data model.
Describes the RDF data model used in FHIR and its use of ShEx: <a href="#FHIR_LinkedDataModule">Booth</a>,<a href="#FHIR_LinkedDataModule">2017</a> [<a href="#FHIR_LinkedDataModule">12</a>].
</li><li class="li-itemize">Paper describing the use of RDFUnit on DBpedia as well as other 
large-scale RDF datasets: <a href="#kontokostasDatabugger">Kontokostas, Westphal, Auer, Hellmann,
Lehmann, Cornelissen, and Zaveri</a>,<a href="#kontokostasDatabugger">2014</a> [<a href="#kontokostasDatabugger">53</a>]
</li><li class="li-itemize">Paper describing the mappings-based validation applied in DBpedia: <a href="#iswc15_rml_rdfunit">Dimou, Kontokostas, Freudenberg, Verborgh, Lehmann,
Mannens, Hellmann, and Van de Walle</a>,<a href="#iswc15_rml_rdfunit">2015</a> [<a href="#iswc15_rml_rdfunit">31</a>]
</li><li class="li-itemize">Paper describing the integration of SHACL with Travis CI for validating DBpedia link contributions: <a href="#DojchinovskiDBpediaLinks">Dojchinovski, Kontokostas, Rößling,
Knuth, and Hellmann</a>,<a href="#DojchinovskiDBpediaLinks">2016</a> [<a href="#DojchinovskiDBpediaLinks">32</a>]
</li></ul>
<!--BEGIN NOTES chapter-->
<hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note42" href="#text42">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="http://weso.github.io/wiDoc"><span class="c010">http://weso.github.io/wiDoc</span></a></div></dd><dt class="dt-thefootnotes"><a id="note43" href="#text43">2</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="http://weso.github.io/landportalDoc/data"><span class="c010">http://weso.github.io/landportalDoc/data</span></a></div></dd><dt class="dt-thefootnotes"><a id="note44" href="#text44">3</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: http://landportal.info</div></dd><dt class="dt-thefootnotes"><a id="note45" href="#text45">4</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: https://www.hl7.org/fhir/</div></dd><dt class="dt-thefootnotes"><a id="note46" href="#text46">5</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">The original 
<code><span class="c006">Observation</span></code> resource is at <a href="http://hl7.org/fhir/observation.html"><span class="c010">http://hl7.org/fhir/observation.html</span></a></div></dd><dt class="dt-thefootnotes"><a id="note47" href="#text47">6</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: http://hl7.org/fhir/datatypes.html#timing</div></dd><dt class="dt-thefootnotes"><a id="note48" href="#text48">7</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="http://build.fhir.org/observation-example-bloodpressure.ttl"><span class="c010">http://build.fhir.org/observation-example-bloodpressure.ttl</span></a></div></dd><dt class="dt-thefootnotes"><a id="note49" href="#text49">8</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="http://www.springernature.com/scigraph"><span class="c010">http://www.springernature.com/scigraph</span></a></div></dd><dt class="dt-thefootnotes"><a id="note50" href="#text50">9</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="https://github.com/springernature/scigraph"><span class="c010">https://github.com/springernature/scigraph</span></a></div></dd><dt class="dt-thefootnotes"><a id="note51" href="#text51">10</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="http://wiki.dbpedia.org"><span class="c010">http://wiki.dbpedia.org</span></a></div></dd><dt class="dt-thefootnotes"><a id="note52" href="#text52">11</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: http://wiki.dbpedia.org/dbpedia-version-2016-04</div></dd><dt class="dt-thefootnotes"><a id="note53" href="#text53">12</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="https://github.com/dbpedia/links"><span class="c010">https://github.com/dbpedia/links</span></a></div></dd><dt class="dt-thefootnotes"><a id="note54" href="#text54">13</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">The SHACL schema was based on an earlier version of SHACL and was adapted to the latest one for this book.</div></dd><dt class="dt-thefootnotes"><a id="note55" href="#text55">14</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="https://github.com/dbpedia/ontology-tracker"><span class="c010">https://github.com/dbpedia/ontology-tracker</span></a></div></dd><dt class="dt-thefootnotes"><a id="note56" href="#text56">15</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: http://shex.io/shex-semantics/#shexr</div></dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec196" Comparing ShEx and SHACL-->
<h1 class="chapter" id="sec196">Chapter 7  Comparing ShEx and SHACL</h1><!--SEC END --><p> 
<a id="ch070Comparing"></a>
<a id="ch7"></a></p><p>In this chapter we present a comparison between ShEx and SHACL.
The technologies have similar goals and similar features.
In fact at the start of the Data Shapes Working Group in 2014, 
convergence on a unified approach was considered possible.
However, this did not happen and as of July 2017 both technologies are maintained as separate solutions.</p><p>We start by describing some of the common features that they share, followed by a review of the main differences.</p>
<!--TOC section id="sec197" Common Features-->
<h2 class="section" id="sec197">7.1  Common Features</h2><!--SEC END --><p>
<a id="ch7.sec1"></a></p><p>ShEx and SHACL share the same goal, to have a mechanism for describing and validating RDF data using a high-level language, so there are a lot of common features that both share. </p><ul class="itemize"><li class="li-itemize"><span class="c013">Shapes</span>. Both define the notion of a shape, as something that contains constraints on the topology of RDF nodes. 
SHACL shapes are similar to ShEx shape expressions, with the difference that links to data nodes are expressed in SHACL by target declarations and in ShEx by shape maps.
In most of the common cases, it is possible to translate between ShEx and SHACL. <div class="example"><div class="theorem"><span class="c013">Example 160</span> <span class="c013">(Similarities between ShEx and SHACL)</span>  <em> 
</em><a id="ch060SimilarShExSHACL"></a><p><em>Consider the following SHACL shapes graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">or</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">    [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">in</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011">) ]</span></em><em><span class="c011">
</span></em><em><span class="c011">    [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011">   )</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>This can be expressed in a ShEx schema:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">gender</span></span></em><em><span class="c011">    [</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Male</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Female</span></span></em><em><span class="c011">] </span></em><em><span class="c011"><span class="c003">OR</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table></div></div></li><li class="li-itemize"><span class="c013">Node constraints.</span> Both languages have the notion of node constraints and share similar expressiveness: 
node kinds, datatypes, datatype facets, value sets, etc. 
Example <a href="#ch060SimilarShExSHACL">160</a> shows two declarations which are equivalent in ShEx and SHACL: 
a node must be an IRI, 
have exactly one value for the property 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">name</span></code> that has datatype 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code>, 
have exactly one value for the property 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">gender</span></code> which must be one of (
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">Male</span></code><code> </code><code><span class="c004">schema</span></code><code>:</code><code><span class="c006">Female</span></code>) or a 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code>, 
and optionally have a value for the property 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">birthDate</span></code> that has datatype 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">date</span></code>.</li><li class="li-itemize"><span class="c013">Property Constraints.</span> 
Both languages enable the declaration of constraints on the outgoing and incoming properties of a node.<div class="example"><div class="theorem"><span class="c013">Example 161</span> <span class="c013">(Constraints on incoming/outgoing properties in ShEx/SHACL)</span>  <em> 
</em><a id="ch060IncomingOutgoing"></a><p><em>The following SHACL shapes graph describes that nodes that conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> have one outgoing property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> and one incoming property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">member</span></em></code><em> from an organization.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">inversePath</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">member</span></span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1; </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">type</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1; </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">hasValue</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>can be expressed in ShEx as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ^</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">member</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [:</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011">] }</span></em></td></tr>
</table><p><em>Given the following data: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;                  </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> .     </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :User</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">myCompany</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">member</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>Both ShEx and SHACL check that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> conforms to the </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em> shape 
and raise an error for </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em> because there is no arc </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">member</span></em></code><em> from a node with shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Organization</span></em></code><em> pointing to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em>.</em></p></div></div></li><li class="li-itemize"><span class="c013">Cardinalities</span>. Both languages can constraint the number of values for a
property in a specific range, or leave the maximum number of value unbound.</li><li class="li-itemize"><span class="c013">RDF syntax</span>. Both ShEx and SHACL can use RDF concrete syntaxes
though with different vocabularies.</li><li class="li-itemize"><span class="c013">Logical operators</span>. Both ShEx and SHACL have the logical operators And, Or and Not. 
ShEx has the operators <code>|</code> to represent “oneOf” while SHACL has 
<code><span class="c006">xone</span></code> to represent exactly one.<div class="example"><div class="theorem"><span class="c013">Example 162</span> <span class="c013">(Example with logical operators)</span>  <em> 
</em><a id="ch060AndOrNot"></a><p><em>Imagine that in some domain, a </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Product</span></em></code><em> must have a </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">productID</span></em></code><em> 
with a value that either starts by </em><em>
</em><code><em><span class="c006">P</span></em></code><em> (matches regular expression </em><em>
</em><code><em><span class="c005"><code><em>"^P"</em></code></span></em></code><em>)
or ends by a digit (regular expression </em><code><em>"\\[0-9]$"</em></code><em>) and is not </em><em>
</em><code><em><span class="c005"><code><em>"P23"</em></code></span></em></code><em>.</em></p><p><em>It can be expressed in ShEx as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ({</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> /^</span></em><em><span class="c011"><span class="c006">P</span></span></em><em><span class="c011">/</span></em><em><span class="c011"><span class="c006">i</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">} </span></em><em><span class="c011"><span class="c003">OR</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> /[0-9]</span></em><em><span class="c011"><span class="c006">$</span></span></em><em><span class="c011">/ ;</span></em><em><span class="c011">
</span></em><em><span class="c011">}) </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">NOT</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"P23"</span></em></span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>and in SHACL as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ProductShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">or</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1; </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">pattern</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"^P"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">flags</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"i"</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1; </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">pattern</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"[0-9]$"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> );</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">not</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">hasValue</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"P23"</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"> ]  .</span></em></td></tr>
</table><p><em>Given the following data: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p45</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;             </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"P45"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x23</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;             </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"X23"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p23</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;             </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"P23"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">xx</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;             </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :Product</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productID</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"xx"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div></li><li class="li-itemize"><span class="c013">Extension mechanism</span>. Both ShEx and SHACL have extension mechanisms that support the declaration of more advanced constraints.
ShEx has semantic actions (see Section <a href="#ch040SemanticActions">4.10</a>)
and SHACL has SHACL-SPARQL (see Section <a href="#ch050SHACLSPARQL">5.16</a>).
In Section <a href="#ch070ComparingExtensionMechanism">7.18</a>, we compare the ShEx and SHACL extension mechanisms in more detail.</li></ul>
<!--TOC section id="sec198" Syntactic Differences-->
<h2 class="section" id="sec198">7.2  Syntactic Differences</h2><!--SEC END --><p>
<a id="ch7.sec2"></a></p><p><a id="hevea_default811"></a> <a id="hevea_default812"></a> <a id="hevea_default813"></a> <a id="hevea_default814"></a>
The design of ShEx emphasized human readability, with a compact grammar that follows traditional language design principles and a compact syntax evolved from Turtle.
The specification defines an abstract syntax. The compact syntax (ShExC), a concrete JSON syntax (ShExJ), or any of the concrete syntaxes for RDF may be used to express a ShEx schema.</p><p>SHACL uses the RDF abstract syntax and concrete syntaxes directly. 
The SHACL specification enumerates circa 120 rules that define what constitutes a well-formed SHACL shapes graph.<sup><a id="text57" href="#note57">1</a></sup> 
SHACL processors can simply omit ill-formed shapes graphs.</p><p>A compact syntax inspired by ShEx has been proposed for a subset of SHACL as a WG Note 
(see Section <a href="#ch050SHACLC">5.18</a>) 
but it is not mandatory, and compliant SHACL processors are only required to handle the RDF syntax.</p><p><a id="hevea_default815"></a> 
As the SHACL compact syntax was inspired by ShExC, they look similar, but there are several semantic differences.</p><div class="example"><div class="theorem"><span class="c013">Example 163</span>  <em>Comparing ShEx and SHACL compact syntaxes</em><em> 
</em><a id="ch060ShExSHACLCompactExample"></a><p><em>Given the following ShEx schema:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> /^[</span></em><em><span class="c011"><span class="c003">A</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">R</span></span></em><em><span class="c011">]/ ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> /^[</span></em><em><span class="c011"><span class="c006">M</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">Z</span></span></em><em><span class="c011">]/ ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">brand</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011">* ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">purchaseDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> ?</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>A similar (but not equivalent) representation using SHACL compact syntax is: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c006">:Product</span></span></em><em><span class="c011"> {</span></em><em><span class="c011"><span class="c006">
</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">schema:productId</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">xsd:string</span></span></em><em><span class="c011"> [1..1] </span></em><em><span class="c011"><span class="c006">pattern</span></span></em><em><span class="c011">=</span></em><em><span class="c011"><span style="color:#993333"><em><span class="c011">"^[A-R]"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011"><span class="c006">
</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">schema:productId</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c006">xsd:string</span></span></em><em><span class="c011"> [1..1] </span></em><em><span class="c011"><span class="c006">pattern</span></span></em><em><span class="c011">=</span></em><em><span class="c011"><span style="color:#993333"><em><span class="c011">"^[M-Z]"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011"><span class="c006">
</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">schema:brand</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@:Organization</span></span></em><em><span class="c011"> [0..*] .</span></em><em><span class="c011"><span class="c006">
</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">schema:purchaseDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">xsd:date</span></span></em><em><span class="c011"> [0..1] </span></em><em><span class="c011"><span class="c006">
</span></span></em><em><span class="c011">}</span></em><em><span class="c011"><span class="c006">
:Organization</span></span></em><em><span class="c011"> {</span></em><em><span class="c011"><span class="c006">
</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">schema:name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">xsd:string
</span></span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>Though the examples look similar on the surface, there are several subtle differences. 
The ShEx schema says that there must be two values for the property </em><em>
</em><code><em><span class="c006">
schema</span></em></code><code><em>:</em></code><code><em><span class="c006">productId</span></em></code><em>, 
one matching </em><em>
</em><code><em><span class="c005"><code><em>"^[A-R]"</em></code></span></em></code><em> and the other matching </em><em>
</em><code><em><span class="c005"><code><em>"^[M-Z]"</em></code></span></em></code><em>. 
In contrast, the SHACL shapes graph says that there is only one property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">productId</span></em></code><em>, 
which must satisfy both regular expressions.</em></p><p><em>Given the following RDF data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p1</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;                   </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Product using ShEx</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"AB"</span></em></span></span></em><em><span class="c011">  ;       </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :Product using SHACL</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"XY"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">brand</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">myBrand</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">p2</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;                   </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :Product using ShEx</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"MON"</span></em></span></span></em><em><span class="c011"> ;       </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Product using SHACL</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">brand</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">myBrand</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">myBrand</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"MyBrand"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>Node </em><em>
</em><code><em>:</em></code><code><em><span class="c006">p1</span></em></code><em> conforms to ShEx definition of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Product</span></em></code><em> and does not conform to SHACL because the constraints on </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">productId</span></em></code><em> are not satisfied (both must be satisfied). 
Node </em><em>
</em><code><em>:</em></code><code><em><span class="c006">p2</span></em></code><em> does not conform to ShEx because it only has one </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">productId</span></em></code><em> but conforms to SHACL because it satisfies all constraints.
</em></p></div></div><p>The RDF vocabulary of ShEx is also different from SHACL. </p><div class="example"><div class="theorem"><span class="c013">Example 164</span>  <p><em>The RDF representation of Example </em><a href="#ch060ShExSHACLCompactExample"><em>163</em></a><em> in ShEx is:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Shape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">expression</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">EachOf</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">expressions</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">TripleConstraint</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">predicate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">valueExpr</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeConstraint</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">                   </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">pattern</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"^[A-R]"</span></em></span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">TripleConstraint</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">predicate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">valueExpr</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeConstraint</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">                   </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">pattern</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"^[M-Z]"</span></em></span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">TripleConstraint</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">predicate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">brand</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">min</span></span></em><em><span class="c011"> 0; </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">max</span></span></em><em><span class="c011"> -1;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">valueExpr</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ShapeAnd</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">expressions</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">       [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeConstraint</span></span></em><em><span class="c011">; </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">iri</span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011">
</span></em><em><span class="c011">      )</span></em><em><span class="c011">
</span></em><em><span class="c011">    ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">TripleConstraint</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">predicate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">purchaseDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">min</span></span></em><em><span class="c011"> 0 ; </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">max</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">valueExpr</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeConstraint</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">                  </span></em><em><span class="c011"><span class="c004">sx</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> )</span></em><em><span class="c011">
</span></em><em><span class="c011">] .</span></em></td></tr>
</table><p><em>Here is the RDF encoding of the SHACL shapes graph in 
Example </em><a href="#ch060ShExSHACLCompactExample"><em>163</em></a><em>:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">pattern</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"^[A-R]"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">pattern</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"^[M-Z]"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">brand</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">Organization</span></span></em><em><span class="c011">
</span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">purchaseDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011">
</span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table></div></div>
<!--TOC section id="sec199" Foundation: Schema vs. Constraints-->
<h2 class="section" id="sec199">7.3  Foundation: Schema vs. Constraints</h2><!--SEC END --><p>
<a id="ch7.sec3"></a></p><p>Although both languages share a common goal, their designs are based on different approaches.</p><p>The designers of ShEx intended the language to be like a grammar or schema for RDF graphs. 
This design was inspired by languages such as Yacc, RelaxNG, and XML Schema. 
The main goal was to describe RDF graph structures so they could be validated against those descriptions.</p><p><a id="hevea_default816"></a> <a id="hevea_default817"></a> <a id="hevea_default818"></a>
In contrast, the designers of SHACL aimed at providing a constraint language for RDF. 
The main goal of SHACL is to verify that a given RDF graph satisfies a collection of constraints. 
<a id="hevea_default819"></a>
In this sense, SHACL follows the Schematron approach, applied to RDF: it declares constraints that RDF graphs must fulfill. 
Just as Schematron relies strongly on XPath, SHACL relies strongly on SPARQL.</p><p>This difference is reflected in how validation results fit in.
ShEx implementations usually construct a data structure representing the RDF graph that were validated, containing the nodes and shapes that were matched. 
<a id="hevea_default820"></a> <a id="hevea_default821"></a>
After ShEx validation, the result shape map contains a structure which can be considered as an 
annotated graph that can be traversed or used for further actions, 
such as transforming RDF graphs into other data structures.
This structure is analogous to the Post Schema Validation Infoset from XML Schema (see Section <a href="#ch030PSVI">3.1.3</a>).</p><p>In contrast, SHACL describes in detail the errors returned when constraints are not satisfied. 
A SHACL validation report (see Section <a href="#ch050ValidationReport">5.5</a>) can be very useful for detecting and repairing errors in RDF graphs. 
When there are no errors, SHACL processors usually report a single value, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">conformance</span></code><code> </code><code><span class="c003">true</span></code>.
With SHACL, it can be difficult for users to distinguish the case in which a node 
is valid because it was checked against some shape, versus the case in which a node
is not valid but was ignored by the SHACL processor because it was not reached during the validation process.</p><p>The SHACL recommendation prescribes a basic structure for each violation result
but does not prescribe what information is to be returned when a node is validated.
Nevertheless, SHACL processors can enrich their results.
<a id="hevea_default822"></a>
Shaclex, for example, returns information about the nodes validated.</p>
<!--TOC section id="sec200" Invoking Validation-->
<h2 class="section" id="sec200">7.4  Invoking Validation</h2><!--SEC END --><p>
<a id="ch7.sec4"></a></p><p>SHACL shapes can include target declarations that associate each shape with a set of RDF nodes and tell SHACL processors how to trigger the validation process
(see Section <a href="#ch050TargetNodes">5.7</a>). </p><div class="example"><div class="theorem"><span class="c013">Example 165</span>  <em>Target declarations and SHACL invocation</em><em> 
</em><a id="ch060InvokingValidationSHACL"></a><p><em>Consider the following SHACL shapes graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetClass</span></span></em><em><span class="c011">      :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetObjectsOf</span></span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">member</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetSubjectsOf</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetNode</span></span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">] .</span></em></td></tr>
</table><p><em>and the following RDF graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">myCompany</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">member</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Carol"</span></em></span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Smith"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">           </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Dave Smith"</span></em></span></span></em><em><span class="c011"> .</span></em></td></tr>
</table><p><em>A SHACL processor checks that </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em>, </em><em>
</em><code><em>:</em></code><code><em><span class="c006">bob</span></em></code><em>, </em><em>
</em><code><em>:</em></code><code><em><span class="c006">carol</span></em></code><em>, and </em><em>
</em><code><em>:</em></code><code><em><span class="c006">dave</span></em></code><em> conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em>.</em></p><p><em>Directly associating target declarations to shapes can become quite verbose 
(see Section </em><a href="#ch070ShaclInShacl"><em>6.6</em></a><em>). 
At the same time, it can limit the reusability of a shape in other contexts. 
In the example above, if we import </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> in another context where the node </em><em>
</em><code><em>:</em></code><code><em><span class="c006">alice</span></em></code><em> represents a product instead of a user, the SHACL processor will still try to validate the node with that shape. 
</em><a id="hevea_default823"></a><em>
To avoid such cases, SHACL provides the </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">deactivated</span></em></code><em> directive 
(see Section </em><a href="#ch050DeactivatingShapes"><em>106</em></a><em>).
</em></p></div></div><p>While including the target declarations in the schema is a convenient way to trigger validation, it can be considered an anti-pattern because the shape can’t be reused for other data.
Even though this could work in some closed systems, it is impractical for data in open environments.
In the interest of keeping schemas reusable, it is a good practice for SHACL 
to place target declarations in a separate file and link this file to the schema with 
<code><span class="c004">owl</span></code><code>:</code><code><span class="c006">imports</span></code>.</p><p>A ShEx schema declares a constellation of shape expressions that function as a grammar against which RDF nodes can be tested. 
The schema itself provides no mechanism for associating a shape expression with the nodes to which the schema applies.
In the interest of making schemas reusable, ShEx requires that definitions of shapes be decoupled from their application to particular RDF graphs. 
ShEx separates the language of schemas, on the one hand, from the association of shapes with nodes to be validated, on the other, by introducing the notion of shape maps
(see Section <a href="#ch040ShapeMaps">4.9</a> for more details).
This separation of concerns encourages the community to innovate on node-shape association mechanisms independently from the validation semantics.
For example, though the shape map specification currently only supports RDF nodes by direct reference or by triple pattern, Wikidata versions of ShEx include support for SPARQL queries over remote endpoints.
As such conventions evolve they can be rolled into future versions of the shape map specification.</p><div class="example"><div class="theorem"><span class="c013">Example 166</span>  <em>Invoking validation through Shape maps in ShEx</em><p><em>The SHACL shapes graph from Example </em><a href="#ch060InvokingValidationSHACL"><em>165</em></a><em> can be expressed in ShEx with the following query shape map:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">{ </span></em><em><span class="c011"><span class="c006">FOCUS</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">type</span></span></em><em><span class="c011">      :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> }</span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">{ </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">member</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">FOCUS</span></span></em><em><span class="c011"> }</span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">{ </span></em><em><span class="c011"><span class="c006">FOCUS</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">familyName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">_</span></span></em><em><span class="c011"> }</span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011">,</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011">                       </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em></td></tr>
</table><p><em>and removing the target declarations from the shape definition:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>The declarations above behave similarly to the SHACL target declarations. 
One subtle difference is that while in the previous case, ShEx only checks direct instances of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>, 
SHACL applies the concept of SHACL instance, which also encompass instances of subclasses of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">User</span></em></code><em>. 
This possibility can be expressed using property paths in shape maps as: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">{ </span></em><em><span class="c011"><span class="c006">FOCUS</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">rdf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">type</span></span></em><em><span class="c011">/</span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">subClassOf</span></span></em><em><span class="c011">* :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011"> }</span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em></td></tr>
</table></div></div><p>Another notable difference between SHACL target node declarations and ShEx shape maps is the following:
when a declared target node in SHACL does not exist in the data graph and there are no required values for this node in the shape, the node passes the validation. In ShEx if the node does not exit it always results in a failure, no matter of the shape definition.</p>
<!--TOC section id="sec201" Modularization and Reusability-->
<h2 class="section" id="sec201">7.5  Modularization and Reusability</h2><!--SEC END --><p>
<a id="ch7.sec5"></a></p><p>SHACL leverages the property 
<code><span class="c004">owl</span></code><code>:</code><code><span class="c006">imports</span></code> to enable a shapes graph to import other shapes graphs. 
This mechanism, which can be used to provide the basis of a modular design, is described in Section <a href="#ch050ImportingShapes">5.4</a>.</p><p>ShEx has the concept of 
<code><span class="c006">shapeExternal</span></code> to declare that the contents of a shape can be obtained from an external source (see Section <a href="#ch040.ExternalShapes">4.7.3</a>).</p><p>ShEx has a basic import mechanism which allows a schema to derefentiate another schema (see section <a href="#ch040ImportMechanism">4.12</a>) 
while SHACL has also the possibility to import other shapes graphs using 
<code><span class="c004">owl</span></code><code>:</code><code><span class="c006">imports</span></code> (see section <a href="#ch050ImportingShapes">5.4</a>). 
One difference between ShEx and SHACL import mechanisms is that ShEx dereferentiates the schema while SHACL is a graph merge, 
so in SHACL the system expects to have already fetched all of the relevant shapes graphs.</p><p>Both languages support the reuse of shapes through extending a shape with an 
<code><span class="c006">AND</span></code> operator, as described in 
Section <a href="#ch040ReusingShapesShEx">4.8.1</a> 
(ShEx) and Section <a href="#ch050ExtendingShapesSHACL">127</a> (SHACL). </p><div class="example"><div class="theorem"><span class="c013">Example 167</span>  <em>Extending shapes in ShEx and SHACL</em><p><em>As a simple example, the following ShEx schema declares a </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Product</span></em></code><em> shape and a </em><em>
</em><code><em>:</em></code><code><em><span class="c006">SoldProduct</span></em></code><em> shape:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">price</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">decimal</span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">SoldProduct</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">AND</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">purchaseDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> /^[</span></em><em><span class="c011"><span class="c003">A</span></span></em><em><span class="c011">-</span></em><em><span class="c011"><span class="c006">Z</span></span></em><em><span class="c011">]/</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>A </em><em>
</em><code><em>:</em></code><code><em><span class="c006">SoldProduct</span></em></code><em> has the same constraints as the </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Product</span></em></code><em> plus two more constraints.
One that further restricts the property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">productId</span></em></code><em> and another one that requires a new property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">purchaseDate</span></em></code><em>.</em></p><p><em>Here is an analogous SHACL shapes graph:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">price</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">decimal</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ].</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">SoldProduct</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">and</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">   :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011">
</span></em><em><span class="c011">    [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">purchaseDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    ]</span></em><em><span class="c011">
</span></em><em><span class="c011">    [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">pattern</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"^[A-Z]"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ) .</span></em></td></tr>
</table><p><em>Another way to reuse shapes in SHACL is by leveraging the subclass relationship and the corresponding target declarations.
The example above could be expressed as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">, </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Class</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">price</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">decimal</span></span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ].</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">SoldProduct</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">, </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Class</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">subClassOf</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">purchaseDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">productId</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">pattern</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"^[A-Z]"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>In this approach, </em><em>
</em><code><em>:</em></code><code><em><span class="c006">SoldProduct</span></em></code><em> is declared as subclass of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Product</span></em></code><em>. 
The </em><em>
</em><code><em><span class="c004">rdfs</span></em></code><code><em>:</em></code><code><em><span class="c006">Class</span></em></code><em> declaration establishes that all nodes of </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> </em><em>
</em><code><em>:</em></code><code><em><span class="c006">SoldProduct</span></em></code><em> must conform to shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">SoldProduct</span></em></code><em> and also to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Product</span></em></code><em>.</em></p><p><em>One limitation of this approach is that it requires nodes to have an 
the appropriate </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> declaration as well as keep
</em><em>
</em><code><em><span class="c004">rdfs</span></em></code><code><em>:</em></code><code><em><span class="c006">subClassOf</span></em></code><em> statements in the data graph.</em></p></div></div><p>The reusability of both languages could be improved. 
For example, there is no notion of a module, where one might declare internal or hidden shapes, or of public shapes that could be imported by other modules. 
Also, there is no notion of a shape extending other shape, inheriting some properties and redefining others.
Such features could potentially be developed for both languages.</p>
<!--TOC section id="sec202" Shapes, Classes, and Inference-->
<h2 class="section" id="sec202">7.6  Shapes, Classes, and Inference</h2><!--SEC END --><p>
<a id="ch7.sec6"></a></p><p>ShEx is only concerned with RDF graphs as they are presented to the validator. 
There is no interaction between the ShEx processor and any inference mechanism. 
In this way, ShEx can be used before or after inference. 
It can even be used to validate the behavior of an inference engine if one defines the shapes that an RDF graph must have before and after inference (see an example in Section <a href="#ch040ShExInference">4.11</a>).</p><p>In contrast, SHACL has some mechanisms that may interact with inference. 
For example, the implicit class target (see Section <a href="#ch050implicitTargetClass">5.7.3</a>),
which associates a shape with a class, triggers validation on all nodes that are 
SHACL instances.
The notion of SHACL instance is different to the RDF Schema notion of instance because it encompasses instances 
of a class plus its sub-classes (as determined by following 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">subClassOf</span></code> links in the data), but does 
not take into account all RDFS elements. </p><p>The results of applying a SHACL validator may be different if applied to RDF graphs before or after RDFS inference. 
As SHACL processors are not required to support full RDFS inference, they may ignore other RDFS predicates, such as

<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">domain</span></code>, 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">range</span></code>, and sub-properties of 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">subClassOf</span></code>.</p><p>For example, consider the following SHACL shape:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">UserShape</span></span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetClass</span></span><span class="c011"> :</span><span class="c011"><span class="c006">User</span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  ] .</span></td></tr>
</table><p>and the following RDF data:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Teacher</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">subClassOf</span></span><span class="c011"> :</span><span class="c011"><span class="c006">User</span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">teaches</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">domain</span></span><span class="c011"> :</span><span class="c011"><span class="c006">Teacher</span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">frank</span></span><span class="c011"> :</span><span class="c011"><span class="c006">teaches</span></span><span class="c011"> :</span><span class="c011"><span class="c006">Algebra</span></span><span class="c011"> ;    </span><span class="c011"><span class="c008"><span class="c011"># Ignored without RDFS inference *)</span></span></span><span class="c011">
</span><span class="c011">       </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Frank"</span></span></span><span class="c011"> .  </span><span class="c011"><span class="c008"><span class="c011">#Passes as a :UserShape with RDFS inference</span></span></span><span class="c011">
</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">grace</span></span><span class="c011"> :</span><span class="c011"><span class="c006">teaches</span></span><span class="c011"> :</span><span class="c011"><span class="c006">Logic</span></span><span class="c011"> ;      </span><span class="c011"><span class="c008"><span class="c011"># Ignored without RDFS inference *)</span></span></span><span class="c011">
</span><span class="c011">       </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> 34 .       </span><span class="c011"><span class="c008"><span class="c011">#Fails as a :UserShape with RDFS inference</span></span></span><span class="c011">
</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">oscar</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> :</span><span class="c011"><span class="c006">Teacher</span></span><span class="c011"> ;           </span><span class="c011"><span class="c008"><span class="c011">#Fails as a :UserShape</span></span></span><span class="c011">
</span><span class="c011">       </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> 45 .</span></td></tr>
</table><p><a id="hevea_default824"></a>
If SHACL is applied after RDFS inference, the system checks whether 
<code>:</code><code><span class="c006">frank</span></code> and 
<code>:</code><code><span class="c006">grace</span></code> conform to 
<code>:</code><code><span class="c006">UserShape</span></code>. 
This is because the domain declaration of 
<code>:</code><code><span class="c006">teaches</span></code> allows RDFS to infer that they are instances of 
<code>:</code><code><span class="c006">Teacher</span></code> and, hence, instances of 
<code>:</code><code><span class="c006">User</span></code>, with the following results:</p><ul class="itemize"><li class="li-itemize">
<code>:</code><code><span class="c006">grace</span></code> has a value for 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">name</span></code> that is not an 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code>.</li><li class="li-itemize">
<code>:</code><code><span class="c006">oscar</span></code> has a value for 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">name</span></code> that is not an 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code>.</li></ul><p>In contrast, if SHACL is applied without RDFS inference, the system returns only one error:</p><ul class="itemize"><li class="li-itemize">

<code>:</code><code><span class="c006">oscar</span></code> has a value for 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">name</span></code> that is not an 
<code><span class="c004">xsd</span></code><code>:</code><code><span class="c006">string</span></code>.
</li></ul><p>The system does not check 
<code>:</code><code><span class="c006">frank</span></code> or 
<code>:</code><code><span class="c006">grace</span></code> against shape 
<code>:</code><code><span class="c006">User</span></code> because it only follows 
<code><span class="c004">rdf</span></code><code>:</code><code><span class="c006">type</span></code> and 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">subClassOf</span></code> declarations. 
In the absence of RDFS inference, the system only checks that 
<code>:</code><code><span class="c006">oscar</span></code> has shape 
<code>:</code><code><span class="c006">User</span></code>. If SHACL is applied after RDFS inference, the system checks the additional nodes.</p><p>This interference between SHACL and RDFS semantics hampers the use of SHACL to validate an inference system as the use case described for ShEx in 
Example <a href="#ch040%3AexampleInference">21</a>.</p><p><a id="hevea_default825"></a>
The property 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">entailment</span></code> can be used to declare that the SHACL processors should add inferred triples during validation to the data graph following the inference rules declared by a given entailment regime (see Section <a href="#ch050SHACLINFERENCE">5.17</a>).
Nevertheless, SHACL processors are not required to support entailment regimes. 
If a shapes graph declares an entailment and the processor does not support it, a failure must be signalled.</p>
<!--TOC section id="sec203" Violation Reporting and Severities-->
<h2 class="section" id="sec203">7.7  Violation Reporting and Severities</h2><!--SEC END --><p>
<a id="ch7.sec7"></a></p><p>As pointed out above, SHACL puts more emphasis on validation and provides a dedicated RDF vocabulary for describing conformance and reporting detailed violation results.</p><p><a id="hevea_default826"></a>
For every focus node that does not conform to a shape, an instance of 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">ViolationResult</span></code> is created in the SHACL results graph.
Each violation result links back to the focus node along with metadata, which includes the shape IRI, human readable messages, the failed constraint, the path, and (when available) the value node.
<a id="hevea_default827"></a>
<a id="hevea_default828"></a>
The severity level of a SHACL shape, if declared with (
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">Info</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">Warning</span></code>, or 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">Violation</span></code>), can be included in the violation result 
(see Section <a href="#ch050severity">5.6.5</a>).</p><p>ShEx does not have rich violation reporting, but it can provide related functionality.
The result of the validation process is a shape map which contains information about the nodes that conform to a shape or not. 
Every violation can be viewed as an entry showing the focus node and the shape that failed. 
ShEx processors usually enrich these entries with further information.
As shapes in ShEx can contain arbitrary 
annotations (see Section <a href="#ch040Annotations">4.7.5</a>), these annotations can be included in the results.</p><p>In simple and top-level shape definitions, SHACL provides 
richer and granular violation reporting for each individual constraint that failed. 
However, violations on nested constraints as formed using 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">node</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">and</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">or</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">xone</span></code>, or 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">qualifiedValueShape</span></code>, report only which nested constraint failed (“
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">node</span></code> failed”) without detailing why.
Implementations could report that information by means of the <span class="c007"><span class="c011"><span class="c010">sh:detail</span></span></span> property, but that would be an implementation dependent feature.
Also, as a result of validation ShEx produces a Result Map associating nodes
with shapes (either validated or non-validated) while SHACL has no comparable feature.</p>
<!--TOC section id="sec204" Default Cardinalities-->
<h2 class="section" id="sec204">7.8  Default Cardinalities</h2><!--SEC END --><p>
<a id="ch7.sec8"></a></p><p>If no cardinality is declared, ShEx assumes the cardinality to be 
<code>{1,1}</code> while SHACL assumes 
<code>{0,*}</code>. </p><div class="example"><div class="theorem"><span class="c013">Example 168</span>  <em>Comparing cardinalities in ShEx and SHACL</em><p><em>The following ShEx schema declares that nodes conforming to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> must have one </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> and one </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">givenName</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>The following SHACL shapes graph declares that if there is a </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> then it must have datatype </em><em>
</em><code><em><span class="c004">xsd</span></em></code><code><em>:</em></code><code><em><span class="c006">string</span></em></code><em>, and the same for </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">givenName</span></em></code><em>:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>Given the following data:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice Cooper"</span></em></span></span></em><em><span class="c011">; </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape - ShEx</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Alice"</span></em></span></span></em><em><span class="c011"> .       </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape - SHACL</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Robert"</span></em></span></span></em><em><span class="c011"> ;      </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape  - ShEx</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">age</span></span></em><em><span class="c011">           23 .            </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Passes as a :UserShape - SHACL</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> 345 ;                </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape - ShEx</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">       </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> 346 .           </span></em><em><span class="c011"><span class="c008"><em><span class="c011">#Fails as a :UserShape - SHACL</span></em></span></span></em></td></tr>
</table></div></div><p>
The difference in results is based on the difference between the ShEx and SHACL points of view.
In ShEx, a triple expression makes explicit which triples involving the focus node should be found in the graph, and specifying a cardinality may require several such triples.
The absence of cardinality means one triple.
In SHACL, a shape is a conjunction of constraints.
A cardinality constraint is used to constrain the number of allowed triples of a given kind, and
the absence of cardinality means no constraint on the number of triples allowed.</p>
<!--TOC section id="sec205" Property Paths-->
<h2 class="section" id="sec205">7.9  Property Paths</h2><!--SEC END --><p> 
<a id="ch7.sec9"></a></p><p><a id="hevea_default829"></a>
SHACL property shapes can use a subset of SPARQL 1.1 property paths as 
values for 
<br>

<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">path</span></code>. 
In this way, SHACL leverages on the expressiveness of SPARQL property paths to define constraints. </p><p>ShEx does not support arbitrary property paths—only direct and inverse predicates.
However, it is easy to emulate this SHACL behavior using nested shapes or recursion.</p><div class="example"><div class="theorem"><span class="c013">Example 169</span>  <em>Comparing paths in SHACL and ShEx</em><p><em>The following SHACL declaration:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">GrandParent</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">zeroOrMorePath</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">class</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> (</span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">child</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">child</span></span></em><em><span class="c011"> ) ;</span></em><em><span class="c011">
</span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">class</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">GrandChild</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>can be defined in ShEx as: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">GrandParent</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">PersonKnown</span></span></em><em><span class="c011">*;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">child</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">child</span></span></em><em><span class="c011"> { </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [ :</span></em><em><span class="c011"><span class="c006">GrandChild</span></span></em><em><span class="c011"> ] }</span></em><em><span class="c011">
</span></em><em><span class="c011"> }</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">PersonKnown</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> [ :</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">PersonKnown</span></span></em><em><span class="c011">*</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table></div></div>
<!--TOC section id="sec206" Recursion-->
<h2 class="section" id="sec206">7.10  Recursion</h2><!--SEC END --><p>
<a id="ch7.sec10"></a></p><p>ShEx supports the definition of cyclic data models with recursive shapes 
(see Section <a href="#ch040%3ACyclicReferences">4.7.2</a>) while
the processing of recursive shapes is undefined in SHACL 
(see Section <a href="#050SHACLRecursion">5.12.1</a>). 
However, some recursion cases can be handled in SHACL through SHACL property paths.</p><div class="example"><div class="theorem"><span class="c013">Example 170</span>  <em>Recursion</em><p><em>The following shape declares a recursive </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">IRI</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">@</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011">*</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>Nodes that conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> must be IRIs and can have zero or more </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> arcs whose values must all conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em>. </em></p><p><em>A direct translation to SHACL would be: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShapeRecursion</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;   </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># This definition is recursive *)</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">UserShapeRecursion</span></span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>However, recursion in SHACL is undefined and not all SHACL processors may handle that definition in the same way. 
The specification leaves recursion as an implementation-dependent feature.</em></p><p><em>One possible solution is to add target declarations to the shape to trigger the validation against them. 
A typical solution is to use </em><em>
</em><code><em><span class="c004">rdf</span></em></code><code><em>:</em></code><code><em><span class="c006">type</span></em></code><em> declarations as we saw in 
Section </em><a href="#050SHACLRecursion"><em>5.12.1</em></a><em>. 
In this case, we could also use </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">targetSubjectsOf</span></em></code><em> like:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShapeRecursion</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">targetSubjectsOf</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">class</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">User</span></span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Now, every node that is a subject of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> must conform to that shape. </em></p><p><em>This solution may not be realistic in general. 
In this case, for example, we are forcing every node that is a subject of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> to conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> and in other contexts, this could be too restrictive. 
The same situation happens if we use </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">targetClass</span></em></code><em> declarations.</em></p><p><em>Another approach to emulate recursive behavior is to use property paths. 
For example:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">zeroOrMorePath</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">knows</span></span></em><em><span class="c011">] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>In this case, every node that is related by property </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> zero or more times with the focus node, must be an IRI. 
With this solution, there may be other nodes that are subjects of </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">knows</span></em></code><em> but do not need to conform to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em>.</em></p><p><em>In Section </em><a href="#ch050RecursionPropertyPaths"><em>5.12.1</em></a><em>, we described more advanced alternatives for using SHACL property paths as an alternative to recursion.
</em></p></div></div>
<!--TOC section id="sec207" Property Pair Constraints and Uniqueness-->
<h2 class="section" id="sec207">7.11  Property Pair Constraints and Uniqueness</h2><!--SEC END --><p>
<a id="ch7.sec11"></a></p><p>Property pair constraints in SHACL can be used to compare 
current values with values from another path, checking if they are equal, different or less than them (see Section <a href="#ch050propertyPairConstraints">5.14</a>). </p><p>ShEx 2.0 does not have the concept of property pair constraints,
though this possibility is being studied to be included in future versions.</p><div class="example"><div class="theorem"><span class="c013">Example 171</span>  <em>Example with property pair constraints</em><p><em>The following shapes graph declares that nodes conforming to </em><em>
</em><code><em>:</em></code><code><em><span class="c006">UserShape</span></em></code><em> must fulfil the constraint that </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">givenName</span></em></code><em> is equal to </em><em>
</em><code><em><span class="c004">foaf</span></em></code><code><em>:</em></code><code><em><span class="c006">firstName</span></em></code><em> and different from </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">lastName</span></em></code><em>, and that </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">birthDate</span></em></code><em> must be less than </em><em>
</em><code><em>:</em></code><code><em><span class="c006">loginDate</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">disjoint</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">lastName</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">foaf</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">firstName</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">equals</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">lessThan</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">loginDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table><p><em>The previous example could be written in a future version of ShEx as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">UserShape</span></span></em><em><span class="c011"> {                                 </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Not supported in ShEx 2.0</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">$</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;givenName&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">givenName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">$</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;firstName&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">firstName</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">$</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;birthDate&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">$</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;loginDate&gt;</span></em></span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">loginDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">$</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;givenName&gt;</span></em></span></span></em><em><span class="c011"> =  </span></em><em><span class="c011"><span class="c006">$</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;firstName&gt;</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">$</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;givenName&gt;</span></em></span></span></em><em><span class="c011"> != </span></em><em><span class="c011"><span class="c006">$</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;lastName&gt;</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">$</span></span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;birthDate&gt;</span></em></span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;  $&lt;loginDate&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table></div></div><p><a id="hevea_default830"></a>
One constraint often required is the ability to declare unique keys. 
Unique keys are combinations of values that must be unique in a given scope.
The scope can be the entire graph or a focus node. 
One example of a unique constraint for an entire graph is to require that there be no pair of identical values for the properties 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">givenName</span></code> and 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">lastName</span></code>. 
One example of a unique constraint with a focus node scope would be to require that each node not have two values of 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">label</span></code> with the same language tag.</p><p>Neither SHACL nor ShEx 2.0 support unique keys in general, although they are supported by OWL 2.
<a id="hevea_default831"></a>
SHACL Core offers the 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">uniqueLang</span></code> constraint to say that there can be no more than one literal for each language tag 
(see Section <a href="#ch050UniqueLang">124</a>).
Other constraints can be defined using SHACL-SPARQL.
<a id="hevea_default832"></a>
In the case of ShEx, there is a proposal to add a 
<code><span class="c006">UNIQUE</span></code> keyword to the language, with the scope and the list of predicates that must be unique as parameters.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">UserShape</span></span><span class="c011"> {                                 </span><span class="c011"><span class="c008"><span class="c011"># Not supported in ShEx 2.0</span></span></span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">givenName</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">lastName</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c006">UNIQUE</span></span><span class="c011">(</span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">givenName</span></span><span class="c011">, </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">lastName</span></span><span class="c011">)</span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table>
<!--TOC section id="sec208" Repeated Properties-->
<h2 class="section" id="sec208">7.12  Repeated Properties</h2><!--SEC END --><p> 
<a id="ch7.sec12"></a></p><p>ShEx allows multiple constraints on triples involving the focus nodes with the same property to be defined.
This feature is called repeated properties as explained in 
Section <a href="#ch040.RepeatedPropertiesSection">4.6.7</a>.
In SHACL, repeated properties behave conjunctively, which means that all constraints applied to properties with the same 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">path</span></code> must be satisfied. 
The typical SHACL pattern of: </p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Shape</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> :</span><span class="c011"><span class="c006">p1</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c008"><span class="c011">#...constraints on :p1... </span></span></span><span class="c011">
</span><span class="c011">  ];</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> :</span><span class="c011"><span class="c006">p2</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c008"><span class="c011">#...constraints on :p2... </span></span></span><span class="c011">
</span><span class="c011">  ];</span><span class="c011">
</span><span class="c011">  ...</span></td></tr>
</table><p>must be changed if we want 
<code>:</code><code><span class="c006">p1</span></code> and 
<code>:</code><code><span class="c006">p2</span></code> to be the same property, only with different values. 
A direct translation of that pattern to:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Shape</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> :</span><span class="c011"><span class="c006">p</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c008"><span class="c011"># ...constraints on :p... </span></span></span><span class="c011">
</span><span class="c011">  ];</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> :</span><span class="c011"><span class="c006">p</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c008"><span class="c011">#...other constraints on :p... </span></span></span><span class="c011">
</span><span class="c011">  ];</span><span class="c011">
</span><span class="c011">  ...</span></td></tr>
</table><p>means that all constraints apply to the path 
<code>:</code><code><span class="c006">p</span></code> conjunctively.</p><div class="example"><div class="theorem"><span class="c013">Example 172</span>  <em>Repeated properties in ShEx and SHACL</em><p><em>The following ShEx schema declares that a </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em> has two parents, one with the value of </em><em>
</em><code><em>:</em></code><code><em><span class="c006">isMale</span></em></code><em> </em><em>
</em><code><em><span class="c003">true</span></em></code><em> and the other with the value </em><em>
</em><code><em>:</em></code><code><em><span class="c006">isFemale</span></em></code><em> </em><em>
</em><code><em><span class="c003">true</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> { :</span></em><em><span class="c011"><span class="c006">isMale</span></span></em><em><span class="c011">   [ </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011"> ] }</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> { :</span></em><em><span class="c011"><span class="c006">isFemale</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011"> ] }</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>A direct translation of the ShEx schema into SHACL would be:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">isMale</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">hasValue</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">   ]</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">node</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">isFemale</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">hasValue</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1</span></em><em><span class="c011">
</span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">]</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>However, this SHACL Shapes graph would only be satisfied by a node whose </em><em>
</em><code><em><span class="c004">schema</span></em></code><code><em>:</em></code><code><em><span class="c006">parent</span></em></code><em> value is both male and female.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">alice</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011"> ;    </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Person in ShEx</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011"> .  </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :Person in SHACL</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bob</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">isMale</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">carol</span></span></em><em><span class="c011">   :</span></em><em><span class="c011"><span class="c006">isFemale</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011"> .</span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">dave</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">         </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011"> .      </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Fails as a :Person in ShEx</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">                                 </span></em><em><span class="c011"><span class="c008"><em><span class="c011"># Passes as a :Person in SHACL</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">x</span></span></em><em><span class="c011">       :</span></em><em><span class="c011"><span class="c006">isMale</span></span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">         :</span></em><em><span class="c011"><span class="c006">isFemale</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div><p>As described in Section <a href="#ch050QualifiedValueShapes">5.12.2</a>, repeated properties can be handled in SHACL using 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">qualifiedValueShape</span></code> but the definitions are more verbose.</p><div class="example"><div class="theorem"><span class="c013">Example 173</span>  <em>Repeated properties with qualified value shapes</em><p><em>The following declaration handles the previous example using qualified value shapes.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">                </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">qualifiedValueShape</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">isMale</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">hasValue</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011">
</span></em><em><span class="c011">     ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">qualifiedMinCount</span></span></em><em><span class="c011">   1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">qualifiedMaxCount</span></span></em><em><span class="c011">   1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ];</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">                </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">qualifiedValueShape</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">     :</span></em><em><span class="c011"><span class="c006">isFemale</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">      </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">hasValue</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">true</span></span></em><em><span class="c011">
</span></em><em><span class="c011">     ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">qualifiedMinCount</span></span></em><em><span class="c011">   1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">qualifiedMaxCount</span></span></em><em><span class="c011">   1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parent</span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 2;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 2</span></em><em><span class="c011">
</span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">.</span></em></td></tr>
</table><p><em>Note that it requires to establish a count of the number of repeated properties allowed (in this case 2).
</em></p></div></div>
<!--TOC section id="sec209" Exactly One and Alternatives-->
<h2 class="section" id="sec209">7.13  Exactly One and Alternatives</h2><!--SEC END --><p> 
<a id="ch060xoneAlternatives"></a>
<a id="ch7.sec13"></a></p><p>Data coherence minimizes defensive programming by providing predictable, logical data structures that 
must be used.
To take a trivial example, a data structure may offer a choice between different representations of a name
as in Example <a href="#ch040%3AexampleChoices">55</a> (for ShEx) and the corresponding Example <a href="#ch050exampleChoicesSHACL">131</a> (for SHACL).</p><p>Let’s change the constraint to require a combination of 

<code><span class="c004">foaf</span></code><code>:</code><code><span class="c006">firstName</span></code> and 
<code><span class="c004">foaf</span></code><code>:</code><code><span class="c006">lastName</span></code> or 

<code><span class="c004">foaf</span></code><code>:</code><code><span class="c006">givenName</span></code> and 
<code><span class="c004">foaf</span></code><code>:</code><code><span class="c006">familyName</span></code> or 

<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">givenName</span></code> and 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">familyName</span></code> 
where none of these properties can be mixed with the others. In ShEx, this can be declared as:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Person</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">firstName</span></span><span class="c011"> . ; </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">lastName</span></span><span class="c011"> . |</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">givenName</span></span><span class="c011"> . ; </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">familyName</span></span><span class="c011"> . |</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">givenName</span></span><span class="c011"> . ; </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">familyName</span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table><p>Given the following data, 
<code>:</code><code><span class="c006">alice</span></code> and 
<code>:</code><code><span class="c006">bob</span></code> conform to 
<code>:</code><code><span class="c006">Person</span></code> while 
<code>:</code><code><span class="c006">carol</span></code> and 
<code>:</code><code><span class="c006">dave</span></code> do not. 
In the case of 
<code>:</code><code><span class="c006">dave</span></code>, it fails because the data meets one side of the disjunction 
and has some properties from the other side.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">alice</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">firstName</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Alice"</span></span></span><span class="c011"> ;    </span><span class="c011"><span class="c008"><span class="c011">#Passes as a :Person</span></span></span><span class="c011">
</span><span class="c011">       </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">lastName</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Cooper"</span></span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">bob</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">givenName</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Robert"</span></span></span><span class="c011"> ;   </span><span class="c011"><span class="c008"><span class="c011">#Passes as a :Person</span></span></span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">familyName</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Smith"</span></span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">carol</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">firstName</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Carol"</span></span></span><span class="c011"> ;    </span><span class="c011"><span class="c008"><span class="c011">#Fails as a :Person</span></span></span><span class="c011">
</span><span class="c011">       </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">lastName</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"King"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">       </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">givenName</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Carol"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">       </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">familyName</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"King"</span></span></span><span class="c011"> .</span><span class="c011">
</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">dave</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">firstName</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Dave"</span></span></span><span class="c011"> ;      </span><span class="c011"><span class="c008"><span class="c011">#Fails as a :Person</span></span></span><span class="c011">
</span><span class="c011">      </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">lastName</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Clark"</span></span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">      </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">givenName</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"Dave"</span></span></span><span class="c011"> .</span></td></tr>
</table><p>A first attempt to model the example in SHACL could be:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">PersonShape</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetClass</span></span><span class="c011"> :</span><span class="c011"><span class="c006">Person</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">xone</span></span><span class="c011"> (</span><span class="c011">
</span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">firstName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
</span><span class="c011">   ] ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">lastName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
</span><span class="c011">   ] ;</span><span class="c011">
</span><span class="c011"> ]</span><span class="c011">
</span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">givenName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
</span><span class="c011">   ] ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">familyName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
</span><span class="c011">   ] ;</span><span class="c011">
</span><span class="c011"> ]</span><span class="c011">
</span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">givenName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
</span><span class="c011">   ] ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">familyName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
</span><span class="c011">   ] ;</span><span class="c011">
</span><span class="c011"> ]</span><span class="c011">
</span><span class="c011">) .</span></td></tr>
</table><p>However, this SHACL shapes graph has a meaning different from the ShEx schema.
In this case, 
<code>:</code><code><span class="c006">dave</span></code> conforms to 
<code>:</code><code><span class="c006">Person</span></code> because it matches exactly one of the shapes (it has 
<code><span class="c004">foaf</span></code><code>:</code><code><span class="c006">firstName</span></code> and 
<code><span class="c004">foaf</span></code><code>:</code><code><span class="c006">lastName</span></code>) and does not match the other shapes. 
The intended meaning was that it should not have any of the other properties but it has 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">givenName</span></code>. </p><p>As we described in Section <a href="#ch050exampleChoicesSHACL">131</a>, SHACL’s 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">xone</span></code> does not check if there are partial matches in other shapes. A workaround to simulate ShEx behavior is to normalize the expression using a top-level disjunction whose shapes exclude the properties that are not desired. </p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">Person</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">or</span></span><span class="c011"> (</span><span class="c011">
</span><span class="c011">  [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">firstName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
</span><span class="c011">    ];</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">lastName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
</span><span class="c011">    ];</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">givenName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0</span><span class="c011">
</span><span class="c011">   ];</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">familyName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0</span><span class="c011">
</span><span class="c011">   ];</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">givenName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0</span><span class="c011">
</span><span class="c011">   ];</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">familyName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0</span><span class="c011">
</span><span class="c011">   ];</span><span class="c011">
</span><span class="c011"> ]</span><span class="c011">
</span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">firstName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0</span><span class="c011">
</span><span class="c011">   ];</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">lastName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0</span><span class="c011">
</span><span class="c011">   ];</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">givenName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
</span><span class="c011">   ] ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">familyName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
</span><span class="c011">   ];</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">givenName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0</span><span class="c011">
</span><span class="c011">   ] ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">familyName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0</span><span class="c011">
</span><span class="c011">   ];</span><span class="c011">
</span><span class="c011"> ]</span><span class="c011">
</span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">firstName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0</span><span class="c011">
</span><span class="c011">   ];</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">lastName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0</span><span class="c011">
</span><span class="c011">   ];</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">givenName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0</span><span class="c011">
</span><span class="c011">   ];</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">familyName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0</span><span class="c011">
</span><span class="c011">   ];</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">givenName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
</span><span class="c011">   ] ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">familyName</span></span><span class="c011">;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
</span><span class="c011">   ];</span><span class="c011">
</span><span class="c011"> ]</span><span class="c011">
</span><span class="c011"> )</span><span class="c011">
</span><span class="c011">.</span></td></tr>
</table><p>Although this approach solves the problem, more complex and nested shapes 
can increase the complexity and readability of SHACL shapes. </p>
<!--TOC section id="sec210" Treatment of Closed Shapes-->
<h2 class="section" id="sec210">7.14  Treatment of Closed Shapes</h2><!--SEC END --><p>
<a id="ch7.sec14"></a></p><p><a id="hevea_default833"></a>
ShEx has the 
<code><span class="c003">CLOSED</span></code> keyword to declare that a node must not have other properties beyond those declared in the shape.
<a id="hevea_default834"></a>
SHACL also has a 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">closed</span></code> parameter to declare that a node conforming to a shape must not have other properties different from the properties declared in the shape.
Although they look similar, there are some differences due to the interaction of CLOSED with other language features.</p><p><a id="hevea_default835"></a>
When a SHACL shape is closed, SHACL processors only take into account the top-level properties that appear as the values of 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">path</span></code> in property paths.
In this way, it is not the same if a shape is declared as a conjunction of property paths as when it is declared using 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">and</span></code>. 
The following shape declares that nodes conforming to 
<code>:</code><code><span class="c006">UserShape</span></code> must have properties 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">name</span></code> and 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">birthDate</span></code>. 
The declaration 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">closed</span></code><code> </code><code><span class="c003">true</span></code> specifies that nodes conforming to 
<code>:</code><code><span class="c006">UserShape</span></code> cannot have other properties.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">UserShape</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">closed</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">birthDate</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">date</span></span><span class="c011">
</span><span class="c011"> ]</span><span class="c011">
</span><span class="c011">.</span></td></tr>
</table><p>If we rewrite that example using a 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">and</span></code> as:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">UserShape</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">closed</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">and</span></span><span class="c011"> (</span><span class="c011">
</span><span class="c011">  [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011">
</span><span class="c011">  ]</span><span class="c011">
</span><span class="c011">  [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">birthDate</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">date</span></span><span class="c011">
</span><span class="c011">  ]</span><span class="c011">
</span><span class="c011"> )</span><span class="c011">
</span><span class="c011">.</span></td></tr>
</table><p>then there will be no nodes satisfying the shape, as 
the two properties nested under 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">and</span></code> are thus <em>hidden</em> and not taken into consideration by the 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">closed</span></code> directive.</p><p><a id="hevea_default836"></a>
A solution in this case is to enumerate the properties that we allow using 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">ignoredProperties</span></code>. 
In this case, one should add:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">UserShape</span></span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">ignoredProperties</span></span><span class="c011"> (</span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011">
</span><span class="c011">                        </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">birthDate</span></span><span class="c011">
</span><span class="c011">  ) .</span></td></tr>
</table><p>A similar situation could happen if we use more complex property paths. </p><p>For example, we may want to declare that users can have either 
<code><span class="c004">schema</span></code><code>:</code><code><span class="c006">name</span></code> or 
<code><span class="c004">foaf</span></code><code>:</code><code><span class="c006">name</span></code> using an alternative property path as:</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">UserShape</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">closed</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">alternativePath</span></span><span class="c011"> ( </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> ) ] ;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1; </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011">.</span></td></tr>
</table><p>As in the previous example, no node would conform to that shape because the closed declaration does not find direct properties in property paths.</p><p><a id="hevea_default837"></a>
There are two solutions: either to add a 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">ignoredProperties</span></code> declaration enumerating all the properties as in previous example, or to add a property declaration for each predicate that specifies no cardinality, thus has no other effect.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011">:</span><span class="c011"><span class="c006">UserShape</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">closed</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">alternativePath</span></span><span class="c011"> ( </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> ) ] ;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1;</span><span class="c011">
</span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011">
</span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">schema</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011">.</span></td></tr>
</table>
<!--TOC section id="sec211" Stems and Stem Ranges-->
<h2 class="section" id="sec211">7.15  Stems and Stem Ranges</h2><!--SEC END --><p>
<a id="ch7.sec15"></a></p><p>ShEx supports the definition of stems and stem ranges when defining value sets 
(see Section <a href="#ch040ValueSets">4.5.4</a>).
SHACL does not have built-in support for stems or stem ranges. 
Stems and stem ranges could be emulated with 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">pattern</span></code>, 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">nodeKind</span></code>, and 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c003">or</span></code>.</p><div class="example"><div class="theorem"><span class="c013">Example 174</span>  <em>IRI ranges example</em><p><em>The following example was described 
in Section </em><a href="#ch040%3AexampleIRIRanges"><em>44</em></a><em> and declared </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011"><span class="c003">prefix</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c006">codes</span></span></em><em><span class="c011">: </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.codes/&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">
</span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011">  :</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c006">codes</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">good</span></span></em><em><span class="c011">~ </span></em><em><span class="c011"><span class="c006">codes</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">bad</span></span></em><em><span class="c011">~ ]</span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table><p><em>A possible SHACL definition using regular expressions could be:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">nodeKind</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">IRI</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">or</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">     [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">pattern</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"^http://example.codes/good"</span></em></span></span></em><em><span class="c011"> ]</span></em><em><span class="c011">
</span></em><em><span class="c011">     [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">pattern</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"^http://example.codes/bad"</span></em></span></span></em><em><span class="c011">  ]</span></em><em><span class="c011">
</span></em><em><span class="c011">    )</span></em><em><span class="c011">
</span></em><em><span class="c011">  ] .</span></em></td></tr>
</table><p><em>Another possibility is to define a reusable constraint component in SHACL-SPARQL as:</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">StemConstraintComponent</span></span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ConstraintComponent</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">parameter</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">stem</span></span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">validator</span></span></em><em><span class="c011"> [ </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">SPARQLAskValidator</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">message</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Value does not have stem {$stem}"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">ask</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">""</span></em></span></span></em><em><span class="c011"><span class="c005"><em><span class="c011">"</span></em><em><span class="c011">
</span></em><em><span class="c011">   ASK { FILTER (!isBlank($value) &amp;&amp;</span></em><em><span class="c011">
</span></em><em><span class="c011">      strstarts(str($value),str($stem)))</span></em><em><span class="c011">
</span></em><em><span class="c011">   }"</span></em></span></span></em><em><span class="c011"><span class="c005"><em><span class="c011">""</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">] .</span></em></td></tr>
</table><p><em>which can be used as: </em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Product</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011"> :</span></em><em><span class="c011"><span class="c006">status</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">minCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">maxCount</span></span></em><em><span class="c011"> 1 ;</span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">or</span></span></em><em><span class="c011"> (</span></em><em><span class="c011">
</span></em><em><span class="c011">    :</span></em><em><span class="c011"><span class="c006">stem</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.codes/good&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">    :</span></em><em><span class="c011"><span class="c006">stem</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c008"><em><span class="c011">&lt;http://example.codes/bad&gt;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">   )</span></em><em><span class="c011">
</span></em><em><span class="c011"> .</span></em></td></tr>
</table></div></div><p>ShEx also has range exclusions that can declare values to exclude, either literal or specified with a stem (see <a href="#ch040%3AexampleIRIRangeExclusion">45</a>).
That feature is not part of SHACL Core and should be defined using SHACL-SPARQL.</p>
<!--TOC section id="sec212" Annotations-->
<h2 class="section" id="sec212">7.16  Annotations</h2><!--SEC END --><p>
<a id="ch7.sec16"></a></p><p>ShEx has the concept of annotations which can be attached to several constructs 
(see Section <a href="#ch040Annotations">4.7.5</a>). 
For example, the following ShEx schema attaches two annotations to each triple constraint.</p><div class="example"><div class="theorem"><span class="c013">Example 175</span>  <em>Annotations example in ShEx</em><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> {</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">// rdfs:label "Name" </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">// rdfs:comment "Name of person" ;</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">// rdfs:label "BirthDate" </span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">   </span></em><em><span class="c011"><span class="c008"><em><span class="c011">// rdfs:comment "Date of birth"</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">}</span></em></td></tr>
</table></div></div><p>ShEx does not endorse or require the use of any specific annotation vocabulary. </p><p><a id="hevea_default838"></a>
<a id="hevea_default839"></a>
SHACL has non-validating constraint components (see Section <a href="#ch050NonValidating">5.15</a>), such as 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">name</span></code> and 
<code><span class="c004">sh</span></code><code>:</code><code><span class="c006">description</span></code>, 
which are ignored by the SHACL processor during validation but can have special meaning for user interface generation.
It is also possible to add further informative triples to any constraint or component, such as 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">label</span></code>. </p><div class="example"><div class="theorem"><span class="c013">Example 176</span>  <em>Annotations example in SHACL</em><p><em>The following ShEx schema declares a shape </em><em>
</em><code><em>:</em></code><code><em><span class="c006">Person</span></em></code><em> using the non-validating properties </em><em>
</em><code><em><span class="c004">sh</span></em></code><code><em>:</em></code><code><em><span class="c006">name</span></em></code><em> and </em><em>
</em><code><em><span class="c006">sh_description</span></em></code><em> 
and the annotation </em><em>
</em><code><em><span class="c004">rdfs</span></em></code><code><em>:</em></code><code><em><span class="c006">label</span></em></code><em>.</em></p><table class="lstframe c014"><tr><td class="lstlisting"><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">Person</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c003">a</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">NodeShape</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">string</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Name"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">description</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Name of person"</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Name"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ];</span></em><em><span class="c011">
</span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">property</span></span></em><em><span class="c011"> [</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">path</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c004">schema</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">birthDate</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">datatype</span></span></em><em><span class="c011">    </span></em><em><span class="c011"><span class="c004">xsd</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">date</span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">name</span></span></em><em><span class="c011">        </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"BirthDate"</span></em></span></span></em><em><span class="c011"> ;</span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">sh</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">description</span></span></em><em><span class="c011"> </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"Birth date"</span></em></span></span></em><em><span class="c011">
</span></em><em><span class="c011">  </span></em><em><span class="c011"><span class="c004">rdfs</span></span></em><em><span class="c011">:</span></em><em><span class="c011"><span class="c006">label</span></span></em><em><span class="c011">     </span></em><em><span class="c011"><span class="c005"><em><span class="c011">"BirthDate"</span></em></span></span></em><em><span class="c011">;</span></em><em><span class="c011">
</span></em><em><span class="c011"> ] .</span></em></td></tr>
</table></div></div><p>As we saw in Section <a href="#ch050NonValidating">5.15</a>, SHACL non-validating properties can be helpful for generating forms from SHACL definitions.</p><p>Although ShEx does not provide built-in non-validating properties, it would be possible to use annotations from other vocabularies, even from SHACL. </p>
<!--TOC section id="sec213" Semantics and Complexity-->
<h2 class="section" id="sec213">7.17  Semantics and Complexity</h2><!--SEC END --><p>
<a id="ch7.sec17"></a></p><p>The ShEx semantic specification [<a href="#ShExSpec">81</a>] is based on mathematical concepts and 
has been proven to have a well founded semantics [<a href="#Boneva17">11</a>].
As we saw in Section <a href="#ch040ShExCyclicDependencies">4.8.3</a>, a restriction was imposed on the combination of recursion and negation 
to avoid ill-formed data models.</p><p>With regards to the complexity of the validation algorithm, ShEx semantics is based on a partitioning strategy where triples in the data are assigned to triple constraints in the schema and the matching algorithm must take into account that arcs in a graph are unordered. 
It is possible to construct schemas for which it is very expensive to find a mapping from RDF data triples to triple constraints that satisfies the schema. 
In practical schemas, this is rarely a concern as the search space is quite small, but certain mistakes in a schema can create a large search space.
The ShEx primer<sup><a id="text58" href="#note58">2</a></sup> contains some advices to improve performance.</p><blockquote class="quote">
"Accidentally duplicating many triple constraints in a shape causes the search space to explode. 
If a validation process takes a long time or a lot of memory, look for duplicated chunks of the schema.<p>For shapes with multiple triple constraints for the same predicate, try to minimize the overlap between the value expressions. 
For instance, if three types of inspection are necessary on a manufacturing checklist, use three different constraints for each of the inspection properties rather than requiring three different inspection properties with a value expression which is a union of all three types. 
This will make the validation process more efficient and will more effectively capture the business logic in the schema."
</p></blockquote><p>The SHACL Core semantics is defined in natural language with some non-normative SPARQL templates, while SHACL SPARQL depends on a SPARQL processor. 
Its complexity depends on the complexity of SPARQL, which can also be quite expensive, especially in the use of property paths.
As in the case of ShEx, it is also possible to declare shapes graphs that may consume a lot of time or memory. </p><p>Both ShEx and SHACL open the door for further research on optimizations and specialized implementations usable for big datasets. 
Validators could define language subsets with constructs that behave better when confronted with such datasets.
To our knowledge, current implementations have mainly been tested on in-memory data: 
separate RDF files, or relatively small <em>units of work</em> (transactions). 
An exception is RDFUnit, that supports the execution of SHACL directly on SPARQL
endpoints and thus, can theoretically scale along with the capabilities of
the SPARQL engine.
A lot of research remains to see how 
how very large (and not in-memory) data sets can be
efficiently validated with RDF shapes.</p><p>Benchmarks and testing tools are an essential step towards measuring the performance
of both languages as well as implementations.
One early attempt was to use the WebIndex dataset as a 
benchmark [<a href="#LabraLDQSemantics">57</a>].</p>
<!--TOC section id="sec214" Extension Mechanisms-->
<h2 class="section" id="sec214">7.18  Extension Mechanisms</h2><!--SEC END --><p> 
<a id="ch070ComparingExtensionMechanism"></a>
<a id="ch7.sec18"></a></p><p>SHACL-SPARQL can be used to define both custom SPARQL-based constraints as well as reusable SPARQL-based constraint components 
(see Section <a href="#ch050SHACLSPARQLCOMPONENTS">5.16.2</a>).
As the constraint components are defined in SPARQL, any SPARQL compliant engine could potentially run them without requiring software updates for execution.
A SPARQL engine will be required in any case.
SHACL also provides SHACL-Javascript that can be used to write extensions 
(Section <a href="#ch050SHACLJS">5.20</a>).</p><p>SHACL-SPARQL allows the definition of new constraint components which can have parameters and can be reused in new contexts. 
It is expected that SHACL libraries of useful constraint components will be developed in the future.
For example, the <a href="http://datashapes.org/"><span class="c010">http://datashapes.org/</span></a> site contains a collection of some constraint components that extend SHACL Core.</p><p>ShEx has provisions for callout to arbitrary functions, called semantic actions, that are language-agnostic (see Section <a href="#ch040SemanticActions">4.10</a>). 
However, semantic actions cannot be used to create new reusable parametrizable shape expressions. 
This is considered an item for future work on ShEx.</p>
<!--TOC section id="sec215" Conclusions and Outlook-->
<h2 class="section" id="sec215">7.19  Conclusions and Outlook</h2><!--SEC END --><p>
<a id="ch7.sec19"></a></p><p>As of July 2017, it appears that ShEx and SHACL will evolve as two different specifications.
The design of SHACL prioritized the use of SPARQL as an execution engine and an extension mechanism for defining new constraint components, while ShEx was designed de novo to meet its use cases.
SHACL leverages a query language for validating sets of constraints, while 
validation schemas in the ShEx language are defined in terms of a grammar.</p><p>There is, however, a significant intersection between the two languages.
Many common use cases may be met with either language, although users should consider how the limitations of these languages apply to their current and future requirements.
In this book, we described and compared each formalism 
so that readers can assess which technology better fits their problems.</p><p><a id="hevea_default840"></a> <a id="hevea_default841"></a>
If we look for parallels in the XML ecosystem, 
ShEx is closer to RelaxNG or XML Schema, which provide structural definitions for XML documents.
SHACL is closer to Schematron, which defines rules or constraints on top of XPath
analogously to how SHACL defines constraints on top of SPARQL.
SHACL Core can capture simple structures, but more complex structures, with exclusive choices or repeated properties,
may require multiple inter-related constraints.</p><p><a id="hevea_default842"></a> <a id="hevea_default843"></a> <a id="hevea_default844"></a> <a id="hevea_default845"></a> <a id="hevea_default846"></a> <a id="hevea_default847"></a> <a id="hevea_default848"></a>
The two specifications currently have different implementation ecosystems.
ShEx has been implemented in a variety of programming languages and RDF libraries: Apache Jena, Ruby, Javascript, Haskell, and Python (see section <a href="#Ch04ShexImplementations">4.3</a>). 
In the case of SHACL, most implementations are based on Apache Jena and there is an implementation based on Javascript (see section <a href="#ch05SHACLImplementations">5.2</a>)
although there are some implementations appearing in other systems like rdf4j.
<a id="hevea_default849"></a> <a id="hevea_default850"></a> <a id="hevea_default851"></a>
Most ShEx implementations are non-commercial and have been developed mainly by 
individual projects. 
SHACL has a mature commercial implementation, bundled with the TopBraid suite of products, which
offers a rich user interface for editing SHACL-based data models. 
Although TopBraid is a commercial product, SHACL’s implementation is based on a separate open source library maintained by TopQuadrant.
SHACL is also integrated in the free edition of TopBraid Composer. </p><p>Both ShEx and SHACL open several lines for future work and research.</p><ul class="itemize"><li class="li-itemize"><span class="c013">Application to RDF vocabulary design.</span> 
When designing RDF vocabularies, it is a common practice to include an informal UML class diagram 
which represents the classes and their relationships. 
Some examples are the DCAT vocabulary [<a href="#DCAT">61</a>], the organization ontology [<a href="#Organization14">83</a>] and
the RDF Data Cube vocabulary [<a href="#RDFDataCube">24</a>].
Other vocabularies, such as the Provenance Ontology [<a href="#PROVO">59</a>] or the Annotation vocabulary [<a href="#WebAnnotation">87</a>], provide diagrams in similar styles.<p>In the future, these diagrams and vocabulary specifications can be backed by ShEx or SHACL specifications. 
A first step in that direction is seen where SHACL is used to capture the RDF Data Cube integrity constraints.<sup><a id="text59" href="#note59">3</a></sup> 
There is much room for innovations connecting these graphical representations to ShEx schemas or SHACL shapes graphs, such as shape visualization, or generating shapes from customized UML diagrams.</p></li><li class="li-itemize"><span class="c013">Efficient implementation of ShEx/SHACL processors.</span> 
It may be necessary to identify subsets of those languages that can be implemented efficiently, especially for handling big datasets. 
One problem with current implementations is that they work mainly in memory, limiting the size of datasets that can be processed.
One possible solution could be to have federated validators exchange intermediate validation results.</li><li class="li-itemize"><span class="c013">Shapes induction.</span> 
Given the recent emergence of schema languages, almost all existing RDF data has no associated schemas.
We can expect that schemas will be created for much of the existing data.
Deriving that automatically will greatly accelerate the availablity of schemas.
Some initial attempts are described in [<a href="#vanDam2015">99</a>] and  [<a href="#DanielFdez16">37</a>].
Such tools could become part of the validation process, producing schemas that are conservative enough to reject data patterns which are dubious because they occur very rarely in the examined data.<p>Given that there is already a large amount of RDF data that comes from structured sources such as SQL databases or Wikipedia info boxes,
derived schemas will likely reflect constraints native to the source format from which the data was converted or extracted.</p></li><li class="li-itemize"><span class="c013">Subgraph extraction.</span>
An instersting application of RDF Shapes is to be used as a driver for extracting subsets of a dataset that conform to specific shapes.
For example, one could want to extract all the persons in DBpedia that have an image and a birthdate.
Although this can be easily achieved for simple and independent shapes, complex schemas can be quite a challenging task.</li><li class="li-itemize"><span class="c013">Approximate validation.</span> 
An interesting topic for future research is to accommodate probabilistic approaches for RDF validation, which can check or predict typical graph structures around some nodes.</li><li class="li-itemize"><span class="c013">Optimization of RDF stores based on shapes.</span> 
RDF stores that know the shape of their RDF graphs can optimize their internal representations and increase the performance of 
SPARQL queries.</li><li class="li-itemize"><span class="c013">User interface generation from shapes.</span> 
Editing RDF by hand is usually an error-prone and non-user-friendly task. 
If the structure of the data is known, the editorial process can be improved.
Given that ShEx and SHACL Core define the properties that RDF nodes can have, specialized user interfaces and forms could be generated from those shapes to increase user friendliness.
As we described in Section <a href="#ch050NonValidating">5.15</a>, SHACL contains some built-in annotation properties which can help user interface generation from shapes graphs. 
ShEx also has support for any annotation properties, which in the future could also be used to 
generate rich user interfaces.</li><li class="li-itemize"><span class="c013">Generating Software Artifacts from Shapes.</span>
It may be possible to generate various software artifacts from appropriately extended shapes, such as: Object-RDF Mappinig
(ORM) layers, 
R2RML conversion scripts, 
JSONLD contexts and frames, 
etc.
</li><li class="li-itemize"><span class="c013">Schema transformation and mappings between data models.</span> 
One of the most frequent needs in computer science is to transform data based on some schema to data conforming to another schema.
These transformations are usually made by ad-hoc and error-prone procedural programs. 
Because shapes languages can capture the structures of the sources and targets of these transformations, they can be leveraged to define mappings.
ShEx Map,<sup><a id="text60" href="#note60">4</a></sup> an extension of ShEx, can be used to convert RDF data between schemas.</li><li class="li-itemize"><span class="c013">Integration between ShEx and SHACL.</span> 
Although ShEx and SHACL are two different approaches, both were designed to handle the general problem of RDF validation. 
ShEx shines in its support of recursion based on well-founded semantics, while SHACL shines in its support for SPARQL property paths
and other SPARQL features. 
As in the case of XML, where Schematron and RelaxNG can be used 
together [<a href="#Robertsson2004">84</a>], 
ShEx and SHACL could be combined in a project to leverage the advantages of each. <p>On the other hand, the underpinnings of ShEx and SHACL are not radically different.
One implementation, Shaclex,<sup><a id="text61" href="#note61">5</a></sup>
uses compatible parts of libraries to implement a processor for both SHACL and ShEx and is being extended to convert between subsets of the languages.</p></li><li class="li-itemize"><span class="c013">ShEx and SHACL best practices.</span> 
This book describes how ShEx and SHACL can be used to express both simple and complex constraints on RDF data.
It does not attempt to teach modeling, or product design, or the engineering skill of knowing when to define constraints 
and when to leave data less constrained.
While modeling and enterprise data management are covered by an extensive literature, the scale and breadth of the Semantic Web requires new formulations of well-known problems.</li></ul><p>ShEx and SHACL will play an important role in the future development of RDF and will be a core part of the Semantic Web tool set.
As more semantic data is generated, and more applications are needed to integrate and consume it, 
RDF validation will be a fundamental enabler for data quality and systems interoperability. </p>
<!--TOC section id="sec216" Summary-->
<h2 class="section" id="sec216">7.20  Summary</h2><!--SEC END --><p>
<a id="ch7.sec20"></a></p><ul class="itemize"><li class="li-itemize">ShEx and SHACL can both be used to validate RDF.</li><li class="li-itemize">The expressiveness of ShEx and SHACL for common use cases is similar.</li><li class="li-itemize">ShEx is a W3C Community Group specification while SHACL Core and SHACL-SPARQL 
are a W3C Recommendation</li><li class="li-itemize">ShEx is schema-oriented, while SHACL is focused on defining constraints over RDF graphs.</li><li class="li-itemize">ShEx can be used with a compact syntax, a JSON-LD syntax, or any RDF syntax.
SHACL can be used with any RDF syntax, and a draft compact syntax has been proposed.</li><li class="li-itemize">ShEx has support for recursion and cyclic data models while recursion in SHACL is undefined.</li><li class="li-itemize">SHACL has support for arbitrary SPARQL property paths while ShEx has support only for incoming and outgoing arcs.</li><li class="li-itemize">Both ShEx and SHACL support violation reporting at the shape level.
For simple shapes, SHACL can further distinguish the violations per constraint,
as well as provide more violation metadata.
SHACL returns the violations in RDF using the Validation Report vocabulary while ShEx returns a shape map with all nodes that were validated, including the ones that pass validation while SHACL only the ones that failed.</li><li class="li-itemize">ShEx has a language agnostic extension mechanism called semantic actions while SHACL offers extensibility through SPARQL and JavaScript.</li></ul>
<!--TOC section id="sec217" Suggested Reading-->
<h2 class="section" id="sec217">7.21  Suggested Reading</h2><!--SEC END --><p>
<a id="ch7.sec21"></a></p><ul class="itemize"><li class="li-itemize">A seminal paper comparing ShEx and SHACL in its early versions: <a href="#LabraValidatingDescribingDataPortalsArxivVersion2017">Labra Gayo, Prud’hommeaux, Solbrig, and
Boneva</a>,<a href="#LabraValidatingDescribingDataPortalsArxivVersion2017">2017</a> [<a href="#LabraValidatingDescribingDataPortalsArxivVersion2017">58</a>]</li><li class="li-itemize">Another paper comparing different RDF validation requirements: <a href="#Hartmann16">Hartmann, Zapilko, Wackerow, and
Eckert</a>,<a href="#Hartmann16">2016</a> [<a href="#Hartmann16">45</a>]</li></ul><p><a id="hevea_default852"></a> <a id="hevea_default853"></a>
</p>
<!--BEGIN NOTES chapter-->
<hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note57" href="#text57">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">The complete list of rules is defined in <a href="https://www.w3.org/TR/shacl/\#syntax-rules"><span class="c010">https://www.w3.org/TR/shacl/\#syntax-rules</span></a>.</div></dd><dt class="dt-thefootnotes"><a id="note58" href="#text58">2</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: http://shex.io/shex-primer/</div></dd><dt class="dt-thefootnotes"><a id="note59" href="#text59">3</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: https://www.w3.org/2011/gld/validator/datacube.shapes.ttl</div></dd><dt class="dt-thefootnotes"><a id="note60" href="#text60">4</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: http://shex.io/extensions/Map/</div></dd><dt class="dt-thefootnotes"><a id="note61" href="#text61">5</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: http://labra.github.io/shaclex/</div></dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec218" WebIndex in ShEx-->
<h1 class="chapter" id="sec218">Appendix A  WebIndex in ShEx</h1><!--SEC END --><p> 
<a id="AppendixWebIndexShEx"></a>
<a id="appa"></a></p><p>The following code contains the schema of the WebIndex in ShEx that was described in Section <a href="#ch070WebIndexShEx">6.1.1</a>.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"><span class="c003">prefix</span></span><span class="c011"> : </span><span class="c011"><span class="c008"><span class="c011">&lt;http://example.org/&gt;</span></span></span><span class="c011">
</span><span class="c011"><span class="c003">prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.w3.org/ns/shacl#&gt;</span></span></span><span class="c011">
</span><span class="c011"><span class="c003">prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span></span></span><span class="c011">
</span><span class="c011"><span class="c003">prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span></span></span><span class="c011">
</span><span class="c011"><span class="c003">prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://data.webfoundation.org#&gt;</span></span></span><span class="c011">
</span><span class="c011"><span class="c003">prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span></span></span><span class="c011">
</span><span class="c011"><span class="c003">prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://purl.org/linked-data/cube#&gt;</span></span></span><span class="c011">
</span><span class="c011"><span class="c003">prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://purl.org/weso/ontology/computex#&gt;</span></span></span><span class="c011">
</span><span class="c011"><span class="c003">prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://purl.org/dc/terms/&gt;</span></span></span><span class="c011">
</span><span class="c011"><span class="c003">prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">skos</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.w3.org/2004/02/skos/core#&gt;</span></span></span><span class="c011">
</span><span class="c011"><span class="c003">prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://xmlns.com/foaf/0.1/&gt;</span></span></span><span class="c011">
</span><span class="c011"><span class="c003">prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">org</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.w3.org/ns/org#&gt;</span></span></span><span class="c011">
</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">Country</span></span><span class="c011"> {</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011">       </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">iso2</span></span><span class="c011">          </span><span class="c011"><span class="c003">LENGTH</span></span><span class="c011"> 2</span><span class="c011">
</span><span class="c011">}</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">DataSet</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011">       [ </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">DataSet</span></span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">structure</span></span><span class="c011">      [ </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">DSD</span></span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011">        </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">slice</span></span><span class="c011">          </span><span class="c011"><span class="c006">@</span></span><span class="c011">:</span><span class="c011"><span class="c006">Slice</span></span><span class="c011">* ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">:</span><span class="c011"><span class="c006">publisher</span></span><span class="c011">     </span><span class="c011"><span class="c006">@</span></span><span class="c011">:</span><span class="c011"><span class="c006">Organization</span></span><span class="c011">
</span><span class="c011">}</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">Slice</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011">         [ </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">Slice</span></span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">sliceStructure</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">sliceByYear</span></span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">observation</span></span><span class="c011">    </span><span class="c011"><span class="c006">@</span></span><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011">* ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">indicator</span></span><span class="c011">     </span><span class="c011"><span class="c006">@</span></span><span class="c011">:</span><span class="c011"><span class="c006">Indicator</span></span><span class="c011">
</span><span class="c011">}</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011">   [ </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011">                 [ </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">value</span></span><span class="c011">         </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">float</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011">        </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ? ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">:</span><span class="c011"><span class="c006">issued</span></span><span class="c011">        </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">dateTime</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">:</span><span class="c011"><span class="c006">publisher</span></span><span class="c011">     [ </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">WebFoundation</span></span><span class="c011"> ] ? ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">dataSet</span></span><span class="c011">        </span><span class="c011"><span class="c006">@</span></span><span class="c011">:</span><span class="c011"><span class="c006">DataSet</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">ref</span></span><span class="c011">-</span><span class="c011"><span class="c006">area</span></span><span class="c011">      </span><span class="c011"><span class="c006">@</span></span><span class="c011">:</span><span class="c011"><span class="c006">Country</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">indicator</span></span><span class="c011">     </span><span class="c011"><span class="c006">@</span></span><span class="c011">:</span><span class="c011"><span class="c006">Indicator</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> ( </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">computation</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011">:</span><span class="c011"><span class="c006">Computation</span></span><span class="c011">
</span><span class="c011"> | </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">source</span></span><span class="c011">       </span><span class="c011"><span class="c003">IRI</span></span><span class="c011">
</span><span class="c011"> )</span><span class="c011">
</span><span class="c011">}</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">Computation</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011">   [ </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">Computation</span></span><span class="c011"> ] }</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">Indicator</span></span><span class="c011"> {   </span><span class="c011"><span class="c003">a</span></span><span class="c011">   [ </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">PrimaryIndicator</span></span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">SecondaryIndicator</span></span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011">        </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">provider</span></span><span class="c011">       </span><span class="c011"><span class="c006">@</span></span><span class="c011">:</span><span class="c011"><span class="c006">Organization</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">}</span><span class="c011">
</span><span class="c011">:</span><span class="c011"><span class="c006">Organization</span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> </span><span class="c011"><span class="c003">EXTRA</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">org</span></span><span class="c011">:</span><span class="c011"><span class="c006">Organization</span></span><span class="c011"> ] ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011">       </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
</span><span class="c011">  </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">homepage</span></span><span class="c011">    </span><span class="c011"><span class="c003">IRI</span></span><span class="c011">
</span><span class="c011">}</span></td></tr>
</table>
<!--TOC chapter id="sec219" WebIndex in SHACL-->
<h1 class="chapter" id="sec219">Appendix B  WebIndex in SHACL</h1><!--SEC END --><p> 
<a id="AppendixWebIndexSHACL"></a>
<a id="appb"></a></p><p>The following code contains the full version of the WebIndex data in SHACL that was described in Section <a href="#ch070WebIndexSHACL">6.1.2</a>.


</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"> </span><span class="c011"><span class="c006">@prefix</span></span><span class="c011"> : </span><span class="c011"><span class="c008"><span class="c011">&lt;http://example.org/&gt;</span></span></span><span class="c011"> .</span><span class="c011">
 </span><span class="c011"><span class="c006">@prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.w3.org/ns/shacl#&gt;</span></span></span><span class="c011"> .</span><span class="c011">
 </span><span class="c011"><span class="c006">@prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span></span></span><span class="c011"> .</span><span class="c011">
 </span><span class="c011"><span class="c006">@prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span></span></span><span class="c011">.</span><span class="c011">
 </span><span class="c011"><span class="c006">@prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://data.webfoundation.org#&gt;</span></span></span><span class="c011">.</span><span class="c011">
 </span><span class="c011"><span class="c006">@prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span></span></span><span class="c011">.</span><span class="c011">
 </span><span class="c011"><span class="c006">@prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://purl.org/linked-data/cube#&gt;</span></span></span><span class="c011"> .</span><span class="c011">
 </span><span class="c011"><span class="c006">@prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://purl.org/weso/ontology/computex#&gt;</span></span></span><span class="c011"> .</span><span class="c011">
 </span><span class="c011"><span class="c006">@prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://purl.org/dc/terms/&gt;</span></span></span><span class="c011">.</span><span class="c011">
 </span><span class="c011"><span class="c006">@prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">skos</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.w3.org/2004/02/skos/core#&gt;</span></span></span><span class="c011">.</span><span class="c011">
 </span><span class="c011"><span class="c006">@prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://xmlns.com/foaf/0.1/&gt;</span></span></span><span class="c011"> .</span><span class="c011">
 </span><span class="c011"><span class="c006">@prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">org</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.w3.org/ns/org#&gt;</span></span></span><span class="c011"> .</span><span class="c011">
 </span><span class="c011">
 </span><span class="c011">
 </span><span class="c011">:</span><span class="c011"><span class="c006">Country</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">iso2</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">length</span></span><span class="c011"> 2 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
 </span><span class="c011"> ]</span><span class="c011">
 </span><span class="c011">.</span><span class="c011">
 </span><span class="c011">
 </span><span class="c011">:</span><span class="c011"><span class="c006">DataSet</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">type</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">hasValue</span></span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">DataSet</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">structure</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">hasValue</span></span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">DSD</span></span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">slice</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">Slice</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">:</span><span class="c011"><span class="c006">publisher</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">Organization</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
 </span><span class="c011"> ]</span><span class="c011">
 </span><span class="c011">.</span><span class="c011">
 </span><span class="c011">
 </span><span class="c011">:</span><span class="c011"><span class="c006">Slice</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">type</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">hasValue</span></span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">Slice</span></span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">sliceStructure</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">hasValue</span></span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">sliceByYear</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">observation</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">Observation</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">indicator</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">Indicator</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
 </span><span class="c011"> ]</span><span class="c011">
 </span><span class="c011">.</span><span class="c011">
 </span><span class="c011">
 </span><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">type</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">        </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">in</span></span><span class="c011"> (</span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">Observation</span></span><span class="c011">);</span><span class="c011">
 </span><span class="c011">        </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 2</span><span class="c011">
 </span><span class="c011">  ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">type</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 2 ;</span><span class="c011">
 </span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 2</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">value</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">float</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">:</span><span class="c011"><span class="c006">issued</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">dateTime</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">or</span></span><span class="c011"> (</span><span class="c011">
 </span><span class="c011">  [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">:</span><span class="c011"><span class="c006">publisher</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">hasValue</span></span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">WebFoundation</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">    ]</span><span class="c011">
 </span><span class="c011">  ]</span><span class="c011">
 </span><span class="c011">  [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">dct</span></span><span class="c011">:</span><span class="c011"><span class="c006">publisher</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0</span><span class="c011">
 </span><span class="c011">    ]</span><span class="c011">
 </span><span class="c011">  ]</span><span class="c011">
 </span><span class="c011"> ) ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">qb</span></span><span class="c011">:</span><span class="c011"><span class="c006">dataSet</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">DataSet</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">ref</span></span><span class="c011">-</span><span class="c011"><span class="c006">area</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">Country</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">indicator</span></span><span class="c011">;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">Indicator</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">or</span></span><span class="c011"> (</span><span class="c011">
 </span><span class="c011">  [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">source</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">         </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">         </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
 </span><span class="c011">    ] ;</span><span class="c011">
 </span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">computation</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0</span><span class="c011">
 </span><span class="c011">   ]</span><span class="c011">
 </span><span class="c011"> ]</span><span class="c011">
 </span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">computation</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">Computation</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">        </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">        </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1</span><span class="c011">
 </span><span class="c011">   ] ;</span><span class="c011">
 </span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">source</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">    </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 0</span><span class="c011">
 </span><span class="c011">   ]</span><span class="c011">
 </span><span class="c011"> ]</span><span class="c011">
 </span><span class="c011">)</span><span class="c011">
 </span><span class="c011">.</span><span class="c011">
 </span><span class="c011">
 </span><span class="c011">:</span><span class="c011"><span class="c006">Computation</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">type</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">hasValue</span></span><span class="c011"> </span><span class="c011"><span class="c004">cex</span></span><span class="c011">:</span><span class="c011"><span class="c006">Computation</span></span><span class="c011">
 </span><span class="c011"> ] .</span><span class="c011">
 </span><span class="c011">
 </span><span class="c011">:</span><span class="c011"><span class="c006">Indicator</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">type</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">in</span></span><span class="c011"> (</span><span class="c011">
 </span><span class="c011">     </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">PrimaryIndicator</span></span><span class="c011">
 </span><span class="c011">     </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">SecondaryIndicator</span></span><span class="c011">
 </span><span class="c011">  ) ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">wf</span></span><span class="c011">:</span><span class="c011"><span class="c006">provider</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">Organization</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">] ;</span><span class="c011">
 </span><span class="c011">.</span><span class="c011">
 </span><span class="c011">
 </span><span class="c011">:</span><span class="c011"><span class="c006">Organization</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">closed</span></span><span class="c011"> </span><span class="c011"><span class="c003">true</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">ignoredProperties</span></span><span class="c011"> (</span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">type</span></span><span class="c011">) ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">type</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">hasValue</span></span><span class="c011"> </span><span class="c011"><span class="c004">org</span></span><span class="c011">:</span><span class="c011"><span class="c006">Organization</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">foaf</span></span><span class="c011">:</span><span class="c011"><span class="c006">homepage</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">] ;</span><span class="c011">
 </span><span class="c011">.</span></td></tr>
</table>
<!--TOC chapter id="sec220" ShEx in ShEx-->
<h1 class="chapter" id="sec220">Appendix C  ShEx in ShEx</h1><!--SEC END --><p> 
<a id="AnnexShExInShEx"></a>
<a id="appc"></a></p><p>In this annex we include the full code of a ShEx schema that validates ShEx schemas represented in RDF syntax (ShExR). 
This code has been adapted from the ShEx 
specification [<a href="#ShExSpec">81</a>].<sup><a id="text62" href="#note62">1</a></sup> </p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"> </span><span class="c011"><span class="c003">PREFIX</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span></span></span><span class="c011">
 </span><span class="c011"><span class="c003">PREFIX</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span></span></span><span class="c011">
 </span><span class="c011"><span class="c003">BASE</span></span><span class="c011"> </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.w3.org/ns/shex#&gt;</span></span></span><span class="c011">
 </span><span class="c011">
 </span><span class="c011"><span class="c003">start</span></span><span class="c011">=</span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;Schema&gt;</span></span></span><span class="c011">
 </span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;Schema&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c004">Schema</span></span><span class="c011">] ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">startActs</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;SemActList1Plus&gt;</span></span></span><span class="c011">? ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">start</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExpr&gt;</span></span></span><span class="c011">?;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">shapes</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExpr&gt;</span></span></span><span class="c011">*</span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExpr&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;ShapeOr&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;ShapeAnd&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;ShapeNot&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;NodeConstraint&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;Shape&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;ShapeExternal&gt;</span></span></span><span class="c011">
 </span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;ShapeOr&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">ShapeOr</span></span><span class="c011">] ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">shapeExprs</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExprList2Plus&gt;</span></span></span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;ShapeAnd&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">ShapeAnd</span></span><span class="c011">] ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">shapeExprs</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExprList2Plus&gt;</span></span></span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;ShapeNot&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">ShapeNot</span></span><span class="c011">] ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">shapeExpr</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExpr&gt;</span></span></span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;NodeConstraint&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeConstraint</span></span><span class="c011">] ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">iri</span></span><span class="c011"> </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">bnode</span></span><span class="c011"> </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">literal</span></span><span class="c011"> </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">nonliteral</span></span><span class="c011">]?;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c003">IRI</span></span><span class="c011"> ? ;</span><span class="c011">
 </span><span class="c011">  &amp;</span><span class="c011"><span class="c008"><span class="c011">&lt;xsFacets&gt;</span></span></span><span class="c011">  ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">values</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;valueSetValueList1Plus&gt;</span></span></span><span class="c011">?</span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;Shape&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">Shape</span></span><span class="c011">] ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">closed</span></span><span class="c011"> [</span><span class="c011"><span class="c003">true</span></span><span class="c011"> </span><span class="c011"><span class="c003">false</span></span><span class="c011">]? ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">extra</span></span><span class="c011"> </span><span class="c011"><span class="c003">IRI</span></span><span class="c011">* ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">expression</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpression&gt;</span></span></span><span class="c011">? ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">semActs</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;SemActList1Plus&gt;</span></span></span><span class="c011">? ;</span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;ShapeExternal&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">ShapeExternal</span></span><span class="c011">] }</span><span class="c011">
 </span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;SemAct&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">SemAct</span></span><span class="c011">] ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">name</span></span><span class="c011"> </span><span class="c011"><span class="c003">IRI</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">code</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011">?</span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;Annotation&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">Annotation</span></span><span class="c011">] ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">predicate</span></span><span class="c011"> </span><span class="c011"><span class="c003">IRI</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">object</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;objectValue&gt;</span></span></span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;facet_holder&gt;</span></span></span><span class="c011"> { </span><span class="c011"><span class="c008"><span class="c011"># holds labeled productions</span></span></span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c006">$</span></span><span class="c011"><span class="c008"><span class="c011">&lt;xsFacets&gt;</span></span></span><span class="c011"> ( &amp;</span><span class="c011"><span class="c008"><span class="c011">&lt;stringFacet&gt;</span></span></span><span class="c011"> | &amp;</span><span class="c011"><span class="c008"><span class="c011">&lt;numericFacet&gt;</span></span></span><span class="c011"> )* ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c006">$</span></span><span class="c011"><span class="c008"><span class="c011">&lt;stringFacet&gt;</span></span></span><span class="c011"> (</span><span class="c011">
 </span><span class="c011">      </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">length</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">
 </span><span class="c011">    | </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">minlength</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">
 </span><span class="c011">    | </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">maxlength</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">
 </span><span class="c011">    | </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">pattern</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ; </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">flags</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011">?</span><span class="c011">
 </span><span class="c011">  );</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c006">$</span></span><span class="c011"><span class="c008"><span class="c011">&lt;numericFacet&gt;</span></span></span><span class="c011"> (</span><span class="c011">
 </span><span class="c011">      </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">mininclusive</span></span><span class="c011">   </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;numericLiteral&gt;</span></span></span><span class="c011">
 </span><span class="c011">    | </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">minexclusive</span></span><span class="c011">   </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;numericLiteral&gt;</span></span></span><span class="c011">
 </span><span class="c011">    | </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">maxinclusive</span></span><span class="c011">   </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;numericLiteral&gt;</span></span></span><span class="c011">
 </span><span class="c011">    | </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">maxexclusive</span></span><span class="c011">   </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;numericLiteral&gt;</span></span></span><span class="c011">
 </span><span class="c011">    | </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">totaldigits</span></span><span class="c011">    </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">
 </span><span class="c011">    | </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c003">fractiondigits</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">
 </span><span class="c011">  )</span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;numericLiteral&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">decimal</span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">double</span></span><span class="c011">
 </span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;valueSetValue&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;objectValue&gt;</span></span></span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;IriStem&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;IriStemRange&gt;</span></span></span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;LiteralStem&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;LiteralStemRange&gt;</span></span></span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;LanguageStem&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;LanguageStemRange&gt;</span></span></span><span class="c011">
 </span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;objectValue&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">IRI</span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c003">LITERAL</span></span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;IriStem&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">IriStem</span></span><span class="c011">]; </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">stem</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">anyUri</span></span><span class="c011"> }</span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;IriStemRange&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">IriStemRange</span></span><span class="c011">];</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">stem</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">anyUri</span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;Wildcard&gt;</span></span></span><span class="c011">;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">exclusion</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;objectValue&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;IriStem&gt;</span></span></span><span class="c011">*</span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;LiteralStem&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">LiteralStem</span></span><span class="c011">]; </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">stem</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> }</span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;LiteralStemRange&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">LiteralStemRange</span></span><span class="c011">];</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">stem</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;Wildcard&gt;</span></span></span><span class="c011">;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">exclusion</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;objectValue&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;LiteralStem&gt;</span></span></span><span class="c011">*</span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;LanguageStem&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">LanguageStem</span></span><span class="c011">]; </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">stem</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> }</span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;LanguageStemRange&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">LanguageStemRange</span></span><span class="c011">];</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">stem</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;Wildcard&gt;</span></span></span><span class="c011">;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">exclusion</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;objectValue&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;LanguageStem&gt;</span></span></span><span class="c011">*</span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;Wildcard&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">BNODE</span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">Wildcard</span></span><span class="c011">]</span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpression&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;TripleConstraint&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;OneOf&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;EachOf&gt;</span></span></span><span class="c011">
 </span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;OneOf&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">OneOf</span></span><span class="c011">] ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">min</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">? ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">max</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">? ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">expressions</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpressionList2Plus&gt;</span></span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">semActs</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;SemActList1Plus&gt;</span></span></span><span class="c011">? ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">annotation</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;Annotation&gt;</span></span></span><span class="c011">*</span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;EachOf&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">EachOf</span></span><span class="c011">] ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">min</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">? ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">max</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">? ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">expressions</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpressionList2Plus&gt;</span></span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">semActs</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;SemActList1Plus&gt;</span></span></span><span class="c011">? ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">annotation</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;Annotation&gt;</span></span></span><span class="c011">*</span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpressionList2Plus&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpression&gt;</span></span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpressionList1Plus&gt;</span></span></span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpressionList1Plus&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpression&gt;</span></span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011">  [</span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">nil</span></span><span class="c011">] </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;tripleExpressionList1Plus&gt;</span></span></span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;TripleConstraint&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> { </span><span class="c011"><span class="c003">a</span></span><span class="c011"> [</span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">TripleConstraint</span></span><span class="c011">] ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">inverse</span></span><span class="c011"> [</span><span class="c011"><span class="c003">true</span></span><span class="c011"> </span><span class="c011"><span class="c003">false</span></span><span class="c011">]? ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">negated</span></span><span class="c011"> [</span><span class="c011"><span class="c003">true</span></span><span class="c011"> </span><span class="c011"><span class="c003">false</span></span><span class="c011">]? ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">min</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">? ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">max</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011">? ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">predicate</span></span><span class="c011"> </span><span class="c011"><span class="c003">IRI</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">valueExpr</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExpr&gt;</span></span></span><span class="c011">? ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">semActs</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;SemActList1Plus&gt;</span></span></span><span class="c011">? ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sx</span></span><span class="c011">:</span><span class="c011"><span class="c006">annotation</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;Annotation&gt;</span></span></span><span class="c011">*</span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;SemActList1Plus&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;SemAct&gt;</span></span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011">  [</span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">nil</span></span><span class="c011">] </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;SemActList1Plus&gt;</span></span></span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExprList2Plus&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExpr&gt;</span></span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011">  </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExprList1Plus&gt;</span></span></span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExprList1Plus&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExpr&gt;</span></span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011">  [</span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">nil</span></span><span class="c011">] </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;shapeExprList1Plus&gt;</span></span></span><span class="c011">
 </span><span class="c011">}</span><span class="c011">
 </span><span class="c011"><span class="c008"><span class="c011">&lt;valueSetValueList1Plus&gt;</span></span></span><span class="c011"> </span><span class="c011"><span class="c003">CLOSED</span></span><span class="c011"> {</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;valueSetValue&gt;</span></span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011">  [</span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">nil</span></span><span class="c011">] </span><span class="c011"><span class="c003">OR</span></span><span class="c011"> </span><span class="c011"><span class="c006">@</span></span><span class="c011"><span class="c008"><span class="c011">&lt;valueSetValueList1Plus&gt;</span></span></span><span class="c011">
 </span><span class="c011">}</span></td></tr>
</table>
<!--BEGIN NOTES chapter-->
<hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note62" href="#text62">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See: http://shex.io/shex-semantics/#shexr</div></dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec221" SHACL in SHACL-->
<h1 class="chapter" id="sec221">Appendix D  SHACL in SHACL</h1><!--SEC END --><p> 
<a id="annexSHACLinSHACL"></a>
<a id="appd"></a></p><p>In this Appendix we include the definition of SHACL to validate SHACL Core Shapes graphs. 
The version we include here has been edited from the original 
one<sup><a id="text63" href="#note63">1</a></sup>
in an attempt to improve readability (we changed the 
<code><span class="c006">shsh</span></code> prefix by the empty one and omitted 
<code><span class="c004">rdfs</span></code><code>:</code><code><span class="c006">seeAlso</span></code> declarations and some comments). 
It is described in Section <a href="#ch070ShaclInShacl">6.6</a>.</p><table class="lstframe c014"><tr><td class="lstlisting"><span class="c011"> </span><span class="c011"><span class="c006">@prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">: </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span></span></span><span class="c011"> .</span><span class="c011">
 </span><span class="c011"><span class="c006">@prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:   </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.w3.org/ns/shacl#&gt;</span></span></span><span class="c011"> .</span><span class="c011">
 </span><span class="c011"><span class="c006">@prefix</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:  </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span></span></span><span class="c011"> .</span><span class="c011">
 </span><span class="c011"><span class="c006">@prefix</span></span><span class="c011"> :     </span><span class="c011"><span class="c008"><span class="c011">&lt;http://www.w3.org/ns/shacl-shacl#&gt;</span></span></span><span class="c011"> .</span><span class="c011">
 </span><span class="c011">
 </span><span class="c011">: </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">label</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"SHACL for SHACL"</span></span></span><span class="c011"><span class="c006">@en</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">declare</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">prefix</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">""</span></span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">namespace</span></span><span class="c011"> </span><span class="c011"><span class="c005"><span class="c011">"http://www.w3.org/ns/shacl-shacl#"</span></span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] .</span><span class="c011">
 </span><span class="c011">
 </span><span class="c011">:</span><span class="c011"><span class="c006">ShapeShape</span></span><span class="c011"> </span><span class="c011"><span class="c003">a</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetClass</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetClass</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">PropertyShape</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetSubjectsOf</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetClass</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetNode</span></span><span class="c011">,</span><span class="c011">
 </span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetObjectsOf</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetSubjectsOf</span></span><span class="c011">,</span><span class="c011">
 </span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">and</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">class</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">closed</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011">,</span><span class="c011">
 </span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">disjoint</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">equals</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">flags</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">hasValue</span></span><span class="c011">,</span><span class="c011">
 </span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">ignoredProperties</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">in</span></span><span class="c011">,</span><span class="c011">
 </span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">languageIn</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">lessThan</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">lessThanOrEquals</span></span><span class="c011">,</span><span class="c011">
 </span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxExclusive</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxInclusive</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxLength</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011">,</span><span class="c011">
 </span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minExclusive</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minInclusive</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minLength</span></span><span class="c011">,</span><span class="c011">
 </span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">not</span></span><span class="c011">,</span><span class="c011">
 </span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">or</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">pattern</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011">,</span><span class="c011">
 </span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">qualifiedMaxCount</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">qualifiedMinCount</span></span><span class="c011">,</span><span class="c011">
 </span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">qualifiedValueShape</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">qualifiedValueShapesDisjoint</span></span><span class="c011">,</span><span class="c011">
 </span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">sparql</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">uniqueLang</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">xone</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetObjectsOf</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">not</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011">, </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">qualifiedValueShape</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">xone</span></span><span class="c011"> ( :</span><span class="c011"><span class="c006">NodeShapeShape</span></span><span class="c011"> :</span><span class="c011"><span class="c006">PropertyShapeShape</span></span><span class="c011"> ) ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetNode</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011">   </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRIOrLiteral</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetClass</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetSubjectsOf</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">targetObjectsOf</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">or</span></span><span class="c011"> (</span><span class="c011">
 </span><span class="c011">  [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">not</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">class</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdfs</span></span><span class="c011">:</span><span class="c011"><span class="c006">Class</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">     </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">or</span></span><span class="c011"> ( [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">class</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">NodeShape</span></span><span class="c011"> ]</span><span class="c011">
 </span><span class="c011">             [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">class</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">PropertyShape</span></span><span class="c011"> ]</span><span class="c011">
 </span><span class="c011">           )</span><span class="c011">
 </span><span class="c011">    ]</span><span class="c011">
 </span><span class="c011">  ]</span><span class="c011">
 </span><span class="c011">  [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ]</span><span class="c011">
 </span><span class="c011"> );</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">severity</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">message</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">or</span></span><span class="c011"> ( [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ]</span><span class="c011">
 </span><span class="c011">          [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">langString</span></span><span class="c011"> ]</span><span class="c011">
 </span><span class="c011">  ) ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">deactivated</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">in</span></span><span class="c011"> ( </span><span class="c011"><span class="c003">true</span></span><span class="c011"> </span><span class="c011"><span class="c003">false</span></span><span class="c011"> ) ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">and</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">ListShape</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">class</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">closed</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">boolean</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">ignoredProperties</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">ListShape</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> ( </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">ignoredProperties</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">zeroOrMorePath</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011"> ] </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011"> ) ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">disjoint</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">equals</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">in</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">ListShape</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">languageIn</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">ListShape</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> ( </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">languageIn</span></span><span class="c011"> [ </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">zeroOrMorePath</span></span><span class="c011"> </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">rest</span></span><span class="c011"> ] </span><span class="c011"><span class="c004">rdf</span></span><span class="c011">:</span><span class="c011"><span class="c006">first</span></span><span class="c011">) ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">lessThan</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">lessThanOrEquals</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxExclusive</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">Literal</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxInclusive</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">Literal</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxLength</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minCount</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minExclusive</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">Literal</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minInclusive</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">Literal</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">minLength</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">nodeKind</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">in</span></span><span class="c011"> ( </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">BlankNode</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRI</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">Literal</span></span><span class="c011">
 </span><span class="c011">          </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">BlankNodeOrIRI</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">BlankNodeOrLiteral</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">IRIOrLiteral</span></span><span class="c011"> ) ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">or</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">ListShape</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">pattern</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">flags</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">string</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">qualifiedMaxCount</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">qualifiedMinCount</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">integer</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">qualifiedValueShape</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">qualifiedValueShapesDisjoint</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">boolean</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">uniqueLang</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">datatype</span></span><span class="c011"> </span><span class="c011"><span class="c004">xsd</span></span><span class="c011">:</span><span class="c011"><span class="c006">boolean</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">maxCount</span></span><span class="c011"> 1 ;</span><span class="c011">
 </span><span class="c011"> ] ;</span><span class="c011">
 </span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">property</span></span><span class="c011"> [</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">path</span></span><span class="c011"> </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">xone</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011">  </span><span class="c011"><span class="c004">sh</span></span><span class="c011">:</span><span class="c011"><span class="c006">node</span></span><span class="c011"> :</span><span class="c011"><span class="c006">ListShape</span></span><span class="c011"> ;</span><span class="c011">
 </span><span class="c011"> ]</span><span class="c011">
 </span><span class="c011">.</span></td></tr>
</table><p>	</p><!--BEGIN NOTES chapter-->
<hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note63" href="#text63">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">See Appendix C in <a href="https://www.w3.org/TR/shacl/"><span class="c010">https://www.w3.org/TR/shacl/</span></a></div></dd></dl>
<!--END NOTES-->
<!--TOC chapter id="sec222" References-->
<h1 class="chapter" id="sec222">References</h1><!--SEC END --><dl class="thebibliography"><dt class="dt-thebibliography">



<a id="Abiteboul1995"><span class="c009">[1]</span></a></dt><dd class="dd-thebibliography">
S. Abiteboul, R. Hull, and V. Vianu, editors.
<em>Foundations of Databases: The Logical Level</em>.
Addison-Wesley Longman Publishing Co., Inc., Boston, MA, USA, 1st
edition, 1995.
ISBN 0201537710.</dd><dt class="dt-thebibliography"><a id="Abiteboul2011"><span class="c009">[2]</span></a></dt><dd class="dd-thebibliography">
S. Abiteboul, I. Manolescu, P. Rigaux, M.-C. Rousset, and P. Senellart.
<em>Web Data Management</em>.
Cambridge University Press, 2012.
ISBN 9781107012431.</dd><dt class="dt-thebibliography"><a id="Allemang2011"><span class="c009">[3]</span></a></dt><dd class="dd-thebibliography">
D. Allemang and J. Hendler.
<em>Semantic Web for the Working Ontologist: Effective Modeling in
RDFS and OWL</em>.
Morgan Kaufmann Publishers Inc., San Francisco, CA, USA, 2 edition,
2011.
ISBN 9780123859655, 9780123859662.</dd><dt class="dt-thebibliography"><a id="Antoniou2012"><span class="c009">[4]</span></a></dt><dd class="dd-thebibliography">
G. Antoniou, P. Groth, F. v. v. Harmelen, and R. Hoekstra.
<em>A Semantic Web Primer</em>.
The MIT Press, 2012.
ISBN 0262018284, 9780262018289.</dd><dt class="dt-thebibliography"><a id="JSONLD"><span class="c009">[5]</span></a></dt><dd class="dd-thebibliography">
C. Arnaud Le Hors.
<em>JSON-LD 1.0: A JSON-based Serialization for Linked Data</em>.
W3C Recommendation, 2014a.
URL <a href="http://www.w3.org/TR/json-ld/"><span class="c010">http://www.w3.org/TR/json-ld/</span></a>.</dd><dt class="dt-thebibliography"><a id="SHACLCharter"><span class="c009">[6]</span></a></dt><dd class="dd-thebibliography">
C. Arnaud Le Hors.
RDF Data Shapes Working Group Charter.
http://www.w3.org/2014/data-shapes/charter, 2014b.
URL <a href="http://www.w3.org/2014/data-shapes/charter/"><span class="c010">http://www.w3.org/2014/data-shapes/charter/</span></a>.</dd><dt class="dt-thebibliography"><a id="ShExPrimer"><span class="c009">[7]</span></a></dt><dd class="dd-thebibliography">
T. Baker and E. Prud’hommeaux.
Shape Expressions (ShEx) Primer.
https://shexspec.github.io/primer/, Apr. 2017.
URL <a href="http://www.w3.org/TR/rdf11-concepts/"><span class="c010">http://www.w3.org/TR/rdf11-concepts/</span></a>.</dd><dt class="dt-thebibliography"><a id="bernerslee06"><span class="c009">[8]</span></a></dt><dd class="dd-thebibliography">
T. Berners-Lee.
Linked-data design issues.
W3C design issue document, June 2006.
URL <a href="http://www.w3.org/DesignIssues/LinkedData.html"><span class="c010">http://www.w3.org/DesignIssues/LinkedData.html</span></a>.
http://www.w3.org/DesignIssue/LinkedData.html.</dd><dt class="dt-thebibliography"><a id="XMLSchemaDatatypes"><span class="c009">[9]</span></a></dt><dd class="dd-thebibliography">
P. V. Biron and A. Malhotra.
<em>XML</em><em> Schema Part 2: Datatypes Second Edition</em>.
W3C Recommendation, 2004.
URL <a href="http://www.w3.org/TR/xmlschema-2/"><span class="c010">http://www.w3.org/TR/xmlschema-2/</span></a>.</dd><dt class="dt-thebibliography"><a id="DublinCore"><span class="c009">[10]</span></a></dt><dd class="dd-thebibliography">
D. U. Board.
DCMI Metadata Terms.
http://dublincore.org/documents/dcmi-terms/, 2012.
URL <a href="http://dublincore.org/documents/dcmi-terms/"><span class="c010">http://dublincore.org/documents/dcmi-terms/</span></a>.</dd><dt class="dt-thebibliography"><a id="Boneva17"><span class="c009">[11]</span></a></dt><dd class="dd-thebibliography">
I. Boneva, J. E. Labra Gayo, and E. Prud’hommeaux.
Semantics and validation of shapes schemas for rdf.
In <em>International Semantic Web Conference</em>, 2017.</dd><dt class="dt-thebibliography"><a id="FHIR_LinkedDataModule"><span class="c009">[12]</span></a></dt><dd class="dd-thebibliography">
D. Booth.
FHIR linked data module.
<a href="https://www.hl7.org/fhir/linked-data-module.html"><span class="c010">https://www.hl7.org/fhir/linked-data-module.html</span></a>, Apr. 2017.</dd><dt class="dt-thebibliography"><a id="Bosch2015"><span class="c009">[13]</span></a></dt><dd class="dd-thebibliography">
T. Bosch, E. Acar, A. Nolle, and K. Eckert.
The role of reasoning for rdf validation.
In <em>Proceedings of the 11th International Conference on Semantic
Systems</em>, SEMANTICS ’15, pages 33–40, New York, NY, USA, 2015. ACM.
ISBN 978-1-4503-3462-4.
doi: 10.1145/2814864.2814867.
URL <a href="http://doi.acm.org/10.1145/2814864.2814867"><span class="c010">http://doi.acm.org/10.1145/2814864.2814867</span></a>.</dd><dt class="dt-thebibliography"><a id="Bourhis2017"><span class="c009">[14]</span></a></dt><dd class="dd-thebibliography">
P. Bourhis, J. L. Reutter, F. Suárez, and D. Vrgoč.
Json: Data model, query languages and schema specification.
In <em>Proceedings of the 36th ACM SIGMOD-SIGACT-SIGAI Symposium on
Principles of Database Systems</em>, PODS ’17, pages 123–135, New York, NY, USA,
2017. ACM.
ISBN 978-1-4503-4198-1.
doi: 10.1145/3034786.3056120.
URL <a href="http://doi.acm.org/10.1145/3034786.3056120"><span class="c010">http://doi.acm.org/10.1145/3034786.3056120</span></a>.</dd><dt class="dt-thebibliography"><a id="Box1976"><span class="c009">[15]</span></a></dt><dd class="dd-thebibliography">
G. E. P. Box.
Science and statistics.
<em>Journal of the American Statistical Association</em>, 71
(356): 791–799, 1976.
doi: 10.1080/01621459.1976.10480949.
URL
<a href="http://www.tandfonline.com/doi/abs/10.1080/01621459.1976.10480949"><span class="c010">http://www.tandfonline.com/doi/abs/10.1080/01621459.1976.10480949</span></a>.</dd><dt class="dt-thebibliography"><a id="RDFSchema1998"><span class="c009">[16]</span></a></dt><dd class="dd-thebibliography">
D. Brickley, R. V. Guha, and A. Layman.
Resource description framework (RDF) schemas.
https://www.w3.org/TR/1998/WD-rdf-schema-19980409/, 1998.
URL <a href="https://www.w3.org/TR/1998/WD-rdf-schema-19980409/"><span class="c010">https://www.w3.org/TR/1998/WD-rdf-schema-19980409/</span></a>.</dd><dt class="dt-thebibliography"><a id="Cagle17"><span class="c009">[17]</span></a></dt><dd class="dd-thebibliography">
K. Cagle.
SHACL: It’s about time.
<a href="https://dzone.com/articles/its-about-time"><span class="c010">https://dzone.com/articles/its-about-time</span></a>, Mar. 2017.</dd><dt class="dt-thebibliography"><a id="Trig"><span class="c009">[18]</span></a></dt><dd class="dd-thebibliography">
G. Carothers and A. Seaborne.
Trig: RDF dataset language.
http://www.w3.org/TR/trig/, 2014.
URL <a href="http://www.w3.org/TR/trig/"><span class="c010">http://www.w3.org/TR/trig/</span></a>.</dd><dt class="dt-thebibliography"><a id="WSDL"><span class="c009">[19]</span></a></dt><dd class="dd-thebibliography">
R. Chinnici, J.-J. Moreau, A. Ryman, and S. Weerawarana.
Web Services Description Language (WSDL) Version 2.0 Part 1: Core
Language.
https://www.w3.org/TR/wsdl20/, 2007.
URL <a href="https://www.w3.org/TR/wsdl20/"><span class="c010">https://www.w3.org/TR/wsdl20/</span></a>.</dd><dt class="dt-thebibliography"><a id="RelaxNGSpec"><span class="c009">[20]</span></a></dt><dd class="dd-thebibliography">
J. Clark and M. Makoto, editors.
<em>RELAX NG Specification</em>.
OASIS Committee Specification, 2001.
URL <a href="http://relaxng.org/spec-20011203.html"><span class="c010">http://relaxng.org/spec-20011203.html</span></a>.</dd><dt class="dt-thebibliography"><a id="ClarkSirin13"><span class="c009">[21]</span></a></dt><dd class="dd-thebibliography">
K. Clark and E. Sirin.
On RDF validation, stardog ICV, and assorted remarks.
In <em>RDF Validation Workshop. Practical Assurances for Quality
RDF Data</em>, Cambridge, Ma, Boston, September 2013. W3c,
http://www.w3.org/2012/12/rdf-val.</dd><dt class="dt-thebibliography"><a id="Coen2004"><span class="c009">[22]</span></a></dt><dd class="dd-thebibliography">
C. S. Coen, P. Marinelli, and F. Vitali.
Schemapath, a minimal extension to xml schema for conditional
constraints.
In <em>Proceedings of the 13th International Conference on World
Wide Web</em>, WWW ’04, pages 164–174, New York, NY, USA, 2004. ACM.
ISBN 1-58113-844-X.
doi: 10.1145/988672.988695.
URL <a href="http://doi.acm.org/10.1145/988672.988695"><span class="c010">http://doi.acm.org/10.1145/988672.988695</span></a>.</dd><dt class="dt-thebibliography"><a id="KarenCoyleTomBaker13"><span class="c009">[23]</span></a></dt><dd class="dd-thebibliography">
K. Coyle and T. Baker.
Dublin core application profiles. separating validation from
semantics.
In <em>RDF Validation Workshop. Practical Assurances for Quality
RDF Data</em>, Cambridge, Ma, Boston, September 2013. W3c,
http://www.w3.org/2012/12/rdf-val.</dd><dt class="dt-thebibliography"><a id="RDFDataCube"><span class="c009">[24]</span></a></dt><dd class="dd-thebibliography">
R. Cyganiak and D. Reynolds.
<em>The RDF Data Cube Vocabulary</em>.
W3C Recommendation, 2014.
URL <a href="https://www.w3.org/TR/vocab-data-cube/"><span class="c010">https://www.w3.org/TR/vocab-data-cube/</span></a>.</dd><dt class="dt-thebibliography"><a id="RDF11"><span class="c009">[25]</span></a></dt><dd class="dd-thebibliography">
R. Cyganiak, D. Wood, and M. Lanthaler.
<em>RDF 1.1</em><em> - Concepts and Abstract Syntax</em>.
W3C Recommendation, Feb. 2014.
URL <a href="http://www.w3.org/TR/rdf11-concepts/"><span class="c010">http://www.w3.org/TR/rdf11-concepts/</span></a>.</dd><dt class="dt-thebibliography"><a id="RDFSchema2004"><span class="c009">[26]</span></a></dt><dd class="dd-thebibliography">
Dan Brickley and R. V. Guha.
<em>RDF Vocabulary Description Language 1.0: RDF Schema</em>.
W3C Recommendation, 2004.
URL <a href="https://www.w3.org/TR/2004/REC-rdf-schema-20040210/"><span class="c010">https://www.w3.org/TR/2004/REC-rdf-schema-20040210/</span></a>.</dd><dt class="dt-thebibliography"><a id="RDFSchema11"><span class="c009">[27]</span></a></dt><dd class="dd-thebibliography">
Dan Brickley and R. V. Guha.
<em>RDF</em><em> Schema 1.1</em>.
W3C Recommendation, 2014.
URL <a href="http://www.w3.org/TR/rdf-schema/"><span class="c010">http://www.w3.org/TR/rdf-schema/</span></a>.</dd><dt class="dt-thebibliography"><a id="R2RML"><span class="c009">[28]</span></a></dt><dd class="dd-thebibliography">
S. Das, S. Sundara, and R. Cyganiak.
<em>R2RML</em><em>: </em><em>RDB</em><em> to </em><em>RDF</em><em> Mapping Language</em>.
W3C Recommendation, Sept. 2012.
URL <a href="http://www.w3.org/TR/r2rml/"><span class="c010">http://www.w3.org/TR/r2rml/</span></a>.</dd><dt class="dt-thebibliography"><a id="Owl1"><span class="c009">[29]</span></a></dt><dd class="dd-thebibliography">
Deborah L McGuinness and Frank van Harmelen.
<em>OWL</em><em> Web Ontology Language Overview</em>.
W3C Recommendation, 2004.
URL <a href="https://www.w3.org/TR/owl-features/"><span class="c010">https://www.w3.org/TR/owl-features/</span></a>.</dd><dt class="dt-thebibliography"><a id="RML"><span class="c009">[30]</span></a></dt><dd class="dd-thebibliography">
A. Dimou, M. Vander Sande, P. Colpaert, R. Verborgh, E. Mannens, and R. Van de
Walle.
RML: A Generic Language for Integrated RDF Mappings of
Heterogeneous Data.
In <em>Proceedings of the 7th Workshop on Linked Data on the Web</em>,
Apr. 2014.
URL
<a href="http://events.linkeddata.org/ldow2014/papers/ldow2014_paper_01.pdf"><span class="c010">http://events.linkeddata.org/ldow2014/papers/ldow2014_paper_01.pdf</span></a>.</dd><dt class="dt-thebibliography"><a id="iswc15_rml_rdfunit"><span class="c009">[31]</span></a></dt><dd class="dd-thebibliography">
A. Dimou, D. Kontokostas, M. Freudenberg, R. Verborgh, J. Lehmann, E. Mannens,
S. Hellmann, and R. Van de Walle.
Assessing and Refining Mappings to RDF to Improve Dataset
Quality.
In <em>Proceedings of the 14th </em><em>I</em><em>nternational </em><em>S</em><em>emantic </em><em>W</em><em>eb
</em><em>C</em><em>onference</em>, Oct. 2015.</dd><dt class="dt-thebibliography"><a id="DojchinovskiDBpediaLinks"><span class="c009">[32]</span></a></dt><dd class="dd-thebibliography">
M. Dojchinovski, D. Kontokostas, R. Rößling, M. Knuth, and S. Hellmann.
Dbpedia links: The hub of links for the web of data.
In <em>Proceedings of the SEMANTiCS 2016 Conference (SEMANTiCS
2016)</em>, September 2016.
URL
<a href="https://svn.aksw.org/papers/2016/SEMANTiCS_DBpedia_Links/public.pdf"><span class="c010">https://svn.aksw.org/papers/2016/SEMANTiCS_DBpedia_Links/public.pdf</span></a>.</dd><dt class="dt-thebibliography"><a id="DuCharme2011"><span class="c009">[33]</span></a></dt><dd class="dd-thebibliography">
B. DuCharme.
<em>Learning SPARQL</em>.
O’Reilly Media, Inc., 2011.
ISBN 1449306594, 9781449306595.</dd><dt class="dt-thebibliography"><a id="IRIs"><span class="c009">[34]</span></a></dt><dd class="dd-thebibliography">
M. Duerst and M. Suignard.
Internationalized resource identifiers (IRIs).
https://tools.ietf.org/html/rfc3987, Jan. 2015.
URL <a href="https://tools.ietf.org/html/rfc3987"><span class="c010">https://tools.ietf.org/html/rfc3987</span></a>.</dd><dt class="dt-thebibliography"><a id="JSON"><span class="c009">[35]</span></a></dt><dd class="dd-thebibliography">
ECMA International.
The JSON data interchange format.
http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf,
2013.
URL
<a href="http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf"><span class="c010">http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf</span></a>.</dd><dt class="dt-thebibliography"><a id="iermilov-2016-lodstats-iswc"><span class="c009">[36]</span></a></dt><dd class="dd-thebibliography">
I. Ermilov, J. Lehmann, M. Martin, and S. Auer.
Lodstats: The data web census dataset.
In <em>Proceedings of 15th International Semantic Web Conference -
Resources Track (ISWC’2016)</em>, 2016.
URL
<a href="http://svn.aksw.org/papers/2016/ISWC_LODStats_Resource_Description/public.pdf"><span class="c010">http://svn.aksw.org/papers/2016/ISWC_LODStats_Resource_Description/public.pdf</span></a>.</dd><dt class="dt-thebibliography"><a id="DanielFdez16"><span class="c009">[37]</span></a></dt><dd class="dd-thebibliography">
D. Fernandez Alvarez, J. E. Labra Gayo, and H. Garcia-Gonzalez, editors.
<em>Inference and Serialization of Latent Graph Schemata Using
</em><em>ShEx</em>, number 10 in IARIA Series, 2016.
URL
<a href="http://thinkmind.org/index.php?view=article&articleid=semapro_2016_4_40_30038"><span class="c010">http://thinkmind.org/index.php?view=article&amp;articleid=semapro_2016_4_40_30038</span></a>.</dd><dt class="dt-thebibliography"><a id="FischerEtAl:EDBT/ICDT-WS2015"><span class="c009">[38]</span></a></dt><dd class="dd-thebibliography">
P. M. Fischer, G. Lausen, A. Schätzle, and M. Schmidt.
Rdf constraint checking.
In <a href="#DanielFdez16">Fernandez Alvarez et al. [37]</a>, pages 205–212.
URL <a href="http://ceur-ws.org/Vol-1330/\#paper-33"><span class="c010">http://ceur-ws.org/Vol-1330/\#paper-33</span></a>.</dd><dt class="dt-thebibliography"><a id="FurberH10"><span class="c009">[39]</span></a></dt><dd class="dd-thebibliography">
C. Fürber and M. Hepp.
Using sparql and spin for data quality management on the semantic
web.
In W. Abramowicz and R. Tolksdorf, editors, <em>Business
Information Systems</em>, volume 47 of <em>Lecture Notes in Business
Information Processing</em>, pages 35–46. Springer, 2010.
ISBN 978-3-642-12813-4.</dd><dt class="dt-thebibliography"><a id="LabraShexDerivatives15"><span class="c009">[40]</span></a></dt><dd class="dd-thebibliography">
J. E. L. Gayo, E. Prud’hommeaux, I. Boneva, S. Staworko, H. Solbrig, and
S. Hym.
Towards an rdf validation language based on regular expression
derivatives.
In <a href="#DanielFdez16">Fernandez Alvarez et al. [37]</a>, pages 197–204.
URL <a href="http://ceur-ws.org/Vol-1330/\#paper-32"><span class="c010">http://ceur-ws.org/Vol-1330/\#paper-32</span></a>.</dd><dt class="dt-thebibliography"><a id="Glushko2013discipline"><span class="c009">[41]</span></a></dt><dd class="dd-thebibliography">
R. J. Glushko, editor.
<em>The Discipline of Organizing</em>.
The MIT Press, 2013.</dd><dt class="dt-thebibliography"><a id="SGML90"><span class="c009">[42]</span></a></dt><dd class="dd-thebibliography">
C. F. Goldfarb.
<em>The SGML Handbook</em>.
Oxford University Press, Inc., New York, NY, USA, 1990.
ISBN 0-10-853737-9.</dd><dt class="dt-thebibliography"><a id="XMLModel"><span class="c009">[43]</span></a></dt><dd class="dd-thebibliography">
P. Grosso and J. Kosek.
<em>Associating Schemas with XML documents 1.0</em><em> (Third edition)</em>.
W3C Working Group Note, Oct. 2012.
URL <a href="https://www.w3.org/TR/xml-model/"><span class="c010">https://www.w3.org/TR/xml-model/</span></a>.</dd><dt class="dt-thebibliography"><a id="SPARQL11"><span class="c009">[44]</span></a></dt><dd class="dd-thebibliography">
S. Harris and A. Seaborne.
<em>SPARQL 1.1 Query Language</em>.
W3C Recommendation, 2013.
URL <a href="http://www.w3.org/TR/sparql11-query/"><span class="c010">http://www.w3.org/TR/sparql11-query/</span></a>.</dd><dt class="dt-thebibliography"><a id="Hartmann16"><span class="c009">[45]</span></a></dt><dd class="dd-thebibliography">
T. Hartmann, B. Zapilko, J. Wackerow, and K. Eckert.
Validating rdf data quality using constraints to direct the
development of constraint languages.
In <em>2016 IEEE Tenth International Conference on Semantic
Computing (ICSC)</em>, pages 116–123, Feb 2016.
doi: 10.1109/ICSC.2016.43.</dd><dt class="dt-thebibliography"><a id="Heath_2011"><span class="c009">[46]</span></a></dt><dd class="dd-thebibliography">
T. Heath and C. Bizer.
<em>Linked Data: Evolving the Web into a Global Data Space</em>,
volume 1.
Morgan &amp; Claypool Publishers LLC, feb 2011.
doi: 10.2200/s00334ed1v01y201102wbe001.</dd><dt class="dt-thebibliography"><a id="Hebeler2009"><span class="c009">[47]</span></a></dt><dd class="dd-thebibliography">
J. Hebeler, M. Fisher, R. Blace, and A. Perez-Lopez.
<em>Semantic Web Programming</em>.
Wiley Publishing, 2009.
ISBN 047041801X, 9780470418017.</dd><dt class="dt-thebibliography"><a id="Hitzler09"><span class="c009">[48]</span></a></dt><dd class="dd-thebibliography">
P. Hitzler, M. Krötzsch, and S. Rudolph.
<em>Foundations of Semantic Web Technologies</em>.
Chapman &amp; Hall/CRC, 2009.</dd><dt class="dt-thebibliography"><a id="Hjelm2001"><span class="c009">[49]</span></a></dt><dd class="dd-thebibliography">
J. Hjelm.
<em>Creating the Semantic Web with RDF: Professional Developer’s
Guide</em>.
Professional Developer’s Guide Series. Wiley, 2001.
ISBN 9780471402596.</dd><dt class="dt-thebibliography"><a id="Schematron"><span class="c009">[50]</span></a></dt><dd class="dd-thebibliography">
ISO/IEC.
Information technology — Document Schema Definition Languages
(DSDL) - Part 3: Rule-based validation - Schematron.
http://schematron.com/, 2016.
URL <a href="http://schematron.com/"><span class="c010">http://schematron.com/</span></a>.</dd><dt class="dt-thebibliography"><a id="SPIN11"><span class="c009">[51]</span></a></dt><dd class="dd-thebibliography">
H. Knublauch.
SPIN - Modeling Vocabulary.
http://www.w3.org/Submission/spin-modeling/, 2011.
URL <a href="http://www.w3.org/Submission/spin-modeling/"><span class="c010">http://www.w3.org/Submission/spin-modeling/</span></a>.</dd><dt class="dt-thebibliography"><a id="SHACLSpec"><span class="c009">[52]</span></a></dt><dd class="dd-thebibliography">
H. Knublauch and D. Kontokostas.
<em>Shapes Constraint Language (</em><em>SHACL</em><em>)</em>.
W3C Proposed Recommendation, June 2017.
URL <a href="https://www.w3.org/TR/shacl/"><span class="c010">https://www.w3.org/TR/shacl/</span></a>.</dd><dt class="dt-thebibliography"><a id="kontokostasDatabugger"><span class="c009">[53]</span></a></dt><dd class="dd-thebibliography">
D. Kontokostas, P. Westphal, S. Auer, S. Hellmann, J. Lehmann, R. Cornelissen,
and A. Zaveri.
Test-driven evaluation of linked data quality.
In <em>Proceedings of the 23rd International Conference on World
Wide Web</em>, WWW ’14, pages 747–758, Republic and Canton of Geneva,
Switzerland, 2014. International World Wide Web Conferences Steering
Committee.
ISBN 978-1-4503-2744-2.
doi: 10.1145/2566486.2568002.
URL <a href="http://svn.aksw.org/papers/2014/WWW_Databugger/public.pdf"><span class="c010">http://svn.aksw.org/papers/2014/WWW_Databugger/public.pdf</span></a>.</dd><dt class="dt-thebibliography"><a id="Labra2012"><span class="c009">[54]</span></a></dt><dd class="dd-thebibliography">
J. E. Labra Gayo.
<em>Web semántica: comprendiendo el cambio hacia la Web 3.0</em>.
Nebiblo, 2012.
ISBN 8497455711.</dd><dt class="dt-thebibliography"><a id="Labra13"><span class="c009">[55]</span></a></dt><dd class="dd-thebibliography">
J. E. Labra Gayo and J. M. Alvarez Rodríguez.
Validating statistical index data represented in RDF using SPARQL
queries.
In <em>RDF Validation Workshop. Practical Assurances for Quality
RDF Data</em>, Cambridge, Ma, Boston, September 2013. W3c,
http://www.w3.org/2012/12/rdf-val.</dd><dt class="dt-thebibliography"><a id="LabraMTSR14"><span class="c009">[56]</span></a></dt><dd class="dd-thebibliography">
J. E. Labra Gayo, H. Farham, J. Castro Fernández, and J. M.
Álvarez Rodríguez.
Representing statistical indexes as linked data including metadata
about their computation process.
In S. Closs, R. Studer, E. Garoufallou, and M. Sicilia, editors,
<em>Metadata and Semantics Research - 8th Research Conference, </em><em>MTSR</em><em> 2014,
Karlsruhe, Germany, November 27-29, 2014. Proceedings</em>, volume 478 of
<em>Communications in Computer and Information Science</em>, pages 42–53.
Springer, 2014a.
ISBN 978-3-319-13673-8.
doi: 10.1007/978-3-319-13674-5_5.
URL <a href="http://dx.doi.org/10.1007/978-3-319-13674-5_5"><span class="c010">http://dx.doi.org/10.1007/978-3-319-13674-5_5</span></a>.</dd><dt class="dt-thebibliography"><a id="LabraLDQSemantics"><span class="c009">[57]</span></a></dt><dd class="dd-thebibliography">
J. E. Labra Gayo, E. Prud’hommeaux, H. R. Solbrig, and J. M. Á.
Rodríguez.
Validating and describing linked data portals using RDF shape
expressions.
In <em>Proceedings of the 1st Workshop on Linked Data Quality
co-located with 10th International Conference on Semantic Systems,
LDQ@SEMANTiCS 2014.</em>, volume 1215 of <em>CEUR</em><em> Workshop Proceedings</em>.
CEUR-WS.org, 2014b.</dd><dt class="dt-thebibliography"><a id="LabraValidatingDescribingDataPortalsArxivVersion2017"><span class="c009">[58]</span></a></dt><dd class="dd-thebibliography">
J. E. Labra Gayo, E. Prud’hommeaux, H. Solbrig, and I. Boneva.
Validating and describing linked data portals using shapes.
<em>CoRR</em>, abs/1701.08924, 2017.
URL <a href="http://arxiv.org/abs/1701.08924"><span class="c010">http://arxiv.org/abs/1701.08924</span></a>.</dd><dt class="dt-thebibliography"><a id="PROVO"><span class="c009">[59]</span></a></dt><dd class="dd-thebibliography">
T. Lebo, S. Sahoo, and D. McGuinness.
<em>PROV-O: The PROV Ontology</em>.
W3C Recommendation, Apr. 2013.
URL <a href="http://www.w3.org/TR/prov-o/"><span class="c010">http://www.w3.org/TR/prov-o/</span></a>.</dd><dt class="dt-thebibliography"><a id="dbpedia-swj"><span class="c009">[60]</span></a></dt><dd class="dd-thebibliography">
J. Lehmann, R. Isele, M. Jakob, A. Jentzsch, D. Kontokostas, P. N. Mendes,
S. Hellmann, M. Morsey, P. van Kleef, S. Auer, and C. Bizer.
DBpedia - a large-scale, multilingual knowledge base extracted from
wikipedia.
<em>Semantic Web Journal</em>, 6 (2): 167–195, 2015.
URL <a href="http://jens-lehmann.org/files/2014/swj_dbpedia.pdf"><span class="c010">http://jens-lehmann.org/files/2014/swj_dbpedia.pdf</span></a>.</dd><dt class="dt-thebibliography"><a id="DCAT"><span class="c009">[61]</span></a></dt><dd class="dd-thebibliography">
F. Maali and J. Erickson, editors.
<em>Data Catalog Vocabulary (DCAT)</em>.
W3C Recommendation, 2014.
URL <a href="https://www.w3.org/TR/vocab-dcat/"><span class="c010">https://www.w3.org/TR/vocab-dcat/</span></a>.</dd><dt class="dt-thebibliography"><a id="Martens2015"><span class="c009">[62]</span></a></dt><dd class="dd-thebibliography">
W. Martens, F. Neven, M. Niewerth, and T. Schwentick.
Bonxai: Combining the simplicity of dtd with the expressiveness of
xml schema.
In <em>Proceedings of the 34th ACM SIGMOD-SIGACT-SIGAI Symposium on
Principles of Database Systems</em>, PODS ’15, pages 145–156, New York, NY, USA,
2015. ACM.
ISBN 978-1-4503-2757-2.
doi: 10.1145/2745754.2745774.
URL <a href="http://doi.acm.org/10.1145/2745754.2745774"><span class="c010">http://doi.acm.org/10.1145/2745754.2745774</span></a>.</dd><dt class="dt-thebibliography"><a id="Schemarama"><span class="c009">[63]</span></a></dt><dd class="dd-thebibliography">
L. Miller and D. Brickley.
Schemarama.
<a href="http://swordfish.rdfweb.org/discovery/2001/01/schemarama/"><span class="c010">http://swordfish.rdfweb.org/discovery/2001/01/schemarama/</span></a>, Feb.
2001.</dd><dt class="dt-thebibliography"><a id="Motik07"><span class="c009">[64]</span></a></dt><dd class="dd-thebibliography">
B. Motik, I. Horrocks, and U. Sattler.
Adding Integrity Constraints to OWL.
In C. Golbreich, A. Kalyanpur, and B. Parsia, editors, <em>OWL:
Experiences and Directions 2007 (OWLED 2007)</em>, Innsbruck, Austria, June 6–7
2007.</dd><dt class="dt-thebibliography"><a id="Murata2005"><span class="c009">[65]</span></a></dt><dd class="dd-thebibliography">
M. Murata, D. Lee, M. Mani, and K. Kawaguchi.
Taxonomy of xml schema languages using formal language theory.
<em>ACM Trans. Internet Technol.</em>, 5 (4):
660–704, Nov. 2005.
ISSN 1533-5399.
doi: 10.1145/1111627.1111631.
URL <a href="http://doi.acm.org/10.1145/1111627.1111631"><span class="c010">http://doi.acm.org/10.1145/1111627.1111631</span></a>.</dd><dt class="dt-thebibliography"><a id="Protege2015"><span class="c009">[66]</span></a></dt><dd class="dd-thebibliography">
M. A. Musen.
The protÉgÉ project: A look back and a look forward.
<em>AI Matters</em>, 1 (4): 4–12, June 2015.
ISSN 2372-3483.
doi: 10.1145/2757001.2757003.
URL <a href="http://doi.acm.org/10.1145/2757001.2757003"><span class="c010">http://doi.acm.org/10.1145/2757001.2757003</span></a>.</dd><dt class="dt-thebibliography"><a id="Neumann09"><span class="c009">[67]</span></a></dt><dd class="dd-thebibliography">
T. Neumann and G. Weikum.
Scalable join processing on very large rdf graphs.
In <em>Proceedings of the 2009 ACM SIGMOD International Conference
on Management of Data</em>, SIGMOD ’09, pages 627–640, New York, NY, USA, 2009.
ACM.
ISBN 978-1-60558-551-2.
doi: 10.1145/1559845.1559911.
URL <a href="http://doi.acm.org/10.1145/1559845.1559911"><span class="c010">http://doi.acm.org/10.1145/1559845.1559911</span></a>.</dd><dt class="dt-thebibliography"><a id="RDF1997"><span class="c009">[68]</span></a></dt><dd class="dd-thebibliography">
Ora Lassila and Ralph R. Swick.
Resource Description Framework (RDF) Model and Syntax.
https://www.w3.org/TR/WD-rdf-syntax-971002/, 1997.
URL <a href="https://www.w3.org/TR/WD-rdf-syntax-971002/"><span class="c010">https://www.w3.org/TR/WD-rdf-syntax-971002/</span></a>.</dd><dt class="dt-thebibliography"><a id="RDF10_99"><span class="c009">[69]</span></a></dt><dd class="dd-thebibliography">
Ora Lassila and Ralph R. Swick.
Resource Description Framework (RDF) Model and Syntax
Specification.
https://www.w3.org/TR/1999/REC-rdf-syntax-19990222/, 1999.
URL <a href="https://www.w3.org/TR/1999/REC-rdf-syntax-19990222/"><span class="c010">https://www.w3.org/TR/1999/REC-rdf-syntax-19990222/</span></a>.</dd><dt class="dt-thebibliography"><a id="OWL2"><span class="c009">[70]</span></a></dt><dd class="dd-thebibliography">
W. OWL Working Group.
<em>OWL 2 Web Ontology Language: Document Overview</em>.
W3C Recommendation, 27 October 2009.
Available at <a href="http://www.w3.org/TR/owl2-overview/"><span class="c010">http://www.w3.org/TR/owl2-overview/</span></a>.</dd><dt class="dt-thebibliography"><a id="Passin2004"><span class="c009">[71]</span></a></dt><dd class="dd-thebibliography">
T. B. Passin.
<em>Explorer’s Guide to the Semantic Web</em>.
Manning Publications Co., Greenwich, CT, USA, 2004.
ISBN 1932394206.</dd><dt class="dt-thebibliography"><a id="Patel-Schneider2015"><span class="c009">[72]</span></a></dt><dd class="dd-thebibliography">
P. F. Patel-Schneider.
Using Description Logics for RDF Constraint Checking and
Closed-world Recognition.
In <em>Proceedings of the Twenty-Ninth AAAI Conference on
Artificial Intelligence</em>, AAAI’15, pages 247–253. AAAI Press, 2015.
ISBN 0-262-51129-0.
URL <a href="http://dl.acm.org/citation.cfm?id=2887007.2887042"><span class="c010">http://dl.acm.org/citation.cfm?id=2887007.2887042</span></a>.</dd><dt class="dt-thebibliography"><a id="SemanticsSPARQL09"><span class="c009">[73]</span></a></dt><dd class="dd-thebibliography">
J. Pérez, M. Arenas, and C. Gutierrez.
Semantics and complexity of sparql.
<em>ACM Trans. Database Syst.</em>, 34 (3):
16:1–16:45, Sept. 2009.
ISSN 0362-5915.
doi: 10.1145/1567274.1567278.
URL <a href="http://doi.acm.org/10.1145/1567274.1567278"><span class="c010">http://doi.acm.org/10.1145/1567274.1567278</span></a>.</dd><dt class="dt-thebibliography"><a id="Pezoa2016"><span class="c009">[74]</span></a></dt><dd class="dd-thebibliography">
F. Pezoa, J. L. Reutter, F. Suarez, M. Ugarte, and D. Vrgoč.
Foundations of json schema.
In <em>Proceedings of the 25th International Conference on World
Wide Web</em>, WWW ’16, pages 263–273, Republic and Canton of Geneva,
Switzerland, 2016. International World Wide Web Conferences Steering
Committee.
ISBN 978-1-4503-4143-1.
doi: 10.1145/2872427.2883029.
URL <a href="https://doi.org/10.1145/2872427.2883029"><span class="c010">https://doi.org/10.1145/2872427.2883029</span></a>.</dd><dt class="dt-thebibliography"><a id="BCP47"><span class="c009">[75]</span></a></dt><dd class="dd-thebibliography">
A. Phillips and M. Davis.
Tags for Identifying Languages.
Technical Report 47, Internet Engineering Task Force, September 2009.
URL <a href="http://tools.ietf.org/rfc/bcp/bcp47.txt"><span class="c010">http://tools.ietf.org/rfc/bcp/bcp47.txt</span></a>.</dd><dt class="dt-thebibliography"><a id="Powers2003"><span class="c009">[76]</span></a></dt><dd class="dd-thebibliography">
S. Powers.
<em>Practical RDF</em>.
O’Reilly &amp; Associates, Inc., Sebastopol, CA, USA, 2003.
ISBN 0596002637.</dd><dt class="dt-thebibliography"><a id="ShapeMap"><span class="c009">[77]</span></a></dt><dd class="dd-thebibliography">
E. Prud’hommeaux and T. Baker.
ShapeMap Structure and Language.
https://shexspec.github.io/ShapeMap/, July 2017.
URL <a href="https://shexspec.github.io/ShapeMap/"><span class="c010">https://shexspec.github.io/ShapeMap/</span></a>.</dd><dt class="dt-thebibliography"><a id="Turtle"><span class="c009">[78]</span></a></dt><dd class="dd-thebibliography">
E. Prud’hommeaux and G. Carothers.
RDF 1.1 turtle: Terse RDF triple language.
http://www.w3.org/TR/turtle/, 2014.
URL <a href="http://www.w3.org/TR/turtle/"><span class="c010">http://www.w3.org/TR/turtle/</span></a>.</dd><dt class="dt-thebibliography"><a id="SPARQL10"><span class="c009">[79]</span></a></dt><dd class="dd-thebibliography">
E. Prud’hommeaux and A. Seaborne.
<em>SPARQL Query Language for RDF</em>.
W3C Recommendation, 2008.
URL <a href="http://www.w3.org/TR/rdf-sparql-query/"><span class="c010">http://www.w3.org/TR/rdf-sparql-query/</span></a>.</dd><dt class="dt-thebibliography"><a id="EricSemantics2014"><span class="c009">[80]</span></a></dt><dd class="dd-thebibliography">
E. Prud’hommeaux, J. E. Labra Gayo, and H. R. Solbrig.
Shape expressions: an RDF validation and transformation language.
In <em>Proceedings of the 10th International Conference on Semantic
Systems, </em><em>SEMANTICS</em><em> 2014</em>, pages 32–40. ACM, 2014.</dd><dt class="dt-thebibliography"><a id="ShExSpec"><span class="c009">[81]</span></a></dt><dd class="dd-thebibliography">
E. Prud’hommeaux, I. Boneva, J. E. Labra Gayo, and G. Kellog.
Shape Expressions Language 2.0.
https://shexspec.github.io/spec/, Apr. 2017.
URL <a href="https://shexspec.github.io/spec/"><span class="c010">https://shexspec.github.io/spec/</span></a>.</dd><dt class="dt-thebibliography"><a id="RDFValidation"><span class="c009">[82]</span></a></dt><dd class="dd-thebibliography">
RDF Working Group W3c.
W3c validation workshop. practical assurances for quality rdf data,
September 2013.
URL <a href="http://www.w3.org/2012/12/rdf-val/"><span class="c010">http://www.w3.org/2012/12/rdf-val/</span></a>.</dd><dt class="dt-thebibliography"><a id="Organization14"><span class="c009">[83]</span></a></dt><dd class="dd-thebibliography">
D. Reynolds.
<em>The Organization Ontology</em>.
W3C Recommendation, 2014.
URL <a href="http://www.w3.org/TR/vocab-org/"><span class="c010">http://www.w3.org/TR/vocab-org/</span></a>.</dd><dt class="dt-thebibliography"><a id="Robertsson2004"><span class="c009">[84]</span></a></dt><dd class="dd-thebibliography">
E. Robertsson.
Combining RELAX NG and Schematron.
<em>XML.com</em>, Feb. 2004.
URL <a href="https://www.xml.com/pub/a/2004/02/11/relaxtron.html"><span class="c010">https://www.xml.com/pub/a/2004/02/11/relaxtron.html</span></a>.</dd><dt class="dt-thebibliography"><a id="Rumbaugh2004"><span class="c009">[85]</span></a></dt><dd class="dd-thebibliography">
J. Rumbaugh, I. Jacobson, and G. Booch.
<em>Unified Modeling Language Reference Manual, The (2Nd Edition)</em>.
Pearson Higher Education, 2004.
ISBN 0321245628.</dd><dt class="dt-thebibliography"><a id="OSLCResourceShapes"><span class="c009">[86]</span></a></dt><dd class="dd-thebibliography">
A. G. Ryman, A. L. Hors, and S. Speicher.
OSLC resource shape: A language for defining constraints on linked
data.
In C. Bizer, T. Heath, T. Berners-Lee, M. Hausenblas, and S. Auer,
editors, <em>Linked data on the Web</em>, volume 996 of <em>CEUR Workshop
Proceedings</em>. CEUR-WS.org, 2013.</dd><dt class="dt-thebibliography"><a id="WebAnnotation"><span class="c009">[87]</span></a></dt><dd class="dd-thebibliography">
R. Sanderson, P. Ciccarese, and B. Young.
<em>Web Annotation Vocabulary</em>.
W3C Recommendation, Feb. 2017.
URL <a href="https://www.w3.org/TR/annotation-vocab/"><span class="c010">https://www.w3.org/TR/annotation-vocab/</span></a>.</dd><dt class="dt-thebibliography"><a id="Segaran2009"><span class="c009">[88]</span></a></dt><dd class="dd-thebibliography">
T. Segaran, C. Evans, J. Taylor, S. Toby, E. Colin, and T. Jamie.
<em>Programming the Semantic Web</em>.
O’Reilly Media, Inc., 1st edition, 2009.
ISBN 0596153813, 9780596153816.</dd><dt class="dt-thebibliography"><a id="XMLSchema11Structures"><span class="c009">[89]</span></a></dt><dd class="dd-thebibliography">
Shudi Gao, C. M. Sperberg-McQueen and Henry S. Thompson.
<em>W3C XML Schema Definition Language (XSD) 1.1 Part 1:
Structures</em>.
W3C Recommendation, 2012.
URL <a href="https://www.w3.org/TR/xmlschema11-1/"><span class="c010">https://www.w3.org/TR/xmlschema11-1/</span></a>.</dd><dt class="dt-thebibliography"><a id="Simister13"><span class="c009">[90]</span></a></dt><dd class="dd-thebibliography">
S. Simister and D. Brickley.
Simple application-specific constraints for rdf models.
In <em>RDF Validation Workshop. Practical Assurances for Quality
RDF Data</em>, Cambridge, Ma, Boston, September 2013. W3c,
http://www.w3.org/2012/12/rdf-val.</dd><dt class="dt-thebibliography"><a id="SHACLUseCases"><span class="c009">[91]</span></a></dt><dd class="dd-thebibliography">
Simon Steyskal and Karen Coyle.
<em>SHACL</em><em> Use Cases and Requirements</em>.
W3C Working Draft, 2016.
URL <a href="https://www.w3.org/TR/shacl-ucr/"><span class="c010">https://www.w3.org/TR/shacl-ucr/</span></a>.</dd><dt class="dt-thebibliography"><a id="ShExSubmission14"><span class="c009">[92]</span></a></dt><dd class="dd-thebibliography">
H. Solbrig and E. Prud’hommeaux.
Shape Expressions 1.0 Definition.
http://www.w3.org/Submission/shex-defn/, 2014.
URL <a href="http://www.w3.org/Submission/shex-defn/"><span class="c010">http://www.w3.org/Submission/shex-defn/</span></a>.</dd><dt class="dt-thebibliography"><a id="linkedDataPlatform"><span class="c009">[93]</span></a></dt><dd class="dd-thebibliography">
S. Speicher, J. Arwe, and A. Malhotra, editors.
<em>Linked Data Platform 1.0</em>.
W3C Recommendation, 2015.
URL <a href="https://www.w3.org/TR/ldp/"><span class="c010">https://www.w3.org/TR/ldp/</span></a>.</dd><dt class="dt-thebibliography"><a id="Slawek2015"><span class="c009">[94]</span></a></dt><dd class="dd-thebibliography">
S. Staworko, I. Boneva, J. E. Labra Gayo, S. Hym, E. G. Prud’hommeaux, and
H. R. Solbrig.
Complexity and Expressiveness of ShEx for RDF.
In <em>18th International Conference on Database Theory, </em><em>ICDT</em><em>
2015</em>, volume 31 of <em>LIPIcs</em>, pages 195–211. Schloss Dagstuhl -
Leibniz-Zentrum fuer Informatik, 2015.</dd><dt class="dt-thebibliography"><a id="SteerMiller2004"><span class="c009">[95]</span></a></dt><dd class="dd-thebibliography">
D. Steer and L. Miller.
Validating rdf with treehugger and schematron.
In <em>FOAF-Galway</em>. Position paper, 2004.
URL
<a href="https://www.w3.org/2001/sw/Europe/events/foaf-galway/papers/pp/validating_rdf/"><span class="c010">https://www.w3.org/2001/sw/Europe/events/foaf-galway/papers/pp/validating_rdf/</span></a>.</dd><dt class="dt-thebibliography"><a id="Tiao10"><span class="c009">[96]</span></a></dt><dd class="dd-thebibliography">
J. Tao, E. Sirin, J. Bao, and D. L. McGuinness.
Integrity constraints in OWL.
In <em>Proceedings of the 24th AAAI Conference on Artificial
Intelligence (AAAI-10)</em>. AAAI, 2010.</dd><dt class="dt-thebibliography"><a id="LeastPower"><span class="c009">[97]</span></a></dt><dd class="dd-thebibliography">
N. M. Tim Berners-Lee.
The rule of least power.
http://www.w3.org/2001/tag/doc/leastPower, Feb. 2006.</dd><dt class="dt-thebibliography"><a id="XML10"><span class="c009">[98]</span></a></dt><dd class="dd-thebibliography">
Tim Bray, Jean Paoli, C. M. Sperberg-McQueen, Eve Maler and François
Yergeau.
<em>Extensible Markup Language (XML) 1.0 (Fifth Edition</em>.
W3C Recommendation, 2008.
URL <a href="https://www.w3.org/TR/xml/"><span class="c010">https://www.w3.org/TR/xml/</span></a>.</dd><dt class="dt-thebibliography"><a id="vanDam2015"><span class="c009">[99]</span></a></dt><dd class="dd-thebibliography">
J. C. van Dam, J. J. Koehorst, P. J. Schaap, V. A. Martins dos Santos, and
M. Suarez-Diez.
Rdf2graph a tool to recover, understand and validate the ontology of
an rdf resource.
<em>Journal of Biomedical Semantics</em>, 6 (1): 39,
Oct 2015.
ISSN 2041-1480.
doi: 10.1186/s13326-015-0038-9.
URL <a href="http://dx.doi.org/10.1186/s13326-015-0038-9"><span class="c010">http://dx.doi.org/10.1186/s13326-015-0038-9</span></a>.</dd><dt class="dt-thebibliography"><a id="RelaxNG"><span class="c009">[100]</span></a></dt><dd class="dd-thebibliography">
E. van der Vlist.
<em>Relax NG: A Simpler Schema Language for XML</em>.
O’Reilly, Beijing, 2004.
ISBN 978-0-596-00421-7.</dd><dt class="dt-thebibliography"><a id="JSONSchema"><span class="c009">[101]</span></a></dt><dd class="dd-thebibliography">
A. Wright, editor.
<em>JSON Schema: A Media Type for Describing JSON Documents</em>.
IETF, 2016.
URL <a href="http://json-schema.org/"><span class="c010">http://json-schema.org/</span></a>.</dd></dl><!--TOC chapter id="sec223" Authors’ Biographies-->
<h1 class="chapter" id="sec223">Authors’ Biographies</h1><!--SEC END --><!--TOC section id="sec224" Jose Emilio Labra Gayo-->
<h2 class="section" id="sec224">Jose Emilio Labra Gayo</h2><!--SEC END --><p>
<img src="Gayo.png">
</p><p><span class="c013">Jose Emilio Labra Gayo</span>
is an Associate Professor at the University of Oviedo, Spain. He is the 
founder and main researcher of WESO (Web Semantics Oviedo) research group, which 
collaborates with different companies around the world applying semantic 
web technologies.
The development of data portals for several companies and public administrations led to his interest in RDF validation. He is a 
member of the W3C Data Shapes working group and of three W3C community 
groups—Shape Expressions, SHACL, and RAX 
(RDF and XML interoperability)—as well as the Chairman of the Best practices of Multilingual Linked Open Data community group. 
He implemented the SHACL and ShEx library <em>Shaclex</em> and maintains an online RDF validator service and has also written an introductory book about the Semantic Web in 
Spanish [<a href="#Labra2012">54</a>].</p><p><br>
<br>
<br>
<br>

</p><!--TOC section id="sec225" Eric Prud’hommeaux-->
<h2 class="section" id="sec225">Eric Prud’hommeaux</h2><!--SEC END --><p>
<img src="Prudhommeaux.png">
</p><p><span class="c013">Eric Prud’hommeaux</span>
is a W3C staff contact for the Health Care and Life Sciences Interest Group, RDF Data Shapes (RDF Validation), LDP, RDF 1.1, SPARQL 1.1, RDB2RDF, SPARQL 1.0, SAWSDL, and XML Protocol Working Groups. 
He has developed and designed multiple languages, including a significant contribution to SPARQL and ShEx. 
He developed the Javascript ShEx library to promote understanding about and exploitation of Shape Expressions. </p><!--TOC section id="sec226" Iovka Boneva-->
<h2 class="section" id="sec226">Iovka Boneva</h2><!--SEC END --><p>
<img src="Boneva.png">
</p><p><span class="c013">Iovka Boneva</span>
is an Associate Professor at the University of Lille, France, and a member of the Links research project affiliated to Inria—Lille Nord Europe and CRIStAL (Centre de Recherche en Informatique, Signal et Automatique). 
She has been working on expressive languages for describing and querying tree-structured data, and more recently on data exchange for relational and graph data. 
She was a member of the W3C RDF Data Shapes Working Group and is a member of the W3C Shape Expressions community group. 
She has developed the theoretical foundations of the Shape Expressions Language. </p><p><br>
<br>
<br>
<br>

</p><!--TOC section id="sec227" Dimitris Kontokostas-->
<h2 class="section" id="sec227">Dimitris Kontokostas</h2><!--SEC END --><p>
<img src="Kontokostas.png">
</p><p><span class="c013">Dimitris Kontokostas</span>
is a Knowledge Engineer and Semantic Web researcher at the University of Leipzig and the DBpedia Association. 
He has been working on knowledge representation and knowledge management of large-scale knowledge graphs and data quality. 
Dimitris is a member of the RDF Data Shapes working group, a member and the chairman of the Shape Expressions Community Group, and co-editor of the SHACL W3C Recommendation.
He is the creator of RDFUnit, a tool and unit-testing framework for RDF validation that supports SHACL, OSLC Resource Shapes, and DC Description Set Profiles.</p><!--TOC chapter id="sec228" Index-->
<h1 class="chapter" id="sec228">Index</h1><!--SEC END --><p></p><table class="c002 cellpading0"><tr><td class="c018"><ul class="indexenv"><li class="li-indexenv">
Absolute IRI, <a href="#hevea_default310">4.4.1</a>
</li><li class="li-indexenv">And, <a href="#hevea_default341">4.4.3</a>
</li><li class="li-indexenv">Apache Jena, <a href="#hevea_default481">5.2</a>, <a href="#hevea_default845">7.19</a>
<br>
<br>
</li><li class="li-indexenv">Big data, <a href="#hevea_default2">1.1</a>
</li><li class="li-indexenv">Blank node, <a href="#hevea_default77">2.2</a>, <a href="#hevea_default79">2.2</a>, <a href="#hevea_default321">4.4.1</a>
</li><li class="li-indexenv">Boneva, Iovka, <a href="#hevea_default297">4.3</a>
</li><li class="li-indexenv">bag, <a href="#hevea_default230">3.2</a>
<br>
<br>
</li><li class="li-indexenv">CI, <a href="#hevea_default802">6.4.3</a>
</li><li class="li-indexenv">Clinical records, <a href="#hevea_default778">6.1.2</a>
</li><li class="li-indexenv">Closed shapes, <a href="#hevea_default240">3.2</a>
</li><li class="li-indexenv">Closed World Assumption, <a href="#hevea_default17">1.2</a>, <a href="#hevea_default259">3.3.2</a>, <a href="#hevea_default263">3.3.2</a>
</li><li class="li-indexenv">Codasyl, <a href="#hevea_default179">3.1.2</a>
</li><li class="li-indexenv">Codepoint, <a href="#hevea_default641">5.10.2</a>
</li><li class="li-indexenv">Comma-Separated Values, <a href="#hevea_default214">3.1.5</a>
</li><li class="li-indexenv">Constraint component, <a href="#hevea_default738">5.16.2</a>
</li><li class="li-indexenv">Continuous integration, <a href="#hevea_default801">6.4.3</a>
</li><li class="li-indexenv">Corese, <a href="#hevea_default493">5.2</a>
</li><li class="li-indexenv">CSV, <a href="#hevea_default163">3.1</a>, <a href="#hevea_default212">3.1.4</a>, <a href="#hevea_default213">3.1.5</a>, <a href="#hevea_default224">3.2</a>
</li><li class="li-indexenv">CSV Lint, <a href="#hevea_default219">3.1.5</a>
</li><li class="li-indexenv">Custom datatypes, <a href="#hevea_default612">5.9.1</a>
</li><li class="li-indexenv">CVSW, <a href="#hevea_default218">3.1.5</a>
</li><li class="li-indexenv">CWA, <a href="#hevea_default18">1.2</a>
</li><li class="li-indexenv">Cyclic data model, <a href="#hevea_default414">4.7.2</a>, <a href="#hevea_default666">5.12</a>
</li><li class="li-indexenv">co-existence constraints, <a href="#hevea_default790">6.2.2</a>
<br>
<br>
</li><li class="li-indexenv">Dan Brickley, <a href="#hevea_default247">3.3.1</a>
</li><li class="li-indexenv">Data Definition Language, <a href="#hevea_default177">3.1.2</a>
</li><li class="li-indexenv">Data engineer, <a href="#hevea_default237">3.2</a>
</li><li class="li-indexenv">Data graph, <a href="#hevea_default501">5.3</a>
</li><li class="li-indexenv">Data quality, <a href="#hevea_default158">3</a>
</li><li class="li-indexenv">Datatype IRI, <a href="#hevea_default72">2.2</a>
</li><li class="li-indexenv">DBpedia, <a href="#hevea_default799">6.4.3</a>
</li><li class="li-indexenv">DDL, <a href="#hevea_default34">2.1</a>, <a href="#hevea_default178">3.1.2</a>, <a href="#hevea_default223">3.2</a>, <a href="#hevea_default242">3.2</a>
</li><li class="li-indexenv">Descrition logics, <a href="#hevea_default129">2.4.2</a>
</li><li class="li-indexenv">Disambiguation, <a href="#hevea_default7">1.2</a>
</li><li class="li-indexenv">Douglas Crockford, <a href="#hevea_default202">3.1.4</a>
</li><li class="li-indexenv">DTD, <a href="#hevea_default221">3.2</a>
</li><li class="li-indexenv">Dublin Core Application Profiles, <a href="#hevea_default268">3.3.3</a>
<br>
<br>
</li><li class="li-indexenv">ECMA, <a href="#hevea_default204">3.1.4</a>
</li><li class="li-indexenv">ELI, <a href="#hevea_default499">5.2</a>
</li><li class="li-indexenv">Embedded schema, <a href="#hevea_default196">3.1.3</a>
</li><li class="li-indexenv">Entailment, <a href="#hevea_default744">5.17</a>
</li><li class="li-indexenv">Entailment regime, <a href="#hevea_default745">5.17</a>
</li><li class="li-indexenv">Exclusive or, <a href="#hevea_default656">5.11</a>, <a href="#hevea_default661">5.11.3</a>
<br>
<br>
</li><li class="li-indexenv">FHIR, <a href="#hevea_default99">2.3</a>, <a href="#hevea_default354">4.4.4</a>, <a href="#hevea_default779">6.2</a>, <a href="#hevea_default791">6.2.2</a>
</li><li class="li-indexenv">Focus node, <a href="#hevea_default315">4.4.1</a>
</li><li class="li-indexenv">Foreign key, <a href="#hevea_default182">3.1.2</a>
<br>
<br>
</li><li class="li-indexenv">George Box, <a href="#hevea_default98">2.3</a>
</li><li class="li-indexenv">Github, <a href="#hevea_default800">6.4.3</a>
</li><li class="li-indexenv">Google, <a href="#hevea_default90">2.3</a>
</li><li class="li-indexenv">Grammar, <a href="#hevea_default28">1.3</a>
<br>
<br>
</li><li class="li-indexenv">Haskell, <a href="#hevea_default299">4.3</a>, <a href="#hevea_default843">7.19</a>
</li><li class="li-indexenv">HL7, <a href="#hevea_default100">2.3</a>, <a href="#hevea_default782">6.2</a>
</li><li class="li-indexenv">HL7 FHIR, <a href="#hevea_default285">4.1</a>
</li><li class="li-indexenv">HTML, <a href="#hevea_default26">1.3</a>, <a href="#hevea_default153">2.4.3</a>, <a href="#hevea_default155">2.4.3</a>, <a href="#hevea_default185">3.1.3</a>, <a href="#hevea_default794">6.2.2</a>
</li><li class="li-indexenv">HTTP link headers, <a href="#hevea_default452">4.9.2</a>
<br>
<br>
</li><li class="li-indexenv">IDE, <a href="#hevea_default849">7.19</a>
</li><li class="li-indexenv">Inclusive or, <a href="#hevea_default423">4.8.2</a>
</li><li class="li-indexenv">Incoming arcs, <a href="#hevea_default317">4.4.1</a>
</li><li class="li-indexenv">Indirect recursion, <a href="#hevea_default675">5.12.1</a>
</li><li class="li-indexenv">Inference, <a href="#hevea_default239">3.2</a>, <a href="#hevea_default743">5.17</a>
</li><li class="li-indexenv">Instance data, <a href="#hevea_default234">3.2</a>
</li><li class="li-indexenv">Integrated Development Environment, <a href="#hevea_default484">5.2</a>
</li><li class="li-indexenv">IRI, <a href="#hevea_default6">1.2</a>, <a href="#hevea_default58">2.2</a>, <a href="#hevea_default320">4.4.1</a>
</li><li class="li-indexenv">IRI referent, <a href="#hevea_default59">2.2</a>
</li><li class="li-indexenv">identifiers.org, <a href="#hevea_default96">2.3</a>
<br>
<br>
</li><li class="li-indexenv">Java, <a href="#hevea_default298">4.3</a>
</li><li class="li-indexenv">Javascript, <a href="#hevea_default203">3.1.4</a>, <a href="#hevea_default291">4.3</a>, <a href="#hevea_default769">5.20</a>
<ul class="indexenv"><li class="li-indexenv">
function, <a href="#hevea_default773">5.20</a>
</li></ul>
</li><li class="li-indexenv">JSON, <a href="#hevea_default162">3.1</a>, <a href="#hevea_default201">3.1.3</a>, <a href="#hevea_default225">3.2</a>, <a href="#hevea_default272">3.5</a>, <a href="#hevea_default781">6.2</a>, <a href="#hevea_default783">6.2</a>, <a href="#hevea_default813">7.2</a>
<ul class="indexenv"><li class="li-indexenv">
arrays, <a href="#hevea_default211">3.1.4</a>
</li><li class="li-indexenv">Booleans, <a href="#hevea_default205">3.1.4</a>
</li><li class="li-indexenv">null, <a href="#hevea_default206">3.1.4</a>
</li><li class="li-indexenv">numbers, <a href="#hevea_default207">3.1.4</a>
</li><li class="li-indexenv">objects, <a href="#hevea_default210">3.1.4</a>
</li><li class="li-indexenv">string, <a href="#hevea_default208">3.1.4</a>
</li></ul>
</li><li class="li-indexenv">JSON Schema, <a href="#hevea_default226">3.2</a>
</li><li class="li-indexenv">JSON-LD, <a href="#hevea_default24">1.3</a>, <a href="#hevea_default48">2.2</a>, <a href="#hevea_default150">2.4.2</a>, <a href="#hevea_default154">2.4.3</a>, <a href="#hevea_default283">4.1</a>, <a href="#hevea_default458">4.13</a>, <a href="#hevea_default460">4.13</a>, <a href="#hevea_default475">5.1</a>
<br>
<br>
</li><li class="li-indexenv">Kellogg, Gregg, <a href="#hevea_default296">4.3</a>
<br>
<br>
</li><li class="li-indexenv">Labra Gayo, Jose Emilio, <a href="#hevea_default292">4.3</a>
</li><li class="li-indexenv">Language tag, <a href="#hevea_default76">2.2</a>
</li><li class="li-indexenv">Language tagged strings, <a href="#hevea_default75">2.2</a>
</li><li class="li-indexenv">Lexical form, <a href="#hevea_default71">2.2</a>
</li><li class="li-indexenv">Libby Miller, <a href="#hevea_default246">3.3.1</a>
</li><li class="li-indexenv">Linked data, <a href="#hevea_default3">1.1</a>, <a href="#hevea_default12">1.2</a>
</li><li class="li-indexenv">Linked data platform, <a href="#hevea_default449">4.9.2</a>
<ul class="indexenv"><li class="li-indexenv">
container, <a href="#hevea_default450">4.9.2</a>
</li></ul>
</li><li class="li-indexenv">Linked Open Vocabularies, <a href="#hevea_default95">2.3</a>
</li><li class="li-indexenv">Literal, <a href="#hevea_default70">2.2</a>, <a href="#hevea_default322">4.4.1</a>
</li><li class="li-indexenv">Local part, <a href="#hevea_default64">2.2</a>
</li><li class="li-indexenv"><em>lingua franca</em>, <a href="#hevea_default10">1.2</a>
<br>
<br>
</li><li class="li-indexenv">Meta-Object Facility, <a href="#hevea_default168">3.1.1</a>
</li><li class="li-indexenv">Microdata, <a href="#hevea_default151">2.4.2</a>, <a href="#hevea_default157">2.4.3</a>
</li><li class="li-indexenv">Microsoft, <a href="#hevea_default91">2.3</a>
</li><li class="li-indexenv">MOF, <a href="#hevea_default169">3.1.1</a>
</li><li class="li-indexenv">Multiset, <a href="#hevea_default231">3.2</a>
<br>
<br>
</li><li class="li-indexenv">N3.js, <a href="#hevea_default842">7.19</a>
</li><li class="li-indexenv">Namespace, <a href="#hevea_default721">5.16.1</a>
</li><li class="li-indexenv">Namespace prefix declarations, <a href="#hevea_default716">5.16.1</a>
</li><li class="li-indexenv">Neighborhood, <a href="#hevea_default318">4.4.1</a>
</li><li class="li-indexenv">Netage, <a href="#hevea_default494">5.2</a>
</li><li class="li-indexenv">Nicky van Oorschot, <a href="#hevea_default495">5.2</a>
</li><li class="li-indexenv">Node constraint, <a href="#hevea_default227">3.2</a>
</li><li class="li-indexenv">Node shape, <a href="#hevea_default502">5.3</a>
</li><li class="li-indexenv">NoSQL, <a href="#hevea_default14">1.2</a>
</li><li class="li-indexenv">Not, <a href="#hevea_default343">4.4.3</a>
</li><li class="li-indexenv">Notation3, <a href="#hevea_default22">1.3</a>
<br>
<br>
</li><li class="li-indexenv">OASIS, <a href="#hevea_default192">3.1.3</a>
</li><li class="li-indexenv">Object Constraint Language, <a href="#hevea_default172">3.1.1</a>
</li><li class="li-indexenv">Object Management Group, <a href="#hevea_default166">3.1.1</a>
</li><li class="li-indexenv">OCL, <a href="#hevea_default171">3.1.1</a>, <a href="#hevea_default795">6.2.2</a>
</li><li class="li-indexenv">OCL Constraints, <a href="#hevea_default173">3.1.1</a>
</li><li class="li-indexenv">Olivier Corby, <a href="#hevea_default492">5.2</a>
</li><li class="li-indexenv">Online demo, <a href="#hevea_default488">5.2</a>
</li><li class="li-indexenv">Ontology, <a href="#hevea_default38">2.1</a>, <a href="#hevea_default128">2.4.2</a>, <a href="#hevea_default232">3.2</a>
</li><li class="li-indexenv">Ontology engineer, <a href="#hevea_default233">3.2</a>, <a href="#hevea_default236">3.2</a>
</li><li class="li-indexenv">Open World, <a href="#hevea_default40">2.1</a>
</li><li class="li-indexenv">Open World Assumption, <a href="#hevea_default15">1.2</a>
</li><li class="li-indexenv">Or, <a href="#hevea_default342">4.4.3</a>
</li><li class="li-indexenv">OSLC, <a href="#hevea_default466">5</a>
</li><li class="li-indexenv">OSLC Resource Shapes, <a href="#hevea_default267">3.3.3</a>
</li><li class="li-indexenv">OSLC Resource shapes, <a href="#hevea_default274">4</a>, <a href="#hevea_default451">4.9.2</a>
</li><li class="li-indexenv">Outgoing arcs, <a href="#hevea_default316">4.4.1</a>
</li><li class="li-indexenv">OWA, <a href="#hevea_default16">1.2</a>
</li><li class="li-indexenv">OWL, <a href="#hevea_default37">2.1</a>, <a href="#hevea_default39">2.1</a>, <a href="#hevea_default127">2.4.2</a>, <a href="#hevea_default256">3.3.2</a>, <a href="#hevea_default261">3.3.2</a>, <a href="#hevea_default742">5.17</a>, <a href="#hevea_default797">6.4.2</a>
<ul class="indexenv"><li class="li-indexenv">
<code>owl:AllDisjointClasses</code>, <a href="#hevea_default147">2.4.2</a>
</li><li class="li-indexenv"><code>owl:Class</code>, <a href="#hevea_default140">2.4.2</a>
</li><li class="li-indexenv"><code>owl:equivalentClass</code>, <a href="#hevea_default141">2.4.2</a>
</li><li class="li-indexenv"><code>owl:hasValue</code>, <a href="#hevea_default145">2.4.2</a>
</li><li class="li-indexenv"><code>owl:imports</code>, <a href="#hevea_default506">5.4</a>, <a href="#hevea_default750">5.17</a>
</li><li class="li-indexenv"><code>owl:intersectionOf</code>, <a href="#hevea_default142">2.4.2</a>
</li><li class="li-indexenv"><code>owl:members</code>, <a href="#hevea_default148">2.4.2</a>
</li><li class="li-indexenv"><code>owl:Nothing</code>, <a href="#hevea_default133">2.4.2</a>
</li><li class="li-indexenv"><code>owl:onProperty</code>, <a href="#hevea_default144">2.4.2</a>
</li><li class="li-indexenv"><code>owl:Restriction</code>, <a href="#hevea_default143">2.4.2</a>
</li><li class="li-indexenv"><code>owl:sameIndividualAs</code>, <a href="#hevea_default97">2.3</a>
</li><li class="li-indexenv"><code>owl:Thing</code>, <a href="#hevea_default132">2.4.2</a>
</li><li class="li-indexenv"><code>owl:unionOf</code>, <a href="#hevea_default146">2.4.2</a>
</li><li class="li-indexenv">Annotation properties, <a href="#hevea_default138">2.4.2</a>
</li><li class="li-indexenv">Closed World, <a href="#hevea_default266">3.3.3</a>
</li><li class="li-indexenv">Constructors, <a href="#hevea_default139">2.4.2</a>
</li><li class="li-indexenv">Datatype property, <a href="#hevea_default136">2.4.2</a>
</li><li class="li-indexenv">Functional property, <a href="#hevea_default264">3.3.2</a>
</li><li class="li-indexenv">Functional syntax, <a href="#hevea_default131">2.4.2</a>
</li><li class="li-indexenv">Manchester syntax, <a href="#hevea_default130">2.4.2</a>
</li><li class="li-indexenv">Object property, <a href="#hevea_default137">2.4.2</a>
</li><li class="li-indexenv">OWL class, <a href="#hevea_default134">2.4.2</a>
</li><li class="li-indexenv">OWL individual, <a href="#hevea_default135">2.4.2</a>
</li><li class="li-indexenv">OWL reasoner, <a href="#hevea_default149">2.4.2</a>
</li></ul>
</li><li class="li-indexenv"><code>owl</code> namespace, <a href="#hevea_default68">2.2</a>
<br>
<br>
</li><li class="li-indexenv">Prefix declaration, <a href="#hevea_default62">2.2</a>, <a href="#hevea_default287">4.2</a>, <a href="#hevea_default720">5.16.1</a>
</li><li class="li-indexenv">Prefix label, <a href="#hevea_default61">2.2</a>
</li><li class="li-indexenv">Prefix name, <a href="#hevea_default63">2.2</a>
</li><li class="li-indexenv">Primary key, <a href="#hevea_default181">3.1.2</a>
</li><li class="li-indexenv">Property shape, <a href="#hevea_default503">5.3</a>
</li><li class="li-indexenv">Prud’hommeaux, Eric, <a href="#hevea_default290">4.3</a>
</li><li class="li-indexenv">Python, <a href="#hevea_default498">5.2</a>, <a href="#hevea_default844">7.19</a>
</li><li class="li-indexenv"><code>prefix.cc</code>, <a href="#hevea_default69">2.2</a>
<br>
<br>
</li><li class="li-indexenv">RDF, <a href="#hevea_default0">1</a>, <a href="#hevea_default4">1.2</a>, <a href="#hevea_default229">3.2</a>, <a href="#hevea_default785">6.2</a>
<ul class="indexenv"><li class="li-indexenv">
<code>rdf:first</code>, <a href="#hevea_default86">2.2</a>, <a href="#hevea_default809">6.6</a>
</li><li class="li-indexenv"><code>rdf:langString</code>, <a href="#hevea_default368">4.5.2</a>, <a href="#hevea_default615">5.9.1</a>
</li><li class="li-indexenv"><code>rdf:nil</code>, <a href="#hevea_default87">2.2</a>, <a href="#hevea_default810">6.6</a>
</li><li class="li-indexenv"><code>rdf:rest</code>, <a href="#hevea_default85">2.2</a>, <a href="#hevea_default808">6.6</a>
</li><li class="li-indexenv"><code>rdf:type</code>, <a href="#hevea_default126">2.4.2</a>, <a href="#hevea_default238">3.2</a>, <a href="#hevea_default308">4.4.1</a>, <a href="#hevea_default408">4.6.8</a>, <a href="#hevea_default444">4.9.2</a>, <a href="#hevea_default454">4.11</a>, <a href="#hevea_default455">4.11</a>, <a href="#hevea_default589">5.7.2</a>, <a href="#hevea_default617">5.9.2</a>, <a href="#hevea_default749">5.17</a>
</li><li class="li-indexenv">Blank node, <a href="#hevea_default505">5.3</a>, <a href="#hevea_default642">5.10.2</a>
</li><li class="li-indexenv">Compositional, <a href="#hevea_default9">1.2</a>
</li><li class="li-indexenv">Custom datatypes, <a href="#hevea_default367">4.5.2</a>
</li><li class="li-indexenv">Language-tagged literal, <a href="#hevea_default369">4.5.2</a>, <a href="#hevea_default614">5.9.1</a>
</li><li class="li-indexenv">RDF 1.0, <a href="#hevea_default44">2.2</a>
</li><li class="li-indexenv">RDF 1.1, <a href="#hevea_default43">2.2</a>
</li><li class="li-indexenv">RDF collections, <a href="#hevea_default83">2.2</a>
</li><li class="li-indexenv">RDF data model, <a href="#hevea_default5">1.2</a>, <a href="#hevea_default8">1.2</a>, <a href="#hevea_default50">2.2</a>
</li><li class="li-indexenv">RDF Graph, <a href="#hevea_default78">2.2</a>
</li><li class="li-indexenv">RDF lists, <a href="#hevea_default84">2.2</a>, <a href="#hevea_default528">5.6.2</a>, <a href="#hevea_default807">6.6</a>
</li><li class="li-indexenv">RDF node, <a href="#hevea_default56">2.2</a>
</li><li class="li-indexenv">RDF object, <a href="#hevea_default53">2.2</a>
</li><li class="li-indexenv">RDF predicate, <a href="#hevea_default54">2.2</a>
</li><li class="li-indexenv">RDF property, <a href="#hevea_default55">2.2</a>
</li><li class="li-indexenv">RDF serialization format, <a href="#hevea_default49">2.2</a>
</li><li class="li-indexenv">RDF statement, <a href="#hevea_default57">2.2</a>
</li><li class="li-indexenv">RDF subject, <a href="#hevea_default52">2.2</a>
</li><li class="li-indexenv">RDF triple, <a href="#hevea_default51">2.2</a>
</li><li class="li-indexenv">RDF/XML, <a href="#hevea_default45">2.2</a>
</li><li class="li-indexenv">Resource Description Framework, <a href="#hevea_default29">2</a>
</li><li class="li-indexenv"><code>rdf:type</code> declaration, <a href="#hevea_default82">2.2</a>
</li><li class="li-indexenv">String literals, <a href="#hevea_default74">2.2</a>
</li></ul>
</li><li class="li-indexenv">RDF 1.0, <a href="#hevea_default30">2.1</a>
</li><li class="li-indexenv">RDF Schema, <a href="#hevea_default32">2.1</a>, <a href="#hevea_default114">2.4.2</a>, <a href="#hevea_default255">3.3.2</a>, <a href="#hevea_default456">4.11</a>, <a href="#hevea_default619">5.9.2</a>, <a href="#hevea_default741">5.17</a>
</li><li class="li-indexenv">RDF validation, <a href="#hevea_default235">3.2</a>
</li><li class="li-indexenv">RDF/XML, <a href="#hevea_default19">1.3</a>, <a href="#hevea_default31">2.1</a>, <a href="#hevea_default42">2.2</a>, <a href="#hevea_default476">5.1</a>
</li><li class="li-indexenv">RDFa, <a href="#hevea_default25">1.3</a>, <a href="#hevea_default152">2.4.2</a>, <a href="#hevea_default156">2.4.3</a>
</li><li class="li-indexenv">RDFS, <a href="#hevea_default33">2.1</a>, <a href="#hevea_default740">5.17</a>, <a href="#hevea_default798">6.4.2</a>
<ul class="indexenv"><li class="li-indexenv">
<code>rdfs:Class</code>, <a href="#hevea_default116">2.4.2</a>, <a href="#hevea_default592">5.7.3</a>
</li><li class="li-indexenv"><code>rdfs:comment</code>, <a href="#hevea_default121">2.4.2</a>
</li><li class="li-indexenv"><code>rdfs:Datatype</code>, <a href="#hevea_default118">2.4.2</a>
</li><li class="li-indexenv"><code>rdfs:domain</code>, <a href="#hevea_default122">2.4.2</a>
</li><li class="li-indexenv"><code>rdfs:Literal</code>, <a href="#hevea_default117">2.4.2</a>
</li><li class="li-indexenv"><code>rdfs:label</code>, <a href="#hevea_default120">2.4.2</a>
</li><li class="li-indexenv"><code>rdfs:Property</code>, <a href="#hevea_default119">2.4.2</a>
</li><li class="li-indexenv"><code>rdfs:Resource</code>, <a href="#hevea_default115">2.4.2</a>
</li><li class="li-indexenv"><code>rdfs:range</code>, <a href="#hevea_default123">2.4.2</a>
</li><li class="li-indexenv"><code>rdfs:subClassOf</code>, <a href="#hevea_default124">2.4.2</a>, <a href="#hevea_default588">5.7.2</a>, <a href="#hevea_default618">5.9.2</a>, <a href="#hevea_default748">5.17</a>
</li><li class="li-indexenv"><code>rdfs:subPropertyOf</code>, <a href="#hevea_default125">2.4.2</a>
</li><li class="li-indexenv">class, <a href="#hevea_default591">5.7.3</a>
</li></ul>
</li><li class="li-indexenv">RDFS inference, <a href="#hevea_default824">7.6</a>
</li><li class="li-indexenv">RDFUnit, <a href="#hevea_default254">3.3.1</a>, <a href="#hevea_default497">5.2</a>
</li><li class="li-indexenv">Recursion, <a href="#hevea_default413">4.7.2</a>, <a href="#hevea_default665">5.12</a>, <a href="#hevea_default673">5.12.1</a>
</li><li class="li-indexenv">Regular expressions, <a href="#hevea_default383">4.5.3</a>, <a href="#hevea_default646">5.10.2</a>
<ul class="indexenv"><li class="li-indexenv">
flags, <a href="#hevea_default647">5.10.2</a>
</li><li class="li-indexenv">i flag, <a href="#hevea_default385">4.5.3</a>
</li><li class="li-indexenv">Meta-characters, <a href="#hevea_default384">4.5.3</a>
</li><li class="li-indexenv">m flag, <a href="#hevea_default386">4.5.3</a>
</li><li class="li-indexenv">q flag, <a href="#hevea_default389">4.5.3</a>
</li><li class="li-indexenv">s flag, <a href="#hevea_default387">4.5.3</a>
</li><li class="li-indexenv">x flag, <a href="#hevea_default388">4.5.3</a>
</li></ul>
</li><li class="li-indexenv">Relational databases, <a href="#hevea_default176">3.1.2</a>
</li><li class="li-indexenv">Relative IRI, <a href="#hevea_default309">4.4.1</a>
</li><li class="li-indexenv">RelaxNG, <a href="#hevea_default193">3.1.3</a>, <a href="#hevea_default276">4</a>, <a href="#hevea_default840">7.19</a>
</li><li class="li-indexenv">Resource, <a href="#hevea_default60">2.2</a>
</li><li class="li-indexenv">Ruby, <a href="#hevea_default295">4.3</a>
</li><li class="li-indexenv">Ruby RDF, <a href="#hevea_default846">7.19</a>
</li><li class="li-indexenv"><code>rdf</code> namespace, <a href="#hevea_default65">2.2</a>
</li><li class="li-indexenv">rdf4h, <a href="#hevea_default847">7.19</a>
</li><li class="li-indexenv">rdflib, <a href="#hevea_default848">7.19</a>
</li><li class="li-indexenv"><code>rdfs</code> namespace, <a href="#hevea_default67">2.2</a>
<br>
<br>
</li><li class="li-indexenv">Scala, <a href="#hevea_default294">4.3</a>
</li><li class="li-indexenv">Schema.org, <a href="#hevea_default94">2.3</a>
</li><li class="li-indexenv">Schemarama, <a href="#hevea_default244">3.3.1</a>
</li><li class="li-indexenv">Schematron, <a href="#hevea_default194">3.1.3</a>, <a href="#hevea_default787">6.2</a>, <a href="#hevea_default789">6.2.2</a>, <a href="#hevea_default816">7.3</a>, <a href="#hevea_default819">7.3</a>, <a href="#hevea_default841">7.19</a>
</li><li class="li-indexenv">Semantic web, <a href="#hevea_default11">1.2</a>
</li><li class="li-indexenv">Semantic web stack, <a href="#hevea_default101">2.4</a>
</li><li class="li-indexenv">Service endpoint, <a href="#hevea_default448">4.9.2</a>
</li><li class="li-indexenv">SGML, <a href="#hevea_default184">3.1.3</a>
</li><li class="li-indexenv">SHACL, <a href="#hevea_default252">3.3.1</a>, <a href="#hevea_default463">5</a>, <a href="#hevea_default853">@.21</a>
<ul class="indexenv"><li class="li-indexenv">
<code>$currentShape</code>, <a href="#hevea_default714">5.16.1</a>
</li><li class="li-indexenv"><code>$shapesGraph</code>, <a href="#hevea_default713">5.16.1</a>
</li><li class="li-indexenv"><code>$this</code>, <a href="#hevea_default712">5.16.1</a>
</li><li class="li-indexenv"><code>-&gt; Operator</code>, <a href="#hevea_default752">5.18</a>
</li><li class="li-indexenv"><code>. Operator</code>, <a href="#hevea_default753">5.18</a>
</li><li class="li-indexenv"><code>sh:alternativePath</code>, <a href="#hevea_default529">5.6.2</a>
</li><li class="li-indexenv"><code>sh:and</code>, <a href="#hevea_default554">5.6.3</a>, <a href="#hevea_default652">5.11</a>, <a href="#hevea_default657">5.11.1</a>, <a href="#hevea_default667">5.12.1</a>, <a href="#hevea_default688">5.13</a>, <a href="#hevea_default835">7.14</a>
</li><li class="li-indexenv"><code>sh:BlankNode</code>, <a href="#hevea_default606">5.9</a>, <a href="#hevea_default623">5.9.3</a>
</li><li class="li-indexenv"><code>sh:BlankNodeOrIRI</code>, <a href="#hevea_default607">5.9</a>, <a href="#hevea_default626">5.9.3</a>
</li><li class="li-indexenv"><code>sh:BlankNodeOrLiteral</code>, <a href="#hevea_default608">5.9</a>, <a href="#hevea_default625">5.9.3</a>
</li><li class="li-indexenv"><code>sh:class</code>, <a href="#hevea_default536">5.6.3</a>, <a href="#hevea_default539">5.6.3</a>, <a href="#hevea_default600">5.9</a>, <a href="#hevea_default620">5.9.2</a>
</li><li class="li-indexenv"><code>sh:closed</code>, <a href="#hevea_default562">5.6.3</a>, <a href="#hevea_default684">5.13</a>, <a href="#hevea_default693">5.13</a>, <a href="#hevea_default834">7.14</a>
</li><li class="li-indexenv"><code>sh:conforms</code>, <a href="#hevea_default511">5.5</a>
</li><li class="li-indexenv"><code>sh:datatype</code>, <a href="#hevea_default540">5.6.3</a>, <a href="#hevea_default599">5.9</a>, <a href="#hevea_default611">5.9.1</a>
</li><li class="li-indexenv"><code>sh:deactivated</code>, <a href="#hevea_default579">5.6.6</a>, <a href="#hevea_default823">7.4</a>
</li><li class="li-indexenv"><code>sh:defaultValue</code>, <a href="#hevea_default704">5.15</a>
</li><li class="li-indexenv"><code>sh:description</code>, <a href="#hevea_default569">5.6.3</a>, <a href="#hevea_default701">5.15</a>, <a href="#hevea_default839">7.16</a>
</li><li class="li-indexenv"><code>sh:detail</code>, <a href="#hevea_default519">5.5</a>
</li><li class="li-indexenv"><code>sh:disjoint</code>, <a href="#hevea_default565">5.6.3</a>, <a href="#hevea_default696">5.14</a>
</li><li class="li-indexenv"><code>sh:entailment</code>, <a href="#hevea_default747">5.17</a>
</li><li class="li-indexenv"><code>sh:equals</code>, <a href="#hevea_default564">5.6.3</a>, <a href="#hevea_default695">5.14</a>
</li><li class="li-indexenv"><code>sh:flags</code>, <a href="#hevea_default640">5.10.2</a>, <a href="#hevea_default645">5.10.2</a>
</li><li class="li-indexenv"><code>sh:focusNode</code>, <a href="#hevea_default514">5.5</a>
</li><li class="li-indexenv"><code>sh:group</code>, <a href="#hevea_default571">5.6.3</a>, <a href="#hevea_default703">5.15</a>
</li><li class="li-indexenv"><code>sh:hasValue</code>, <a href="#hevea_default543">5.6.3</a>, <a href="#hevea_default603">5.9</a>, <a href="#hevea_default629">5.9.5</a>
</li><li class="li-indexenv"><code>sh:Info</code>, <a href="#hevea_default576">5.6.5</a>, <a href="#hevea_default827">7.7</a>
</li><li class="li-indexenv"><code>sh:IRI</code>, <a href="#hevea_default604">5.9</a>, <a href="#hevea_default622">5.9.3</a>, <a href="#hevea_default692">5.13</a>
</li><li class="li-indexenv"><code>sh:IRIOrLiteral</code>, <a href="#hevea_default609">5.9</a>, <a href="#hevea_default627">5.9.3</a>
</li><li class="li-indexenv"><code>sh:ignoredProperties</code>, <a href="#hevea_default563">5.6.3</a>, <a href="#hevea_default685">5.13</a>, <a href="#hevea_default836">7.14</a>, <a href="#hevea_default837">7.14</a>
</li><li class="li-indexenv"><code>sh:in</code>, <a href="#hevea_default542">5.6.3</a>, <a href="#hevea_default602">5.9</a>, <a href="#hevea_default628">5.9.4</a>
</li><li class="li-indexenv"><code>sh:inversePath</code>, <a href="#hevea_default527">5.6.2</a>
</li><li class="li-indexenv"><code>sh:Literal</code>, <a href="#hevea_default605">5.9</a>, <a href="#hevea_default624">5.9.3</a>
</li><li class="li-indexenv"><code>sh:labelTemplate</code>, <a href="#hevea_default727">5.16.2</a>
</li><li class="li-indexenv"><code>sh:languageIn</code>, <a href="#hevea_default553">5.6.3</a>, <a href="#hevea_default648">5.10.3</a>, <a href="#hevea_default650">5.10.3</a>
</li><li class="li-indexenv"><code>sh:length</code>, <a href="#hevea_default550">5.6.3</a>
</li><li class="li-indexenv"><code>sh:lessThan</code>, <a href="#hevea_default566">5.6.3</a>, <a href="#hevea_default697">5.14</a>
</li><li class="li-indexenv"><code>sh:lessThanOrEquals</code>, <a href="#hevea_default567">5.6.3</a>, <a href="#hevea_default698">5.14</a>
</li><li class="li-indexenv"><code>sh:maxCount</code>, <a href="#hevea_default538">5.6.3</a>, <a href="#hevea_default598">5.8</a>, <a href="#hevea_default776">6.1.2</a>
</li><li class="li-indexenv"><code>sh:maxExclusive</code>, <a href="#hevea_default545">5.6.3</a>, <a href="#hevea_default547">5.6.3</a>, <a href="#hevea_default636">5.10.1</a>
</li><li class="li-indexenv"><code>sh:maxInclusive</code>, <a href="#hevea_default635">5.10.1</a>
</li><li class="li-indexenv"><code>sh:maxLength</code>, <a href="#hevea_default549">5.6.3</a>, <a href="#hevea_default638">5.10.2</a>
</li><li class="li-indexenv"><code>sh:message</code>, <a href="#hevea_default573">5.6.4</a>, <a href="#hevea_default710">5.16.1</a>
</li><li class="li-indexenv"><code>sh:minCount</code>, <a href="#hevea_default537">5.6.3</a>, <a href="#hevea_default597">5.8</a>, <a href="#hevea_default630">5.9.5</a>, <a href="#hevea_default775">6.1.2</a>
</li><li class="li-indexenv"><code>sh:minExclusive</code>, <a href="#hevea_default634">5.10.1</a>
</li><li class="li-indexenv"><code>sh:minInclusive</code>, <a href="#hevea_default544">5.6.3</a>, <a href="#hevea_default546">5.6.3</a>, <a href="#hevea_default633">5.10.1</a>
</li><li class="li-indexenv"><code>sh:minLength</code>, <a href="#hevea_default548">5.6.3</a>, <a href="#hevea_default637">5.10.2</a>
</li><li class="li-indexenv"><code>sh:NodeKindConstraintComponent</code>, <a href="#hevea_default534">5.6.3</a>
</li><li class="li-indexenv"><code>sh:NodeShape</code>, <a href="#hevea_default477">5.1</a>
</li><li class="li-indexenv"><code>sh:name</code>, <a href="#hevea_default568">5.6.3</a>, <a href="#hevea_default700">5.15</a>, <a href="#hevea_default838">7.16</a>
</li><li class="li-indexenv"><code>sh:namespace</code>, <a href="#hevea_default719">5.16.1</a>
</li><li class="li-indexenv"><code>sh:node</code>, <a href="#hevea_default663">5.12</a>, <a href="#hevea_default687">5.13</a>, <a href="#hevea_default777">6.1.2</a>
</li><li class="li-indexenv"><code>sh:nodeKind</code>, <a href="#hevea_default541">5.6.3</a>, <a href="#hevea_default601">5.9</a>, <a href="#hevea_default621">5.9.3</a>, <a href="#hevea_default691">5.13</a>
</li><li class="li-indexenv"><code>sh:nodeValidator</code>, <a href="#hevea_default730">5.16.2</a>, <a href="#hevea_default739">5.16.2</a>
</li><li class="li-indexenv"><code>sh:not</code>, <a href="#hevea_default557">5.6.3</a>, <a href="#hevea_default654">5.11</a>, <a href="#hevea_default670">5.12.1</a>
</li><li class="li-indexenv"><code>sh:oneOrMorePath</code>, <a href="#hevea_default532">5.6.2</a>
</li><li class="li-indexenv"><code>sh:optional</code>, <a href="#hevea_default726">5.16.2</a>
</li><li class="li-indexenv"><code>sh:or</code>, <a href="#hevea_default555">5.6.3</a>, <a href="#hevea_default653">5.11</a>, <a href="#hevea_default658">5.11.2</a>, <a href="#hevea_default668">5.12.1</a>, <a href="#hevea_default689">5.13</a>
</li><li class="li-indexenv"><code>sh:order</code>, <a href="#hevea_default570">5.6.3</a>, <a href="#hevea_default702">5.15</a>
</li><li class="li-indexenv"><code>sh:parameter</code>, <a href="#hevea_default724">5.16.2</a>
</li><li class="li-indexenv"><code>sh:path</code>, <a href="#hevea_default504">5.3</a>, <a href="#hevea_default725">5.16.2</a>
</li><li class="li-indexenv"><code>sh:pattern</code>, <a href="#hevea_default551">5.6.3</a>, <a href="#hevea_default639">5.10.2</a>, <a href="#hevea_default643">5.10.2</a>
</li><li class="li-indexenv"><code>sh:prefix</code>, <a href="#hevea_default718">5.16.1</a>
</li><li class="li-indexenv"><code>sh:prefixes</code>, <a href="#hevea_default717">5.16.1</a>
</li><li class="li-indexenv"><code>sh:property</code>, <a href="#hevea_default664">5.12</a>
</li><li class="li-indexenv"><code>sh:propertyValidator</code>, <a href="#hevea_default731">5.16.2</a>
</li><li class="li-indexenv"><code>sh:qualifiedMaxCount</code>, <a href="#hevea_default561">5.6.3</a>, <a href="#hevea_default680">5.12.2</a>
</li><li class="li-indexenv"><code>sh:qualifiedMinCount</code>, <a href="#hevea_default560">5.6.3</a>, <a href="#hevea_default679">5.12.2</a>
</li><li class="li-indexenv"><code>sh:qualifiedValueShape</code>, <a href="#hevea_default558">5.6.3</a>, <a href="#hevea_default678">5.12.2</a>
</li><li class="li-indexenv"><code>sh:qualifiedValueShapeDisjoint</code>, <a href="#hevea_default681">5.12.2</a>
</li><li class="li-indexenv"><code>sh:qualifiedValueShapesDisjoint</code>, <a href="#hevea_default559">5.6.3</a>
</li><li class="li-indexenv"><code>sh:result</code>, <a href="#hevea_default512">5.5</a>
</li><li class="li-indexenv"><code>sh:resultMessage</code>, <a href="#hevea_default520">5.5</a>, <a href="#hevea_default574">5.6.4</a>
</li><li class="li-indexenv"><code>sh:resultPath</code>, <a href="#hevea_default515">5.5</a>
</li><li class="li-indexenv"><code>sh:resultSeverity</code>, <a href="#hevea_default521">5.5</a>
</li><li class="li-indexenv"><code>sh:SPARQLTarget</code>, <a href="#hevea_default758">5.19</a>
</li><li class="li-indexenv"><code>sh:SPARQLTargetType</code>, <a href="#hevea_default759">5.19</a>
</li><li class="li-indexenv"><code>sh:select</code>, <a href="#hevea_default711">5.16.1</a>, <a href="#hevea_default732">5.16.2</a>
</li><li class="li-indexenv"><code>sh:severity</code>, <a href="#hevea_default575">5.6.5</a>
</li><li class="li-indexenv"><code>sh:sh:ClassConstraintComponent</code>, <a href="#hevea_default535">5.6.3</a>
</li><li class="li-indexenv"><code>sh:sourceConstraintComponent</code>, <a href="#hevea_default518">5.5</a>
</li><li class="li-indexenv"><code>sh:sourceShape</code>, <a href="#hevea_default517">5.5</a>
</li><li class="li-indexenv"><code>sh:sparql</code>, <a href="#hevea_default709">5.16.1</a>
</li><li class="li-indexenv"><code>sh:targetClass</code>, <a href="#hevea_default445">4.9.2</a>, <a href="#hevea_default478">5.1</a>, <a href="#hevea_default582">5.7</a>, <a href="#hevea_default586">5.7.1</a>, <a href="#hevea_default593">5.7.3</a>
</li><li class="li-indexenv"><code>sh:targetNode</code>, <a href="#hevea_default441">4.9.2</a>, <a href="#hevea_default581">5.7</a>, <a href="#hevea_default585">5.7</a>
</li><li class="li-indexenv"><code>sh:targetObjectsOf</code>, <a href="#hevea_default443">4.9.2</a>, <a href="#hevea_default584">5.7</a>, <a href="#hevea_default595">5.7.5</a>
</li><li class="li-indexenv"><code>sh:targetSubjectsOf</code>, <a href="#hevea_default442">4.9.2</a>, <a href="#hevea_default583">5.7</a>, <a href="#hevea_default594">5.7.4</a>
</li><li class="li-indexenv"><code>sh:uniqueLang</code>, <a href="#hevea_default552">5.6.3</a>, <a href="#hevea_default649">5.10.3</a>, <a href="#hevea_default651">5.10.3</a>, <a href="#hevea_default831">7.11</a>
</li><li class="li-indexenv"><code>sh:ValidationReport</code>, <a href="#hevea_default509">5.5</a>
</li><li class="li-indexenv"><code>sh:ValidationResult</code>, <a href="#hevea_default510">5.5</a>
</li><li class="li-indexenv"><code>sh:Violation</code>, <a href="#hevea_default578">5.6.5</a>, <a href="#hevea_default828">7.7</a>
</li><li class="li-indexenv"><code>sh:ViolationResult</code>, <a href="#hevea_default826">7.7</a>
</li><li class="li-indexenv"><code>sh:validator</code>, <a href="#hevea_default728">5.16.2</a>
</li><li class="li-indexenv"><code>sh:value</code>, <a href="#hevea_default516">5.5</a>
</li><li class="li-indexenv"><code>sh:Warning</code>, <a href="#hevea_default577">5.6.5</a>
</li><li class="li-indexenv"><code>sh:xone</code>, <a href="#hevea_default556">5.6.3</a>, <a href="#hevea_default655">5.11</a>, <a href="#hevea_default659">5.11.3</a>, <a href="#hevea_default669">5.12.1</a>
</li><li class="li-indexenv"><code>sh:zeroOrMorePath</code>, <a href="#hevea_default531">5.6.2</a>
</li><li class="li-indexenv"><code>sh:zeroOrOneMorePath</code>, <a href="#hevea_default674">5.12.1</a>
</li><li class="li-indexenv"><code>sh:zeroOrOnePath</code>, <a href="#hevea_default530">5.6.2</a>, <a href="#hevea_default690">5.13</a>
</li><li class="li-indexenv">Advanced features, <a href="#hevea_default755">5.18</a>
</li><li class="li-indexenv">Annotations properties, <a href="#hevea_default760">5.19</a>
</li><li class="li-indexenv">ASK validators, <a href="#hevea_default764">5.19</a>
</li><li class="li-indexenv">Cardinality, <a href="#hevea_default596">5.8</a>, <a href="#hevea_default774">6.1.2</a>
</li><li class="li-indexenv">Closed shapes, <a href="#hevea_default683">5.12.2</a>
</li><li class="li-indexenv">Compact syntax, <a href="#hevea_default751">5.17</a>, <a href="#hevea_default815">7.2</a>
</li><li class="li-indexenv">Constraint component, <a href="#hevea_default533">5.6.3</a>
</li><li class="li-indexenv">Constraint components, <a href="#hevea_default771">5.20</a>
</li><li class="li-indexenv">Constraint expressions, <a href="#hevea_default766">5.19</a>
</li><li class="li-indexenv">Datatype facets, <a href="#hevea_default631">5.9.5</a>
</li><li class="li-indexenv">Datatypes, <a href="#hevea_default610">5.9</a>
</li><li class="li-indexenv">Disjoint qualified value shapes, <a href="#hevea_default682">5.12.2</a>
</li><li class="li-indexenv">Entailment, <a href="#hevea_default825">7.6</a>
</li><li class="li-indexenv">Exactly one, <a href="#hevea_default660">5.11.3</a>
</li><li class="li-indexenv">Functions, <a href="#hevea_default761">5.19</a>
</li><li class="li-indexenv">IF-THEN, <a href="#hevea_default662">5.11.5</a>
</li><li class="li-indexenv">Implicit class target, <a href="#hevea_default590">5.7.3</a>
</li><li class="li-indexenv">Importing shapes graphs, <a href="#hevea_default507">5.4</a>
</li><li class="li-indexenv">Node expressions, <a href="#hevea_default765">5.19</a>
</li><li class="li-indexenv">Node shapes, <a href="#hevea_default522">5.6</a>
</li><li class="li-indexenv">Non-validating SHACL Properties, <a href="#hevea_default699">5.14</a>
</li><li class="li-indexenv">Property pair constraints, <a href="#hevea_default694">5.13</a>
</li><li class="li-indexenv">Property path, <a href="#hevea_default672">5.12.1</a>, <a href="#hevea_default676">5.12.1</a>, <a href="#hevea_default686">5.13</a>
</li><li class="li-indexenv">Property shapes, <a href="#hevea_default523">5.6.1</a>
</li><li class="li-indexenv">Qualified value shapes, <a href="#hevea_default671">5.12.1</a>, <a href="#hevea_default677">5.12.1</a>
</li><li class="li-indexenv">Rules, <a href="#hevea_default754">5.18</a>, <a href="#hevea_default767">5.19</a>
</li><li class="li-indexenv">SELECT based validator, <a href="#hevea_default729">5.16.2</a>, <a href="#hevea_default736">5.16.2</a>
</li><li class="li-indexenv">SELECT validators, <a href="#hevea_default763">5.19</a>
</li><li class="li-indexenv">SHACL instance, <a href="#hevea_default587">5.7.2</a>, <a href="#hevea_default616">5.9.2</a>
</li><li class="li-indexenv">SHACL Javascript, <a href="#hevea_default768">5.19</a>
</li><li class="li-indexenv">SHACL paths, <a href="#hevea_default525">5.6.2</a>
</li><li class="li-indexenv">SHACL-JS, <a href="#hevea_default772">5.20</a>
</li><li class="li-indexenv">SHACL-SPARQL, <a href="#hevea_default572">5.6.3</a>, <a href="#hevea_default705">5.15</a>
</li><li class="li-indexenv">Shapes, <a href="#hevea_default472">5.1</a>
</li><li class="li-indexenv">Shapes graph, <a href="#hevea_default479">5.1</a>
</li><li class="li-indexenv">SPARQL based targets, <a href="#hevea_default756">5.19</a>
</li><li class="li-indexenv">SPARQL Constraint components, <a href="#hevea_default723">5.16.1</a>
</li><li class="li-indexenv">sh:property, <a href="#hevea_default524">5.6.2</a>
</li><li class="li-indexenv">Target declarations, <a href="#hevea_default473">5.1</a>, <a href="#hevea_default580">5.6.6</a>
</li><li class="li-indexenv">Validation report, <a href="#hevea_default508">5.4</a>
</li><li class="li-indexenv">Validation result, <a href="#hevea_default513">5.5</a>
</li></ul>
</li></ul></td><td class="c018"><ul class="indexenv"><li class="li-indexenv">SHACL Core, <a href="#hevea_default469">5</a>, <a href="#hevea_default487">5.2</a>, <a href="#hevea_default757">5.19</a>
</li><li class="li-indexenv">SHACL community group, <a href="#hevea_default471">5</a>
</li><li class="li-indexenv">SHACL Playground, <a href="#hevea_default489">5.2</a>
</li><li class="li-indexenv">SHACL-Core, <a href="#hevea_default706">5.16</a>
</li><li class="li-indexenv">SHACL-SPARQL, <a href="#hevea_default470">5</a>, <a href="#hevea_default482">5.2</a>, <a href="#hevea_default486">5.2</a>, <a href="#hevea_default707">5.16</a>
</li><li class="li-indexenv">Shaclex, <a href="#hevea_default293">4.3</a>, <a href="#hevea_default490">5.2</a>, <a href="#hevea_default822">7.3</a>
</li><li class="li-indexenv">Shape Expression, <a href="#hevea_default340">4.4.3</a>
</li><li class="li-indexenv">Shapes Constraint Language, see <span class="c012">SHACL</span>
</li><li class="li-indexenv">Shapes graph, <a href="#hevea_default500">5.3</a>
</li><li class="li-indexenv">Shared Entity, <a href="#hevea_default88">2.3</a>
</li><li class="li-indexenv">ShEx, <a href="#hevea_default273">4</a>, <a href="#hevea_default468">5</a>, <a href="#hevea_default788">6.2</a>
<ul class="indexenv"><li class="li-indexenv">
<code>a</code> keyword, <a href="#hevea_default307">4.4.1</a>
</li><li class="li-indexenv"><code>dot operator</code>, <a href="#hevea_default360">4.5</a>
</li><li class="li-indexenv">AND, <a href="#hevea_default362">4.5</a>, <a href="#hevea_default418">4.8</a>, <a href="#hevea_default421">4.8.1</a>
</li><li class="li-indexenv">And, <a href="#hevea_default332">4.4.1</a>
</li><li class="li-indexenv">Annotations, <a href="#hevea_default417">4.7.5</a>
</li><li class="li-indexenv">BASE declarations, <a href="#hevea_default305">4.4.1</a>
</li><li class="li-indexenv">Blank nodes, <a href="#hevea_default311">4.4.1</a>
</li><li class="li-indexenv">BNF Grammar, <a href="#hevea_default335">4.4.1</a>
</li><li class="li-indexenv">Cardinalities, <a href="#hevea_default399">4.6.3</a>
</li><li class="li-indexenv">CLOSED qualifier, <a href="#hevea_default409">4.6.8</a>, <a href="#hevea_default411">4.6.8</a>
</li><li class="li-indexenv">Closed, <a href="#hevea_default405">4.6.8</a>
</li><li class="li-indexenv">Closed shapes, <a href="#hevea_default833">7.14</a>
</li><li class="li-indexenv">Closing a property, <a href="#hevea_default397">4.6.1</a>
</li><li class="li-indexenv">Comments, <a href="#hevea_default306">4.4.1</a>
</li><li class="li-indexenv">Compact syntax, <a href="#hevea_default300">4.4.1</a>
</li><li class="li-indexenv">Curly braces, <a href="#hevea_default330">4.4.1</a>
</li><li class="li-indexenv">Datatype constraints, <a href="#hevea_default364">4.5.1</a>
</li><li class="li-indexenv">Datatype facets, <a href="#hevea_default372">4.5.3</a>
</li><li class="li-indexenv">EachOf, <a href="#hevea_default398">4.6.1</a>, <a href="#hevea_default404">4.6.7</a>
</li><li class="li-indexenv">EXTRA qualifier, <a href="#hevea_default410">4.6.8</a>
</li><li class="li-indexenv">Exclusions, <a href="#hevea_default395">4.5.4</a>
</li><li class="li-indexenv">External shapes, <a href="#hevea_default415">4.7.3</a>
</li><li class="li-indexenv">Extra qualifier, <a href="#hevea_default406">4.6.8</a>
</li><li class="li-indexenv">Fixed shape map, <a href="#hevea_default337">4.4.2</a>, <a href="#hevea_default434">4.9</a>
</li><li class="li-indexenv">Focus keyword, <a href="#hevea_default439">4.9.2</a>
</li><li class="li-indexenv">Focus node, <a href="#hevea_default327">4.4.1</a>
</li><li class="li-indexenv">FractionDigits, <a href="#hevea_default377">4.5.3</a>
</li><li class="li-indexenv">Hidden negation, <a href="#hevea_default407">4.6.8</a>, <a href="#hevea_default430">4.8.3</a>
</li><li class="li-indexenv">IF-THEN pattern, <a href="#hevea_default427">4.8.3</a>
</li><li class="li-indexenv">IF-THEN-ELSE pattern, <a href="#hevea_default428">4.8.3</a>
</li><li class="li-indexenv">Inverse property, <a href="#hevea_default326">4.4.1</a>
</li><li class="li-indexenv">Inverse triple constraint, <a href="#hevea_default403">4.6.6</a>
</li><li class="li-indexenv">Invocation, <a href="#hevea_default336">4.4.2</a>
</li><li class="li-indexenv">import, <a href="#hevea_default457">4.12</a>
</li><li class="li-indexenv">Labeled triple expression, <a href="#hevea_default416">4.7.3</a>
</li><li class="li-indexenv">Language-tagged values, <a href="#hevea_default393">4.5.4</a>
</li><li class="li-indexenv">Length, <a href="#hevea_default379">4.5.3</a>
</li><li class="li-indexenv">Literal datatype, <a href="#hevea_default356">4.5</a>
</li><li class="li-indexenv">Literals, <a href="#hevea_default312">4.4.1</a>
</li><li class="li-indexenv">Logical operators, <a href="#hevea_default351">4.4.3</a>
</li><li class="li-indexenv">MaxExclusive, <a href="#hevea_default374">4.5.3</a>, <a href="#hevea_default376">4.5.3</a>
</li><li class="li-indexenv">MinInclusive, <a href="#hevea_default373">4.5.3</a>, <a href="#hevea_default375">4.5.3</a>
</li><li class="li-indexenv">Negative dependency, <a href="#hevea_default429">4.8.3</a>
</li><li class="li-indexenv">Nested shapes, <a href="#hevea_default401">4.6.5</a>
</li><li class="li-indexenv">NOT, <a href="#hevea_default420">4.8</a>, <a href="#hevea_default425">4.8.3</a>, <a href="#hevea_default426">4.8.3</a>
</li><li class="li-indexenv">Node constraint, <a href="#hevea_default319">4.4.1</a>, <a href="#hevea_default344">4.4.3</a>, <a href="#hevea_default350">4.4.3</a>
</li><li class="li-indexenv">Node kind, <a href="#hevea_default355">4.5</a>, <a href="#hevea_default363">4.5</a>
</li><li class="li-indexenv">Node neighborhood, <a href="#hevea_default328">4.4.1</a>
</li><li class="li-indexenv">Not, <a href="#hevea_default334">4.4.1</a>
</li><li class="li-indexenv">Numeric facets, <a href="#hevea_default358">4.5</a>
</li><li class="li-indexenv">OneOf, <a href="#hevea_default400">4.6.4</a>
</li><li class="li-indexenv">OR, <a href="#hevea_default419">4.8</a>, <a href="#hevea_default424">4.8.2</a>
</li><li class="li-indexenv">Or, <a href="#hevea_default333">4.4.1</a>
</li><li class="li-indexenv">PREFIX declarations, <a href="#hevea_default304">4.4.1</a>
</li><li class="li-indexenv">Property, <a href="#hevea_default325">4.4.1</a>
</li><li class="li-indexenv">Query shape map, <a href="#hevea_default338">4.4.2</a>, <a href="#hevea_default437">4.9.1</a>
</li><li class="li-indexenv">Ranges, <a href="#hevea_default394">4.5.4</a>
</li><li class="li-indexenv">Regex pattern, <a href="#hevea_default381">4.5.3</a>
</li><li class="li-indexenv">Regular expressions, <a href="#hevea_default380">4.5.3</a>
</li><li class="li-indexenv">Reusing shapes, <a href="#hevea_default422">4.8.1</a>
</li><li class="li-indexenv">Schema, <a href="#hevea_default280">4.1</a>, <a href="#hevea_default314">4.4.1</a>, <a href="#hevea_default806">6.5</a>
</li><li class="li-indexenv">Semantic actions, <a href="#hevea_default453">4.9.5</a>
</li><li class="li-indexenv">Shape, <a href="#hevea_default331">4.4.1</a>, <a href="#hevea_default345">4.4.3</a>, <a href="#hevea_default396">4.6</a>
</li><li class="li-indexenv">Shape label, <a href="#hevea_default436">4.9.1</a>
</li><li class="li-indexenv">Shape maps, <a href="#hevea_default431">4.8.3</a>
</li><li class="li-indexenv">Shape reference, <a href="#hevea_default412">4.7.1</a>
</li><li class="li-indexenv">ShapeAnd, <a href="#hevea_default346">4.4.3</a>
</li><li class="li-indexenv">ShapeExternal, <a href="#hevea_default349">4.4.3</a>
</li><li class="li-indexenv">ShapeNot, <a href="#hevea_default348">4.4.3</a>
</li><li class="li-indexenv">ShapeOr, <a href="#hevea_default347">4.4.3</a>
</li><li class="li-indexenv">ShExC, <a href="#hevea_default281">4.1</a>, <a href="#hevea_default391">4.5.4</a>
</li><li class="li-indexenv">ShExJ, <a href="#hevea_default282">4.1</a>, <a href="#hevea_default459">4.13</a>
</li><li class="li-indexenv">ShExR, <a href="#hevea_default284">4.1</a>, <a href="#hevea_default804">6.5</a>
</li><li class="li-indexenv">Start, <a href="#hevea_default352">4.4.3</a>, <a href="#hevea_default353">4.4.4</a>, <a href="#hevea_default435">4.9.1</a>, <a href="#hevea_default805">6.5</a>
</li><li class="li-indexenv">String facets, <a href="#hevea_default357">4.5</a>
</li><li class="li-indexenv">TotalDigits, <a href="#hevea_default378">4.5.3</a>
</li><li class="li-indexenv">Triple constraint, <a href="#hevea_default324">4.4.1</a>, <a href="#hevea_default361">4.5</a>
</li><li class="li-indexenv">Triple expression, <a href="#hevea_default329">4.4.1</a>
</li><li class="li-indexenv">Triple pattern, <a href="#hevea_default339">4.4.2</a>, <a href="#hevea_default438">4.9.2</a>
</li><li class="li-indexenv">Unique, <a href="#hevea_default832">7.11</a>
</li><li class="li-indexenv">Unit value sets, <a href="#hevea_default392">4.5.4</a>
</li><li class="li-indexenv">Value sets, <a href="#hevea_default359">4.5</a>, <a href="#hevea_default390">4.5.3</a>
</li><li class="li-indexenv">Wildcard, <a href="#hevea_default440">4.9.2</a>
</li></ul>
</li><li class="li-indexenv">ShEx 1.0, <a href="#hevea_default278">4</a>
</li><li class="li-indexenv">ShEx community group, <a href="#hevea_default279">4</a>
</li><li class="li-indexenv">ShExC, <a href="#hevea_default301">4.4.1</a>, <a href="#hevea_default814">7.2</a>
</li><li class="li-indexenv">ShExJ, <a href="#hevea_default462">4.13</a>, <a href="#hevea_default811">7.2</a>
</li><li class="li-indexenv">ShExR, <a href="#hevea_default461">4.13</a>
</li><li class="li-indexenv">SPARQL, <a href="#hevea_default13">1.2</a>, <a href="#hevea_default27">1.3</a>, <a href="#hevea_default41">2.1</a>, <a href="#hevea_default102">2.4.1</a>, <a href="#hevea_default249">3.3.1</a>, <a href="#hevea_default250">3.3.1</a>, <a href="#hevea_default253">3.3.1</a>, <a href="#hevea_default257">3.3.2</a>, <a href="#hevea_default265">3.3.3</a>, <a href="#hevea_default277">4</a>, <a href="#hevea_default286">4.1</a>, <a href="#hevea_default289">4.2</a>, <a href="#hevea_default303">4.4.1</a>, <a href="#hevea_default447">4.9.2</a>, <a href="#hevea_default708">5.16</a>, <a href="#hevea_default715">5.16.1</a>, <a href="#hevea_default746">5.17</a>, <a href="#hevea_default818">7.3</a>
<ul class="indexenv"><li class="li-indexenv">
<code>$PATH</code>, <a href="#hevea_default735">5.16.2</a>
</li><li class="li-indexenv"><code>$this</code>, <a href="#hevea_default734">5.16.2</a>
</li><li class="li-indexenv"><code>sh:validator</code>, <a href="#hevea_default737">5.16.2</a>
</li><li class="li-indexenv">ASK queries, <a href="#hevea_default111">2.4.1</a>
</li><li class="li-indexenv">Basic graph patterns, <a href="#hevea_default103">2.4.1</a>
</li><li class="li-indexenv">CONSTRUCT queries, <a href="#hevea_default113">2.4.1</a>
</li><li class="li-indexenv">Limit, <a href="#hevea_default109">2.4.1</a>
</li><li class="li-indexenv">Offset, <a href="#hevea_default110">2.4.1</a>
</li><li class="li-indexenv">Option, <a href="#hevea_default107">2.4.1</a>
</li><li class="li-indexenv">Order, <a href="#hevea_default108">2.4.1</a>
</li><li class="li-indexenv">regex function, <a href="#hevea_default644">5.10.2</a>
</li><li class="li-indexenv">SELECT, <a href="#hevea_default733">5.16.2</a>
</li><li class="li-indexenv">SELECT queries, <a href="#hevea_default112">2.4.1</a>
</li><li class="li-indexenv">Triple pattern, <a href="#hevea_default104">2.4.1</a>
</li><li class="li-indexenv">Union of patterns, <a href="#hevea_default106">2.4.1</a>
</li><li class="li-indexenv">Variables, <a href="#hevea_default105">2.4.1</a>
</li></ul>
</li><li class="li-indexenv">SPARQL 1.1 paths, <a href="#hevea_default526">5.6.2</a>
</li><li class="li-indexenv">SPARQL constraint, <a href="#hevea_default722">5.16.1</a>
</li><li class="li-indexenv">SPARQL functions, <a href="#hevea_default762">5.19</a>
</li><li class="li-indexenv">SPARQL Property Path, <a href="#hevea_default829">7.9</a>
</li><li class="li-indexenv">SPARQL property paths, <a href="#hevea_default402">4.6.5</a>
</li><li class="li-indexenv">SPIN, <a href="#hevea_default251">3.3.1</a>, <a href="#hevea_default467">5</a>
</li><li class="li-indexenv">SQL, <a href="#hevea_default35">2.1</a>, <a href="#hevea_default160">3.1</a>, <a href="#hevea_default174">3.1.2</a>, <a href="#hevea_default180">3.1.2</a>, <a href="#hevea_default217">3.1.5</a>, <a href="#hevea_default241">3.2</a>, <a href="#hevea_default270">3.5</a>
</li><li class="li-indexenv">Squish, <a href="#hevea_default245">3.3.1</a>
</li><li class="li-indexenv">STTL, <a href="#hevea_default491">5.2</a>
</li><li class="li-indexenv">Stardog ICV, <a href="#hevea_default260">3.3.2</a>
</li><li class="li-indexenv">Structured Query Language, <a href="#hevea_default175">3.1.2</a>
<br>
<br>
</li><li class="li-indexenv">Tab-Separated Values, <a href="#hevea_default215">3.1.5</a>
</li><li class="li-indexenv">Tim Berners-Lee, <a href="#hevea_default496">5.2</a>
</li><li class="li-indexenv">TopBraid, <a href="#hevea_default850">7.19</a>
</li><li class="li-indexenv">TopBraid Composer, <a href="#hevea_default483">5.2</a>
</li><li class="li-indexenv">TopBraid SHACL API, <a href="#hevea_default485">5.2</a>
</li><li class="li-indexenv">TopQuadrant, <a href="#hevea_default480">5.2</a>, <a href="#hevea_default851">7.19</a>
</li><li class="li-indexenv">Travis, <a href="#hevea_default803">6.4.3</a>
</li><li class="li-indexenv">TreeHuger, <a href="#hevea_default248">3.3.1</a>
</li><li class="li-indexenv">Trig, <a href="#hevea_default47">2.2</a>
</li><li class="li-indexenv">TSV, <a href="#hevea_default216">3.1.5</a>
</li><li class="li-indexenv">Turtle, <a href="#hevea_default23">1.3</a>, <a href="#hevea_default46">2.2</a>, <a href="#hevea_default275">4</a>, <a href="#hevea_default288">4.2</a>, <a href="#hevea_default302">4.4.1</a>, <a href="#hevea_default313">4.4.1</a>, <a href="#hevea_default474">5.1</a>, <a href="#hevea_default812">7.2</a>
<ul class="indexenv"><li class="li-indexenv">
Object list, <a href="#hevea_default81">2.2</a>
</li><li class="li-indexenv">Predicate list, <a href="#hevea_default80">2.2</a>
</li></ul>
<br>
<br>
</li><li class="li-indexenv">UML, <a href="#hevea_default159">3.1</a>, <a href="#hevea_default164">3.1</a>, <a href="#hevea_default269">3.5</a>, <a href="#hevea_default793">6.2.2</a>, <a href="#hevea_default796">6.2.2</a>
<ul class="indexenv"><li class="li-indexenv">
Class diagram, <a href="#hevea_default170">3.1.1</a>
</li></ul>
</li><li class="li-indexenv">UML 2, <a href="#hevea_default167">3.1.1</a>
</li><li class="li-indexenv">Unicode, <a href="#hevea_default209">3.1.4</a>
</li><li class="li-indexenv">Unified Modeling Language, <a href="#hevea_default165">3.1.1</a>
</li><li class="li-indexenv">Unique keys, <a href="#hevea_default830">7.11</a>
</li><li class="li-indexenv">Unique Name Assumption, <a href="#hevea_default258">3.3.2</a>, <a href="#hevea_default262">3.3.2</a>
<br>
<br>
</li><li class="li-indexenv">Vocabulary, <a href="#hevea_default89">2.3</a>
<br>
<br>
</li><li class="li-indexenv">W3C recommendation, <a href="#hevea_default465">5</a>
</li><li class="li-indexenv">Web of data, <a href="#hevea_default1">1</a>
</li><li class="li-indexenv">WebIndex, <a href="#hevea_default852">@.21</a>
</li><li class="li-indexenv">Wikidata, <a href="#hevea_default446">4.9.2</a>
</li><li class="li-indexenv">Working group note, <a href="#hevea_default770">5.20</a>
</li><li class="li-indexenv">WSDL, <a href="#hevea_default200">3.1.3</a>, <a href="#hevea_default433">4.9</a>
<br>
<br>
</li><li class="li-indexenv">XML, <a href="#hevea_default161">3.1</a>, <a href="#hevea_default183">3.1.3</a>, <a href="#hevea_default220">3.2</a>, <a href="#hevea_default228">3.2</a>, <a href="#hevea_default271">3.5</a>, <a href="#hevea_default780">6.2</a>, <a href="#hevea_default784">6.2</a>
<ul class="indexenv"><li class="li-indexenv">
Attribute, <a href="#hevea_default188">3.1.3</a>
</li><li class="li-indexenv">Element, <a href="#hevea_default187">3.1.3</a>
</li><li class="li-indexenv">Post-schema validation infoset, <a href="#hevea_default190">3.1.3</a>
</li><li class="li-indexenv">PSVI, <a href="#hevea_default191">3.1.3</a>, <a href="#hevea_default821">7.3</a>
</li><li class="li-indexenv">XML Information Set, <a href="#hevea_default186">3.1.3</a>
</li></ul>
</li><li class="li-indexenv">XML Processing instruction, <a href="#hevea_default199">3.1.3</a>
</li><li class="li-indexenv">XML Schema, <a href="#hevea_default36">2.1</a>, <a href="#hevea_default189">3.1.3</a>, <a href="#hevea_default222">3.2</a>, <a href="#hevea_default243">3.2</a>, <a href="#hevea_default370">4.5.3</a>, <a href="#hevea_default432">4.9</a>, <a href="#hevea_default786">6.2</a>, <a href="#hevea_default792">6.2.2</a>, <a href="#hevea_default820">7.3</a>
<ul class="indexenv"><li class="li-indexenv">
<code>xsd:string</code>, <a href="#hevea_default73">2.2</a>
</li></ul>
</li><li class="li-indexenv">XML Schema datatypes, <a href="#hevea_default365">4.5.2</a>, <a href="#hevea_default366">4.5.2</a>, <a href="#hevea_default613">5.9.1</a>
</li><li class="li-indexenv">XML Schema facets, <a href="#hevea_default323">4.4.1</a>, <a href="#hevea_default371">4.5.3</a>, <a href="#hevea_default632">5.10</a>
</li><li class="li-indexenv">XPath, <a href="#hevea_default21">1.3</a>, <a href="#hevea_default195">3.1.3</a>, <a href="#hevea_default382">4.5.3</a>, <a href="#hevea_default817">7.3</a>
</li><li class="li-indexenv">XSLT, <a href="#hevea_default20">1.3</a>
</li><li class="li-indexenv"><code>xsd</code> namespace, <a href="#hevea_default66">2.2</a>
</li><li class="li-indexenv"><code>xsd:noNamespaceSchemaLocation</code> attribute, <a href="#hevea_default198">3.1.3</a>
</li><li class="li-indexenv"><code>xsd:schemaLocation</code> attribute, <a href="#hevea_default197">3.1.3</a>
<br>
<br>
</li><li class="li-indexenv">Yahoo, <a href="#hevea_default92">2.3</a>
</li><li class="li-indexenv">Yandex, <a href="#hevea_default93">2.3</a>
</li></ul></td></tr>
</table><!--CUT END -->
<!--HTMLFOOT-->
<footer>

<iframe src="https://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fbook.validatingrdf.com%2F&width=100&layout=standard&action=like&size=small&show_faces=true&share=true&height=80&appId=8170400788" width="100" height="80" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true"></iframe>

<a class="twitter-share-button" text="Validating RDF data book" href="https://twitter.com/intent/tweet?text=Validating%20RDF%20data%20book&?via=jelabra&hastags=shex,shacl,validatingrdfbook" data-size="large">Tweet</a>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5a51d2b6b0d22f0a"></script>


</footer>  
<!--ENDHTML-->
<!--FOOTER-->
<hr style="height:2"><blockquote class="quote"><em>This document was translated from L<sup>A</sup>T<sub>E</sub>X by
</em><a href="http://hevea.inria.fr/index.html"><em>H</em><em><span class="c011"><sup>E</sup></span></em><em>V</em><em><span class="c011"><sup>E</sup></span></em><em>A</em></a><em>.</em></blockquote></body>
</html>
